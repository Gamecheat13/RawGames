; Decompiled with Assembly
; 
; Source file: 030_outskirts.hsc
; Start time: 2018-06-29 1:28:41 AM
; 
; Remember that all script code is property of Bungie/343 Industries.
; You have no rights. Play nice.

; Globals
(global string data_mine_mission_segment "")
(global boolean perspective_running false)
(global boolean perspective_finished false)
(global boolean g_cortana_header false)
(global boolean g_cortana_footer false)
(global boolean g_gravemind_header false)
(global boolean g_gravemind_footer false)
(global boolean b_truth false)
(global short s_truth_count 0)
(global short s_truth_limit 7)
(global ai act_sarge none)
(global ai act_doorman none)
(global ai act_blastdoor none)
(global ai act_question none)
(global ai act_mechanic none)
(global ai act_recruit_01 none)
(global ai act_recruit_02 none)
(global ai act_recruit_03 none)
(global ai act_cough_01 none)
(global ai act_cough_02 none)
(global ai act_cough_03 none)
(global ai act_cough_04 none)
(global ai act_cough_05 none)
(global ai act_cough_06 none)
(global ai act_cough_07 none)
(global ai act_cough_08 none)
(global ai act_response_01 none)
(global ai act_response_02 none)
(global ai act_response_03 none)
(global ai act_response_04 none)
(global ai act_response_05 none)
(global ai act_elev_rand01 none)
(global ai act_elev_chat_01a none)
(global ai act_elev_chat_01b none)
(global ai act_elev_medic_01 none)
(global ai act_elev_hurt_01 none)
(global ai act_elev_medic_02 none)
(global ai act_elev_hurt_02 none)
(global ai act_elev_gunlight_01 none)
(global ai act_elev_gunlight_02 none)
(global ai act_elev_gunlight_03 none)
(global ai act_elev_gunlight_04 none)
(global ai act_elev_gunlight_05 none)
(global boolean b_elev_doorman_started false)
(global boolean b_elev_mountup false)
(global boolean b_elev_door_impulse false)
(global boolean b_elev_door_down false)
(global boolean b_elev_lights_on false)
(global boolean b_elev_sarge_start false)
(global boolean b_elev_prompt false)
(global boolean b_elev_blast_door false)
(global short s_cough_spacing 0)
(global short s_elev_random 0)
(global short s_elev_flashlight 0)
(global short s_elev_flashlight_off 0)
(global real r_cough_mod 0.25)
(global real r_cough_vol 1)
(global ai act_shooter1 none)
(global ai act_shooter2 none)
(global ai act_shooter3 none)
(global ai act_cav_prompt1 none)
(global ai act_cav_prompt2 none)
(global ai act_cav_dialog1 none)
(global ai act_cav_dialog2 none)
(global ai act_cav_dialog3 none)
(global boolean b_cav_prompt1 false)
(global boolean b_cav_prompt2 false)
(global ai act_marine_heckler none)
(global ai act_sarge_heckler none)
(global ai act_drive_tether01 none)
(global ai act_drive_tether02 none)
(global boolean b_heckler_random false)
(global short s_drive_shoot1 0)
(global ai act_pond_prompt01 none)
(global short s_crash_chopper 0)
(global short s_crash_bugger 0)
(global boolean b_crash_brute1 false)
(global boolean b_crash_nudge false)
(global boolean b_crash_doomed false)
(global ai act_crash_filler none)
(global ai act_crash_mombasa none)
(global ai act_crash_prompt none)
(global vehicle v_crash_doomed none)
(global boolean persp_over false)
(global boolean bridge_ark_random false)
(global short s_bridge_vehicle_exit 0)
(global ai bridge_ark_commenter none)
(global ai act_bridge_getout none)
(global object o_bridge_veh_0 none)
(global ai act_garage_approach1 none)
(global ai act_garage_approach2 none)
(global ai act_garage_marine1 none)
(global ai act_garage_marine2 none)
(global ai act_garage_marine3 none)
(global ai act_garage_marine4 none)
(global ai act_garage_wraith_cry none)
(global boolean b_garage_gauss_down false)
(global boolean b_garage_pelican false)
(global vehicle v_garage_phantom0 none)
(global vehicle v_garage_phantom1 none)
(global ai act_tether_prompt none)
(global ai act_round_holdout none)
(global ai act_round_prompt none)
(global ai act_round_vista1 none)
(global ai act_round_vista2 none)
(global short s_round_left_right 0)
(global short s_round_rock_list_count 0)
(global vehicle v_round_phantom1 none)
(global vehicle v_round_wraith none)
(global vehicle v_round_chopper1 none)
(global vehicle v_round_chopper2 none)
(global vehicle v_round_chopper3 none)
(global vehicle v_round_chopper4 none)
(global vehicle v_round_phantom2 none)
(global vehicle v_round_phantom3 none)
(global object_list ol_round_rock_kill (players))
(global boolean b_exit_player_driving false)
(global boolean b_exit_pelican false)
(global boolean b_exit_brute false)
(global boolean b_exit_truth_speaks false)
(global short s_exit_generator_dialog 0)
(global ai act_exit_prompt none)
(global ai act_exit_brute01 none)
(global ai act_exit_brute02 none)
(global short g_set_all 12)
(global boolean b_debug true)
(global boolean player_on_foot false)
(global boolean debug false)
(global short s_insertion_index 0)
(global short s_elevator_obj_control 0)
(global short s_cavern_obj_control 0)
(global short s_drive_obj_control 0)
(global short s_pond_obj_control 0)
(global short s_crash_obj_control 0)
(global short s_bridge_obj_control 0)
(global short s_garage_obj_control 0)
(global short s_tether_obj_control 0)
(global short s_round_obj_control 0)
(global short s_exit_obj_control 0)
(global boolean b_closed_task false)
(global short g_zone_index 0)
(global short s_global_stragglers 0)
(global boolean b_crash_third false)
(global short s_garage_phantom 0)
(global boolean b_garage_zed_go false)
(global short s_garage_gate_latch 0)
(global boolean b_garage_marine_latch false)
(global boolean b_garage_sniping false)
(global short s_garage_wraith 0)
(global boolean b_tether_wraith_awake false)
(global boolean b_exit_garbage_collect false)
(global short s_exit_marine_reinforce 0)
(global ai act_exit_marine1 none)
(global ai act_exit_marine2 none)
(global ai act_exit_marine3 none)
(global ai act_exit_marine4 none)
(global short straggler_no 0)

; Scripts
(script static void (ai_trickle_via_phantom (ai vehicle_starting_location, ai spawned_squad))
    (ai_place spawned_squad)
    (vehicle_load_magic (ai_vehicle_get_from_starting_location vehicle_starting_location) 0 (ai_actors spawned_squad))
    (sleep 1)
    (object_set_phantom_power (ai_vehicle_get_from_starting_location vehicle_starting_location) true)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 1)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 2)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 3)
    (sleep 60)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 4)
    (sleep 60)
    (object_set_phantom_power (ai_vehicle_get_from_starting_location vehicle_starting_location) false)
)

(script static void (ai_dump_via_phantom (ai vehicle_starting_location, ai spawned_squad))
    (ai_place spawned_squad)
    (vehicle_load_magic (ai_vehicle_get_from_starting_location vehicle_starting_location) 0 (ai_actors spawned_squad))
    (sleep 1)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 0)
)

(script static void (ai_disembark_via_phantom (ai vehicle_starting_location, ai spawned_squad))
    (unit_open (ai_vehicle_get_from_starting_location vehicle_starting_location))
    (sleep 45)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 5)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 6)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 7)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 8)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 9)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 10)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 11)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 12)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 13)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 14)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 16)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 17)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 18)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 19)
    (vehicle_unload (ai_vehicle_get_from_starting_location vehicle_starting_location) 20)
    (sleep 120)
    (unit_close (ai_vehicle_get_from_starting_location vehicle_starting_location))
)

(script static unit player0
    (unit (list_get (players) 0))
)

(script static unit player1
    (unit (list_get (players) 1))
)

(script static unit player2
    (unit (list_get (players) 2))
)

(script static unit player3
    (unit (list_get (players) 3))
)

(script static short player_count
    (list_count (players))
)

(script static void print_difficulty
    (if (= (game_difficulty_get_real) easy)
        (print "easy")
        (if (= (game_difficulty_get_real) normal)
            (print "normal")
            (if (= (game_difficulty_get_real) heroic)
                (print "heroic")
                (if (= (game_difficulty_get_real) legendary)
                    (print "legendary")
                )
            )
        )
    )
)

(script static boolean difficulty_legendary
    (= (game_difficulty_get) legendary)
)

(script static boolean difficulty_heroic
    (= (game_difficulty_get) heroic)
)

(script static boolean difficulty_normal
    (= (game_difficulty_get) normal)
)

(script static boolean players_not_in_combat
    (player_action_test_reset)
    (sleep 30)
    (if (and (not (player_action_test_primary_trigger)) (not (player_action_test_grenade_trigger)) (if (= (game_coop_player_count) 4)
        (begin
            (>= (object_get_shield (player0)) 1)
            (>= (object_get_shield (player1)) 1)
            (>= (object_get_shield (player2)) 1)
            (>= (object_get_shield (player3)) 1)
        )
        (if (= (game_coop_player_count) 3)
            (begin
                (>= (object_get_shield (player0)) 1)
                (>= (object_get_shield (player1)) 1)
                (>= (object_get_shield (player2)) 1)
            )
            (if (= (game_coop_player_count) 2)
                (begin
                    (>= (object_get_shield (player0)) 1)
                    (>= (object_get_shield (player1)) 1)
                )
                (if true
                    (begin
                        (>= (object_get_shield (player0)) 1)
                    )
                )
            )
        )
    ))
        true
        false
    )
)

(script static boolean cinematic_skip_start
    (cinematic_skip_start_internal)
    (game_save_cinematic_skip)
    (sleep_until (not (game_saving)) 1)
    (not (game_reverted))
)

(script static void cinematic_skip_stop
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (game_revert)
    )
)

(script static void cinematic_fade_to_black
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (campaign_metagame_time_pause true)
    (unit_lower_weapon (player0) 30)
    (unit_lower_weapon (player1) 30)
    (unit_lower_weapon (player2) 30)
    (unit_lower_weapon (player3) 30)
    (sleep 10)
    (chud_cinematic_fade 0 0.5)
    (cinematic_show_letterbox true)
    (sleep 5)
    (fade_out 0 0 0 30)
    (sleep 30)
    (object_hide (player0) true)
    (object_hide (player1) true)
    (object_hide (player2) true)
    (object_hide (player3) true)
    (cinematic_start)
    (camera_control true)
    (player_enable_input false)
    (player_disable_movement false)
    (sleep 1)
    (cinematic_show_letterbox_immediate true)
)

(script static void cinematic_snap_to_black
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (fade_out 0 0 0 0)
    (player_control_fade_out_all_input 0)
    (unit_lower_weapon (player0) 1)
    (unit_lower_weapon (player1) 1)
    (unit_lower_weapon (player2) 1)
    (unit_lower_weapon (player3) 1)
    (sleep 1)
    (object_hide (player0) true)
    (object_hide (player1) true)
    (object_hide (player2) true)
    (object_hide (player3) true)
    (chud_cinematic_fade 0 0)
    (campaign_metagame_time_pause true)
    (sleep 1)
    (cinematic_start)
    (camera_control true)
    (player_enable_input false)
    (player_disable_movement false)
    (sleep 1)
    (cinematic_show_letterbox_immediate true)
    (sleep 1)
)

(script static void cinematic_fade_to_title
    (sleep 15)
    (cinematic_stop)
    (camera_control false)
    (cinematic_show_letterbox_immediate true)
    (object_hide (player0) false)
    (object_hide (player1) false)
    (object_hide (player2) false)
    (object_hide (player3) false)
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (sleep 1)
    (unit_lower_weapon (player0) 1)
    (unit_lower_weapon (player1) 1)
    (unit_lower_weapon (player2) 1)
    (unit_lower_weapon (player3) 1)
    (sleep 1)
    (fade_in 0 0 0 15)
    (sleep 15)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
)

(script static void cinematic_fade_to_title_slow
    (cinematic_stop)
    (camera_control false)
    (cinematic_show_letterbox_immediate true)
    (object_hide (player0) false)
    (object_hide (player1) false)
    (object_hide (player2) false)
    (object_hide (player3) false)
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (sleep 1)
    (unit_lower_weapon (player0) 1)
    (unit_lower_weapon (player1) 1)
    (unit_lower_weapon (player2) 1)
    (unit_lower_weapon (player3) 1)
    (sleep 1)
    (fade_in 0 0 0 150)
    (sleep 15)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
)

(script static void cinematic_title_to_gameplay
    (sleep 30)
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (sleep 1)
    (unit_lower_weapon (player0) 1)
    (unit_lower_weapon (player1) 1)
    (unit_lower_weapon (player2) 1)
    (unit_lower_weapon (player3) 1)
    (sleep 1)
    (unit_raise_weapon (player0) 30)
    (unit_raise_weapon (player1) 30)
    (unit_raise_weapon (player2) 30)
    (unit_raise_weapon (player3) 30)
    (sleep 10)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (player_disable_movement false)
    (sleep 110)
    (cinematic_show_letterbox false)
    (sleep 15)
    (chud_cinematic_fade 1 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (game_save)
)

(script static void cinematic_fade_to_gameplay
    (cinematic_stop)
    (camera_control false)
    (cinematic_show_letterbox_immediate true)
    (object_hide (player0) false)
    (object_hide (player1) false)
    (object_hide (player2) false)
    (object_hide (player3) false)
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (sleep 1)
    (unit_lower_weapon (player0) 1)
    (unit_lower_weapon (player1) 1)
    (unit_lower_weapon (player2) 1)
    (unit_lower_weapon (player3) 1)
    (sleep 1)
    (fade_in 0 0 0 15)
    (sleep 15)
    (cinematic_show_letterbox false)
    (chud_cinematic_fade 1 1)
    (unit_raise_weapon (player0) 30)
    (unit_raise_weapon (player1) 30)
    (unit_raise_weapon (player2) 30)
    (unit_raise_weapon (player3) 30)
    (sleep 10)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
    (game_save)
)

(script static void chapter_start
    (chud_cinematic_fade 0 0.5)
    (cinematic_show_letterbox true)
    (sleep 30)
)

(script static void chapter_stop
    (cinematic_show_letterbox false)
    (sleep 15)
    (chud_cinematic_fade 1 0.5)
    (game_save)
)

(script static void perspective_start
    (game_save_cancel)
    (cinematic_skip_start_internal)
    (ai_disregard (player0) true)
    (ai_disregard (player1) true)
    (ai_disregard (player2) true)
    (ai_disregard (player3) true)
    (object_cannot_take_damage (player0))
    (object_cannot_take_damage (player1))
    (object_cannot_take_damage (player2))
    (object_cannot_take_damage (player3))
    (player_control_fade_out_all_input 2)
    (unit_lower_weapon (player0) 30)
    (unit_lower_weapon (player1) 30)
    (unit_lower_weapon (player2) 30)
    (unit_lower_weapon (player3) 30)
    (chud_cinematic_fade 0 0.5)
    (sleep 15)
    (cinematic_show_letterbox true)
    (sleep 5)
    (fade_out 0 0 0 10)
    (sleep 10)
    (camera_control true)
    (cinematic_start)
    (sleep 15)
)

(script static void perspective_stop
    (cinematic_stop)
    (camera_control false)
    (sleep 1)
    (cinematic_show_letterbox_immediate true)
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (player_control_fade_in_all_input 0.5)
    (fade_in 0 0 0 10)
    (sleep 5)
    (cinematic_show_letterbox false)
    (unit_raise_weapon (player0) 30)
    (unit_raise_weapon (player1) 30)
    (unit_raise_weapon (player2) 30)
    (unit_raise_weapon (player3) 30)
    (sleep 10)
    (chud_cinematic_fade 1 0.5)
    (ai_disregard (player0) false)
    (ai_disregard (player1) false)
    (ai_disregard (player2) false)
    (ai_disregard (player3) false)
    (object_can_take_damage (player0))
    (object_can_take_damage (player1))
    (object_can_take_damage (player2))
    (object_can_take_damage (player3))
    (game_save)
)

(script static void perspective_skipped
    (cinematic_stop)
    (camera_control false)
    (ai_disregard (player0) false)
    (ai_disregard (player1) false)
    (ai_disregard (player2) false)
    (ai_disregard (player3) false)
    (object_can_take_damage (player0))
    (object_can_take_damage (player1))
    (object_can_take_damage (player2))
    (object_can_take_damage (player3))
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (sleep 5)
    (player_control_fade_in_all_input 1)
    (fade_in 0 0 0 15)
    (sleep 15)
    (unit_raise_weapon (player0) 15)
    (unit_raise_weapon (player1) 15)
    (unit_raise_weapon (player2) 15)
    (unit_raise_weapon (player3) 15)
    (game_save)
)

(script static boolean perspective_skip_start
    (player_action_test_reset)
    (sleep_until (or (not perspective_running) (player_action_test_cinematic_skip)) 1)
    perspective_running
)

(script static void insertion_start
    (fade_out 0 0 0 0)
    (sound_class_set_gain "object" 0 0)
    (sound_class_set_gain "vehicle" 0 0)
    (cinematic_show_letterbox_immediate true)
    (chud_cinematic_fade 0 0)
    (player_disable_movement true)
    (player_enable_input false)
    (campaign_metagame_time_pause true)
    (unit_lower_weapon (player0) 1)
    (unit_lower_weapon (player1) 1)
    (unit_lower_weapon (player2) 1)
    (unit_lower_weapon (player3) 1)
    (sleep 1)
    (sound_class_set_gain "object" 1 30)
    (sound_class_set_gain "vehicle" 1 30)
)

(script dormant void insertion_end
    (sleep 30)
    (fade_in 0 0 0 15)
    (sleep 15)
    (cinematic_show_letterbox false)
    (player_control_fade_in_all_input 1)
    (sleep 15)
    (chud_cinematic_fade 1 1)
    (unit_raise_weapon (player0) 30)
    (unit_raise_weapon (player1) 30)
    (unit_raise_weapon (player2) 30)
    (unit_raise_weapon (player3) 30)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_enable_input true)
    (player_disable_movement false)
    (game_save)
)

(script static ai (ai_get_driver (ai vehicle_starting_location))
    (object_get_ai (vehicle_driver (ai_vehicle_get_from_starting_location vehicle_starting_location)))
)

(script static ai (ai_get_gunner (ai vehicle_starting_location))
    (object_get_ai (vehicle_gunner (ai_vehicle_get_from_starting_location vehicle_starting_location)))
)

(script static boolean any_players_in_vehicle
    (or (unit_in_vehicle (unit (player0))) (unit_in_vehicle (unit (player1))) (unit_in_vehicle (unit (player2))) (unit_in_vehicle (unit (player3))))
)

(script static void (shut_door_forever (device machine_door))
    (device_operates_automatically_set machine_door false)
    (device_set_position machine_door 0)
    (sleep_until (<= (device_get_position machine_door) 0) 30 300)
    (if (> (device_get_position machine_door) 0)
        (device_set_position_immediate machine_door 0)
    )
    (sleep 1)
    (device_set_power machine_door 0)
)

(script static void (shut_door_forever_immediate (device machine_door))
    (device_operates_automatically_set machine_door false)
    (device_set_position_immediate machine_door 0)
    (device_set_power machine_door 0)
)

(script dormant void reset_map_reminder
    (sleep_until 
        (begin
            (print "press a to play again!")
            false
        )
        90
    )
)

(script static void end_segment
    (print "end gameplay segment!  thank you for playing!")
    (sleep 15)
    (print "grab paul or rob to give feedback!")
    (sleep 15)
    (player_action_test_reset)
    (sleep_until 
        (begin
            (print "press the a button to reset!")
            (sleep_until (player_action_test_accept) 1 90)
            (player_action_test_accept)
        )
        1
    )
    (print "reloading map...")
    (sleep 15)
    (chud_cinematic_fade 1 0)
    (fade_in 0 0 0 0)
    (map_reset)
)

(script static void end_mission
    (if global_playtest_mode
        (begin
            (data_mine_set_mission_segment "questionaire")
            (cinematic_fade_to_gameplay)
            (sleep 1)
            (print "end mission!")
            (sleep 15)
            (hud_set_training_text "playtest_raisehand")
            (hud_show_training_text true)
            (sleep 90)
            (player_action_test_reset)
            (sleep_until 
                (begin
                    (sleep_until (player_action_test_accept) 1 90)
                    (player_action_test_accept)
                )
                1
            )
            (hud_show_training_text false)
            (print "loading next mission...")
            (sleep 15)
        )
        (begin
            (fade_out 0 0 0 0)
            (cinematic_stop)
            (camera_control false)
        )
    )
    (game_won)
)

(script startup void beginning_mission_segment
    (data_mine_set_mission_segment "mission_start")
)

(script continuous void gs_cortana_header
    (sleep_until g_cortana_header 1)
    (print "cortana header")
    (game_save_cancel)
    (game_safe_to_respawn false)
    (player_control_scale_all_input 0.15 0.5)
    (ai_dialogue_enable false)
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (damage_players "cinematics\cortana_channel\cortana_effect")
    (gs_hud_flicker_out)
    (set g_cortana_header false)
)

(script continuous void gs_cortana_footer
    (sleep_until g_cortana_footer 1)
    (print "cortana footer")
    (sleep 1)
    (game_safe_to_respawn true)
    (player_control_scale_all_input 1 0.5)
    (ai_dialogue_enable true)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (sleep 1)
    (game_save)
    (chud_cinematic_fade 1 1.5)
    (sound_impulse_start "sound\visual_fx\cortana_hud_on" none 1)
    (set g_cortana_footer false)
)

(script continuous void gs_gravemind_header
    (sleep_until g_gravemind_header 1)
    (print "gravemind header")
    (game_save_cancel)
    (game_safe_to_respawn false)
    (player_control_scale_all_input 0.15 2)
    (ai_dialogue_enable false)
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (sleep 1)
    (set g_gravemind_header false)
)

(script continuous void gs_gravemind_footer
    (sleep_until g_gravemind_footer 1)
    (print "gravemind footer")
    (game_safe_to_respawn true)
    (player_control_scale_all_input 1 1)
    (ai_dialogue_enable true)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (sleep 1)
    (set g_gravemind_footer false)
    (sleep 30)
    (game_save)
)

(script static void gs_hud_flicker_out
    (chud_cinematic_fade 0 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 1 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 0 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 1 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 0 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 1 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 0 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 1 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 0 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 1 (real_random_range 0 0.035))
    (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
    (sleep (random_range 2 5))
    (chud_cinematic_fade 0 (real_random_range 0 0.035))
)

(script static boolean award_skull
    (if (and (>= (game_difficulty_get_real) normal) (= (game_insertion_point_get) 0))
        true
        false
    )
)

(script static void gs_crash_truth_flicker
    (set b_truth false)
    (set s_truth_count 0)
    (sleep_until 
        (begin
            (object_hide "crash_truth_biped" false)
            (object_hide "crash_truth_throne" false)
            (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
            (sleep (random_range 4 15))
            (object_hide "crash_truth_biped" true)
            (object_hide "crash_truth_throne" true)
            (set s_truth_count (+ s_truth_count 1))
            (if (= s_truth_limit s_truth_count)
                (set b_truth true)
            )
            b_truth
        )
        (random_range 1 10)
    )
)

(script static void gs_exit_truth_flicker
    (set b_truth false)
    (set s_truth_count 0)
    (sleep_until 
        (begin
            (object_hide "exit_truth_biped" false)
            (object_hide "exit_truth_throne" false)
            (sound_impulse_start "sound\visual_fx\sparks_medium" none 1)
            (sleep (random_range 4 15))
            (object_hide "exit_truth_biped" true)
            (object_hide "exit_truth_throne" true)
            (set s_truth_count (+ s_truth_count 1))
            (if (= s_truth_limit s_truth_count)
                (set b_truth true)
            )
            b_truth
        )
        (random_range 1 10)
    )
)

(script dormant void sc_elev_opening
    (sv_elev_explosion_big)
    (sleep (random_range 20 45))
    (sleep 90)
    (wake sc_elev_title1)
    (player_enable_input true)
    (player_camera_control true)
    (print "calling the gun light script")
    (wake sc_elev_gunlights)
    (wake sc_elev_initial_comment)
    (sleep 120)
    (wake 030_music_01_start)
    (player_action_test_reset)
    (sv_elev_explosion_small)
    (wake sc_elev_random_explosion)
    (sleep 90)
    (wake sc_elev_brief01_sound)
    (sleep 600)
    (print "calling flashlight hint")
    (if (or (= (unit_in_vehicle (player0)) true) (= (unit_in_vehicle (player1)) true) (= (unit_in_vehicle (player2)) true) (= (unit_in_vehicle (player3)) true))
        (print "empty")
        (player_training_activate_flashlight)
    )
)

(script dormant void sc_elev_title1
    (sleep 75)
    (cinematic_fade_to_title_slow)
    (cinematic_set_title "title_1")
    (cinematic_title_to_gameplay)
)

(script static void sv_elev_explosion_big
    (player_effect_set_max_rotation 1 1 1)
    (player_effect_set_max_rumble 1 1)
    (sound_impulse_start "sound\levels\020_base\base_scripted_expl2.sound" none 1)
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion01")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion02")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion03")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion04")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion05")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion06")
    (player_effect_start 1 1)
    (sleep 30)
    (player_effect_stop 2)
)

(script static void sv_elev_explosion_small
    (player_effect_set_max_rotation 1 1 1)
    (player_effect_set_max_rumble 1 1)
    (sound_impulse_start "sound\levels\020_base\base_scripted_expl2.sound" none 0.5)
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion01")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion02")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion03")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion04")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion05")
    (effect_new "fx\scenery_fx\ceiling_dust\human_dust_fall_small_outskirts\human_dust_fall_small_outskirts.effect" "elev_explosion06")
    (player_effect_start 0.75 1)
    (sleep 20)
    (player_effect_stop 1.5)
)

(script dormant void sc_elev_random_explosion
    (sleep_until 
        (begin
            (sleep (random_range 300 1500))
            (sv_elev_explosion_small)
            (>= s_cavern_obj_control 5)
        )
    )
)

(script dormant void sc_elev_init
    (sleep 10)
    (wake sc_elev_init_spawn)
    (wake sc_elev_hurt_spawn)
    (sleep 10)
    (wake sc_elev_door_open)
)

(script dormant void sc_elev_set_states
    (object_set_region_state "camera01" "" destroyed)
    (object_set_region_state "camera02" "" destroyed)
)

(script dormant void sc_elev_init_spawn
    (ai_place "sq_elev_sarge")
    (ai_place "sq_elev_mar")
    (sleep 1)
    (ai_place "sq_elev_doorman")
    (ai_place "sq_elev_mech")
    (sleep 1)
    (if (= (game_coop_player_count) 1)
        (begin
            (ai_place "sq_elev_warthog1")
            (ai_place "sq_elev_warthog2")
        )
        (begin
            (ai_place "sq_elev_warthog1")
            (ai_place "sq_elev_warthog3")
        )
    )
    (sleep 1)
)

(script dormant void sc_elev_hurt_spawn
    (ai_place "sq_elev_hurt01")
    (ai_place "sq_elev_hurt02")
    (sleep 1)
    (ai_place "sq_elev_hurt03")
    (ai_place "sq_elev_hurt04")
    (sleep 1)
    (ai_place "sq_elev_hurt05")
)

(script dormant void sc_elev_gunlights
    (print "in gunlights")
    (ai_set_weapon_up "sq_elev_doorman/doorguy" true)
    (ai_set_weapon_up "sq_elev_mech/mech" true)
    (ai_set_weapon_up "sq_elev_mar/01" true)
    (ai_set_weapon_up "sq_elev_mar/02" true)
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_doorman/doorguy") true)
    (sleep (random_range 45 90))
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_mech/mech") true)
    (sleep (random_range 30 45))
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_mar/01") true)
    (sleep (random_range 10 25))
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_mar/02") true)
    (sleep (random_range 10 45))
)

(script dormant void sc_elev_gunlights_off
    (sleep (random_range 120 150))
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_doorman/doorguy") false)
    (sleep (random_range 30 45))
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_mar/01") false)
    (sleep (random_range 30 45))
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_mar/02") false)
    (sleep (random_range 30 45))
    (unit_set_integrated_flashlight (ai_get_unit "sq_elev_mech/mech") false)
)

(script dormant void sc_elev_second_dialog
    (sleep (random_range 45 75))
    (wake sc_elev_random_comment)
    (sleep 120)
    (begin_random
        (begin
            (sleep (random_range 45 60))
            (wake sc_elev_chatter_01)
        )
        (begin
            (sleep (random_range 45 60))
            (wake sc_elev_chatter_02)
        )
    )
)

(script dormant void sc_elev_door_open
    (vs_cast "sq_elev_sarge" true 10 "030ma_040")
    (set act_sarge (vs_role 1))
    (vs_cast "sq_elev_doorman" true 10 "030va_020")
    (set act_doorman (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (sleep 1)
    (vs_abort_on_damage true)
    (vs_enable_pathfinding_failsafe act_sarge true)
    (vs_movement_mode act_sarge 0)
    (vs_movement_mode act_doorman 1)
    (sleep_until (or (= b_elev_sarge_start true) (>= s_elevator_obj_control 3)) 1)
    (if (<= s_elevator_obj_control 2)
        (begin
            (vs_go_to_and_face act_sarge true "elev_room_pts/p7" "elev_room_pts/p8")
        )
    )
    (if (<= s_elevator_obj_control 2)
        (begin
            (vs_face act_sarge true "elev_room_pts/p8")
        )
    )
    (if (<= s_elevator_obj_control 2)
        (begin
            (vs_shoot_point act_sarge true "elev_room_pts/p17")
            (sleep 20)
        )
    )
    (vs_shoot_point act_sarge false "elev_room_pts/p17")
    (if (<= s_elevator_obj_control 2)
        (begin
            (print "sarge:  settle down, marines!")
            (vs_play_line act_sarge true 030ma_040)
            (sleep 10)
        )
    )
    (if (<= s_elevator_obj_control 2)
        (begin
            (print "sarge:  somebody hit the emergency power!")
            (vs_play_line act_sarge true 030ma_050)
        )
    )
    (wake sc_elev_mech)
    (wake sc_elev_medic_01)
    (wake sc_elev_medic_02)
    (wake sc_elev_second_dialog)
    (sleep_until (>= s_elevator_obj_control 3) 1 450)
    (set b_elev_lights_on true)
    (ai_set_weapon_up "sq_elev_doorman" false)
    (ai_set_weapon_up "sq_elev_sarge" false)
    (wake sc_elev_lineup)
)

(script dormant void sc_elev_backup_for_door
    (if (> (object_get_health "elev_room_bash_door") 0.2)
        (begin
            (if (> (object_get_health "elev_room_bash_door") 0.2)
                (vs_go_to act_doorman true "elev_door/p7" 1)
            )
            (if (> (object_get_health "elev_room_bash_door") 0.2)
                (vs_go_to_and_face act_doorman true "elev_door/p0" "elev_door/p6")
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p1")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p2")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p4")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p1")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p2")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p4")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p1")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p2")
                    (sleep (random_range 30 45))
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_players "tv_elev_door") false))
                (begin
                    (vs_aim act_doorman true "elev_door/p4")
                    (sleep (random_range 30 45))
                )
            )
            (if (> (object_get_health "elev_room_bash_door") 0.2)
                (begin
                    (vs_aim act_doorman false "elev_door/p4")
                    (sleep 10)
                )
            )
            (if (> (object_get_health "elev_room_bash_door") 0.2)
                (set b_elev_doorman_started true)
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_object "tv_elev_check" (ai_get_object "sq_elev_doorman")) true))
                (begin
                    (print "in stuckdoor_enter")
                    (vs_custom_animation act_doorman true "objects\characters\marine\marine_female\cinematics\vignettes\030va_stuckdoor\030va_stuckdoor" "030va_stuckdoor_enter" true "elev_door/p0")
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_object "tv_elev_check1" (ai_get_object "sq_elev_doorman")) true))
                (begin
                    (print "in stuckdoor_shove")
                    (vs_custom_animation act_doorman true "objects\characters\marine\marine_female\cinematics\vignettes\030va_stuckdoor\030va_stuckdoor" "030va_stuckdoor_shove" true "elev_door/p0")
                )
                (begin
                    (print "in stuckdoor_exit")
                    (vs_custom_animation act_doorman true "objects\characters\marine\marine_female\cinematics\vignettes\030va_stuckdoor\030va_stuckdoor" "030va_stuckdoor_exit" true "elev_door/p0")
                )
            )
            (if (and (> (object_get_health "elev_room_bash_door") 0.2) (= (volume_test_object "tv_elev_check1" (ai_get_object "sq_elev_doorman")) true))
                (begin
                    (print "in stuckdoor_success")
                    (vs_custom_animation act_doorman false "objects\characters\marine\marine_female\cinematics\vignettes\030va_stuckdoor\030va_stuckdoor" "030va_stuckdoor_success" true "elev_door/p0")
                    (sleep 25)
                    (set b_elev_door_impulse true)
                )
                (begin
                    (print "in stuckdoor_helped")
                    (vs_custom_animation act_doorman true "objects\characters\marine\marine_female\cinematics\vignettes\030va_stuckdoor\030va_stuckdoor" "030va_stuckdoor_helped" true "elev_door/p0")
                )
            )
            (vs_stop_custom_animation act_doorman)
            (ai_dialogue_enable true)
        )
    )
    (if (= b_elev_door_down false)
        (begin
            (vs_stop_custom_animation act_doorman)
            (vs_aim act_doorman false "elev_door/p4")
            (sleep 10)
        )
    )
    (if (= b_elev_doorman_started true)
        (begin
            (if (< (object_get_health "elev_room_bash_door") 0.2)
                (begin
                    (ai_dialogue_enable false)
                    (print "marine:  sure, after i got it started...")
                    (vs_play_line act_doorman true 030va_050)
                    (sleep 20)
                    (set b_elev_lights_on true)
                    (ai_set_weapon_up "sq_elev_doorman" false)
                    (ai_set_weapon_up "sq_elev_sarge" false)
                    (wake sc_elev_lineup)
                )
                (begin
                    (vs_custom_animation act_doorman false "objects\characters\marine\marine" "combat:rifle:smash_right" true)
                    (sleep 10)
                    (vs_stop_custom_animation act_doorman)
                    (set b_elev_door_impulse true)
                    (ai_dialogue_enable false)
                    (print "marine:  there it goes.")
                    (vs_play_line act_doorman true 030va_060)
                    (sleep 20)
                    (set b_elev_lights_on true)
                    (ai_set_weapon_up "sq_elev_doorman" false)
                    (ai_set_weapon_up "sq_elev_sarge" false)
                    (wake sc_elev_lineup)
                )
            )
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_elev_door_impulse
    (sleep_until (or (< (object_get_health "elev_room_bash_door") 0.33) (= b_elev_door_impulse true) (>= s_elevator_obj_control 2)) 1)
    (object_set_velocity "elev_room_bash_door" -2 0 0)
    (sleep 5)
    (object_damage_damage_section "elev_room_bash_door" "door" 1000)
    (sleep 60)
    (set b_elev_door_down true)
    (wake sc_elev_lights1)
    (wake sc_elev_lineup)
)

(script dormant void sc_elev_mech
    (vs_cast "sq_elev_mech" true 10 "030ma_060")
    (set act_mechanic (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (vs_enable_pathfinding_failsafe act_mechanic true)
    (vs_movement_mode act_mechanic 1)
    (ai_dialogue_enable false)
    (print "marine:  on it, sarge!")
    (vs_play_line act_mechanic false 030ma_060)
    (ai_dialogue_enable true)
    (vs_go_to act_mechanic false "elev_room_pts/p32" 1)
    (vs_go_to act_mechanic false "elev_room_pts/p31" 1)
    (vs_go_to_and_face act_mechanic false "elev_room_pts/p9" "elev_room_pts/p10")
    (sleep_until (= b_elev_lights_on true) 1)
    (object_create "generator_startup")
    (sleep 180)
    (wake sc_elev_lights1)
    (ai_set_weapon_up "sq_elev_mech" false)
)

(script dormant void sc_elev_lights1
    (sleep (random_range 20 45))
    (sleep (random_range 20 45))
    (wake sc_elev_hoglights4)
    (sleep (random_range 20 45))
    (wake sc_elev_hanglights1)
)

(script dormant void sc_elev_lights2
    (sleep_until (>= s_elevator_obj_control 2) 1)
    (wake sc_elev_hoglights1)
    (wake sc_elev_hoglights2)
    (sleep (random_range 60 120))
    (wake sc_elev_hanglights2)
)

(script dormant void sc_elev_lineup
    (vs_cast "sq_elev_sarge" false 20 "030mb_010")
    (set act_sarge (vs_role 1))
    (vs_cast "sq_elev_doorman" false 20 "030mb_120")
    (set act_recruit_01 (vs_role 1))
    (vs_cast "sq_elev_mech" true 20 "030mb_120")
    (set act_mechanic (vs_role 1))
    (vs_cast "sq_elev_mar" false 20 "030mb_020" "030mb_120")
    (set act_question (vs_role 1))
    (set act_recruit_02 (vs_role 2))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (sleep 1)
    (vs_abort_on_damage true)
    (vs_enable_pathfinding_failsafe act_sarge true)
    (vs_enable_pathfinding_failsafe act_mechanic true)
    (vs_enable_pathfinding_failsafe act_question true)
    (vs_enable_pathfinding_failsafe act_recruit_01 true)
    (vs_enable_pathfinding_failsafe act_recruit_02 true)
    (vs_enable_pathfinding_failsafe act_recruit_03 true)
    (vs_movement_mode act_sarge 0)
    (vs_movement_mode act_mechanic 1)
    (vs_movement_mode act_question 1)
    (vs_movement_mode act_recruit_01 1)
    (vs_movement_mode act_recruit_02 1)
    (vs_movement_mode act_recruit_03 1)
    (ai_set_weapon_up act_sarge false)
    (ai_set_weapon_up act_mechanic false)
    (ai_set_weapon_up act_question false)
    (ai_set_weapon_up act_recruit_01 false)
    (ai_set_weapon_up act_recruit_02 false)
    (ai_set_weapon_up act_recruit_03 false)
    (vs_custom_animation act_sarge false "objects\characters\marine\marine" "combat:rifle:signal_attack" true)
    (vs_stop_custom_animation act_sarge)
    (ai_dialogue_enable false)
    (print "sarge:  if you can walk, set your boots on the line!")
    (vs_play_line act_sarge false 030mb_010)
    (vs_stow act_sarge)
    (ai_dialogue_enable true)
    (if (= b_elev_mountup false)
        (begin
            (vs_go_to_and_face act_sarge false "elev_room_pts/p11" "elev_room_pts/p13")
            (vs_go_to_and_face act_question false "elev_room_pts/p0" "elev_room_pts/p12")
            (vs_go_to_and_face act_mechanic false "elev_room_pts/p4" "elev_room_pts/p12")
            (vs_go_to_and_face act_recruit_01 false "elev_room_pts/p1" "elev_room_pts/p12")
            (vs_go_to_and_face act_recruit_02 false "elev_room_pts/p2" "elev_room_pts/p12")
            (vs_go_to_and_face act_recruit_03 false "elev_room_pts/p3" "elev_room_pts/p12")
        )
    )
    (if (= b_elev_mountup false)
        (sleep 60)
    )
    (sleep_until (or (and (= (vs_running_atom act_question) false) (= (vs_running_atom act_mechanic) false) (= (vs_running_atom act_recruit_01) false) (= (vs_running_atom act_recruit_02) false) (= (vs_running_atom act_recruit_03) false)) (= b_elev_mountup true)) 1)
    (sleep_until (>= s_elevator_obj_control 3) 1)
    (if (= b_elev_mountup false)
        (begin
            (ai_dialogue_enable false)
            (print "radio:  what's our situation, sergeant?")
            (vs_play_line act_question true 030mb_020)
            (ai_dialogue_enable true)
        )
    )
    (if (= b_elev_mountup false)
        (begin
            (ai_dialogue_enable false)
            (vs_face act_sarge false "elev_room_pts/p13")
            (print "marine:  not sure.  can't reach the commander.  we're too far underground...")
            (vs_play_line act_sarge true 030mb_030)
            (ai_dialogue_enable true)
        )
    )
    (sleep 120)
    (wake sc_elev_sarge_hogs)
    (vs_movement_mode act_sarge 1)
    (vs_release_all)
)

(script dormant void sc_elev_blast_door
    (sleep_until (= b_elev_blast_door true) 1)
    (vs_cast "sq_elev_mech" false 99 "030mb_150")
    (set act_blastdoor (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (wake sc_elev_blast_door_cancel)
    (if (= (device_get_position "cavern_entrance") 0)
        (begin
            (sleep 60)
            (print "marine:  i'll get the door, sir!")
            (vs_play_line act_blastdoor true 030mb_150)
            (vs_go_to act_blastdoor true "elev_room_pts/p16" 0)
            (sleep_until (= (volume_test_players "tv_elev_nokill") false) 1)
            (if (volume_test_object "tv_elev_nokill" act_blastdoor)
                (vs_custom_animation act_blastdoor false "objects\characters\marine\marine" "combat:rifle:base_button" true "elev_room_pts/p16")
            )
            (sleep 30)
            (device_set_position "cavern_entrance" 1)
            (device_set_position "cavern_entrance_but" 1)
            (device_set_power "cavern_entrance_switch_01" 0)
            (ai_enter_squad_vehicles "sg_all_allies")
        )
    )
    (set b_elev_prompt true)
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_elev_blast_door_cancel
    (sleep_until (> (device_get_position "cavern_entrance") 0.5) 1)
    (vs_cast "sq_elev_mech" false 100 "")
    (set act_blastdoor (vs_role 1))
    (sleep 1)
    (vs_release_all)
)

(script dormant void sc_elev_sarge_hogs
    (vs_cast "sq_elev_sarge" false 40 "030mb_050")
    (set act_sarge (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (if (= (unit_in_vehicle (player0)) true)
        (print "sarge:  chief's got the right idea!")
        (vs_play_line act_sarge true 030mb_050)
        (sleep 15)
        (print "sarge:  let's mount up, get the hell out of these caves!")
        (vs_play_line act_sarge true 030mb_060)
        (if (= (unit_in_vehicle (player1)) true)
            (print "sarge:  let's all mount up!")
            (vs_play_line act_sarge true 030mb_070)
            (sleep 15)
            (print "sarge:  get the hell out of these caves!")
            (vs_play_line act_sarge true 030mb_080)
            (if (= (volume_test_object "vol_who_pressed_it" (player0)) true)
                (print "sarge:  chief's got the right idea!")
                (vs_play_line act_sarge true 030mb_050)
                (sleep 15)
                (print "sarge:  let's mount up, get the hell out of these caves!")
                (vs_play_line act_sarge true 030mb_060)
                (if (= (volume_test_object "vol_who_pressed_it" (player1)) true)
                    (print "sarge:  let's all mount up!")
                    (vs_play_line act_sarge true 030mb_070)
                    (sleep 15)
                    (print "sarge:  get the hell out of these caves!")
                    (vs_play_line act_sarge true 030mb_080)
                    (if true
                        (print "sarge: let's mount up, get the hell out of these caves")
                        (vs_play_line act_sarge true 030mb_060)
                    )
                )
            )
        )
    )
    (wake 030_music_02_start)
    (ai_dialogue_enable true)
    (vs_draw act_sarge)
    (wake sc_elev_load_up)
    (vs_release_all)
    (set b_elev_prompt true)
)

(script dormant void sc_elev_load_up
    (vs_cast "sq_elev_mar" false 80 "030mb_120" "030mb_120")
    (set act_response_01 (vs_role 1))
    (set act_response_02 (vs_role 2))
    (vs_cast "sq_elev_mech" false 80 "030mb_120")
    (set act_response_04 (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (sleep 30)
    (ai_dialogue_enable false)
    (print "marines:  yessir!")
    (begin_random
        (sleep (random_range 1 3))
        (vs_play_line act_response_01 false 030mb_120)
        (sleep (random_range 1 3))
        (vs_play_line act_response_02 false 030mb_120)
        (sleep (random_range 1 3))
        (vs_play_line act_response_03 false 030mb_120)
        (sleep (random_range 1 3))
        (vs_play_line act_response_04 false 030mb_120)
    )
    (sleep 30)
    (ai_dialogue_enable true)
    (vs_release_all)
    (wake sc_elev_blast_door)
    (set b_elev_blast_door true)
    (if (= (device_get_position "cavern_entrance") 0)
        (ai_enter_squad_vehicles "sg_elev_mount")
        (ai_enter_squad_vehicles "sg_all_allies")
    )
    (set b_elev_prompt true)
    (sleep 150)
    (if (= (device_get_position "cavern_entrance") 0)
        (ai_enter_squad_vehicles "sg_elev_mount")
        (ai_enter_squad_vehicles "sg_all_allies")
    )
)

(script dormant void sc_elev_reserve_driver
    (print "reserving driver seat")
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 21 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 21 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") 21 true)
    (sleep_until (or (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player3))))
    (print "un-reserving driver seat")
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 21 false)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 21 false)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") 21 false)
    (print "mount enter")
    (ai_enter_squad_vehicles "sg_elev_mount")
    (sleep_until (= (device_get_position "cavern_entrance") 1))
    (print "all enter")
    (ai_enter_squad_vehicles "sg_all_allies")
)

(script dormant void sc_elev_betrayal
    (sleep_until (= (ai_allegiance_broken player human) true) 5)
    (unit_add_equipment "sq_elev_hurt01/hurt" "marine_ar" true true)
    (unit_add_equipment "sq_elev_hurt02/hurt" "marine_ar" true true)
    (unit_add_equipment "sq_elev_hurt03/hurt" "marine_ar" true true)
    (unit_add_equipment "sq_elev_hurt04/hurt" "marine_ar" true true)
    (unit_add_equipment "sq_elev_hurt05/01" "marine_ar" true true)
    (unit_add_equipment "sq_elev_hurt05/02" "marine_ar" true true)
    (unit_add_equipment "sq_elev_hurt05/03" "marine_ar" true true)
    (unit_add_equipment "sq_elev_hurt05/04" "marine_ar" true true)
)

(script dormant void sc_elev_cavern_task
    (sleep_until (and (or (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_d" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_g" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_d" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_d" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player3))) (>= (device_get_position "cavern_entrance") 0.3)) 5)
    (if (= s_cavern_obj_control 0)
        (begin
            (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
        )
    )
)

(script dormant void sc_elev_cavern_task_old
    (sleep_until (and (or (>= s_cavern_obj_control 1) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "warthog_g" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player1)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player2)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_p" (player3)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog3/warthog3") "warthog_g" (player3))) (>= (device_get_position "cavern_entrance") 0.3)) 5)
    (if (= s_cavern_obj_control 0)
        (begin
            (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
        )
    )
)

(script dormant void sc_elev_enter_vehicles
    (sleep_until (>= s_elevator_obj_control 2) 5)
    (sleep_until (or (> (device_get_position "cavern_entrance") 0) (= (any_players_in_vehicle) true)) 5)
    (set b_elev_mountup true)
    (wake sc_elev_sarge_hogs)
    (sleep 5)
    (ai_enter_squad_vehicles "sg_elev_mount")
)

(script dormant void sc_elev_warthog_throttle
    (sleep_until 
        (begin
            (if (and (= player_on_foot false) (or (= (game_is_cooperative) false) (< (game_difficulty_get) heroic) (= (campaign_metagame_enabled) false)))
                (begin
                    (player_control_scale_all_input 1 0)
                    (print "throttled back")
                )
            )
            (>= s_cavern_obj_control 7)
        )
    )
    (print "throttled up")
    (player_control_scale_all_input 1 0)
)

(script command_script void cs_abort
    (print "aborting")
    (sleep 1)
)

(script dormant void sc_elev_hoglights1
    (sleep 30)
    (object_destroy "000_hog_light_01_off")
    (object_create "000_hog_light_01")
)

(script dormant void sc_elev_hoglights2
    (object_destroy "000_hog_light_02_off")
    (object_create "000_hog_light_02")
)

(script dormant void sc_elev_hoglights3
    (object_destroy "000_hog_light_03_off")
    (object_create "000_hog_light_03")
    (sleep 3)
    (object_destroy "000_hog_light_03")
    (object_create "000_hog_light_03_off")
    (sleep 5)
    (object_destroy "000_hog_light_03_off")
    (object_create "000_hog_light_03")
    (sleep 2)
    (object_destroy "000_hog_light_03")
    (object_create "000_hog_light_03_off")
    (sleep 22)
    (object_destroy "000_hog_light_03_off")
    (object_create "000_hog_light_03")
    (sleep_until 
        (begin
            (sleep (random_range 60 300))
            (object_destroy "000_hog_light_03")
            (object_create "000_hog_light_03_off")
            (sleep (random_range 2 3))
            (object_destroy "000_hog_light_03_off")
            (object_create "000_hog_light_03")
            (sleep (random_range 5 7))
            (object_destroy "000_hog_light_03")
            (object_create "000_hog_light_03_off")
            (sleep (random_range 2 3))
            (object_destroy "000_hog_light_03_off")
            (object_create "000_hog_light_03")
            false
        )
    )
)

(script dormant void sc_elev_hoglights4
    (object_destroy "000_hog_light_04_off")
    (object_create "000_hog_light_04")
    (sleep 3)
    (object_destroy "000_hog_light_04")
    (object_create "000_hog_light_04_off")
    (sleep 5)
    (object_destroy "000_hog_light_04_off")
    (object_create "000_hog_light_04")
    (sleep 2)
    (object_destroy "000_hog_light_04")
    (object_create "000_hog_light_04_off")
    (sleep 22)
    (object_destroy "000_hog_light_04_off")
    (object_create "000_hog_light_04")
    (sleep_until 
        (begin
            (sleep (random_range 60 300))
            (object_destroy "000_hog_light_04")
            (object_create "000_hog_light_04_off")
            (sleep (random_range 2 3))
            (object_destroy "000_hog_light_04_off")
            (object_create "000_hog_light_04")
            (sleep (random_range 5 7))
            (object_destroy "000_hog_light_04")
            (object_create "000_hog_light_04_off")
            (sleep (random_range 2 3))
            (object_destroy "000_hog_light_04_off")
            (object_create "000_hog_light_04")
            (sleep (random_range 10 13))
            (object_destroy "000_hog_light_04")
            (object_create "000_hog_light_04_off")
            (sleep (random_range 16 22))
            (object_destroy "000_hog_light_04_off")
            (object_create "000_hog_light_04")
            false
        )
    )
)

(script dormant void sc_elev_hoglights5
    (object_destroy "000_hog_light_05_off")
    (object_create "000_hog_light_05")
    (sleep 3)
    (object_destroy "000_hog_light_05")
    (object_create "000_hog_light_05_off")
    (sleep 5)
    (object_destroy "000_hog_light_05_off")
    (object_create "000_hog_light_05")
    (sleep 2)
    (object_destroy "000_hog_light_05")
    (object_create "000_hog_light_05_off")
    (sleep 22)
    (object_destroy "000_hog_light_05_off")
    (object_create "000_hog_light_05")
)

(script dormant void sc_elev_hanglights1
    (object_destroy "000_hanglight_01_off")
    (object_create "000_hanglight_01_on")
    (object_destroy "000_hanglight_02_off")
    (object_create "000_hanglight_02_on")
    (sleep 2)
    (wake sc_elev_hoglights3)
)

(script dormant void sc_elev_hanglights2
    (object_destroy "000_hanglight_03_off")
    (object_create "000_hanglight_03_on")
    (object_destroy "000_hanglight_04_off")
    (object_create "000_hanglight_04_on")
)

(script dormant void sc_elev_cough
    (vs_cast "sq_elev_hurt01/hurt" false 0 "030ma_010")
    (set act_cough_01 (vs_role 1))
    (vs_cast "sq_elev_hurt02/hurt" false 0 "030ma_010")
    (set act_cough_02 (vs_role 1))
    (vs_cast "sq_elev_hurt03/hurt" false 0 "030ma_010")
    (set act_cough_03 (vs_role 1))
    (vs_cast "sq_elev_hurt04/hurt" false 0 "030ma_010")
    (set act_cough_04 (vs_role 1))
    (vs_cast "sq_elev_hurt05/01" false 0 "030ma_010")
    (set act_cough_05 (vs_role 1))
    (vs_cast "sq_elev_hurt05/02" false 0 "030ma_010")
    (set act_cough_06 (vs_role 1))
    (vs_cast "sq_elev_hurt05/03" false 0 "030ma_010")
    (set act_cough_07 (vs_role 1))
    (vs_cast "sq_elev_hurt05/04" false 0 "030ma_010")
    (set act_cough_08 (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (sleep_until 
        (begin
            (begin_random
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt01")
                            (vs_play_line act_cough_01 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.8))
                        )
                    )
                )
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt02")
                            (vs_play_line act_cough_02 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.9))
                        )
                    )
                )
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt03")
                            (vs_play_line act_cough_03 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.7))
                        )
                    )
                )
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt04")
                            (vs_play_line act_cough_04 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.8))
                        )
                    )
                )
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt05")
                            (vs_play_line act_cough_05 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.9))
                        )
                    )
                )
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt06")
                            (vs_play_line act_cough_06 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.7))
                        )
                    )
                )
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt07")
                            (vs_play_line act_cough_07 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.8))
                        )
                    )
                )
                (begin
                    (if (= s_cavern_obj_control 0)
                        (begin
                            (print "cough hurt08")
                            (vs_play_line act_cough_08 true 030ma_010)
                            (sleep s_cough_spacing)
                            (set s_cough_spacing (+ s_cough_spacing (random_range 1 3)))
                            (set r_cough_vol (* r_cough_vol 0.9))
                        )
                    )
                )
            )
            (or (<= r_cough_vol 0.1) (>= s_cavern_obj_control 1))
        )
    )
    (print "coughing ended")
    (ai_dialogue_enable true)
)

(script dormant void sc_elev_initial_comment
    (sleep 90)
    (vs_cast "sq_elev_mar" true 0 "030ma_020")
    (set act_elev_rand01 (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (print "marine:  what happened?")
    (vs_play_line act_elev_rand01 true 030ma_020)
    (ai_dialogue_enable true)
)

(script dormant void sc_elev_random_comment
    (vs_abort_on_damage true)
    (set s_elev_random (random_range 0 4))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (if (= s_elev_random 1)
        (begin
            (vs_cast "sq_elev_mar" true 0 "030ma_030")
            (set act_elev_rand01 (vs_role 1))
            (print "marine:  another bombing run?")
            (vs_play_line act_elev_rand01 true 030ma_030)
        )
    )
    (if (= s_elev_random 2)
        (begin
            (vs_cast "sq_elev_mar" true 0 "030ma_080")
            (set act_elev_rand01 (vs_role 1))
            (print "marine:  did we get everybody out sir?")
            (vs_play_line act_elev_rand01 true 030ma_080)
        )
    )
    (if (= s_elev_random 3)
        (begin
            (vs_cast "sq_elev_mar" true 0 "030ma_090")
            (set act_elev_rand01 (vs_role 1))
            (print "marine:  think the brutes know where we are?")
            (vs_play_line act_elev_rand01 true 030ma_090)
        )
    )
    (if (= s_elev_random 4)
        (begin
            (vs_cast "sq_elev_mar" true 0 "030ma_110")
            (set act_elev_rand01 (vs_role 1))
            (print "marine:  stay still.  you're hurt.")
            (vs_play_line act_elev_rand01 true 030ma_110)
        )
    )
    (ai_dialogue_enable true)
    (sleep 1)
)

(script dormant void sc_elev_chatter_01
    (vs_cast "sq_elev_mar" true 0 "030ma_100" "030ma_120")
    (set act_elev_chat_01a (vs_role 1))
    (set act_elev_chat_01b (vs_role 2))
    (vs_abort_on_damage true)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (print "marine:  brutes almost had me in the barracks.")
    (vs_play_line act_elev_chat_01a true 030ma_080)
    (print "marine:  they rounded up the others.  i don't know what happened next.")
    (vs_play_line act_elev_chat_01b true 030ma_090)
    (ai_dialogue_enable true)
)

(script dormant void sc_elev_chatter_02
    (vs_cast "sq_elev_mar" true 0 "030ma_200" "030ma_210")
    (set act_elev_chat_01a (vs_role 1))
    (set act_elev_chat_01b (vs_role 2))
    (vs_abort_on_damage true)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (print "marine:  anyone from charlie-two?  i got separated...")
    (vs_play_line act_elev_chat_01a true 030ma_200)
    (print "marine:  nah, man, alpha-six.  they're all gone too...")
    (vs_play_line act_elev_chat_01b true 030ma_210)
    (ai_dialogue_enable true)
)

(script dormant void sc_elev_medic_01
    (sleep_until (volume_test_players "tv_elev_medic01") 5)
    (vs_cast "sq_elev_hurt01/medic" true 0 "030ma_130")
    (set act_elev_medic_01 (vs_role 1))
    (vs_cast "sq_elev_hurt01/hurt" true 0 "030ma_150")
    (set act_elev_hurt_01 (vs_role 1))
    (vs_abort_on_damage true)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (print "marine:  there's swelling.  could be a fracture.")
    (vs_play_line act_elev_medic_01 true 030ma_130)
    (sleep 20)
    (print "marine:  think you can stand?")
    (vs_play_line act_elev_medic_01 true 030ma_140)
    (sleep 30)
    (print "marine:  i don't know doc.")
    (vs_play_line act_elev_hurt_01 true 030ma_150)
    (ai_dialogue_enable true)
)

(script dormant void sc_elev_medic_02
    (sleep_until (volume_test_players "tv_elev_medic02") 5)
    (vs_cast "sq_elev_hurt04/medic" true 0 "030ma_170")
    (set act_elev_medic_02 (vs_role 1))
    (vs_cast "sq_elev_hurt04/hurt" true 0 "030ma_160")
    (set act_elev_hurt_02 (vs_role 1))
    (vs_abort_on_damage true)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (print "marine:  (groan) i got a broken rib!")
    (vs_play_line act_elev_hurt_02 true 030ma_160)
    (print "marine:  you want to bleed out?")
    (vs_play_line act_elev_medic_02 true 030ma_170)
    (sleep 30)
    (print "marine:  no...")
    (vs_play_line act_elev_hurt_02 true 030ma_180)
    (print "marine:  then i gotta keep pressure on the wound!")
    (vs_play_line act_elev_medic_02 true 030ma_190)
    (ai_dialogue_enable true)
)

(script dormant void sc_elev_prompt01
    (sleep_until (= b_elev_prompt true) 30 1800)
    (if (= b_elev_prompt false)
        (begin
            (set b_elev_prompt true)
        )
    )
    (sleep 900)
    (if (= s_cavern_obj_control 0)
        (begin
            (vs_cast "sg_all_allies" true 50 "030mb_090")
            (set act_sarge (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (ai_dialogue_enable false)
            (print "sarge:  caverns lead out onto the savanna, chief!")
            (vs_play_line act_sarge true 030mb_090)
            (ai_dialogue_enable true)
        )
    )
)

(script dormant void sc_elev_prompt02
    (sleep_until (= b_elev_prompt true))
    (sleep 1800)
    (if (= s_cavern_obj_control 0)
        (begin
            (vs_cast "sg_all_allies" true 60 "030mb_100")
            (set act_sarge (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (ai_dialogue_enable false)
            (print "sarge:  grab a 'hog, and let's roll!")
            (vs_play_line act_sarge true 030mb_100)
            (ai_dialogue_enable true)
        )
    )
)

(script dormant void sc_elev_navpoint
    (sleep_until (= b_elev_prompt true))
    (sleep 3600)
    (if (= s_cavern_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "elev_navpoint" 0.55)
            (sleep_until (>= s_cavern_obj_control 1) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "elev_navpoint")
        )
    )
)

(script dormant void sc_elev_navpoint_door
    (sleep_until (>= s_elevator_obj_control 2) 30 3600)
    (if (> (object_get_health "elev_room_bash_door") 0.2)
        (begin
            (hud_activate_team_nav_point_flag player "elev_navpoint2" 0.55)
            (sleep_until (>= s_elevator_obj_control 2) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "elev_navpoint2")
        )
    )
)

(script dormant void sc_elev_brief01_sound
    (ai_dialogue_enable false)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (print "chief, please respond!  (what is) your status, over?")
    (sleep (ai_play_line_on_object none 030ba_010))
    (sleep 10)
    (print "if you can (hear me)...")
    (sleep (ai_play_line_on_object none 030ba_020))
    (print "find transport, head to (the town of voi)!")
    (sleep (ai_play_line_on_object none 030ba_030))
    (sleep 60)
    (game_save)
    (set b_elev_sarge_start true)
    (wake objective_1_set)
    (ai_dialogue_enable true)
)

(script dormant void sc_cav_firefight
    (vs_cast "sq_cavern_mar1" true 10 "")
    (set act_shooter1 "sq_cavern_mar1")
    (vs_cast "sq_cavern_mar2" true 10 "")
    (set act_shooter2 "sq_cavern_mar2")
    (vs_cast "sq_cavern_mar3" true 10 "")
    (set act_shooter3 "sq_cavern_mar3")
    (vs_abort_on_damage true)
    (cs_shoot true)
    (vs_enable_pathfinding_failsafe act_shooter1 true)
    (vs_enable_pathfinding_failsafe act_shooter2 true)
    (vs_enable_pathfinding_failsafe act_shooter3 true)
    (vs_movement_mode act_shooter1 1)
    (vs_movement_mode act_shooter2 1)
    (vs_movement_mode act_shooter3 1)
    (vs_go_to act_shooter1 false "cavern_pts/p0" 0.5)
    (vs_go_to act_shooter2 false "cavern_pts/p1" 0.5)
    (vs_go_to act_shooter3 true "cavern_pts/p2" 0.5)
    (sleep 60)
    (vs_face act_shooter1 true "cavern_pts/p3")
    (vs_face act_shooter2 true "cavern_pts/p3")
    (vs_face act_shooter3 true "cavern_pts/p3")
    (ai_set_weapon_up act_shooter1 true)
    (ai_set_weapon_up act_shooter2 true)
    (ai_set_weapon_up act_shooter3 true)
    (sleep_until (>= s_drive_obj_control 1) 1)
    (ai_set_weapon_up act_shooter1 false)
    (ai_set_weapon_up act_shooter2 false)
    (ai_set_weapon_up act_shooter3 false)
    (vs_release_all)
    (ai_enter_squad_vehicles "sg_all_allies")
)

(script dormant void sc_cavern_jackal_fallback
    (sleep_until (and (<= (ai_task_count "obj_cav_cov/starting") 2) (>= s_cavern_obj_control 8)) 1)
    (ai_set_objective "sq_drive_init01" "obj_drive_cov")
)

(script dormant void sc_cavern_camera_follow
    (vehicle_auto_turret "cameraa" "tv_cav_camera" 3000 0 0)
    (vehicle_auto_turret "camerab" "tv_cav_camera" 3000 0 0)
)

(script dormant void sc_cav_dialog1
    (vs_cast "sg_allied_vehicles" true 10 "030mc_050")
    (set act_cav_dialog1 (vs_role 1))
    (ai_dialogue_enable false)
    (vs_abort_on_damage true)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (sleep (random_range 30 45))
    (print "sarge:  second squad?  we're comming through!")
    (vs_play_line act_cav_dialog1 false 030mc_050)
    (sleep (random_range 30 45))
    (ai_dialogue_enable true)
)

(script dormant void sc_cav_dialog2
    (vs_cast "sg_cavern_mar" false 10 "030mc_070" "030mc_080")
    (set act_cav_dialog2 (vs_role 1))
    (set act_cav_dialog3 (vs_role 2))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (print "marine:  go get 'em chief!  yeah!")
    (vs_play_line act_cav_dialog2 true 030mc_070)
    (print "marine:  that's the way, sir!  ooh-rah!")
    (vs_play_line act_cav_dialog3 true 030mc_080)
    (ai_dialogue_enable true)
)

(script dormant void sc_cav_prompt1
    (sleep 1800)
    (vs_cast "sg_allied_vehicles" true 0 "030mc_010")
    (vs_abort_on_damage true)
    (set act_cav_prompt1 (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (if (and (= s_drive_obj_control 0) (or (= (unit_in_vehicle (player0)) true) (= (unit_in_vehicle (player1)) true) (= (unit_in_vehicle (player2)) true) (= (unit_in_vehicle (player3)) true)))
        (begin
            (set b_cav_prompt1 (random_range 0 1))
            (if (= b_cav_prompt1 false)
                (begin
                    (print "sarge:  gun it chief!  all the way down this passage")
                    (vs_play_line act_cav_prompt1 false 030mc_010)
                )
            )
            (if (= b_cav_prompt1 true)
                (begin
                    (print "sarge:  don't let up!  gotta get clear of these caves!")
                    (vs_play_line act_cav_prompt1 false 030mc_020)
                )
            )
        )
    )
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_cav_prompt2
    (sleep 2700)
    (vs_cast "sg_allied_vehicles" true 0 "030mc_010")
    (set act_cav_prompt2 (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (if (and (= s_drive_obj_control 0) (or (= (unit_in_vehicle (player0)) true) (= (unit_in_vehicle (player1)) true) (= (unit_in_vehicle (player2)) true) (= (unit_in_vehicle (player3)) true)))
        (begin
            (set b_cav_prompt2 (random_range 0 1))
            (if (= b_cav_prompt2 false)
                (begin
                    (print "marine:  pedal to the metal sir!  gotta find the exit")
                    (vs_play_line act_cav_prompt2 false 030mc_010)
                )
            )
            (if (= b_cav_prompt2 true)
                (begin
                    (print "marine: keep going, sir!  let's get clear of these caves!")
                    (vs_play_line act_cav_prompt2 false 030mc_020)
                )
            )
        )
    )
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_cavern_navpoint
    (sleep 4500)
    (if (= s_drive_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "cavern_navpoint" 0.55)
            (sleep_until (>= s_drive_obj_control 1) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "cavern_navpoint")
        )
    )
)

(script dormant void sc_drive_objective_set
    (sleep_until (or (>= s_drive_obj_control 1) (>= (ai_body_count "obj_cav_cov/main_gate") 4)))
    (ai_set_objective "sq_drive_init01" "obj_drive_cov")
    (ai_set_objective "sq_drive_init02" "obj_drive_cov")
    (ai_set_objective "sq_drive_init06" "obj_drive_cov")
    (ai_set_objective "sq_drive_init05" "obj_drive_cov")
    (ai_set_objective "sq_drive_init03" "obj_drive_cov")
)

(script command_script void cs_flee_10
    (cs_movement_mode ai_movement_flee)
    (cs_enable_moving true)
    (cs_shoot false)
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (sleep 300)
)

(script command_script void cs_flee_30
    (cs_movement_mode ai_movement_flee)
    (cs_enable_moving true)
    (cs_shoot false)
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (sleep 900)
)

(script dormant void sc_drive_flee_scene
    (sleep (random_range 30 60))
    (vs_cast "sg_allied_vehicles" true 0 "030md_010")
    (set act_sarge_heckler (vs_role 1))
    (vs_cast "sg_allied_vehicles" true 0 "030md_030")
    (set act_marine_heckler (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (begin_random
        (if (= b_heckler_random false)
            (begin
                (vs_play_line act_sarge_heckler true 030md_010)
                (print "sarge:  conserve ammo!  run 'em over!")
                (set b_heckler_random true)
            )
        )
        (if (= b_heckler_random false)
            (begin
                (vs_play_line act_sarge_heckler true 030md_020)
                (print "sarge:  don't leave any of 'em standing!")
                (set b_heckler_random true)
            )
        )
        (if (= b_heckler_random false)
            (begin
                (vs_play_line act_marine_heckler true 030md_030)
                (print "marine:  suprise, crab face!!")
                (set b_heckler_random true)
            )
        )
        (if (= b_heckler_random false)
            (begin
                (vs_play_line act_marine_heckler true 030md_040)
                (print "marine:  look at the little bastards run!")
                (set b_heckler_random true)
            )
        )
    )
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_drive_sniper_save
    (sleep_until (= (ai_task_count "obj_drive2_cov/jackals_front") 0) 5)
    (game_save)
)

(script dormant void sc_drive_dialog_tether
    (sleep_until (and (= (ai_task_count "obj_drive_cov/main_gate") 0) (= (volume_test_players "tv_drive_vista") true)) 5)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (sleep (random_range 30 60))
    (print "new mombasa's space-elevator?")
    (sleep (ai_play_line_on_object none 030md_070))
    (print "yeah.  collapsed when the city got glassed.")
    (sleep (ai_play_line_on_object none 030md_080))
    (print "but the tether was thousands of kilometers high!")
    (sleep (ai_play_line_on_object none 030md_090))
    (print "yeah, well now ti's just scattered all over the savannah.")
    (sleep (ai_play_line_on_object none 030md_100))
    (print "jesus...")
    (sleep (ai_play_line_on_object none 030md_110))
    (ai_dialogue_enable true)
)

(script dormant void sc_drive_dialog_update
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (sleep (random_range 15 30))
    (print "chief?  still can't get the commander.")
    (sleep (ai_play_line_on_object none 030md_120))
    (print "comms are a mess.  pelicans are scattered.")
    (sleep (ai_play_line_on_object none 030md_130))
    (print "best thing now?  get some distance between us and the base...")
    (sleep (ai_play_line_on_object none 030md_140))
    (print "brutes are gonna be looking for survivors.")
    (sleep (ai_play_line_on_object none 030md_150))
    (ai_dialogue_enable true)
)

(script dormant void sc_drive_brute_radio_01
    (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_01" 1)
    (sleep_until (= (ai_task_count "obj_drive_cov/mg_front_gate") 0))
    (ai_dialogue_enable false)
    (if (< s_drive_obj_control 4)
        (begin
            (sleep (random_range 30 60))
            (sound_looping_stop "sound\materials\gear\high_ground_radio\high_ground_radio")
            (sleep (random_range 20 40))
            (if b_debug
                (print "chieftains!  rally your packs!")
            )
            (sleep (ai_play_line_on_object "drive_brute_radio_01" 030mx_010))
            (sleep (random_range 20 40))
            (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_01" 1)
        )
    )
    (if (< s_drive_obj_control 4)
        (begin
            (sleep (random_range 30 60))
            (sound_looping_stop "sound\materials\gear\high_ground_radio\high_ground_radio")
            (sleep (random_range 20 40))
            (if b_debug
                (print "kill all survivors!  let none near the crater!")
            )
            (sleep (ai_play_line_on_object "drive_brute_radio_01" 030mx_020))
            (sleep (random_range 20 40))
            (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_01" 1)
        )
    )
    (if (< s_drive_obj_control 4)
        (begin
            (sleep (random_range 30 60))
            (sound_looping_stop "sound\materials\gear\high_ground_radio\high_ground_radio")
            (sleep (random_range 20 40))
            (if b_debug
                (print "the prophet will soon complete his blessed task!")
            )
            (sleep (ai_play_line_on_object "drive_brute_radio_01" 030mx_030))
            (sleep (random_range 20 40))
            (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_01" 1)
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_drive_brute_radio_02
    (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_02" 1)
    (sleep_until (= (ai_task_count "obj_drive2_cov/main_gate") 0))
    (ai_dialogue_enable false)
    (if (= s_pond_obj_control 0)
        (begin
            (sleep (random_range 30 60))
            (sound_looping_stop "sound\materials\gear\high_ground_radio\high_ground_radio")
            (sleep (random_range 20 40))
            (if b_debug
                (print "i see it, pack-brothers!  the holy relic!")
            )
            (sleep (ai_play_line_on_object "drive_brute_radio_02" 030mx_040))
            (sleep (random_range 20 40))
            (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_02" 1)
        )
    )
    (if (= s_pond_obj_control 0)
        (begin
            (sleep (random_range 30 60))
            (sound_looping_stop "sound\materials\gear\high_ground_radio\high_ground_radio")
            (sleep (random_range 20 40))
            (if b_debug
                (print "what fools!  to live so long on hallowed ground!")
            )
            (sleep (ai_play_line_on_object "drive_brute_radio_02" 030mx_050))
            (sleep (random_range 20 40))
            (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_02" 1)
        )
    )
    (if (= s_pond_obj_control 0)
        (begin
            (sleep (random_range 30 60))
            (sound_looping_stop "sound\materials\gear\high_ground_radio\high_ground_radio")
            (sleep (random_range 20 40))
            (if b_debug
                (print "never knowing what lay beneath the surface!")
            )
            (sleep (ai_play_line_on_object "drive_brute_radio_02" 030mx_060))
            (sleep (random_range 20 40))
            (sound_looping_start "sound\materials\gear\high_ground_radio\high_ground_radio" "drive_brute_radio_02" 1)
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_drive_navpoint
    (sleep 4500)
    (if (= s_pond_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "drive_navpoint" 0.55)
            (sleep_until (>= s_pond_obj_control 1) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "drive_navpoint")
        )
    )
)

(script command_script void cs_pond_phantom1
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1)
    (cs_fly_to "pond_ph/p0" 0.5)
    (if (<= (game_difficulty_get) normal)
        (sleep_until (>= s_pond_obj_control 2) 1 480)
        (sleep_until (>= s_pond_obj_control 3) 1 480)
    )
    (sleep 120)
    (cs_vehicle_speed 0.5)
    (sleep 180)
    (cs_vehicle_speed 1)
    (cs_fly_to "pond_ph/p1" 1)
    (cs_fly_to "pond_ph/p2" 1)
    (cs_fly_to "pond_ph/p3" 1)
    (cs_fly_to "pond_ph/p4" 1)
    (ai_erase ai_current_squad)
)

(script dormant void sc_pond_gamesave
    (sleep_until (= (ai_task_count "obj_pond_cov/forward_gate") 0) 5)
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
    (sleep_until (= (ai_task_count "obj_pond_cov/fallback_gate") 0) 5)
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script dormant void sc_pond_dialog
    (sleep_until (or (= (ai_task_count "obj_pond_cov/fallback_gate") 0) (>= s_pond_obj_control 4)))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (sleep (random_range 20 60))
    (print "i repeat: my convo's been hit!  i've ====")
    (sleep (ai_play_line_on_object none 030me_070))
    (print "we're on the tsavo highway.  ==== east of voi!")
    (sleep (ai_play_line_on_object none 030me_080))
    (print "someone?  anyone!  please ====")
    (sleep (ai_play_line_on_object none 030me_090))
    (ai_dialogue_enable true)
    (game_save)
)

(script dormant void sc_pond_prompt_01
    (sleep_until (= (ai_task_count "obj_pond_cov/pond_gate") 0))
    (sleep 900)
    (if (< s_pond_obj_control 3)
        (begin
            (vs_cast "sg_allied_vehicles" true 0 "030me_050")
            (set act_pond_prompt01 (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "marine: up and around that damn, sir!")
            (vs_play_line act_pond_prompt01 true 030me_050)
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
    (sleep 1800)
    (if (< s_pond_obj_control 3)
        (begin
            (vs_cast "sg_allied_vehicles" true 0 "030me_060")
            (set act_pond_prompt01 (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "marine: chief! follow the ridge up and around the dam!")
            (vs_play_line act_pond_prompt01 true 030me_060)
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
    (wake sc_pond_navpoint01)
)

(script dormant void sc_pond_navpoint01
    (sleep 900)
    (if (<= s_pond_obj_control 2)
        (begin
            (hud_activate_team_nav_point_flag player "pond_navpoint01" 0.55)
            (sleep_until (>= s_pond_obj_control 4) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "pond_navpoint01")
        )
    )
)

(script dormant void sc_pond_prompt_02
    (sleep 900)
    (if (= s_crash_obj_control 0)
        (begin
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (ai_dialogue_enable false)
            (print "tsavo highway's just ahead, chief!")
            (sleep (ai_play_line_on_object none 030me_100))
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
    (sleep 1800)
    (if (= s_crash_obj_control 0)
        (begin
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (ai_dialogue_enable false)
            (print "let's see if we can find that convoy!")
            (sleep (ai_play_line_on_object none 030me_110))
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
    (wake sc_pond_navpoint02)
)

(script dormant void sc_pond_navpoint02
    (sleep 900)
    (if (= s_crash_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "pond_navpoint02" 0.55)
            (sleep_until (>= s_crash_obj_control 1) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "pond_navpoint02")
        )
    )
)

(script dormant void sc_crash_shield_destroy
    (sleep_until (<= (object_get_health "crash_generator") 0) 1)
    (object_destroy "crash_shield")
    (print "shield is down")
)

(script dormant void sc_crash_mid_save
    (print "wake crash save")
    (sleep_until (= (ai_task_count "obj_crash_cov/forward_gate") 0) 5)
    (print "trying to save")
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
    (sleep_until (= (ai_task_count "obj_crash_cov/third_gate") 0) 5)
    (print "trying to save")
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script command_script void cs_crash_turret
    (sleep_until (and (< (ai_task_count "obj_crash_cov/main_gate") 6) (= b_crash_third true)))
    (ai_vehicle_reserve (ai_vehicle_get ai_current_actor) true)
    (cs_movement_mode ai_movement_flee)
    (cs_enable_moving true)
    (cs_shoot false)
    (cs_enable_looking false)
    (cs_enable_targeting false)
)

(script dormant void sc_crash_chopper_intro
    (sleep_until (= (volume_test_players "tv_crash_scene1") true) 1)
    (ai_place "sq_crash_doomed")
    (set v_crash_doomed (ai_vehicle_get_from_starting_location "sq_crash_doomed/doomed"))
    (sleep 1)
    (object_damage_damage_section (ai_vehicle_get_from_starting_location "sq_crash_doomed/doomed") "hull" 0.75)
    (ai_place "sq_crash_chopper01")
    (ai_place "sq_crash_chopper02")
    (ai_disregard (ai_get_object "sq_crash_doomed/doomed") true)
    (sleep 180)
    (cs_run_command_script "sq_crash_chopper01" cs_abort)
    (cs_run_command_script "sq_crash_chopper02" cs_abort)
)

(script command_script void cs_crash_choppers1
    (cs_abort_on_damage false)
    (cs_enable_pathfinding_failsafe true)
    (cs_ignore_obstacles true)
    (cs_enable_targeting false)
    (cs_vehicle_speed 0.9)
    (cs_go_to "crash_test/p0" 0.5)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (cs_go_to "crash_test/p4" 1)
    (object_set_velocity v_crash_doomed 0 7 3)
    (cs_go_to "crash_test/p1" 10)
    (cs_vehicle_boost false)
    (cs_ignore_obstacles false)
)

(script command_script void cs_crash_choppers2
    (cs_abort_on_damage false)
    (cs_enable_pathfinding_failsafe true)
    (cs_ignore_obstacles true)
    (cs_enable_targeting false)
    (cs_vehicle_speed 0.9)
    (sleep 60)
    (cs_go_to "crash_test/p2" 0.5)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (cs_go_to "crash_test/p3" 10)
    (cs_vehicle_boost false)
    (cs_ignore_obstacles false)
)

(script command_script void cs_crash_choppers1_old
    (cs_abort_on_damage false)
    (cs_enable_pathfinding_failsafe true)
    (cs_ignore_obstacles true)
    (cs_enable_targeting false)
    (cs_vehicle_speed 1)
    (cs_go_to "crash_chopper1/p0" 0.5)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (cs_go_to "crash_chopper1/p3" 1)
    (set b_crash_doomed true)
    (cs_vehicle_boost false)
    (cs_ignore_obstacles false)
)

(script command_script void cs_crash_choppers2_old
    (cs_abort_on_damage true)
    (cs_enable_pathfinding_failsafe true)
    (cs_ignore_obstacles true)
    (cs_vehicle_speed 1)
    (cs_go_to "crash_chopper1/p5" 0.5)
    (cs_go_to "crash_chopper1/p6" 0.5)
    (cs_vehicle_boost true)
    (cs_go_to "crash_chopper1/p8" 1)
    (cs_vehicle_boost false)
    (cs_ignore_obstacles false)
)

(script command_script void cs_crash_buggers
    (cs_abort_on_damage true)
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (set s_crash_bugger (random_range 0 10))
    (if (= s_crash_bugger 0)
        (cs_fly_to "crash_bugger/p0" 1)
        (if (= s_crash_bugger 1)
            (cs_fly_to "crash_bugger/p1" 1)
            (if (= s_crash_bugger 2)
                (cs_fly_to "crash_bugger/p2" 1)
                (if (= s_crash_bugger 3)
                    (cs_fly_to "crash_bugger/p3" 1)
                    (if (= s_crash_bugger 4)
                        (cs_fly_to "crash_bugger/p4" 1)
                        (if (= s_crash_bugger 5)
                            (cs_fly_to "crash_bugger/p5" 1)
                            (if (= s_crash_bugger 6)
                                (cs_fly_to "crash_bugger/p6" 1)
                                (if (= s_crash_bugger 7)
                                    (cs_fly_to "crash_bugger/p7" 1)
                                    (if (= s_crash_bugger 8)
                                        (cs_fly_to "crash_bugger/p8" 1)
                                        (if (= s_crash_bugger 9)
                                            (cs_fly_to "crash_bugger/p9" 1)
                                            (if (= s_crash_bugger 10)
                                                (cs_fly_to "crash_bugger/p10" 1)
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
    )
    (set s_crash_bugger (random_range 0 4))
    (if (= s_crash_bugger 0)
        (cs_fly_to "crash_bugger/p11" 1)
        (if (= s_crash_bugger 1)
            (cs_fly_to "crash_bugger/p12" 1)
            (if (= s_crash_bugger 2)
                (cs_fly_to "crash_bugger/p13" 1)
                (if (= s_crash_bugger 3)
                    (cs_fly_to "crash_bugger/p14" 1)
                    (if (= s_crash_bugger 4)
                        (cs_fly_to "crash_bugger/p15" 1)
                    )
                )
            )
        )
    )
)

(script command_script void cs_crash_warthog_turret
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot_point true "crash_chopper1/p4")
    (sleep_until (= b_crash_doomed true) 30 300)
)

(script dormant void sc_crash_health_renew
    (sleep_until 
        (begin
            (ai_renew "sq_crash_marines")
            (= (ai_task_count "obj_crash_cov/initial_gate") 0)
        )
        30
    )
)

(script dormant void sc_crash_flocks
    (sleep_until 
        (begin
            (flock_start "crash_flock")
            (sleep (random_range 30 45))
            (flock_stop "crash_flock")
            (sleep (random_range 210 300))
            false
        )
    )
)

(script dormant void sc_crash_flocks2
    (sleep_until 
        (begin
            (flock_start "crash_flock2")
            (sleep 30)
            (flock_stop "crash_flock2")
            (sleep (random_range 60 90))
            false
        )
    )
)

(script dormant void sc_crash_filler_dialog
    (sleep_until (or (= (volume_test_players "tv_crash_dialog01") true) (= (volume_test_players "tv_crash_dialog02") true) (= (ai_task_count "obj_crash_cov/initial_gate") 0)))
    (if (and (or (= (volume_test_objects "tv_crash_dialog01" (ai_get_object "sq_crash_marines")) true) (= (volume_test_objects "tv_crash_dialog02" (ai_get_object "sq_crash_marines")) true)) (>= (ai_task_count "obj_crash_cov/initial_gate") 1))
        (begin
            (vs_cast "sq_crash_marines" true 0 "030mf_010")
            (set act_crash_filler (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "marine: we were en route to voi, chief...")
            (vs_play_line act_crash_filler true 030mf_010)
            (sleep (random_range 30 60))
            (print "marine: banshees jumped us, started strafing...")
            (vs_play_line act_crash_filler true 030mf_020)
            (sleep (random_range 30 60))
            (print "marine: pretty much ruined our day.")
            (vs_play_line act_crash_filler true 030mf_030)
        )
    )
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_crash_mombasa_dialog
    (sleep_until (and (= (ai_task_count "obj_crash_cov/forward_gate") 0) (= (ai_task_count "obj_crash_cov/third_gate") 0) (= (volume_test_players "tv_crash_dialog_mombasa") true)))
    (vs_cast "sg_allied_vehicles" true 0 "030mf_320")
    (set act_crash_mombasa (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (print "marine: that was the road to new mombasa...")
    (vs_play_line act_crash_mombasa true 030mf_320)
    (print "marine: biggest city in africa.  millions of people.")
    (vs_play_line act_crash_mombasa true 030mf_330)
    (print "marine: u.n. says the evacuation was a success")
    (vs_play_line act_crash_mombasa true 030mf_340)
    (print "marine: but i don't know... that's a big crater")
    (vs_play_line act_crash_mombasa true 030mf_350)
    (print "marine: you were there chief")
    (vs_play_line act_crash_mombasa true 030mf_360)
    (print "marine: think most of 'em made it out alive?")
    (vs_play_line act_crash_mombasa true 030mf_370)
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_crash_filler_dialog02
    (sleep_until (and (= (ai_task_count "obj_crash_cov/main_gate") 0) (>= (ai_task_count "obj_crash_marine/third") 1) (= (volume_test_players "tv_crash_oc3") true)))
    (vs_cast "sg_crash_marines" true 0 "030mf_250")
    (set act_crash_filler (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (print "marine: marines in voi really needed my supplies, chief...")
    (vs_play_line act_crash_filler true 030mf_250)
    (print "marine: but i'm sure they'll be plenty happy to see you!")
    (vs_play_line act_crash_filler true 030mf_260)
    (print "marine: head on through the tunnel!  give those boys a hand!")
    (vs_play_line act_crash_filler true 030mf_270)
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_crash_prompt
    (sleep_until (<= (ai_task_count "obj_crash_cov/non_bugger_gate") 2) 5)
    (sleep 1200)
    (if (and (= s_bridge_obj_control 0) (> (object_get_health "crash_generator") 0))
        (begin
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (ai_dialogue_enable false)
            (print "take down that barrier, chief!")
            (sleep (ai_play_line_on_object none 030mf_120))
            (print "power source should be inside that tunnel!")
            (sleep (ai_play_line_on_object none 030mf_130))
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
    (sleep 1800)
    (sleep_until 
        (begin
            (if (and (= s_bridge_obj_control 0) (> (object_get_health "crash_generator") 0))
                (begin
                    (vs_set_cleanup_script gs_dialogue_cleanup)
                    (ai_dialogue_enable false)
                    (print "chief?  barrier only works against vehicles...")
                    (sleep (ai_play_line_on_object none 030mf_140))
                    (print "you should be able to walk right through")
                    (sleep (ai_play_line_on_object none 030mf_150))
                    (vs_release_all)
                    (sleep 1800)
                )
            )
            (if (and (= s_bridge_obj_control 0) (> (object_get_health "crash_generator") 0))
                (begin
                    (vs_set_cleanup_script gs_dialogue_cleanup)
                    (ai_dialogue_enable false)
                    (print "take down that barrier, chief!")
                    (sleep (ai_play_line_on_object none none))
                    (print "power source should be inside that tunnel!")
                    (sleep (ai_play_line_on_object none none))
                    (vs_release_all)
                    (sleep 1800)
                )
            )
            (if (and (= s_bridge_obj_control 0) (> (object_get_health "crash_generator") 0))
                (begin
                    (vs_set_cleanup_script gs_dialogue_cleanup)
                    (ai_dialogue_enable false)
                    (print "take down that barrier, chief!")
                    (sleep (ai_play_line_on_object none none))
                    (print "power source should be inside that tunnel!")
                    (sleep (ai_play_line_on_object none none))
                    (vs_release_all)
                    (sleep 1800)
                )
            )
            (or (>= s_bridge_obj_control 1) (<= (object_get_health "crash_generator") 0))
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_crash_navpoint
    (sleep_until (<= (ai_task_count "obj_crash_cov/non_bugger_gate") 2) 5)
    (sleep 2700)
    (if (= s_bridge_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "crash_navpoint" 0.55)
            (sleep_until (or (<= (object_get_health "crash_generator") 0) (= s_bridge_obj_control 1)) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "crash_navpoint")
        )
    )
)

(script dormant void sc_crash_truth
    (object_create_anew "crash_truth_biped")
    (object_create_anew "crash_truth_throne")
    (object_create_anew "crash_truth_battery")
    (objects_attach "crash_truth_battery" "attach_marker" "crash_truth_biped" "")
    (objects_attach "crash_truth_biped" "driver" "crash_truth_throne" "driver")
    (sleep_until (volume_test_players "tv_crash_truth"))
    (gs_crash_truth_flicker)
    (object_hide "crash_truth_biped" false)
    (object_hide "crash_truth_throne" false)
    (unit_limit_lipsync_to_mouth_only "crash_truth_biped" true)
    (sleep 15)
    (if (> (object_get_health "crash_truth_battery") 0)
        (begin
            (custom_animation "crash_truth_biped" "objects\characters\truth\cinematics\truth_holos\030_truth_a\030_truth_a.model_animation_graph" "030_cin_truth3" true)
            (sound_impulse_start "sound\dialog\030_outskirts\mission\030mz_030_pot" "crash_truth_biped" 1)
            (sleep (sound_impulse_language_time "sound\dialog\030_outskirts\mission\030mz_030_pot"))
            (sleep 30)
        )
    )
    (if (> (object_get_health "crash_truth_battery") 0)
        (begin
            (custom_animation "crash_truth_biped" "objects\characters\truth\cinematics\truth_holos\030_truth_b\030_truth_b.model_animation_graph" "030_cin_truth2" true)
            (sound_impulse_start "sound\dialog\030_outskirts\mission\030mz_040_pot" "crash_truth_biped" 1)
            (sleep (sound_impulse_language_time "sound\dialog\030_outskirts\mission\030mz_040_pot"))
            (sleep 30)
        )
    )
    (gs_crash_truth_flicker)
    (object_destroy "crash_truth_biped")
    (object_destroy "crash_truth_throne")
)

(script dormant void sc_crash_music
    (sleep_until (or (<= (object_get_health "crash_generator") 0) (>= s_bridge_obj_control 1)))
    (wake 030_music_04_stop)
    (wake 030_music_05_start)
)

(script command_script void cs_bridge_exit_vehicle
    (cs_abort_on_damage true)
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_force_combat_status 3)
    (cs_vehicle_speed 2)
    (sleep_until (= (volume_test_object "tv_bridge_oc5" ai_current_actor) true) 5)
    (sleep (random_range 1 45))
    (ai_vehicle_reserve (ai_vehicle_get ai_current_actor) true)
    (ai_vehicle_exit ai_current_actor)
)

(script dormant void sc_bridge_dialog_getout
    (sleep_until (>= s_bridge_obj_control 5) 1)
    (vs_cast "sg_allied_vehicles" true 0 "030mg_060")
    (set act_bridge_getout (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (print "marine: highway's wasted.  gonna have to hoof it from here.")
    (vs_play_line act_bridge_getout true 030mg_060)
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_bridge_overhead_cruiser
    (sleep_until (>= s_bridge_obj_control 2) 1)
    (object_create_anew "cruiser_flyover")
    (object_set_always_active "cruiser_flyover" true)
    (object_cinematic_visibility "cruiser_flyover" true)
    (sleep 1)
    (wake sc_bridge_rumble)
    (sleep 30)
    (scenery_animation_start "cruiser_flyover" "objects\vehicles\cov_cruiser\cinematics\vignettes\030vc_cruiser_overhead\030vc_cruiser_overhead" "cruiser")
    (object_set_custom_animation_speed "cruiser_flyover" 0.1)
)

(script dormant void sc_bridge_rumble
    (player_effect_set_max_rotation 1 1 1)
    (player_effect_set_max_rumble 1 1)
    (print "rumble start")
    (player_effect_start 1 5)
    (sleep 120)
    (player_effect_stop 3)
    (print "rumble stop")
)

(script dormant void sc_bridge_title2
    (chapter_start)
    (cinematic_set_title "title_2")
    (sleep 150)
    (chapter_stop)
    (wake 030_music_05_stop)
)

(script dormant void sc_bridge_title2_insertion
    (sleep 30)
    (cinematic_set_title "title_2")
    (cinematic_title_to_gameplay)
    (wake 030_music_05_stop)
)

(script dormant void sc_bridge_dialog01
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (sleep (random_range 60 100))
    (print "commander? ==== oni recon one-eleven...")
    (sleep (ai_play_line_on_object none 030me_010))
    (print "the cruisers above ====  they've found ====")
    (sleep (ai_play_line_on_object none 030me_020))
    (print "say again, recon?  you're breaking up.")
    (sleep (ai_play_line_on_object none 030me_030))
    (print "there's something in the crater, ma'am!  something beneath the storm!")
    (sleep (ai_play_line_on_object none 030me_040))
    (ai_dialogue_enable true)
)

(script dormant void sc_bridge_brief02_sound
    (if (>= (game_insertion_point_get) 1)
        (sleep 90)
        (sleep 30)
    )
    (ai_dialogue_enable false)
    (print "master chief?  finally, a good connection!")
    (sleep (ai_play_line_on_object none 030bb_010))
    (sleep 10)
    (print "truth has excavated a forerunner artifact...")
    (sleep (ai_play_line_on_object none 030bb_020))
    (sleep 10)
    (print "we have to assume it's the ark.!")
    (sleep (ai_play_line_on_object none 030bb_030))
    (sleep 30)
    (print "keep pushing to the town of voi, chief...")
    (sleep (ai_play_line_on_object none 030mx_080))
    (sleep 10)
    (print "re-supply birds will meet you in the next valley!")
    (sleep (ai_play_line_on_object none 030mx_090))
    (sleep 30)
    (ai_dialogue_enable true)
    (game_save)
    (wake objective_1_clear)
    (wake objective_2_set)
    (game_insertion_point_unlock 1)
)

(script dormant void sc_bridge_navpoint
    (sleep 2700)
    (if (= s_garage_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "bridge_navpoint" 0.55)
            (sleep_until (>= s_garage_obj_control 1) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "bridge_navpoint")
        )
    )
)

(script dormant void sc_bridge_cruiser
    (object_create_anew "ark_cruiser_01")
    (object_set_always_active "ark_cruiser_01" true)
    (object_cinematic_visibility "ark_cruiser_01" true)
    (object_create_anew "ark_cruiser_02")
    (object_set_always_active "ark_cruiser_02" true)
    (object_cinematic_visibility "ark_cruiser_02" true)
    (sleep 1)
    (scenery_animation_start_loop "ark_cruiser_01" "objects\vehicles\cov_cruiser\cinematics\vignettes\030vb_excavation\030vb_excavation" "cinematic_cov_cruiser")
    (object_set_custom_animation_speed "ark_cruiser_01" 0.009)
    (object_cinematic_visibility "ark_cruiser_01" true)
    (scenery_animation_start_at_frame_loop "ark_cruiser_02" "objects\vehicles\cov_cruiser\cinematics\vignettes\030vb_excavation\030vb_excavation" "cinematic_cov_cruiser1" 10)
    (object_set_custom_animation_speed "ark_cruiser_02" 0.01)
    (object_cinematic_visibility "ark_cruiser_02" true)
    (sleep 5)
    (wake gs_cinematic_lights)
)

(script dormant void sc_flock_test
    (wake sc_bridge_flocks)
    (wake sc_bridge_flocks2)
    (wake sc_bridge_flocks3)
)

(script dormant void sc_bridge_flocks
    (sleep_until 
        (begin
            (flock_start "bridge_flock")
            (sleep (random_range 15 45))
            (flock_stop "bridge_flock")
            (sleep (random_range 450 540))
            false
        )
    )
)

(script dormant void sc_bridge_flocks2
    (sleep_until 
        (begin
            (flock_start "bridge_flock2")
            (sleep 30)
            (flock_stop "bridge_flock2")
            (sleep (random_range 120 180))
            false
        )
    )
)

(script dormant void sc_bridge_flocks3
    (sleep_until 
        (begin
            (flock_start "bridge_flock3")
            (sleep (random_range 15 45))
            (flock_stop "bridge_flock3")
            (sleep (random_range 500 750))
            false
        )
    )
)

(script dormant void sc_garage_health_renew
    (sleep_until 
        (begin
            (ai_renew "sq_garage_initial_mar")
            (or (= (volume_test_players "tv_garage_near") true) (= s_tether_obj_control 1))
        )
        30
    )
)

(script dormant void sc_garage_health_renew2
    (sleep_until 
        (begin
            (ai_renew "sq_garage_initial_mar2")
            (ai_renew "sq_garage_initial06")
            (ai_renew "sq_garage_initial07")
            (>= s_garage_obj_control 1)
        )
        30
    )
)

(script command_script void cs_garage_chief_shoot
    (cs_abort_on_damage true)
    (cs_force_combat_status 3)
    (cs_go_to "garage_pts/p0")
    (sleep_until 
        (begin
            (cs_shoot_point true "garage_pts/p1")
            (or (>= s_garage_obj_control 3) (>= (ai_task_count "obj_garage_marine/ru_fourth") 1))
        )
    )
)

(script dormant void sc_garage_player_not_driving
    (sleep_until (or (>= s_tether_obj_control 1) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_garage_warthog1/driver") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_garage_warthog1/driver") "warthog_p" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_garage_warthog2/driver") "warthog_g" (player0)) (vehicle_test_seat (ai_vehicle_get_from_starting_location "sq_garage_warthog2/driver") "warthog_p" (player0))) 5)
    (if (= s_tether_obj_control 0)
        (ai_set_objective "sg_allied_vehicles" "obj_tether_marine")
    )
)

(script dormant void sc_garage_sniping
    (sleep_until 
        (begin
            (player_action_test_reset)
            (sleep 1)
            (or (>= s_garage_obj_control 2) (and (player_action_test_primary_trigger) (= (volume_test_players "tv_garage_oc1") true) (or (unit_has_weapon_readied (unit (player0)) "objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon") (unit_has_weapon_readied (unit (player1)) "objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon"))))
        )
        1
    )
    (set b_garage_sniping true)
    (sleep_until (= (volume_test_players "tv_garage_oc1") false) 5)
    (set b_garage_sniping false)
)

(script dormant void sc_garage_music
    (sleep_until (or (= (unit_in_vehicle (player0)) true) (= (unit_in_vehicle (player1)) true) (= (unit_in_vehicle (player2)) true) (= (unit_in_vehicle (player3)) true) (>= s_tether_obj_control 2)))
    (wake 030_music_06_start)
    (wake 030_music_056_stop)
    (wake 030_music_057_stop)
)

(script dormant void sc_garage_music_end
    (sleep_until (= (ai_task_count "obj_garage_cov/wraith_gate") 0) 1)
    (wake 030_music_055_stop)
)

(script dormant void sc_garage_objective
    (sleep_until (= (unit_in_vehicle (player0)) true) 5)
    (ai_enter_squad_vehicles "sg_all_allies")
    (sleep_until (>= s_tether_obj_control 1))
    (ai_set_objective "sg_all_allies" "obj_tether_marine")
)

(script dormant void sc_garage_sniper_checkpoint
    (sleep_until (= (volume_test_players "tv_garage_checkpoint01") true) 5)
    (sleep_until (= (volume_test_players "tv_garage_checkpoint01") false) 1)
    (game_save)
)

(script dormant void sc_garage_mid_save
    (sleep_until (and (<= (ai_task_count "obj_garage_cov/ag_forward_gate") 4) (<= (ai_task_count "obj_garage_cov/ag_charge") 0)) 5)
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script dormant void sc_garage_mid_save2
    (sleep_until (<= (ai_task_count "obj_garage_cov/initial_gate") 2) 5)
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script dormant void sc_garage_mid_save3
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script command_script void cs_garage_phantom1
    (wake sc_garage_phantom_alive)
    (set v_garage_phantom0 (ai_vehicle_get_from_starting_location "sq_garage_phantom1/pilot"))
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (game_save)
    (sleep 120)
    (cs_fly_to "garage_ph1/p0" 1)
    (cs_fly_to "garage_ph1/p1" 1)
    (if (= (game_difficulty_get_real) easy)
        (ai_place "sq_garage_second01")
        (ai_place "sq_garage_second02")
        (if (= (game_difficulty_get_real) normal)
            (ai_place "sq_garage_second01")
            (ai_place "sq_garage_second02")
            (if (= (game_difficulty_get_real) heroic)
                (ai_place "sq_garage_second01")
                (ai_place "sq_garage_second02")
                (ai_place "sq_garage_second03")
                (if (= (game_difficulty_get_real) legendary)
                    (ai_place "sq_garage_second01")
                    (ai_place "sq_garage_second02")
                    (ai_place "sq_garage_second03")
                )
            )
        )
    )
    (cs_fly_to "garage_ph1/p2" 1)
    (ai_vehicle_enter_immediate "sq_garage_second01" v_garage_phantom0 22)
    (ai_vehicle_enter_immediate "sq_garage_second03" v_garage_phantom0 23)
    (ai_vehicle_enter_immediate "sq_garage_second02" v_garage_phantom0 24)
    (unit_open v_garage_phantom0)
    (cs_fly_to "garage_ph1/p3" 1)
    (cs_vehicle_speed 0.5)
    (cs_fly_to "garage_ph1/p5" 0.5)
    (cs_face true "garage_ph1/p6")
    (sleep 20)
    (wake sc_garage_mid_save)
    (sleep (random_range 10 20))
    (vehicle_unload v_garage_phantom0 23)
    (ai_set_objective "sq_garage_second03" "obj_garage_cov")
    (sleep (random_range 90 115))
    (vehicle_unload v_garage_phantom0 22)
    (ai_set_objective "sq_garage_second01" "obj_garage_cov")
    (sleep (random_range 30 75))
    (vehicle_unload v_garage_phantom0 24)
    (ai_set_objective "sq_garage_second02" "obj_garage_cov")
    (sleep (random_range 30 75))
    (vehicle_unload v_garage_phantom0 25)
    (sleep 120)
    (set s_garage_phantom 1)
    (cs_vehicle_speed 1)
    (cs_fly_to "garage_ph1/p7" 1)
    (cs_fly_to "garage_ph1/p8" 1)
    (cs_fly_to "garage_ph1/p9" 1)
    (cs_fly_to "garage_ph1/p10" 1)
    (cs_fly_to "garage_ph1/p11" 1)
    (ai_erase ai_current_squad)
)

(script dormant void sc_garage_phantom_alive
    (sleep_until (or (= (ai_living_count "sq_garage_phantom1") 0) (<= (object_get_health v_garage_phantom0) 0)))
    (set s_garage_phantom 1)
)

(script command_script void cs_garage_phantom2
    (wake sc_garage_phantom_alive2)
    (set v_garage_phantom1 (ai_vehicle_get_from_starting_location "sq_garage_phantom2/pilot"))
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (game_save)
    (sleep 30)
    (cs_fly_to "garage_ph1/p0" 1)
    (cs_fly_to "garage_ph1/p1" 1)
    (ai_place "sq_garage_third01")
    (ai_place "sq_garage_third03")
    (if (or (>= (game_difficulty_get) legendary) (= (game_is_cooperative) true))
        (ai_place "sq_garage_third02")
    )
    (cs_fly_to "garage_ph1/p2" 1)
    (ai_vehicle_enter_immediate "sq_garage_third01" v_garage_phantom1 22)
    (ai_vehicle_enter_immediate "sq_garage_third02" v_garage_phantom1 23)
    (ai_vehicle_enter_immediate "sq_garage_third03" v_garage_phantom1 24)
    (unit_open v_garage_phantom1)
    (cs_fly_to "garage_ph1/p3" 1)
    (cs_vehicle_speed 0.5)
    (cs_fly_to "garage_ph1/p5" 0.5)
    (cs_face true "garage_ph1/p6")
    (sleep 20)
    (sleep (random_range 10 20))
    (vehicle_unload v_garage_phantom1 23)
    (ai_set_objective "sq_garage_third02" "obj_garage_cov")
    (sleep (random_range 90 115))
    (vehicle_unload v_garage_phantom1 22)
    (ai_set_objective "sq_garage_third01" "obj_garage_cov")
    (sleep (random_range 90 115))
    (vehicle_unload v_garage_phantom1 24)
    (ai_set_objective "sq_garage_third03" "obj_garage_cov")
    (sleep 120)
    (set s_garage_phantom 2)
    (cs_vehicle_speed 1)
    (cs_fly_to "garage_ph1/p7" 1)
    (cs_fly_to "garage_ph1/p8" 1)
    (cs_fly_to "garage_ph1/p9" 1)
    (cs_fly_to "garage_ph1/p10" 1)
    (cs_fly_to "garage_ph1/p11" 1)
    (ai_erase ai_current_squad)
)

(script dormant void sc_garage_phantom_alive2
    (sleep_until (or (= (ai_living_count "sq_garage_phantom2") 0) (<= (object_get_health v_garage_phantom1) 0)))
    (set s_garage_phantom 2)
)

(script command_script void cs_garage_pelican1
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (cs_fly_to "garage_pelican1/p0" 1)
    (ai_vehicle_reserve (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") true)
    (ai_place "sq_garage_warthog1")
    (sleep 5)
    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 26 (ai_vehicle_get_from_starting_location "sq_garage_warthog1/driver"))
    (ai_place "sq_garage_marine02")
    (sleep 5)
    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 27 (ai_actors "sq_garage_marine02"))
    (cs_fly_to "garage_pelican1/p1" 1)
    (wake sc_garage_pelican_inc)
    (cs_fly_to "garage_pelican1/p2" 1)
    (cs_fly_to "garage_pelican1/p3" 1)
    (cs_fly_to "garage_pelican1/p5" 1)
    (cs_fly_to_and_face "garage_pelican1/p4" "garage_pelican1/p9" 1)
    (cs_vehicle_speed 0.5)
    (wake sc_garage_pelican_drop)
    (sleep 60)
    (sleep_until (= (volume_test_players "tv_garage_pelican1") false) 5)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 26)
    (wake sc_garage_music)
    (sleep 30)
    (cs_face true "garage_pelican1/p10")
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 28)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 29)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 30)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 31)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 32)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 33)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 34)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 35)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 36)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican1/pilot") 37)
    (sleep 30)
    (ai_enter_squad_vehicles "sg_all_allies")
    (cs_vehicle_speed 1)
    (cs_fly_to "garage_pelican1/p5" 1)
    (set b_garage_pelican true)
    (cs_fly_to_and_face "garage_pelican1/p6" "garage_pelican1/p7" 1)
    (sv_garage_kill_player)
    (cs_fly_to_and_face "garage_pelican1/p7" "garage_pelican1/p8" 1)
    (cs_fly_to "garage_pelican1/p8" 1)
    (ai_erase ai_current_squad)
)

(script command_script void cs_garage_pelican2
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (ai_vehicle_reserve (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") true)
    (ai_place "sq_garage_warthog2")
    (sleep 5)
    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 26 (ai_vehicle_get_from_starting_location "sq_garage_warthog2/driver"))
    (ai_place "sq_garage_marine03")
    (sleep 5)
    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 27 (ai_actors "sq_garage_marine03"))
    (cs_fly_to "garage_pelican2/p0" 1)
    (cs_fly_to "garage_pelican2/p1" 1)
    (cs_fly_to "garage_pelican2/p2" 1)
    (cs_fly_to "garage_pelican2/p3" 1)
    (cs_fly_to "garage_pelican2/p4" 1)
    (sleep_until (or (= b_garage_pelican true) (= (object_get_health (ai_get_object "sq_garage_pelican1/pilot")) 0)))
    (cs_fly_to "garage_pelican2/p5" 1)
    (cs_fly_to_and_face "garage_pelican2/p6" "garage_pelican2/p7" 1)
    (cs_vehicle_speed 0.5)
    (sleep 60)
    (sleep_until (= (volume_test_players "tv_garage_pelican2") false) 5)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 26)
    (sleep 30)
    (cs_face true "garage_pelican2/p12")
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 28)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 29)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 30)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 31)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 32)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 33)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 34)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 35)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 36)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican2/pilot") 37)
    (sleep 120)
    (ai_enter_squad_vehicles "sg_all_allies")
    (cs_vehicle_speed 1)
    (cs_fly_to_and_face "garage_pelican2/p13" "garage_pelican2/p8" 1)
    (sv_garage_kill_player)
    (cs_fly_to_and_face "garage_pelican2/p8" "garage_pelican2/p9" 1)
    (set b_tether_wraith_awake true)
    (cs_fly_to_and_face "garage_pelican2/p9" "garage_pelican2/p10" 1)
    (cs_fly_to_and_face "garage_pelican2/p10" "garage_pelican2/p11" 1)
    (cs_fly_to "garage_pelican2/p11" 1)
    (ai_erase ai_current_squad)
)

(script command_script void cs_garage_pelican3
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (ai_vehicle_reserve (ai_vehicle_get_from_starting_location "sq_garage_pelican3/pilot") true)
    (ai_place "sq_garage_warthog3")
    (sleep 5)
    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_garage_pelican3/pilot") 26 (ai_vehicle_get_from_starting_location "sq_garage_warthog3/driver"))
    (cs_fly_to "garage_pelican3/p0" 1)
    (cs_fly_to "garage_pelican3/p1" 1)
    (cs_fly_to "garage_pelican3/p2" 1)
    (cs_fly_to "garage_pelican3/p3" 1)
    (cs_fly_to "garage_pelican3/p4" 1)
    (cs_fly_to "garage_pelican3/p5" 1)
    (cs_fly_to_and_face "garage_pelican3/p6" "garage_pelican3/p7" 1)
    (cs_vehicle_speed 0.5)
    (sleep 30)
    (sleep_until (= (volume_test_players "tv_garage_pelican2") false) 5)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_garage_pelican3/pilot") 26)
    (sleep 30)
    (ai_enter_squad_vehicles "sg_all_allies")
    (cs_vehicle_speed 1)
    (cs_fly_to_and_face "garage_pelican3/p13" "garage_pelican3/p8" 1)
    (sv_garage_kill_player)
    (cs_fly_to_and_face "garage_pelican3/p8" "garage_pelican3/p9" 1)
    (set b_tether_wraith_awake true)
    (cs_fly_to_and_face "garage_pelican3/p9" "garage_pelican3/p10" 1)
    (cs_fly_to_and_face "garage_pelican3/p10" "garage_pelican3/p11" 1)
    (cs_fly_to "garage_pelican3/p11" 1)
    (ai_erase ai_current_squad)
)

(script static void sv_garage_kill_player
    (if (volume_test_object "tv_garage_pelican_kill" (player0))
        (unit_kill (player0))
    )
    (if (volume_test_object "tv_garage_pelican_kill" (player1))
        (unit_kill (player1))
    )
    (if (volume_test_object "tv_garage_pelican_kill" (player2))
        (unit_kill (player2))
    )
    (if (volume_test_object "tv_garage_pelican_kill" (player3))
        (unit_kill (player3))
    )
)

(script dormant void sc_garage_chatter01
    (sleep_until (= (volume_test_players "tv_garage_near") true))
    (vs_cast "sg_garage_mar" true 50 "030mh_010")
    (set act_garage_approach1 (vs_role 1))
    (vs_cast "sg_garage_mar" false 50 "030mh_020" "030mh_020" "030mh_020" "030mh_020")
    (set act_garage_marine1 (vs_role 1))
    (set act_garage_marine2 (vs_role 2))
    (set act_garage_marine3 (vs_role 3))
    (set act_garage_marine4 (vs_role 4))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (print "marine:  we got reinforcements, marines!")
    (vs_play_line act_garage_approach1 true 030mh_010)
    (sleep 10)
    (print "marine:  ooh-rah!  alright!   hell yeah!")
    (vs_play_line act_garage_marine1 false 030mh_020)
    (sleep (random_range 1 3))
    (vs_play_line act_garage_marine2 false 030mh_020)
    (sleep (random_range 1 3))
    (vs_play_line act_garage_marine3 false 030mh_020)
    (sleep (random_range 1 3))
    (vs_play_line act_garage_marine4 false 030mh_020)
    (sleep (random_range 1 3))
    (sleep 10)
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_garage_chatter02
    (sleep_until (and (= (volume_test_players "tv_garage_near") true) (script_finished "sc_garage_chatter01")))
    (ai_dialogue_enable false)
    (sleep (random_range 150 210))
    (print "marine:  sir! recon spotted covenant armor ahead!")
    (sleep (ai_play_line_on_object none 030mh_030))
    (sleep 10)
    (print "marine:  pelican are inbound with heave weapons...")
    (sleep (ai_play_line_on_object none 030mh_040))
    (sleep 10)
    (print "marine:  we need to hold out until they arrive!")
    (sleep (ai_play_line_on_object none 030mh_050))
    (sleep 10)
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_garage_chatter03
    (sleep_until (and (< (ai_task_count "obj_garage_cov/main_gate") 3) (= (volume_test_players "tv_tether_oc1") true) (= b_garage_gauss_down false)))
    (ai_dialogue_enable false)
    (print "marine:  you got hostile armor ahead, chief!")
    (sleep (ai_play_line_on_object none 030mh_060))
    (sleep 10)
    (print "marine:  i rounded up a few re-supply birds....")
    (sleep (ai_play_line_on_object none 030mh_070))
    (sleep 10)
    (print "marine:  advise you maintain position until they arrive!")
    (sleep (ai_play_line_on_object none 030mh_080))
    (ai_dialogue_enable true)
)

(script dormant void sc_garage_pelican_inc
    (if (> (ai_living_count "sq_garage_initial_mar/02") 0)
        (begin
            (vs_cast "sg_garage_mar" true 60 "030mh_010")
            (set act_garage_approach1 (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "marine:  pelicans comming in!")
            (vs_play_line act_garage_approach1 true 030mh_090)
            (sleep 10)
            (print "johnson: brutes have plenty of armor between here and voi, chief.")
            (sleep (ai_play_line_on_object none 030mx_140))
            (sleep 10)
            (print "johnson: but this warthog should help you punch on through!")
            (sleep (ai_play_line_on_object none 030mx_150))
            (ai_dialogue_enable true)
        )
        (begin
            (print "johnson: watch it now!  pelican coming in!")
            (sleep (ai_play_line_on_object none 030mx_130))
            (sleep 10)
            (print "johnson: brutes have plenty of armor between here and voi, chief.")
            (sleep (ai_play_line_on_object none 030mx_140))
            (sleep 10)
            (print "johnson: but this warthog should help you punch on through!")
            (sleep (ai_play_line_on_object none 030mx_150))
        )
    )
    (vs_release_all)
)

(script dormant void sc_garage_wraith_inc
    (sleep_until (= s_garage_wraith 2) 1)
    (vs_cast "sg_all_allies" true 50 "030mh_160")
    (set act_garage_wraith_cry (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (begin_random
        (begin
            (print "marine:  wraith!  get to cover!")
            (vs_play_line act_garage_wraith_cry true 030mh_160)
            (sleep 10)
            (vs_release_all)
            (sleep_forever)
        )
        (begin
            (print "marine:  wraith!  watch yourself, chief!")
            (vs_play_line act_garage_wraith_cry true 030mh_170)
            (sleep 10)
            (vs_release_all)
            (sleep_forever)
        )
    )
    (ai_dialogue_enable true)
    (vs_release_all)
    (wake sc_garage_wraith_nasty)
)

(script dormant void sc_garage_wraith_nasty
    (sleep (random_range 120 160))
    (vs_cast "sg_all_allies" true 50 "030mh_180")
    (set act_garage_wraith_cry (vs_role 1))
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (vs_abort_on_damage true)
    (ai_dialogue_enable false)
    (if (> (ai_task_count "obj_garage_cov/main_gate") 0)
        (print "marine:  damn tank will kills us all if we let it!")
        (vs_play_line act_garage_wraith_cry true 030mh_180)
    )
    (vs_release_all)
    (sleep (random_range 120 160))
    (vs_cast "sg_all_allies" false 5 "030mh_200")
    (set act_garage_marine1 (vs_role 1))
    (if (> (ai_task_count "obj_garage_cov/main_gate") 0)
        (print "marine:  you wanna live, chief, you best kill that wraith!")
        (vs_play_line act_garage_wraith_cry true 030mh_200)
    )
    (ai_dialogue_enable true)
    (vs_release_all)
)

(script dormant void sc_garage_pelican_drop
    (set b_garage_gauss_down true)
)

(script dormant void sc_garage_navpoint
    (sleep_until (and (= (ai_task_count "obj_garage_cov/wraith_gate") 0) (= s_garage_wraith 2)))
    (sleep 2700)
    (if (= s_tether_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "garage_navpoint" 0.55)
            (sleep_until (>= s_tether_obj_control 1) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "garage_navpoint")
        )
    )
)

(script dormant void sc_tether_prompt
    (sleep_until (= (ai_task_count "obj_tether_cov/main_gate") 0) 5)
    (sleep 900)
    (if (= s_round_obj_control 0)
        (begin
            (vs_cast "sg_allied_vehicles" true 0 "030mj_030")
            (set act_tether_prompt (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "we're getting close to voi!  keep going!")
            (vs_play_line act_tether_prompt true 030mj_030)
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
    (sleep 1800)
    (if (= s_bridge_obj_control 0)
        (begin
            (vs_cast "sg_crash_marines" true 0 "030mj_060")
            (set act_tether_prompt (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "pedal to the metal, chief!  just a few more klicks!")
            (vs_play_line act_tether_prompt true 030mj_060)
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_tether_navpoint
    (sleep_until (= (ai_task_count "obj_tether_cov/mg_no_sniper") 0))
    (sleep 1800)
    (if (= s_round_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "tether_navpoint" 0.55)
            (sleep_until (>= s_round_obj_control 1) 1)
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "tether_navpoint")
        )
    )
)

(script dormant void sc_round_fallback_save
    (sleep_until (<= (ai_task_count "obj_round_cov/main_gate") 3) 5)
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
    (sleep_until (<= (ai_task_count "obj_round_cov/main_gate") 3) 5)
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script dormant void sc_round_mid_save
    (sleep_until (<= (ai_task_count "obj_round_cov/main_gate") 6) 5)
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script dormant void sc_round_holdout_hogs
    (sleep_until (= (ai_task_count "obj_round_cov_hold/hold_gate") 0))
    (ai_enter_squad_vehicles "sg_all_allies")
    (game_save)
)

(script command_script void cs_round_phantom1
    (set v_round_phantom1 (ai_vehicle_get_from_starting_location "sq_round_phantom01/pilot"))
    (ai_place "sq_round_wraith01")
    (sleep 1)
    (set v_round_wraith (ai_vehicle_get_from_starting_location "sq_round_wraith01/pilot"))
    (sleep 1)
    (vehicle_load_magic v_round_phantom1 38 v_round_wraith)
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (cs_fly_to "round_ph1/p0" 1)
    (game_save)
    (cs_fly_to "round_ph1/p1" 1)
    (cs_fly_to "round_ph1/p2" 1)
    (unit_open v_round_phantom1)
    (cs_fly_to "round_ph1/p3" 1)
    (cs_fly_to "round_ph1/drop" 1)
    (vehicle_unload v_round_phantom1 38)
    (cs_fly_to "round_ph1/p4" 1)
    (cs_fly_to "round_ph1/p5" 1)
    (cs_fly_to "round_ph1/p6" 1)
    (cs_fly_to "round_ph1/p7" 1)
    (cs_fly_to "round_ph1/p8" 1)
    (game_save)
    (ai_erase ai_current_squad)
)

(script command_script void cs_round_phantom2
    (set v_round_phantom2 (ai_vehicle_get_from_starting_location "sq_round_phantom02/pilot"))
    (ai_place "sq_round_chopper01")
    (sleep 1)
    (set v_round_chopper1 (ai_vehicle_get_from_starting_location "sq_round_chopper01/01"))
    (set v_round_chopper2 (ai_vehicle_get_from_starting_location "sq_round_chopper01/02"))
    (sleep 1)
    (vehicle_load_magic v_round_phantom2 39 v_round_chopper1)
    (vehicle_load_magic v_round_phantom2 40 v_round_chopper2)
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (cs_vehicle_speed 2)
    (cs_fly_to "round_ph2/p0" 1)
    (game_save)
    (cs_fly_to "round_ph2/p1" 1)
    (cs_vehicle_speed 1)
    (cs_fly_to "round_ph2/p2" 1)
    (unit_open v_round_phantom2)
    (cs_fly_to "round_ph2/p3" 1)
    (vehicle_unload v_round_phantom2 39)
    (cs_fly_to "round_ph2/p4" 1)
    (vehicle_unload v_round_phantom2 40)
    (cs_fly_to "round_ph2/p5" 1)
    (cs_fly_to "round_ph2/p6" 1)
    (cs_fly_to "round_ph2/p7" 1)
    (cs_fly_to "round_ph2/p8" 1)
    (game_save)
    (ai_erase ai_current_squad)
)

(script command_script void cs_round_phantom3
    (set v_round_phantom3 (ai_vehicle_get_from_starting_location "sq_round_phantom03/pilot"))
    (ai_place "sq_round_chopper02")
    (sleep 1)
    (set v_round_chopper3 (ai_vehicle_get_from_starting_location "sq_round_chopper02/01"))
    (set v_round_chopper4 (ai_vehicle_get_from_starting_location "sq_round_chopper02/02"))
    (sleep 1)
    (vehicle_load_magic v_round_phantom3 39 v_round_chopper3)
    (vehicle_load_magic v_round_phantom3 40 v_round_chopper4)
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (cs_fly_to "round_ph3/p0" 1)
    (game_save)
    (cs_fly_to "round_ph3/p1" 1)
    (cs_fly_to "round_ph3/p2" 1)
    (unit_open v_round_phantom3)
    (cs_fly_to "round_ph3/p3" 1)
    (vehicle_unload v_round_phantom3 39)
    (cs_fly_to "round_ph3/p4" 1)
    (vehicle_unload v_round_phantom3 40)
    (cs_fly_to "round_ph3/p5" 1)
    (cs_fly_to "round_ph3/p6" 1)
    (cs_fly_to "round_ph3/p7" 1)
    (game_save)
    (ai_erase ai_current_squad)
)

(script dormant void sc_round_rock_kill
    (set ol_round_rock_kill (volume_return_objects_by_type "tv_round_rock_kill" 3))
    (sleep_until 
        (begin
            (unit_kill (unit (list_get ol_round_rock_kill s_round_rock_list_count)))
            (set s_round_rock_list_count (+ s_round_rock_list_count 1))
            (>= s_round_rock_list_count (list_count ol_round_rock_kill))
        )
    )
)

(script dormant void sc_round_music_stop
    (sleep_until (or (= (ai_task_count "obj_round_cov/main_gate") 0) (>= s_exit_obj_control 1)))
    (wake 030_music_06_stop)
    (wake 030_music_07_start)
)

(script dormant void sc_round_holdout_dialog
    (sleep_until (= (ai_task_count "obj_round_cov_hold/hold_gate") 0))
    (sleep (random_range 60 120))
    (vs_cast "sq_round_marine01" false 50 "030mx_160")
    (set act_round_holdout (vs_role 1))
    (if (< (ai_living_count act_round_holdout) 1)
        (begin
            (vs_cast "sq_round_warthog01" false 50 "030mx_160")
            (set act_round_holdout (vs_role 1))
        )
    )
    (vs_abort_on_damage true)
    (print "marine:  wraiths, master chief!  circling that hill!")
    (vs_play_line act_round_holdout true 030mx_160)
    (sleep 10)
    (print "marine:  brute choppers too, so stay sharp!")
    (vs_play_line act_round_holdout true 030mx_170)
    (sleep 10)
    (wake 030_music_06_start_alt)
    (vs_release_all)
)

(script dormant void sc_round_dialog_storm
    (sleep_until (and (= (ai_task_count "obj_round_cov/main_gate") 0) (or (= (volume_test_players "tv_round_vista1") true) (= (volume_test_players "tv_round_vista2") true))) 5)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (begin_random
        (begin
            (print "look at the size of that thing... wonder how old it is?")
            (sleep (ai_play_line_on_object none 030mj_010))
            (print "dunno... but i do know that ain't a normal storm...")
            (sleep (ai_play_line_on_object none 030mj_020))
            (ai_dialogue_enable true)
            (sleep_forever)
        )
        (begin
            (print "commander?  i can see most of it now...")
            (sleep (ai_play_line_on_object none 030mg_010))
            (print "readings are all over the em spectrum!")
            (sleep (ai_play_line_on_object none 030mg_020))
            (print "roger that, recon.  shutter your gear, pull back...")
            (sleep (ai_play_line_on_object none 030mg_030))
            (print "i'll continue monitoring from kilo two three.")
            (sleep (ai_play_line_on_object none 030mg_040))
            (ai_dialogue_enable true)
            (sleep_forever)
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_round_prompt
    (sleep_until (= (ai_task_count "obj_round_cov/main_gate") 0) 5)
    (sleep 900)
    (if (= s_exit_obj_control 0)
        (begin
            (vs_cast "sg_allied_vehicles" true 0 "030mk_010")
            (set act_round_prompt (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "head for high ground!  gotta keep rolling!")
            (vs_play_line act_tether_prompt true 030mk_010)
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
    (sleep 1800)
    (if (= s_exit_obj_control 0)
        (begin
            (vs_cast "sg_crash_marines" true 0 "030mk_030")
            (set act_round_prompt (vs_role 1))
            (vs_set_cleanup_script gs_dialogue_cleanup)
            (vs_abort_on_damage true)
            (ai_dialogue_enable false)
            (print "head on up the hill!  push to voi!")
            (vs_play_line act_tether_prompt true 030mk_030)
            (vs_release_all)
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_round_navpoint
    (sleep_until (= (ai_task_count "obj_round_cov/main_gate") 0))
    (sleep 1800)
    (if (= s_exit_obj_control 0)
        (begin
            (hud_activate_team_nav_point_flag player "round_navpoint" 0.55)
            (sleep_until (or (<= (objects_distance_to_flag (players) "round_navpoint") 5) (>= s_round_obj_control 4)))
            (sleep 1)
            (hud_deactivate_team_nav_point_flag player "round_navpoint")
        )
    )
)

(script command_script void cs_exit_pelican01
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot true)
    (ai_vehicle_reserve (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") true)
    (cs_fly_to "exit_pel01/p0" 0.5)
    (cs_fly_to "exit_pel01/p1" 0.5)
    (cs_fly_to "exit_pel01/p2" 0.5)
    (cs_fly_to "exit_pel01/p3" 0.5)
    (cs_fly_to "exit_pel01/p8" 0.5)
    (sleep_until (= (volume_test_players "tv_exit_pelican_dropoff") false) 5)
    (cs_fly_to "exit_pel01/p4" 0.5)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 28)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 29)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 30)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 31)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 32)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 33)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 34)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 35)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 36)
    (sleep 15)
    (vehicle_unload (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 37)
    (sleep 120)
    (cs_fly_to "exit_pel01/p5" 0.5)
    (cs_fly_to "exit_pel01/p6" 0.5)
    (sv_exit_kill_player)
    (cs_fly_to "exit_pel01/p7" 0.5)
    (set b_exit_pelican false)
    (ai_erase ai_current_squad)
)

(script dormant void sc_exit_shield_destroy
    (sleep_until (<= (object_get_health "exit_generator") 0) 1)
    (object_destroy "exit_shield")
    (print "shield is down")
    (wake 030_music_09_stop)
    (wake 030_music_10_stop)
)

(script static void sv_exit_kill_player
    (if (volume_test_object "tv_exit_pelican_kill" (player0))
        (unit_kill (player0))
    )
    (if (volume_test_object "tv_exit_pelican_kill" (player1))
        (unit_kill (player1))
    )
    (if (volume_test_object "tv_exit_pelican_kill" (player2))
        (unit_kill (player2))
    )
    (if (volume_test_object "tv_exit_pelican_kill" (player3))
        (unit_kill (player3))
    )
)

(script dormant void sc_exit_fallback_save
    (sleep_until (<= (ai_task_count "obj_exit_cov/main_gate") 6))
    (sleep_until (= (volume_test_players "tv_exit_oc4") true) 5)
    (game_save)
)

(script dormant void sc_exit_infantry_save
    (sleep_until (= (ai_task_count "obj_exit_cov/forward_gate") 0))
    (game_save)
)

(script dormant void sc_exit_flocks
    (sleep_until 
        (begin
            (flock_start "exit_flock")
            (sleep (random_range 30 45))
            (flock_stop "exit_flock")
            (sleep (random_range 210 300))
            false
        )
    )
)

(script dormant void sc_exit_flocks2
    (sleep_until 
        (begin
            (flock_start "exit_flock2")
            (sleep 30)
            (flock_stop "exit_flock2")
            (sleep (random_range 60 90))
            false
        )
    )
)

(script dormant void sc_exit_flocks3
    (sleep_until 
        (begin
            (flock_start "exit_flock3")
            (sleep (random_range 30 45))
            (flock_stop "exit_flock3")
            (sleep (random_range 210 300))
            false
        )
    )
)

(script command_script void cs_exit_exit_vehicle
    (if (or (= (vehicle_test_seat (ai_vehicle_get (ai_player_get_vehicle_squad (player0))) "warthog_d" (player0)) true) (= (vehicle_test_seat (ai_vehicle_get (ai_player_get_vehicle_squad (player1))) "warthog_d" (player1)) true) (= (vehicle_test_seat (ai_vehicle_get (ai_player_get_vehicle_squad (player2))) "warthog_d" (player2)) true) (= (vehicle_test_seat (ai_vehicle_get (ai_player_get_vehicle_squad (player3))) "warthog_d" (player3)) true))
        (begin
            (print "no one driving")
        )
        (begin
            (ai_vehicle_exit ai_current_actor)
        )
    )
)

(script command_script void cs_exit_forced_exit
    (ai_vehicle_exit ai_current_actor)
)

(script dormant void sc_exit_music_stop
    (sleep_until (or (= b_exit_truth_speaks true) (>= s_exit_obj_control 5)))
    (wake 030_music_07_stop)
)

(script dormant void sc_exit_music09_start
    (sleep_until (= (ai_task_count "obj_exit_cov/sg_forward_gate") 0) 1)
    (wake 030_music_09_start)
    (sleep_until (or (> (ai_task_count "obj_exit_cov/sg_fallback") 0) (= (ai_task_count "obj_exit_cov/second_gate") 0)) 1)
    (wake 030_music_10_start)
)

(script dormant void sc_exit_music_start
    (sleep_until 
        (begin
            (player_action_test_reset)
            (sleep 1)
            (or (>= s_exit_obj_control 5) (and (player_action_test_primary_trigger) (or (unit_has_weapon_readied (unit (player0)) "objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon") (unit_has_weapon_readied (unit (player1)) "objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon") (unit_has_weapon_readied (unit (player2)) "objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon") (unit_has_weapon_readied (unit (player3)) "objects\weapons\rifle\sniper_rifle\sniper_rifle.weapon") (unit_has_weapon_readied (unit (player0)) "objects\weapons\rifle\beam_rifle\beam_rifle.weapon") (unit_has_weapon_readied (unit (player1)) "objects\weapons\rifle\beam_rifle\beam_rifle.weapon") (unit_has_weapon_readied (unit (player2)) "objects\weapons\rifle\beam_rifle\beam_rifle.weapon") (unit_has_weapon_readied (unit (player3)) "objects\weapons\rifle\beam_rifle\beam_rifle.weapon"))))
        )
        1
    )
    (wake 030_music_08_start)
)

(script dormant void sc_exit_music08_end
    (sleep_until (= (ai_task_count "obj_exit_cov/second_gate") 0) 1)
    (wake 030_music_08_stop)
)

(script dormant void sc_exit_prompt
    (sleep_until (and (<= (ai_task_count "obj_exit_cov/second_gate") 2) (= (volume_test_object "tv_exit_enemy_check" (ai_get_object "sg_exit_cov")) false) (= (volume_test_object "tv_exit_enemy_check2" (ai_get_object "sg_exit_cov")) false) (= (ai_living_count "sq_exit_shade01") 0)))
    (sleep 1200)
    (vs_set_cleanup_script gs_dialogue_cleanup)
    (ai_dialogue_enable false)
    (if (> (object_get_health "exit_generator") 0)
        (begin
            (print "take down that barrier, chief!")
            (sleep (ai_play_line_on_object none 030ml_040))
        )
    )
    (ai_dialogue_enable true)
    (vs_release_all)
    (sleep 1800)
    (sleep_until 
        (begin
            (if (> (object_get_health "exit_generator") 0)
                (begin
                    (vs_set_cleanup_script gs_dialogue_cleanup)
                    (ai_dialogue_enable false)
                    (set s_exit_generator_dialog (random_range 0 3))
                    (if (= s_exit_generator_dialog 0)
                        (if (> (object_get_health "exit_generator") 0)
                            (begin
                                (print "take down that barrier, chief!")
                                (sleep (ai_play_line_on_object none 030ml_040))
                                (vs_release_all)
                            )
                        )
                        (if (= s_exit_generator_dialog 1)
                            (if (> (object_get_health "exit_generator") 0)
                                (begin
                                    (print "power source is in the tunnel!")
                                    (sleep (ai_play_line_on_object none 030ml_050))
                                    (vs_release_all)
                                )
                            )
                            (if (= s_exit_generator_dialog 2)
                                (if (> (object_get_health "exit_generator") 0)
                                    (begin
                                        (print "chief, take down that barrier!")
                                        (sleep (ai_play_line_on_object none 030ml_060))
                                        (vs_release_all)
                                    )
                                )
                                (if (= s_exit_generator_dialog 0)
                                    (if (> (object_get_health "exit_generator") 0)
                                        (begin
                                            (print "check the tunnel for the power-source")
                                            (sleep (ai_play_line_on_object none 030ml_070))
                                            (vs_release_all)
                                        )
                                    )
                                )
                            )
                        )
                    )
                    (sleep 1800)
                )
            )
            (<= (object_get_health "exit_generator") 0)
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void sc_exit_brute_flavor_01
    (sleep_until (>= (ai_task_count "obj_exit_cov/fg_jg_front") 1))
    (vs_cast "sg_exit_cov_front" true 50 "030mx_210")
    (set act_exit_brute01 (vs_role 1))
    (set b_exit_brute (random_range 0 1))
    (if (= b_exit_brute false)
        (print "brute:  give your lives for the prophet!")
        (vs_play_line act_exit_brute01 true 030mx_210)
        (sleep 10)
        (if (= b_exit_brute true)
            (print "brute:  the demon must not pass!")
            (vs_play_line act_exit_brute01 true 030mx_220)
            (sleep 10)
        )
    )
    (vs_release_all)
)

(script dormant void sc_exit_johnson_flavor
    (sleep (random_range 10 30))
    (ai_dialogue_enable false)
    (print "johnson: chief!  the gate to voi is dead ahead!")
    (sleep (ai_play_line_on_object none 030mx_180))
    (print "johnson: smash the brute blockade!  open her up!")
    (sleep (ai_play_line_on_object none 030mx_190))
    (ai_dialogue_enable true)
)

(script dormant void sc_exit_brute_flavor_02
    (sleep_until (>= (ai_task_count "obj_exit_cov/sg_fallback") 1))
    (vs_cast "sq_exit_brute06/01" true 50 "030mx_200")
    (set act_exit_brute02 (vs_role 1))
    (vs_abort_on_damage true)
    (print "brute:  guard the entrance, pack-brothers!")
    (vs_play_line act_exit_brute02 true 030mx_200)
    (sleep 10)
    (vs_release_all)
)

(script dormant void sc_exit_navpoint
    (sleep_until (and (= (volume_test_object "tv_exit_enemy_check" (ai_get_object "sg_exit_cov")) false) (= (volume_test_object "tv_exit_enemy_check2" (ai_get_object "sg_exit_cov")) false) (= (ai_living_count "sq_exit_shade01") 0)))
    (sleep 1800)
    (hud_activate_team_nav_point_flag player "exit_navpoint" 0.55)
    (sleep_until (<= (object_get_health "exit_generator") 0) 1)
    (sleep 1)
    (hud_deactivate_team_nav_point_flag player "exit_navpoint")
)

(script dormant void sc_exit_truth
    (object_create_anew "exit_truth_biped")
    (object_create_anew "exit_truth_throne")
    (object_create_anew "exit_truth_battery")
    (objects_attach "exit_truth_battery" "attach_marker" "exit_truth_biped" "")
    (objects_attach "exit_truth_biped" "driver" "exit_truth_throne" "driver")
    (sleep_until (volume_test_players "tv_exit_truth"))
    (gs_exit_truth_flicker)
    (object_hide "exit_truth_biped" false)
    (object_hide "exit_truth_throne" false)
    (unit_limit_lipsync_to_mouth_only "exit_truth_biped" true)
    (sleep 15)
    (print "stopping music")
    (set b_exit_truth_speaks true)
    (if (> (object_get_health "exit_truth_battery") 0)
        (begin
            (custom_animation "exit_truth_biped" "objects\characters\truth\cinematics\truth_holos\030_truth_a\030_truth_a.model_animation_graph" "030_cin_truth" true)
            (sound_impulse_start "sound\dialog\030_outskirts\mission\030mz_060_pot" "exit_truth_biped" 1)
            (sleep (sound_impulse_language_time "sound\dialog\030_outskirts\mission\030mz_060_pot"))
            (sleep 30)
        )
    )
    (if (> (object_get_health "exit_truth_battery") 0)
        (begin
            (custom_animation "exit_truth_biped" "objects\characters\truth\cinematics\truth_holos\030_truth_a\030_truth_a.model_animation_graph" "030_cin_truth2" true)
            (sound_impulse_start "sound\dialog\030_outskirts\mission\030mz_070_pot" "exit_truth_biped" 1)
            (sleep (sound_impulse_language_time "sound\dialog\030_outskirts\mission\030mz_070_pot"))
            (sleep 30)
        )
    )
    (if (> (object_get_health "exit_truth_battery") 0)
        (begin
            (custom_animation "exit_truth_biped" "objects\characters\truth\cinematics\truth_holos\030_truth_b\030_truth_b.model_animation_graph" "030_cin_truth" true)
            (sound_impulse_start "sound\dialog\030_outskirts\mission\030mz_080_pot" "exit_truth_biped" 1)
            (sleep (sound_impulse_language_time "sound\dialog\030_outskirts\mission\030mz_080_pot"))
            (sleep 30)
        )
    )
    (gs_exit_truth_flicker)
    (object_destroy "exit_truth_biped")
    (object_destroy "exit_truth_throne")
)

(script dormant void sc_bridge_perspective
    (perspective_start)
    (camera_set "cam_bridge" 0)
    (sleep 30)
    (fade_in 0 0 0 15)
    (if (= (volume_test_object "tv_bridge_oc5" (player0)) true)
        (unit_exit_vehicle (unit (player0)))
    )
    (if (= (volume_test_object "tv_bridge_oc5" (player1)) true)
        (unit_exit_vehicle (unit (player1)))
    )
    (if (= (volume_test_object "tv_bridge_oc5" (player2)) true)
        (unit_exit_vehicle (unit (player2)))
    )
    (if (= (volume_test_object "tv_bridge_oc5" (player3)) true)
        (unit_exit_vehicle (unit (player3)))
    )
    (sleep 150)
    (fade_out 0 0 0 15)
    (sleep 15)
    (perspective_stop)
)

(script dormant void sc_exit_ending_cinematic
    (data_mine_set_mission_segment "030la_highway")
    (campaign_metagame_time_pause true)
    (cinematic_fade_to_black)
    (game_award_level_complete_achievements)
    (sleep 1)
    (object_hide (player0) true)
    (object_hide (player1) true)
    (object_hide (player2) true)
    (object_hide (player3) true)
    (object_teleport (player0) "player0_safelocation")
    (object_teleport (player1) "player1_safelocation")
    (object_teleport (player2) "player2_safelocation")
    (object_teleport (player3) "player3_safelocation")
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (print "end cinematic")
            (camera_control false)
            (camera_control true)
            (cinematic_start)
            (set cinematic_letterbox_style 2)
            (cinematic_show_letterbox_immediate true)
            (030la_highway)
        )
    )
    (cinematic_skip_stop)
    (cinematic_stop)
    (sound_class_set_gain "" 0 0)
    (030la_highway_cleanup)
    (player_enable_input true)
    (player_camera_control true)
    (sleep 1)
    (end_mission)
)

(script static boolean obj_esecon_0_2
    (= b_elev_mountup true)
)

(script static boolean obj_ethird_0_6
    (>= s_elevator_obj_control 3)
)

(script static boolean obj_cmine__2_0
    (>= s_cavern_obj_control 1)
)

(script static boolean obj_cmine__2_1
    (>= s_cavern_obj_control 2)
)

(script static boolean obj_cmine__2_2
    (>= s_cavern_obj_control 3)
)

(script static boolean obj_cmine__2_3
    (>= s_cavern_obj_control 4)
)

(script static boolean obj_cmine__2_5
    (>= s_cavern_obj_control 5)
)

(script static boolean obj_cplaye_2_6
    (= player_on_foot true)
)

(script static boolean obj_ctv_fo_2_8
    (>= s_cavern_obj_control 2)
)

(script static boolean obj_ctv_fo_2_9
    (>= s_cavern_obj_control 3)
)

(script static boolean obj_ctv_fo_2_10
    (>= s_cavern_obj_control 6)
)

(script static boolean obj_cmine__2_11
    (= player_on_foot false)
)

(script static boolean obj_cnot_m_2_12
    (= player_on_foot false)
)

(script static boolean obj_cmine__2_14
    (>= s_cavern_obj_control 6)
)

(script static boolean obj_cnm_oc_2_15
    (>= s_cavern_obj_control 1)
)

(script static boolean obj_cnm_oc_2_16
    (>= s_cavern_obj_control 2)
)

(script static boolean obj_cnm_oc_2_17
    (>= s_cavern_obj_control 3)
)

(script static boolean obj_cnm_oc_2_18
    (>= s_cavern_obj_control 4)
)

(script static boolean obj_cnm_oc_2_19
    (>= s_cavern_obj_control 5)
)

(script static boolean obj_cnm_oc_2_20
    (>= s_cavern_obj_control 6)
)

(script static boolean obj_cmine__2_21
    (>= s_cavern_obj_control 7)
)

(script static boolean obj_cnm_oc_2_22
    (>= s_cavern_obj_control 7)
)

(script static boolean obj_ctv_fo_2_27
    (>= s_cavern_obj_control 7)
)

(script static boolean obj_cend_f_2_28
    (= (ai_task_count "obj_cav_cov/main_gate") 0)
)

(script static boolean obj_doc_4_5_0
    (>= s_drive_obj_control 4)
)

(script static boolean obj_doc_7_5_1
    (>= s_drive_obj_control 7)
)

(script static boolean obj_doc_5_5_2
    (>= s_drive_obj_control 5)
)

(script static boolean obj_doc_6_5_3
    (>= s_drive_obj_control 6)
)

(script static boolean obj_dplaye_5_4
    (= player_on_foot true)
)

(script static boolean obj_dfoot__5_5
    (>= s_drive_obj_control 4)
)

(script static boolean obj_dfoot__5_6
    (>= s_drive_obj_control 5)
)

(script static boolean obj_dfoot__5_7
    (>= s_drive_obj_control 6)
)

(script static boolean obj_dwart__5_8
    (= (ai_task_count "obj_drive2_cov/main") 0)
)

(script static boolean obj_dfoot__5_9
    (>= s_drive_obj_control 7)
)

(script static boolean obj_dfoot__5_10
    (>= s_drive_obj_control 3)
)

(script static boolean obj_dmine__5_11
    (= player_on_foot false)
)

(script static boolean obj_dmg_in_5_13
    (= (ai_task_count "obj_drive_cov/mg_front_gate") 0)
)

(script static boolean obj_dmg_in_5_14
    (= (ai_task_count "obj_drive_cov/main_gate") 0)
)

(script static boolean obj_psnipe_6_3
    (<= s_pond_obj_control 1)
)

(script static boolean obj_psnipe_6_4
    (>= s_pond_obj_control 3)
)

(script static boolean obj_pwatch_6_6
    (<= s_pond_obj_control 1)
)

(script static boolean obj_pleft__6_9
    (<= s_pond_obj_control 1)
)

(script static boolean obj_pback__6_13
    (<= s_pond_obj_control 1)
)

(script static boolean obj_pmiddl_6_14
    (<= s_pond_obj_control 1)
)

(script static boolean obj_pright_6_15
    (<= s_pond_obj_control 1)
)

(script static boolean obj_pfg_fo_6_19
    (<= s_pond_obj_control 3)
)

(script static boolean obj_pfg_mi_6_20
    (<= s_pond_obj_control 3)
)

(script static boolean obj_pfg_ex_6_22
    (>= s_pond_obj_control 3)
)

(script static boolean obj_pfg_br_6_23
    (>= s_pond_obj_control 3)
)

(script static boolean obj_phill__7_1
    (= (ai_task_count "obj_pond_cov/forward_gate") 0)
)

(script static boolean obj_pend_7_2
    (= (ai_task_count "obj_pond_cov/fallback_gate") 0)
)

(script static boolean obj_ppond__7_3
    (>= s_pond_obj_control 2)
)

(script static boolean obj_ppond__7_4
    (>= s_pond_obj_control 1)
)

(script static boolean obj_pplaye_7_5
    (= player_on_foot false)
)

(script static boolean obj_pplaye_7_6
    (= player_on_foot true)
)

(script static boolean obj_pround_7_8
    (>= s_pond_obj_control 2)
)

(script static boolean obj_phill_7_9
    (>= s_pond_obj_control 3)
)

(script static boolean obj_pexit_7_10
    (>= s_pond_obj_control 6)
)

(script static boolean obj_phill__7_11
    (= (ai_task_count "obj_pond_cov/fg_forward") 0)
)

(script static boolean obj_pforwa_7_13
    (>= s_pond_obj_control 3)
)

(script static boolean obj_csg_le_8_5
    (= (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_csg_ri_8_6
    (>= (ai_body_count "obj_crash_cov/main_gate") 4)
)

(script static boolean obj_ciniti_8_8
    (<= s_crash_obj_control 2)
)

(script static boolean obj_cig_le_8_9
    (< s_crash_obj_control 2)
)

(script static boolean obj_cig_ri_8_11
    (< s_crash_obj_control 2)
)

(script static boolean obj_cig_ba_8_13
    (< s_crash_obj_control 2)
)

(script static boolean obj_ctg_fa_8_22
    (<= (ai_task_count "obj_crash_cov/third_gate") 5)
)

(script static boolean obj_cig_mi_8_25
    (< s_crash_obj_control 2)
)

(script static boolean obj_cpg_se_9_1
    (= (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_cpg_th_9_2
    (= (ai_task_count "obj_crash_cov/second_gate") 0)
)

(script static boolean obj_cpg_en_9_3
    (= (ai_task_count "obj_crash_cov/main_gate") 0)
)

(script static boolean obj_cpg_fi_9_4
    (> (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_cplaye_9_5
    (= player_on_foot false)
)

(script static boolean obj_cplaye_9_6
    (= player_on_foot true)
)

(script static boolean obj_cfg_en_9_7
    (= (ai_task_count "obj_crash_cov/main_gate") 0)
)

(script static boolean obj_cfg_th_9_8
    (= (ai_task_count "obj_crash_cov/second_gate") 0)
)

(script static boolean obj_cfg_se_9_9
    (= (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_cfg_fi_9_11
    (> (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_cfourt_9_13
    (<= (ai_task_count "obj_crash_cov/main_gate") 3)
)

(script static boolean obj_cthird_9_14
    (= (ai_task_count "obj_crash_cov/second_gate") 0)
)

(script static boolean obj_csecon_9_16
    (= (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_cnot_m_9_17
    (= player_on_foot false)
)

(script static boolean obj_cnm_fi_9_19
    (> (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_cnm_se_9_20
    (= (ai_task_count "obj_crash_cov/initial_gate") 0)
)

(script static boolean obj_cnm_th_9_21
    (= (ai_task_count "obj_crash_cov/second_gate") 0)
)

(script static boolean obj_cnm_en_9_22
    (= (ai_task_count "obj_crash_cov/main_gate") 0)
)

(script static boolean obj_bgg_fr_10_2
    (< s_bridge_obj_control 2)
)

(script static boolean obj_bgg_mi_10_3
    (= s_bridge_obj_control 2)
)

(script static boolean obj_bgg_en_10_4
    (> s_bridge_obj_control 2)
)

(script static boolean obj_bback__10_10
    (>= s_bridge_obj_control 3)
)

(script static boolean obj_bpv_se_11_1
    (>= s_bridge_obj_control 1)
)

(script static boolean obj_bpv_th_11_2
    (>= s_bridge_obj_control 2)
)

(script static boolean obj_bpv_fo_11_3
    (>= s_bridge_obj_control 3)
)

(script static boolean obj_bplaye_11_4
    (= player_on_foot false)
)

(script static boolean obj_bplaye_11_5
    (= player_on_foot true)
)

(script static boolean obj_bfg_fo_11_6
    (>= s_bridge_obj_control 4)
)

(script static boolean obj_bfg_th_11_7
    (>= s_bridge_obj_control 3)
)

(script static boolean obj_bfg_se_11_8
    (>= s_bridge_obj_control 2)
)

(script static boolean obj_bfg_fi_11_10
    (>= s_bridge_obj_control 5)
)

(script static boolean obj_bpv_si_11_11
    (>= s_bridge_obj_control 5)
)

(script static boolean obj_bnot_m_11_12
    (= player_on_foot false)
)

(script static boolean obj_bnm_se_11_14
    (>= s_bridge_obj_control 1)
)

(script static boolean obj_bnm_th_11_15
    (>= s_bridge_obj_control 2)
)

(script static boolean obj_bnm_fo_11_16
    (>= s_bridge_obj_control 3)
)

(script static boolean obj_bnm_si_11_17
    (>= s_bridge_obj_control 5)
)

(script static boolean obj_bpv_fi_11_19
    (>= s_bridge_obj_control 4)
)

(script static boolean obj_bnm_fi_11_20
    (>= s_bridge_obj_control 4)
)

(script static boolean obj_giniti_12_0
    (= s_garage_gate_latch 0)
)

(script static boolean obj_gwg_fo_12_3
    (= s_garage_wraith 2)
)

(script static boolean obj_gig_ch_12_5
    (or (>= s_garage_obj_control 3) (= (ai_task_count "obj_garage_cov/door_gate") 0))
)

(script static boolean obj_gig_je_12_9
    (<= s_garage_obj_control 1)
)

(script static boolean obj_gwg_mi_12_10
    (>= s_garage_wraith 1)
)

(script static boolean obj_gig_dg_12_17
    (>= (ai_task_count "obj_garage_marine/hold_out") 1)
)

(script static boolean obj_gig_hg_12_18
    (>= s_garage_obj_control 4)
)

(script static boolean obj_gig_ch_12_19
    (<= (ai_task_count "obj_garage_cov/initial_gate") 4)
)

(script static boolean obj_gassau_12_20
    (= s_garage_gate_latch 1)
)

(script static boolean obj_gag_ch_12_21
    (<= (ai_task_count "obj_garage_cov/ag_forward_gate") 4)
)

(script static boolean obj_gsnipe_12_25
    (= b_garage_sniping true)
)

(script static boolean obj_gig_dg_12_28
    (>= (ai_task_count "obj_garage_marine/hold_out") 1)
)

(script static boolean obj_gig_hg_12_30
    (= b_garage_sniping true)
)

(script static boolean obj_gag_en_12_34
    (= (ai_task_count "obj_garage_cov/wraith_gate") 0)
)

(script static boolean obj_gag_ch_12_35
    (<= (ai_task_count "obj_garage_cov/ag_forward_gate") 4)
)

(script static boolean obj_gthird_12_36
    (= s_garage_gate_latch 2)
)

(script static boolean obj_ghold__13_2
    (and (>= (ai_task_count "obj_garage_cov/door_gate") 1) (<= s_garage_obj_control 1))
)

(script static boolean obj_gtop_o_13_4
    (<= s_garage_obj_control 3)
)

(script static boolean obj_grun_u_13_5
    (= s_garage_gate_latch 0)
)

(script static boolean obj_gru_se_13_6
    (or (volume_test_players "tv_garage_02b") (>= s_garage_obj_control 2))
)

(script static boolean obj_gru_th_13_7
    (<= (ai_task_count "obj_garage_cov/ig_rg_forward") 2)
)

(script static boolean obj_gru_fo_13_8
    (<= (ai_task_count "obj_garage_cov/road_gate") 1)
)

(script static boolean obj_gru_fi_13_9
    (<= (ai_task_count "obj_garage_cov/hill_gate") 1)
)

(script static boolean obj_gru_si_13_10
    (= (ai_task_count "obj_garage_cov/main_gate") 0)
)

(script static boolean obj_gdefen_13_11
    (>= s_garage_gate_latch 1)
)

(script static boolean obj_gdg_fo_13_13
    (= s_garage_wraith 2)
)

(script static boolean obj_gdg_en_13_14
    (= b_garage_marine_latch true)
)

(script static boolean obj_giniti_13_15
    (= s_garage_gate_latch 0)
)

(script static boolean obj_tmg_vg_14_5
    (= s_tether_obj_control 0)
)

(script static boolean obj_tmg_ig_14_8
    (= s_tether_obj_control 0)
)

(script static boolean obj_tplaye_15_0
    (= player_on_foot false)
)

(script static boolean obj_tnot_m_15_1
    (= player_on_foot false)
)

(script static boolean obj_tplaye_15_2
    (= player_on_foot true)
)

(script static boolean obj_tpv_do_15_3
    (>= (ai_task_count "obj_tether_cov/mg_vg_pd_lower") 1)
)

(script static boolean obj_tpv_ma_15_4
    (>= (ai_task_count "obj_tether_cov/mg_no_sniper") 1)
)

(script static boolean obj_tnm_do_15_5
    (>= (ai_task_count "obj_tether_cov/mg_vg_pd_lower") 1)
)

(script static boolean obj_tnm_ma_15_6
    (>= (ai_task_count "obj_tether_cov/mg_no_sniper") 1)
)

(script static boolean obj_tfg_do_15_7
    (>= (ai_task_count "obj_tether_cov/mg_vg_pd_lower") 1)
)

(script static boolean obj_tfg_ma_15_8
    (>= (ai_task_count "obj_tether_cov/mg_no_sniper") 1)
)

(script static boolean obj_rcg_le_16_3
    (> (ai_task_count "obj_round_cov/cg_forward") 0)
)

(script static boolean obj_rcg_ri_16_8
    (> (ai_task_count "obj_round_cov/cg_forward") 0)
)

(script static boolean obj_rig_ch_16_10
    (<= s_round_obj_control 1)
)

(script static boolean obj_rwg_hi_16_12
    (>= s_round_obj_control 2)
)

(script static boolean obj_rwg_do_16_13
    (>= s_round_obj_control 2)
)

(script static boolean obj_rwg_ri_16_20
    (>= (ai_task_count "obj_round_cov/wg_overflow_01") 1)
)

(script static boolean obj_rwg_wr_16_22
    (<= (ai_task_count "obj_round_cov/wg_ini_back") 0)
)

(script static boolean obj_rwg_ov_16_23
    (or (<= (ai_task_count "obj_round_cov/wg_ini_back") 0) (<= (ai_task_count "obj_round_cov/wg_ini_hill") 0))
)

(script static boolean obj_rwg_ov_16_24
    (and (<= (ai_task_count "obj_round_cov/wg_ini_back") 0) (<= (ai_task_count "obj_round_cov/wg_ini_hill") 0))
)

(script static boolean obj_rbridg_16_25
    (>= s_exit_obj_control 1)
)

(script static boolean obj_rcg_mi_16_26
    (and (>= s_round_obj_control 2) (= (ai_task_count "obj_round_cov/cg_forward") 0))
)

(script static boolean obj_rpv_fi_18_1
    (>= s_round_obj_control 1)
)

(script static boolean obj_rplaye_18_2
    (= player_on_foot false)
)

(script static boolean obj_rnot_m_18_3
    (= player_on_foot false)
)

(script static boolean obj_rimg_h_18_8
    (>= (ai_task_count "obj_round_cov_hold/hg_initial") 1)
)

(script static boolean obj_rpv_se_18_9
    (= (ai_task_count "obj_round_cov_hold/hg_initial") 0)
)

(script static boolean obj_rpv_th_18_10
    (= (ai_task_count "obj_round_cov/main_gate") 0)
)

(script static boolean obj_rpv_fo_18_11
    (>= s_round_obj_control 3)
)

(script static boolean obj_rnm_fi_18_12
    (>= s_round_obj_control 1)
)

(script static boolean obj_rnm_se_18_13
    (>= s_round_obj_control 2)
)

(script static boolean obj_rnm_th_18_14
    (= (ai_task_count "obj_round_cov/main_gate") 0)
)

(script static boolean obj_rnm_fo_18_15
    (>= s_round_obj_control 3)
)

(script static boolean obj_rfg_se_18_16
    (>= s_round_obj_control 2)
)

(script static boolean obj_rfg_fi_18_17
    (>= s_round_obj_control 1)
)

(script static boolean obj_rfg_hi_18_18
    (= (ai_task_count "obj_round_cov/main_gate") 0)
)

(script static boolean obj_rfg_ex_18_19
    (>= s_round_obj_control 3)
)

(script static boolean obj_rimg_s_18_23
    (<= s_round_obj_control 1)
)

(script static boolean obj_eforwa_19_1
    (<= s_exit_obj_control 4)
)

(script static boolean obj_esg_fa_19_7
    (<= (ai_task_count "obj_exit_cov/second_gate") 3)
)

(script static boolean obj_esg_ch_19_15
    (<= s_exit_obj_control 5)
)

(script static boolean obj_efg_jg_19_19
    (= (ai_task_count "obj_exit_cov/fg_fg_front") 0)
)

(script static boolean obj_efg_jg_19_21
    (= (ai_task_count "obj_exit_cov/fg_fg_fallback") 0)
)

(script static boolean obj_efg_jg_19_23
    (>= s_exit_obj_control 7)
)

(script static boolean obj_esg_pl_19_24
    (>= s_exit_obj_control 7)
)

(script static boolean obj_evg_fi_20_1
    (>= s_exit_obj_control 2)
)

(script static boolean obj_evg_se_20_2
    (= (ai_task_count "obj_exit_cov/fg_fg_front") 0)
)

(script static boolean obj_evg_th_20_3
    (= (ai_task_count "obj_exit_cov/fg_fg_mid") 0)
)

(script static boolean obj_evg_fo_20_4
    (= (ai_task_count "obj_exit_cov/fg_fg_fallback") 0)
)

(script static boolean obj_evg_fi_20_5
    (= (ai_task_count "obj_exit_cov/sg_forward") 0)
)

(script static boolean obj_evg_si_20_6
    (= (ai_task_count "obj_exit_cov/second_gate") 0)
)

(script static boolean obj_evehic_20_7
    (= player_on_foot false)
)

(script static boolean obj_efg_fi_20_9
    (>= s_exit_obj_control 2)
)

(script static boolean obj_efg_se_20_10
    (= (ai_task_count "obj_exit_cov/fg_fg_front") 0)
)

(script static boolean obj_efg_th_20_11
    (= (ai_task_count "obj_exit_cov/fg_fg_mid") 0)
)

(script static boolean obj_efg_fo_20_12
    (= (ai_task_count "obj_exit_cov/fg_fg_fallback") 0)
)

(script static boolean obj_efg_fi_20_13
    (= (ai_task_count "obj_exit_cov/sg_forward") 0)
)

(script static boolean obj_efg_si_20_14
    (= (ai_task_count "obj_exit_cov/second_gate") 0)
)

(script static void ins_elevator
    (if b_debug
        (print "inspoint: elevator")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "ab")
            (sleep 1)
        )
    )
    (sleep 1)
    (insertion_start)
    (player0_set_pitch -5 0)
    (player1_set_pitch -5 0)
    (player2_set_pitch -5 0)
    (player3_set_pitch -5 0)
    (set s_insertion_index 1)
)

(script static void ins_cavern
    (if b_debug
        (print "inspoint: cavern")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "ab")
            (sleep 1)
        )
    )
    (set s_insertion_index 2)
    (set s_elevator_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_cavern_ins_mar")
        (ai_place "sq_cavern_ins_wart_troop/warttroop")
        (object_teleport (player0) "player0_cavern")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_cavern_ins_wart_troop/warttroop") 41 (ai_get_object "sq_cavern_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_cavern_ins_wart_troop/warttroop") 43 (ai_get_object "sq_cavern_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_cavern_ins_wart_troop/warttroop") 44 (ai_get_object "sq_cavern_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_cavern_ins_wart_troop/warttroop") 45 (ai_get_object "sq_cavern_ins_mar/04"))
        (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_cavern_ins_mar/01")
            (ai_place "sq_cavern_ins_mar/02")
            (sleep 1)
            (ai_place "sq_cavern_ins_wart1/wart1")
            (ai_place "sq_cavern_ins_wart2/wart2")
            (object_teleport (player0) "player0_cavern")
            (object_teleport (player1) "player1_cavern")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_cavern_ins_wart1/wart1") 46 (ai_get_object "sq_cavern_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_cavern_ins_wart2/wart2") 46 (ai_get_object "sq_cavern_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_cavern_ins_mar/01")
                (sleep 1)
                (ai_place "sq_cavern_ins_wart1/wart1")
                (ai_place "sq_cavern_ins_wart2/wart2")
                (object_teleport (player0) "player0_cavern")
                (object_teleport (player1) "player1_cavern")
                (object_teleport (player2) "player2_cavern")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_cavern_ins_wart2/wart2") 46 (ai_get_object "sq_cavern_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_cavern_ins_wart1/wart1")
                    (ai_place "sq_cavern_ins_wart2/wart2")
                    (object_teleport (player0) "player0_cavern")
                    (object_teleport (player1) "player1_cavern")
                    (object_teleport (player2) "player2_cavern")
                    (object_teleport (player3) "player3_cavern")
                    (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_drive
    (if b_debug
        (print "inspoint: drive")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "bc")
            (sleep 1)
        )
    )
    (set s_insertion_index 3)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (device_set_position_immediate "cavern_exit" 0.63)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_drive_ins_mar")
        (ai_place "sq_drive_ins_wart_troop/warttroop")
        (object_teleport (player0) "player0_drive")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart_troop/warttroop") 41 (ai_get_object "sq_drive_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart_troop/warttroop") 43 (ai_get_object "sq_drive_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart_troop/warttroop") 44 (ai_get_object "sq_drive_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart_troop/warttroop") 45 (ai_get_object "sq_drive_ins_mar/04"))
        (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_drive_ins_mar/01")
            (ai_place "sq_drive_ins_mar/02")
            (sleep 1)
            (ai_place "sq_drive_ins_wart1/wart1")
            (ai_place "sq_drive_ins_wart2/wart2")
            (object_teleport (player0) "player0_drive")
            (object_teleport (player1) "player1_drive")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 46 (ai_get_object "sq_drive_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 46 (ai_get_object "sq_drive_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_drive_ins_mar/01")
                (sleep 1)
                (ai_place "sq_drive_ins_wart1/wart1")
                (ai_place "sq_drive_ins_wart2/wart2")
                (object_teleport (player0) "player0_drive")
                (object_teleport (player1) "player1_drive")
                (object_teleport (player2) "player2_drive")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 46 (ai_get_object "sq_drive_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_drive_ins_wart1/wart1")
                    (ai_place "sq_drive_ins_wart2/wart2")
                    (object_teleport (player0) "player0_drive")
                    (object_teleport (player1) "player1_drive")
                    (object_teleport (player2) "player2_drive")
                    (object_teleport (player3) "player3_drive")
                    (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_pond
    (if b_debug
        (print "inspoint: pond")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "cd")
            (sleep 1)
        )
    )
    (set s_insertion_index 4)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_pond_ins_mar")
        (ai_place "sq_pond_ins_wart_troop/warttroop")
        (object_teleport (player0) "player0_pond")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart_troop/warttroop") 41 (ai_get_object "sq_pond_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart_troop/warttroop") 43 (ai_get_object "sq_pond_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart_troop/warttroop") 44 (ai_get_object "sq_pond_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart_troop/warttroop") 45 (ai_get_object "sq_pond_ins_mar/04"))
        (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_pond_ins_mar/01")
            (ai_place "sq_pond_ins_mar/02")
            (sleep 1)
            (ai_place "sq_pond_ins_wart1/wart1")
            (ai_place "sq_pond_ins_wart2/wart2")
            (object_teleport (player0) "player0_pond")
            (object_teleport (player1) "player1_pond")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 46 (ai_get_object "sq_pond_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 46 (ai_get_object "sq_pond_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_pond_ins_mar/01")
                (sleep 1)
                (ai_place "sq_pond_ins_wart1/wart1")
                (ai_place "sq_pond_ins_wart2/wart2")
                (object_teleport (player0) "player0_pond")
                (object_teleport (player1) "player1_pond")
                (object_teleport (player2) "player2_pond")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 46 (ai_get_object "sq_pond_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_pond_ins_wart1/wart1")
                    (ai_place "sq_pond_ins_wart2/wart2")
                    (object_teleport (player0) "player0_pond")
                    (object_teleport (player1) "player1_pond")
                    (object_teleport (player2) "player2_pond")
                    (object_teleport (player3) "player3_pond")
                    (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_crash
    (if b_debug
        (print "inspoint: crash")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "cd")
            (sleep 1)
        )
    )
    (set s_insertion_index 5)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_crash_ins_mar")
        (ai_place "sq_crash_ins_wart_troop/warttroop")
        (object_teleport (player0) "player0_crash")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart_troop/warttroop") 41 (ai_get_object "sq_crash_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart_troop/warttroop") 43 (ai_get_object "sq_crash_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart_troop/warttroop") 44 (ai_get_object "sq_crash_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart_troop/warttroop") 45 (ai_get_object "sq_crash_ins_mar/04"))
        (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_crash_ins_mar/01")
            (ai_place "sq_crash_ins_mar/02")
            (sleep 1)
            (ai_place "sq_crash_ins_wart1/wart1")
            (ai_place "sq_crash_ins_wart2/wart2")
            (object_teleport (player0) "player0_crash")
            (object_teleport (player1) "player1_crash")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 46 (ai_get_object "sq_crash_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 46 (ai_get_object "sq_crash_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_crash_ins_mar/01")
                (sleep 1)
                (ai_place "sq_crash_ins_wart1/wart1")
                (ai_place "sq_crash_ins_wart2/wart2")
                (object_teleport (player0) "player0_crash")
                (object_teleport (player1) "player1_crash")
                (object_teleport (player2) "player2_crash")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 46 (ai_get_object "sq_crash_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_crash_ins_wart1/wart1")
                    (ai_place "sq_crash_ins_wart2/wart2")
                    (object_teleport (player0) "player0_crash")
                    (object_teleport (player1) "player1_crash")
                    (object_teleport (player2) "player2_crash")
                    (object_teleport (player3) "player3_crash")
                    (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_bridge
    (if b_debug
        (print "inspoint: bridge")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "de")
            (sleep 1)
        )
    )
    (set s_insertion_index 6)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (set s_crash_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_bridge_ins_mar")
        (ai_place "sq_bridge_ins_wart_troop/warttroop")
        (object_teleport (player0) "player0_bridge")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_bridge_ins_wart_troop/warttroop") 41 (ai_get_object "sq_bridge_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_bridge_ins_wart_troop/warttroop") 43 (ai_get_object "sq_bridge_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_bridge_ins_wart_troop/warttroop") 44 (ai_get_object "sq_bridge_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_bridge_ins_wart_troop/warttroop") 45 (ai_get_object "sq_bridge_ins_mar/04"))
        (ai_set_objective "sg_allied_vehicles" "obj_bridge_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_bridge_ins_mar/01")
            (ai_place "sq_bridge_ins_mar/02")
            (sleep 1)
            (ai_place "sq_bridge_ins_wart1/wart1")
            (ai_place "sq_bridge_ins_wart2/wart2")
            (object_teleport (player0) "player0_bridge")
            (object_teleport (player1) "player1_bridge")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_bridge_ins_wart1/wart1") 46 (ai_get_object "sq_bridge_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_bridge_ins_wart2/wart2") 46 (ai_get_object "sq_bridge_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_bridge_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_bridge_ins_mar/01")
                (sleep 1)
                (ai_place "sq_bridge_ins_wart1/wart1")
                (ai_place "sq_bridge_ins_wart2/wart2")
                (object_teleport (player0) "player0_bridge")
                (object_teleport (player1) "player1_bridge")
                (object_teleport (player2) "player2_bridge")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_bridge_ins_wart2/wart2") 46 (ai_get_object "sq_bridge_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_bridge_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_bridge_ins_wart1/wart1")
                    (ai_place "sq_bridge_ins_wart2/wart2")
                    (object_teleport (player0) "player0_bridge")
                    (object_teleport (player1) "player1_bridge")
                    (object_teleport (player2) "player2_bridge")
                    (object_teleport (player3) "player3_bridge")
                    (ai_set_objective "sg_allied_vehicles" "obj_bridge_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_garage
    (if b_debug
        (print "inspoint: garage")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "ef")
            (sleep 1)
        )
    )
    (set s_insertion_index 7)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (set s_crash_obj_control 100)
    (set s_bridge_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (object_teleport (player0) "player0_garage")
    (object_teleport (player1) "player1_garage")
    (object_teleport (player2) "player2_garage")
    (object_teleport (player3) "player3_garage")
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_gathering_storm
    (if b_debug
        (print "inspoint: gathering storm")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "ef")
            (sleep 1)
        )
    )
    (sleep 1)
    (insertion_start)
    (set s_insertion_index 7)
    (wake 030_music_051_start)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (set s_crash_obj_control 100)
    (set s_bridge_obj_control 5)
    (object_teleport (player0) "player0_gathering")
    (object_teleport (player1) "player1_gathering")
    (object_teleport (player2) "player2_gathering")
    (object_teleport (player3) "player3_gathering")
    (wake sc_bridge_brief02_sound)
    (wake sc_bridge_title2_insertion)
    (wake sc_bridge_cruiser)
    (sleep 30)
    (fade_in 0 0 0 15)
)

(script static void ins_tether
    (if b_debug
        (print "inspoint: tether")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "de")
            (sleep 1)
        )
    )
    (set s_insertion_index 8)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (set s_crash_obj_control 100)
    (set s_bridge_obj_control 100)
    (set s_garage_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_tether_ins_mar")
        (ai_place "sq_tether_ins_wart1/wart1")
        (ai_place "sq_tether_ins_wart2/wart2")
        (object_teleport (player0) "player0_tether")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart1/wart1") 46 (ai_get_object "sq_tether_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart1/wart1") 41 (ai_get_object "sq_tether_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart2/wart2") 21 (ai_get_object "sq_tether_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart2/wart2") 41 (ai_get_object "sq_tether_ins_mar/04"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart2/wart2") 43 (ai_get_object "sq_tether_ins_mar/05"))
        (ai_set_objective "sg_allied_vehicles" "obj_tether_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_tether_ins_mar/01")
            (ai_place "sq_tether_ins_mar/02")
            (sleep 1)
            (ai_place "sq_tether_ins_wart1/wart1")
            (ai_place "sq_tether_ins_wart3/wart3")
            (object_teleport (player0) "player0_tether")
            (object_teleport (player1) "player1_tether")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart1/wart1") 46 (ai_get_object "sq_tether_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart3/wart3") 46 (ai_get_object "sq_tether_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_tether_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_tether_ins_mar/01")
                (sleep 1)
                (ai_place "sq_tether_ins_wart1/wart1")
                (ai_place "sq_tether_ins_wart3/wart3")
                (object_teleport (player0) "player0_tether")
                (object_teleport (player1) "player1_tether")
                (object_teleport (player2) "player2_tether")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_tether_ins_wart3/wart3") 46 (ai_get_object "sq_tether_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_tether_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_tether_ins_wart1/wart1")
                    (ai_place "sq_tether_ins_wart2/wart2")
                    (object_teleport (player0) "player0_tether")
                    (object_teleport (player1) "player1_tether")
                    (object_teleport (player2) "player2_tether")
                    (object_teleport (player3) "player3_tether")
                    (ai_set_objective "sg_allied_vehicles" "obj_tether_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_round
    (if b_debug
        (print "inspoint: round")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "ef")
            (sleep 1)
        )
    )
    (set s_insertion_index 9)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (set s_crash_obj_control 100)
    (set s_bridge_obj_control 100)
    (set s_garage_obj_control 100)
    (set s_tether_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_round_ins_mar")
        (ai_place "sq_round_ins_wart1/wart1")
        (ai_place "sq_round_ins_wart2/wart2")
        (object_teleport (player0) "player0_round")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart1/wart1") 46 (ai_get_object "sq_round_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart1/wart1") 41 (ai_get_object "sq_round_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart2/wart2") 21 (ai_get_object "sq_round_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart2/wart2") 41 (ai_get_object "sq_round_ins_mar/04"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart2/wart2") 43 (ai_get_object "sq_round_ins_mar/05"))
        (ai_set_objective "sg_allied_vehicles" "obj_round_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_round_ins_mar/01")
            (ai_place "sq_round_ins_mar/02")
            (sleep 1)
            (ai_place "sq_round_ins_wart1/wart1")
            (ai_place "sq_round_ins_wart3/wart3")
            (object_teleport (player0) "player0_round")
            (object_teleport (player1) "player1_round")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart1/wart1") 46 (ai_get_object "sq_round_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart3/wart3") 46 (ai_get_object "sq_round_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_round_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_round_ins_mar/01")
                (sleep 1)
                (ai_place "sq_round_ins_wart1/wart1")
                (ai_place "sq_round_ins_wart3/wart3")
                (object_teleport (player0) "player0_round")
                (object_teleport (player1) "player1_round")
                (object_teleport (player2) "player2_round")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_round_ins_wart3/wart3") 46 (ai_get_object "sq_round_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_round_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_round_ins_wart1/wart1")
                    (ai_place "sq_round_ins_wart2/wart2")
                    (object_teleport (player0) "player0_round")
                    (object_teleport (player1) "player1_round")
                    (object_teleport (player2) "player2_round")
                    (object_teleport (player3) "player3_round")
                    (ai_set_objective "sg_allied_vehicles" "obj_round_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_exit
    (if b_debug
        (print "inspoint: exit")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "ef")
            (sleep 1)
        )
    )
    (set s_insertion_index 10)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (set s_crash_obj_control 100)
    (set s_bridge_obj_control 100)
    (set s_garage_obj_control 100)
    (set s_tether_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_exit_ins_mar")
        (ai_place "sq_exit_ins_wart1/wart1")
        (ai_place "sq_exit_ins_wart2/wart2")
        (object_teleport (player0) "player0_exit")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart1/wart1") 46 (ai_get_object "sq_exit_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart1/wart1") 41 (ai_get_object "sq_exit_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart2/wart2") 21 (ai_get_object "sq_exit_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart2/wart2") 41 (ai_get_object "sq_exit_ins_mar/04"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart2/wart2") 43 (ai_get_object "sq_exit_ins_mar/05"))
        (ai_set_objective "sg_allied_vehicles" "obj_exit_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_exit_ins_mar/01")
            (ai_place "sq_exit_ins_mar/02")
            (sleep 1)
            (ai_place "sq_exit_ins_wart1/wart1")
            (ai_place "sq_exit_ins_wart3/wart3")
            (object_teleport (player0) "player0_exit")
            (object_teleport (player1) "player1_exit")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart1/wart1") 46 (ai_get_object "sq_exit_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart3/wart3") 46 (ai_get_object "sq_exit_ins_mar/02"))
            (ai_set_objective "sg_allied_vehicles" "obj_exit_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_exit_ins_mar/01")
                (sleep 1)
                (ai_place "sq_exit_ins_wart1/wart1")
                (ai_place "sq_exit_ins_wart3/wart3")
                (object_teleport (player0) "player0_exit")
                (object_teleport (player1) "player1_exit")
                (object_teleport (player2) "player2_exit")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_ins_wart3/wart3") 46 (ai_get_object "sq_exit_ins_mar/01"))
                (ai_set_objective "sg_allied_vehicles" "obj_exit_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_exit_ins_wart1/wart1")
                    (ai_place "sq_exit_ins_wart2/wart2")
                    (object_teleport (player0) "player0_exit")
                    (object_teleport (player1) "player1_exit")
                    (object_teleport (player2) "player2_exit")
                    (object_teleport (player3) "player3_exit")
                    (ai_set_objective "sg_allied_vehicles" "obj_exit_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_video
    (if b_debug
        (print "inspoint: video")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "e")
            (sleep 1)
        )
    )
    (set s_insertion_index 7)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (set s_crash_obj_control 100)
    (set s_bridge_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (object_teleport (player0) "player0_garage")
    (object_teleport (player1) "player1_garage")
    (object_teleport (player2) "player2_garage")
    (object_teleport (player3) "player3_garage")
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_cavern_old
    (if b_debug
        (print "inspoint: cavern")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "ab")
            (sleep 1)
        )
    )
    (set s_insertion_index 2)
    (set s_elevator_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_elev_sarge/sarge")
        (ai_place "sq_elev_mar/01")
        (ai_place "sq_elev_mar/02")
        (ai_place "sq_elev_mar/03")
        (ai_place "sq_elev_warthog1/warthog1")
        (ai_place "sq_elev_warthog2/warthog2")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 21 (player0))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 46 (ai_get_object "sq_elev_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 41 (ai_get_object "sq_elev_sarge/sarge"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 21 (ai_get_object "sq_elev_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 46 (ai_get_object "sq_elev_mar/03"))
        (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "player0_cavern")
        (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "player1_cavern")
        (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_elev_sarge/sarge")
            (ai_place "sq_elev_mar/01")
            (ai_place "sq_elev_mar/02")
            (ai_place "sq_elev_mar/03")
            (ai_place "sq_elev_warthog1/warthog1")
            (ai_place "sq_elev_warthog2/warthog2")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 21 (player0))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 46 (ai_get_object "sq_elev_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 41 (ai_get_object "sq_elev_sarge/sarge"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 21 (player1))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 46 (ai_get_object "sq_elev_mar/02"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 41 (ai_get_object "sq_elev_mar/03"))
            (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "player0_cavern")
            (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "player1_cavern")
            (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_elev_sarge/sarge")
                (ai_place "sq_elev_mar/01")
                (ai_place "sq_elev_mar/02")
                (ai_place "sq_elev_warthog1/warthog1")
                (ai_place "sq_elev_warthog2/warthog2")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 21 (player0))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 46 (player2))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 41 (ai_get_object "sq_elev_sarge/sarge"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 21 (player1))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 46 (ai_get_object "sq_elev_mar/01"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 41 (ai_get_object "sq_elev_mar/02"))
                (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "player0_cavern")
                (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "player1_cavern")
                (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_elev_sarge/sarge")
                    (ai_place "sq_elev_mar/01")
                    (ai_place "sq_elev_warthog1/warthog1")
                    (ai_place "sq_elev_warthog2/warthog2")
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 21 (player0))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 46 (player2))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 41 (ai_get_object "sq_elev_sarge/sarge"))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 21 (player1))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 46 (player3))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") 41 (ai_get_object "sq_elev_mar/01"))
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") "player0_cavern")
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_elev_warthog2/warthog2") "player1_cavern")
                    (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_drive_old
    (if b_debug
        (print "inspoint: drive")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "bc")
            (sleep 1)
        )
    )
    (set s_insertion_index 3)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (device_set_position_immediate "cavern_exit" 0.63)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_drive_ins_mar/01")
        (ai_place "sq_drive_ins_mar/02")
        (ai_place "sq_drive_ins_mar/03")
        (ai_place "sq_drive_ins_mar/04")
        (ai_place "sq_drive_ins_wart1/wart1")
        (ai_place "sq_drive_ins_wart2/wart2")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 21 (player0))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 46 (ai_get_object "sq_drive_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 41 (ai_get_object "sq_drive_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 21 (ai_get_object "sq_drive_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 46 (ai_get_object "sq_drive_ins_mar/04"))
        (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") "player0_drive")
        (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") "player1_drive")
        (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_drive_ins_mar/01")
            (ai_place "sq_drive_ins_mar/02")
            (ai_place "sq_drive_ins_mar/03")
            (ai_place "sq_drive_ins_mar/04")
            (ai_place "sq_drive_ins_wart1/wart1")
            (ai_place "sq_drive_ins_wart2/wart2")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 21 (player0))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 46 (ai_get_object "sq_drive_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 41 (ai_get_object "sq_drive_ins_mar/02"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 21 (player1))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 46 (ai_get_object "sq_drive_ins_mar/03"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 41 (ai_get_object "sq_drive_ins_mar/04"))
            (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") "player0_drive")
            (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") "player1_drive")
            (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_drive_ins_mar/01")
                (ai_place "sq_drive_ins_mar/02")
                (ai_place "sq_drive_ins_mar/03")
                (ai_place "sq_drive_ins_wart1/wart1")
                (ai_place "sq_drive_ins_wart2/wart2")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 21 (player0))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 46 (player2))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 41 (ai_get_object "sq_drive_ins_mar/01"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 21 (player1))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 46 (ai_get_object "sq_drive_ins_mar/02"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 41 (ai_get_object "sq_drive_ins_mar/03"))
                (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") "player0_drive")
                (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") "player1_drive")
                (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_drive_ins_mar/01")
                    (ai_place "sq_drive_ins_mar/02")
                    (ai_place "sq_drive_ins_wart1/wart1")
                    (ai_place "sq_drive_ins_wart2/wart2")
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 21 (player0))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 46 (player2))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") 41 (ai_get_object "sq_drive_ins_mar/01"))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 21 (player1))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 46 (player3))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") 41 (ai_get_object "sq_drive_ins_mar/02"))
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart1/wart1") "player0_drive")
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_drive_ins_wart2/wart2") "player1_drive")
                    (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_pond_old
    (if b_debug
        (print "inspoint: pond")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "cd")
            (sleep 1)
        )
    )
    (set s_insertion_index 4)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_pond_ins_mar/01")
        (ai_place "sq_pond_ins_mar/02")
        (ai_place "sq_pond_ins_mar/03")
        (ai_place "sq_pond_ins_mar/04")
        (ai_place "sq_pond_ins_wart1/wart1")
        (ai_place "sq_pond_ins_wart2/wart2")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 21 (player0))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 46 (ai_get_object "sq_pond_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 41 (ai_get_object "sq_pond_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 21 (ai_get_object "sq_pond_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 46 (ai_get_object "sq_pond_ins_mar/04"))
        (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") "player0_pond")
        (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") "player1_pond")
        (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_pond_ins_mar/01")
            (ai_place "sq_pond_ins_mar/02")
            (ai_place "sq_pond_ins_mar/03")
            (ai_place "sq_pond_ins_mar/04")
            (ai_place "sq_pond_ins_wart1/wart1")
            (ai_place "sq_pond_ins_wart2/wart2")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 21 (player0))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 46 (ai_get_object "sq_pond_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 41 (ai_get_object "sq_pond_ins_mar/02"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 21 (player1))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 46 (ai_get_object "sq_pond_ins_mar/03"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 41 (ai_get_object "sq_pond_ins_mar/04"))
            (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") "player0_pond")
            (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") "player1_pond")
            (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_pond_ins_mar/01")
                (ai_place "sq_pond_ins_mar/02")
                (ai_place "sq_pond_ins_mar/03")
                (ai_place "sq_pond_ins_wart1/wart1")
                (ai_place "sq_pond_ins_wart2/wart2")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 21 (player0))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 46 (player2))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 41 (ai_get_object "sq_pond_ins_mar/01"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 21 (player1))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 46 (ai_get_object "sq_pond_ins_mar/02"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 41 (ai_get_object "sq_pond_ins_mar/03"))
                (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") "player0_pond")
                (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") "player1_pond")
                (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_pond_ins_mar/01")
                    (ai_place "sq_pond_ins_mar/02")
                    (ai_place "sq_pond_ins_wart1/wart1")
                    (ai_place "sq_pond_ins_wart2/wart2")
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 21 (player0))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 46 (player2))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") 41 (ai_get_object "sq_pond_ins_mar/01"))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 21 (player1))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 46 (player3))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") 41 (ai_get_object "sq_pond_ins_mar/02"))
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart1/wart1") "player0_pond")
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_pond_ins_wart2/wart2") "player1_pond")
                    (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script static void ins_crash_old
    (if b_debug
        (print "inspoint: crash")
    )
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if b_debug
                (print "switching zone sets...")
            )
            (switch_zone_set "cd")
            (sleep 1)
        )
    )
    (set s_insertion_index 5)
    (set s_elevator_obj_control 100)
    (set s_cavern_obj_control 100)
    (set s_drive_obj_control 100)
    (set s_pond_obj_control 100)
    (if b_debug
        (print "teleporting players...")
    )
    (if (= (game_coop_player_count) 1)
        (ai_place "sq_crash_ins_mar/01")
        (ai_place "sq_crash_ins_mar/02")
        (ai_place "sq_crash_ins_mar/03")
        (ai_place "sq_crash_ins_mar/04")
        (ai_place "sq_crash_ins_wart1/wart1")
        (ai_place "sq_crash_ins_wart2/wart2")
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 21 (player0))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 46 (ai_get_object "sq_crash_ins_mar/01"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 41 (ai_get_object "sq_crash_ins_mar/02"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 21 (ai_get_object "sq_crash_ins_mar/03"))
        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 46 (ai_get_object "sq_crash_ins_mar/04"))
        (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") "player0_crash")
        (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") "player1_crash")
        (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
        (if (= (game_coop_player_count) 2)
            (ai_place "sq_crash_ins_mar/01")
            (ai_place "sq_crash_ins_mar/02")
            (ai_place "sq_crash_ins_mar/03")
            (ai_place "sq_crash_ins_mar/04")
            (ai_place "sq_crash_ins_wart1/wart1")
            (ai_place "sq_crash_ins_wart2/wart2")
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 21 (player0))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 46 (ai_get_object "sq_crash_ins_mar/01"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 41 (ai_get_object "sq_crash_ins_mar/02"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 21 (player1))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 46 (ai_get_object "sq_crash_ins_mar/03"))
            (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 41 (ai_get_object "sq_crash_ins_mar/04"))
            (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") "player0_crash")
            (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") "player1_crash")
            (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
            (if (= (game_coop_player_count) 3)
                (ai_place "sq_crash_ins_mar/01")
                (ai_place "sq_crash_ins_mar/02")
                (ai_place "sq_crash_ins_mar/03")
                (ai_place "sq_crash_ins_wart1/wart1")
                (ai_place "sq_crash_ins_wart2/wart2")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 21 (player0))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 46 (player2))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 41 (ai_get_object "sq_crash_ins_mar/01"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 21 (player1))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 46 (ai_get_object "sq_crash_ins_mar/02"))
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 41 (ai_get_object "sq_crash_ins_mar/03"))
                (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") "player0_crash")
                (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") "player1_crash")
                (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
                (if (= (game_coop_player_count) 4)
                    (ai_place "sq_crash_ins_mar/01")
                    (ai_place "sq_crash_ins_mar/02")
                    (ai_place "sq_crash_ins_wart1/wart1")
                    (ai_place "sq_crash_ins_wart2/wart2")
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 21 (player0))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 46 (player2))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") 41 (ai_get_object "sq_crash_ins_mar/01"))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 21 (player1))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 46 (player3))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") 41 (ai_get_object "sq_crash_ins_mar/02"))
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart1/wart1") "player0_crash")
                    (object_teleport (ai_vehicle_get_from_starting_location "sq_crash_ins_wart2/wart2") "player1_crash")
                    (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
                )
            )
        )
    )
    (sleep 1)
    (player_disable_movement false)
)

(script continuous void gs_global_player_in_vehicle
    (sleep_until 
        (begin
            (if (or (and (= (game_coop_player_count) 1) (= (unit_in_vehicle (player0)) true)) (and (= (game_coop_player_count) 2) (and (= (unit_in_vehicle (player0)) true) (= (unit_in_vehicle (player1)) true))) (and (= (game_coop_player_count) 3) (and (= (unit_in_vehicle (player0)) true) (= (unit_in_vehicle (player1)) true) (= (unit_in_vehicle (player2)) true))) (and (= (game_coop_player_count) 4) (and (= (unit_in_vehicle (player0)) true) (= (unit_in_vehicle (player1)) true) (= (unit_in_vehicle (player2)) true) (= (unit_in_vehicle (player3)) true))))
                (set player_on_foot false)
                (set player_on_foot true)
            )
            false
        )
    )
)

(script dormant void gs_get_in_vehicles
    (sleep_until 
        (begin
            (ai_enter_squad_vehicles "sg_all_allies")
            false
        )
        900
    )
)

(script dormant void gs_disposable_ai
    (sleep_until (> s_cavern_obj_control 4))
    (ai_erase_inactive "sg_all_allies" 0)
    (ai_erase_inactive "sg_elev_hurt" 0)
    (sleep_until (> s_drive_obj_control 3))
    (ai_erase_inactive "sg_all_allies" 0)
    (ai_erase_inactive "sg_elev_hurt" 0)
    (sleep_until (> s_pond_obj_control 3))
    (ai_disposable "sg_drive_cov" true)
    (ai_erase_inactive "sg_all_allies" 0)
    (sleep_until (> s_crash_obj_control 1))
    (ai_disposable "sg_pond_cov" true)
    (ai_erase_inactive "sg_all_allies" 0)
    (sleep_until (> s_bridge_obj_control 4))
    (ai_disposable "sg_crash_cov" true)
    (ai_erase_inactive "sg_all_allies" 0)
    (sleep_until (> s_garage_obj_control 2))
    (ai_disposable "sg_bridge_cov" true)
    (ai_erase_inactive "sg_all_allies" 0)
    (sleep_until (> s_tether_obj_control 1))
    (ai_disposable "sg_garage_cov" true)
    (ai_erase_inactive "sg_all_allies" 0)
    (sleep_until (> s_round_obj_control 1))
    (ai_disposable "sg_tether_cov" true)
    (ai_disposable "sg_tether_ghosts" true)
    (ai_erase_inactive "sg_all_allies" 0)
    (sleep_until (> s_exit_obj_control 2))
    (ai_disposable "sg_round_cov" true)
    (ai_erase_inactive "sg_all_allies" 0)
)

(script dormant void gs_recycle_volumes
    (sleep_until (> s_cavern_obj_control 0))
    (add_recycling_volume "tv_gc_bsp000" 30 30)
    (sleep_until (> s_drive_obj_control 0))
    (add_recycling_volume "tv_gc_bsp000" 0 30)
    (add_recycling_volume "tv_gc_bsp010" 30 30)
    (sleep_until (> s_pond_obj_control 0))
    (add_recycling_volume "tv_gc_bsp010" 0 30)
    (add_recycling_volume "tv_gc_bsp020" 30 30)
    (sleep_until (> s_crash_obj_control 0))
    (add_recycling_volume "tv_gc_bsp020" 0 30)
    (add_recycling_volume "tv_gc_bsp030" 30 30)
    (sleep_until (> s_bridge_obj_control 3))
    (add_recycling_volume "tv_gc_bsp030" 0 30)
    (add_recycling_volume "tv_gc_bsp030b" 30 30)
    (sleep_until (> s_bridge_obj_control 5))
    (add_recycling_volume "tv_gc_bsp030" 0 0)
    (add_recycling_volume "tv_gc_bsp030b" 0 0)
    (sleep_until (>= s_round_obj_control 2))
    (add_recycling_volume "tv_gc_bsp030b" 0 30)
    (add_recycling_volume "tv_gc_bsp040" 30 30)
    (sleep_until (>= s_round_obj_control 2))
    (add_recycling_volume "tv_gc_bsp040" 0 30)
    (add_recycling_volume "tv_gc_bsp040b" 0 30)
    (add_recycling_volume "tv_gc_bsp050a" 30 30)
    (sleep_until (> s_exit_obj_control 0))
    (add_recycling_volume "tv_gc_bsp040b" 0 30)
    (add_recycling_volume "tv_gc_bsp050a" 0 30)
    (add_recycling_volume "tv_gc_bsp050" 30 30)
    (sleep_until (>= s_exit_obj_control 5))
    (add_recycling_volume "tv_gc_bsp050" 0 30)
    (sleep_until (= b_exit_garbage_collect true))
    (add_recycling_volume "tv_gc_exit" 0 0)
)

(script dormant void gs_script_cleanup
    (sleep_until (> s_cavern_obj_control 4))
    (sleep_forever sc_elevator_start)
    (sleep_forever sc_elev_opening)
    (sleep_forever sc_elev_title1)
    (sleep_forever sc_elev_init)
    (sleep_forever sc_elev_set_states)
    (sleep_forever sc_elev_init_spawn)
    (sleep_forever sc_elev_hurt_spawn)
    (sleep_forever sc_elev_gunlights)
    (sleep_forever sc_elev_second_dialog)
    (sleep_forever sc_elev_set_states)
    (sleep_forever sc_elev_hurt_spawn)
    (sleep_forever sc_elev_second_dialog)
    (sleep_forever sc_elev_door_open)
    (sleep_forever sc_elev_mech)
    (sleep_forever sc_elev_lights1)
    (sleep_forever sc_elev_lights2)
    (sleep_forever sc_elev_lineup)
    (sleep_forever sc_elev_blast_door)
    (sleep_forever sc_elev_blast_door_cancel)
    (sleep_forever sc_elev_sarge_hogs)
    (sleep_forever sc_elev_load_up)
    (sleep_forever sc_elev_reserve_driver)
    (sleep_forever sc_elev_betrayal)
    (sleep_forever sc_elev_cavern_task)
    (sleep_forever sc_elev_enter_vehicles)
    (sleep_forever sc_elev_hoglights1)
    (sleep_forever sc_elev_hoglights2)
    (sleep_forever sc_elev_hoglights3)
    (sleep_forever sc_elev_hoglights4)
    (sleep_forever sc_elev_hoglights5)
    (sleep_forever sc_elev_hanglights1)
    (sleep_forever sc_elev_hanglights2)
    (sleep_forever sc_elev_cough)
    (sleep_forever sc_elev_initial_comment)
    (sleep_forever sc_elev_random_comment)
    (sleep_forever sc_elev_chatter_01)
    (sleep_forever sc_elev_chatter_02)
    (sleep_forever sc_elev_medic_01)
    (sleep_forever sc_elev_medic_02)
    (sleep_forever sc_elev_prompt01)
    (sleep_forever sc_elev_prompt02)
    (sleep_forever sc_elev_brief01_sound)
    (sleep_until (> s_drive_obj_control 3))
    (sleep_forever sc_cavern_start)
    (sleep_forever sc_cavern_initial)
    (sleep_forever sc_elev_gunlights_off)
    (sleep_forever sc_cav_firefight)
    (sleep_forever sc_cavern_jackal_fallback)
    (sleep_forever sc_cav_dialog1)
    (sleep_forever sc_cav_dialog2)
    (sleep_forever sc_cav_prompt1)
    (sleep_forever sc_cav_prompt2)
    (sleep_until (> s_pond_obj_control 3))
    (sleep_forever sc_drive_start)
    (sleep_forever sc_drive_spawn)
    (sleep_forever sc_drive_objective_set)
    (sleep_forever sc_drive_flee_scene)
    (sleep_forever sc_drive_sniper_save)
    (sleep_forever sc_drive_dialog_tether)
    (sleep_forever sc_drive_dialog_update)
    (sleep_until (> s_crash_obj_control 1))
    (sleep_forever sc_pond_start)
    (sleep_forever sc_pond_cov)
    (sleep_forever sc_pond_gamesave)
    (sleep_forever sc_pond_dialog)
    (sleep_forever sc_pond_prompt_01)
    (sleep_forever sc_pond_navpoint01)
    (sleep_forever sc_pond_prompt_02)
    (sleep_until (> s_bridge_obj_control 4))
    (sleep_forever sc_crash_start)
    (sleep_forever sc_crash_marines)
    (sleep_forever sc_crash_cov)
    (sleep_forever sc_crash_mid_save)
    (sleep_forever sc_crash_chopper_intro)
    (sleep_forever sc_crash_health_renew)
    (sleep_forever sc_crash_filler_dialog)
    (sleep_forever sc_crash_mombasa_dialog)
    (sleep_forever sc_crash_filler_dialog02)
    (sleep_forever sc_crash_prompt)
    (sleep_forever sc_crash_truth)
    (sleep_forever sc_crash_flocks)
    (sleep_forever sc_crash_flocks2)
    (sleep_until (> s_garage_obj_control 2))
    (sleep_forever sc_bridge_start)
    (sleep_forever sc_bridge_dialog_getout)
    (sleep_forever sc_bridge_title2)
    (sleep_forever sc_bridge_dialog01)
    (sleep_forever sc_bridge_brief02_sound)
    (sleep_forever sc_bridge_flocks)
    (sleep_forever sc_bridge_flocks2)
    (sleep_forever sc_bridge_flocks3)
    (sleep_until (> s_round_obj_control 1))
    (sleep_forever sc_garage_start)
    (sleep_forever sc_garage_initial)
    (sleep_forever sc_garage_reinforcements)
    (sleep_forever sc_garage_reinforcements2)
    (sleep_forever sc_garage_health_renew)
    (sleep_forever sc_garage_player_not_driving)
    (sleep_forever sc_garage_sniping)
    (sleep_forever sc_garage_objective)
    (sleep_forever sc_garage_sniper_checkpoint)
    (sleep_forever sc_garage_mid_save)
    (sleep_forever sc_garage_phantom_alive)
    (sleep_forever sc_garage_chatter01)
    (sleep_forever sc_garage_chatter02)
    (sleep_forever sc_garage_chatter03)
    (sleep_forever sc_garage_pelican_inc)
    (sleep_forever sc_garage_wraith_inc)
    (sleep_forever sc_garage_wraith_nasty)
    (sleep_forever sc_garage_pelican_drop)
    (sleep_until (> s_round_obj_control 1))
    (sleep_forever sc_tether_start)
    (sleep_forever sc_tether_cov)
    (sleep_forever sc_tether_prompt)
    (sleep_until (> s_exit_obj_control 2))
    (sleep_forever sc_round_start)
    (sleep_forever sc_round_reinforce)
    (sleep_forever sc_round_warthog_reinforce)
    (sleep_forever sc_round_fallback_save)
    (sleep_forever sc_round_holdout_hogs)
    (sleep_forever sc_round_dialog_storm)
    (sleep_forever sc_round_prompt)
)

(script dormant void gs_kill_stragglers
    (sleep_until 
        (begin
            (if (and (= (objects_can_see_object (players) (list_get (ai_actors "sg_all_allies") s_global_stragglers) 45) false) (> (objects_distance_to_object (players) (list_get (ai_actors "sg_all_allies") s_global_stragglers)) 250))
                (object_destroy (list_get (ai_actors "sg_all_allies") s_global_stragglers))
            )
            (set s_global_stragglers (+ s_global_stragglers 1))
            (if (> s_global_stragglers 30)
                (set s_global_stragglers 0)
            )
            false
        )
    )
)

(script static void gs_dialogue_cleanup
    (ai_dialogue_enable true)
)

(script dormant void gs_cinematic_lights
    (print "in lights")
    (cinematic_light_object "ark" "" lighting_ark "light_anchor")
    (cinematic_light_object "ark_cruiser_01" "" lighting_ship "light_anchor")
    (cinematic_light_object "ark_cruiser_02" "" lighting_ship "light_anchor")
    (cinematic_light_object "truth_ship" "" lighting_ship "light_anchor")
    (cinematic_lighting_rebuild_all)
)

(script dormant void gs_award_primary_skull
    (if (award_skull)
        (begin
            (object_create "tough_luck_skull")
            (sleep_until (or (unit_has_weapon (unit (player0)) "objects\weapons\multiplayer\ball\primary_skull.weapon") (unit_has_weapon (unit (player1)) "objects\weapons\multiplayer\ball\primary_skull.weapon") (unit_has_weapon (unit (player2)) "objects\weapons\multiplayer\ball\primary_skull.weapon") (unit_has_weapon (unit (player3)) "objects\weapons\multiplayer\ball\primary_skull.weapon")) 5)
            (campaign_metagame_award_primary_skull (player0) 2)
            (campaign_metagame_award_primary_skull (player1) 2)
            (campaign_metagame_award_primary_skull (player2) 2)
            (campaign_metagame_award_primary_skull (player3) 2)
        )
    )
)

(script continuous void gs_con_object_management
    (sleep_until (!= g_zone_index (current_zone_set)) 1)
    (if (= (current_zone_set) 1)
        (begin
            (print "*****creating and setting tether")
            (object_create_anew "tether01")
            (object_create_anew "tether02")
            (object_create_anew "tether03")
            (object_create_anew "tether04")
        )
        (if (= (current_zone_set) 2)
            (begin
                (print "*****creating and setting cavern exit and tether")
                (object_create_anew "cavern_exit")
                (device_set_position_immediate "cavern_exit" 0)
                (zone_set_trigger_volume_enable "zone_set:bc:*" false)
                (zone_set_trigger_volume_enable "begin_zone_set:bc:*" false)
                (object_create_anew "tether01")
                (object_create_anew "tether02")
                (object_create_anew "tether03")
                (object_create_anew "tether04")
            )
            (if (= (current_zone_set) 5)
                (begin
                    (print "*****creating rock")
                    (wake sc_round_rock_kill)
                    (object_destroy "cruiser_flyover")
                    (sleep 1)
                    (object_create_anew "round_rock")
                    (ai_disposable "sg_allied_vehicles" true)
                    (zone_set_trigger_volume_enable "zone_set:ef:*" false)
                    (zone_set_trigger_volume_enable "begin_zone_set:ef:*" false)
                )
            )
        )
    )
    (set g_zone_index (current_zone_set))
)

(script static void start
    (fade_out 0 0 0 0)
    (if (= (game_insertion_point_get) 0)
        (ins_elevator)
        (if (= (game_insertion_point_get) 1)
            (ins_gathering_storm)
        )
    )
)

(script startup void mission_outskirts
    (print_difficulty)
    (ai_allegiance covenant prophet)
    (ai_allegiance player human)
    (fade_out 0 0 0 0)
    (objectives_clear)
    (wake gs_recycle_volumes)
    (wake gs_disposable_ai)
    (wake gs_script_cleanup)
    (wake gs_camera_bounds)
    (wake gs_award_primary_skull)
    (chud_show_fire_grenades false)
    (campaign_metagame_time_pause true)
    (if (> (player_count) 0)
        (start)
        (fade_in 0 0 0 0)
    )
    (sleep_until (>= s_insertion_index 1) 1)
    (if (<= s_insertion_index 1)
        (begin
            (wake sc_elevator_start)
        )
    )
    (sleep_until (or (volume_test_players "tv_elev_oc2") (>= s_insertion_index 2)) 1)
    (if (<= s_insertion_index 2)
        (begin
            (wake sc_cavern_start)
        )
    )
    (sleep_until (or (>= (current_zone_set_fully_active) 1) (>= s_insertion_index 3)) 1)
    (if (<= s_insertion_index 3)
        (begin
            (wake sc_drive_start)
        )
    )
    (sleep_until (or (>= (current_zone_set_fully_active) 2) (>= s_insertion_index 4)) 1)
    (if (<= s_insertion_index 4)
        (begin
            (wake sc_pond_start)
        )
    )
    (sleep_until (or (volume_test_players "tv_pond_oc5") (>= s_insertion_index 5)) 1)
    (if (<= s_insertion_index 5)
        (begin
            (wake sc_crash_start)
        )
    )
    (sleep_until (or (volume_test_players "tv_crash_oc5") (>= s_insertion_index 6)))
    (if (<= s_insertion_index 6)
        (begin
            (wake sc_bridge_start)
        )
    )
    (sleep_until (or (volume_test_players "tv_bridge_oc6") (>= s_insertion_index 7)) 1)
    (if (<= s_insertion_index 7)
        (begin
            (wake sc_garage_start)
        )
    )
    (sleep_until (or (volume_test_players "tv_garage_oc2") (>= s_insertion_index 8)) 1)
    (if (<= s_insertion_index 8)
        (begin
            (wake sc_tether_start)
        )
    )
    (sleep_until (or (volume_test_players "tv_round_oc1") (>= s_insertion_index 9)) 1)
    (if (<= s_insertion_index 9)
        (begin
            (wake sc_round_start)
        )
    )
    (sleep_until (or (volume_test_players "tv_round_oc1") (>= s_insertion_index 10)) 1)
    (if (<= s_insertion_index 10)
        (begin
            (wake sc_exit_start)
        )
    )
)

(script dormant void sc_elevator_start
    (data_mine_set_mission_segment "030_010_elev_room")
    (wake sc_elev_set_states)
    (wake sc_elev_init)
    (wake sc_elev_opening)
    (wake sc_elev_enter_vehicles)
    (wake sc_elev_lights2)
    (wake sc_elev_betrayal)
    (object_create_anew "cavern_entrance")
    (device_set_position "cavern_entrance" 0)
    (object_create_anew "cavern_exit")
    (device_set_position "cavern_exit" 0)
    (sleep_until (volume_test_players "tv_elev_oc1") 1)
    (set s_elevator_obj_control 1)
    (game_save)
    (sleep_until (volume_test_players "tv_elev_oc2") 1)
    (set s_elevator_obj_control 2)
    (wake sc_elev_cavern_task)
    (wake sc_elev_reserve_driver)
    (wake sc_elev_prompt01)
    (wake sc_elev_prompt02)
    (wake sc_elev_navpoint)
    (ai_place "sq_cavern_hack")
    (sleep_until (volume_test_players "tv_elev_oc3") 1)
    (set s_elevator_obj_control 3)
    (wake sc_elev_gunlights_off)
)

(script dormant void sc_cavern_start
    (sleep_until (volume_test_players "tv_cav_oc1") 1)
    (data_mine_set_mission_segment "030_020_intro_cavern")
    (set s_cavern_obj_control 1)
    (game_save)
    (wake 030_music_01_stop)
    (sleep 1)
    (ai_set_objective "sg_allied_vehicles" "obj_cav_marine")
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_starting_location "sq_elev_warthog1/warthog1") 21 false)
    (sleep_until (volume_test_players "tv_cav_oc2") 1)
    (set s_cavern_obj_control 2)
    (wake sc_cav_prompt1)
    (wake sc_cav_prompt2)
    (wake sc_cavern_navpoint)
    (sleep_until (volume_test_players "tv_cav_oc3") 1)
    (set s_cavern_obj_control 3)
    (sleep_until (volume_test_players "tv_cav_oc4") 1)
    (set s_cavern_obj_control 4)
    (print "opening cavern_exit")
    (device_set_position_immediate "cavern_exit" 0.63)
    (sleep_until (volume_test_players "tv_cav_oc5") 1)
    (set s_cavern_obj_control 5)
    (wake sc_cavern_initial)
    (wake sc_cavern_camera_follow)
    (game_save)
    (sleep_until (volume_test_players "tv_cav_oc6") 1)
    (set s_cavern_obj_control 6)
    (wake sc_cav_firefight)
    (wake sc_cav_dialog1)
    (sleep_until (volume_test_players "tv_cav_oc7") 1)
    (set s_cavern_obj_control 7)
    (device_set_power "cavern_entrance" 0)
    (device_set_position_immediate "cavern_entrance" 0)
    (wake sc_drive_objective_set)
    (sleep_until (volume_test_players "tv_cav_oc8") 1)
    (set s_cavern_obj_control 8)
    (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
    (wake sc_cav_dialog2)
)

(script dormant void sc_cavern_initial
    (sleep_until (>= s_cavern_obj_control 3) 1)
    (ai_place "sq_cavern_mar1")
    (if (= (game_is_cooperative) false)
        (begin
            (ai_place "sq_cavern_mar2")
        )
    )
    (ai_place "sq_drive_init01")
    (ai_place "sq_drive_init02")
    (sleep_until (>= s_cavern_obj_control 7) 1)
    (garbage_collect_now)
    (wake sc_drive_spawn)
)

(script dormant void sc_drive_start
    (sleep_until (volume_test_players "tv_drive_oc1") 1)
    (data_mine_set_mission_segment "030_030_drive")
    (set s_drive_obj_control 1)
    (wake sc_drive_dialog_tether)
    (wake sc_drive_flee_scene)
    (player_control_scale_all_input 1 0)
    (ai_set_objective "sg_allied_vehicles" "obj_drive_marine")
    (game_can_use_flashlights false)
    (sleep_until (volume_test_players "tv_drive_oc2") 1)
    (set s_drive_obj_control 2)
    (wake sc_drive_brute_radio_01)
    (sleep_until (volume_test_players "tv_drive_oc3") 1)
    (set s_drive_obj_control 3)
    (sleep_until (volume_test_players "tv_drive_oc4") 1)
    (set s_drive_obj_control 4)
    (game_save)
    (sleep_until (volume_test_players "tv_drive_oc5") 1)
    (data_mine_set_mission_segment "030_031_drive_second")
    (set s_drive_obj_control 5)
    (wake sc_drive_sniper_save)
    (wake 030_music_02_start_alt)
    (sleep_until (volume_test_players "tv_drive_oc6") 1)
    (set s_drive_obj_control 6)
    (wake sc_drive_dialog_update)
    (wake sc_drive_brute_radio_02)
    (sleep_until (volume_test_players "tv_drive_oc7") 1)
    (set s_drive_obj_control 7)
    (sleep_until (volume_test_players "tv_drive_oc8") 1)
    (set s_drive_obj_control 8)
    (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
)

(script dormant void sc_drive_spawn
    (ai_place "sq_drive_init05")
    (ai_place "sq_drive_init03")
    (sleep 1)
    (ai_place "sq_drive_warthog")
    (object_damage_damage_section "sq_drive_warthog/drive_warthog01" "hull" 0.5)
    (sleep_until (>= s_drive_obj_control 4) 5)
    (ai_place "sq_drive2_jack01")
    (ai_place "sq_drive2_sniper02")
    (object_damage_damage_section "drive_watchpod" "upper" 1)
    (sleep_until (>= s_drive_obj_control 5) 5)
    (if (= (game_difficulty_get_real) easy)
        (ai_place "sq_drive2_grunt-lead")
        (ai_place "sq_drive2_grunttur" 1)
        (if (= (game_difficulty_get_real) normal)
            (ai_place "sq_drive2_grunt-lead")
            (ai_place "sq_drive2_grunttur" 2)
            (sleep 1)
            (ai_place "sq_drive2_grunt01")
            (if (= (game_difficulty_get_real) heroic)
                (ai_place "sq_drive2_grunt-lead")
                (ai_place "sq_drive2_grunttur" 3)
                (sleep 1)
                (ai_place "sq_drive2_grunt01")
                (if (= (game_difficulty_get_real) legendary)
                    (ai_place "sq_drive2_grunt-lead")
                    (ai_place "sq_drive2_grunttur" 3)
                    (sleep 1)
                    (ai_place "sq_drive2_grunt01")
                )
            )
        )
    )
    (sleep_until (>= s_drive_obj_control 7) 5)
    (if (and (< (ai_task_count "obj_drive_marine/main_gate") 4) (= (game_is_cooperative) false))
        (begin
            (print "place extra marines")
            (ai_place "sq_pond_marine01")
        )
    )
)

(script dormant void sc_pond_start
    (sleep_until (volume_test_players "tv_pond_oc1") 1)
    (data_mine_set_mission_segment "030_040_pond")
    (set s_pond_obj_control 1)
    (garbage_collect_now)
    (game_save)
    (sleep 1)
    (wake sc_pond_cov)
    (ai_set_objective "sg_allied_vehicles" "obj_pond_marine")
    (wake 030_music_02_stop)
    (wake 030_music_03_start)
    (sleep_until (volume_test_players "tv_pond_oc2") 1)
    (set s_pond_obj_control 2)
    (wake sc_pond_prompt_01)
    (wake sc_pond_gamesave)
    (sleep_until (volume_test_players "tv_pond_oc3") 1)
    (set s_pond_obj_control 3)
    (sleep_until (volume_test_players "tv_pond_oc4") 1)
    (set s_pond_obj_control 4)
    (wake sc_pond_prompt_02)
    (wake sc_crash_flocks)
    (wake sc_crash_flocks2)
    (wake sc_pond_dialog)
    (sleep_until (volume_test_players "tv_pond_oc5") 1)
    (set s_pond_obj_control 5)
    (garbage_collect_now)
    (game_save)
    (wake 030_music_03_stop)
    (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
)

(script dormant void sc_pond_cov
    (if (= (game_difficulty_get_real) easy)
        (ai_place "sq_pond_init01" 1)
        (ai_place "sq_pond_init02")
        (sleep 1)
        (ai_place "sq_pond_init03")
        (sleep 1)
        (ai_place "sq_pond_init04")
        (ai_place "sq_pond_init07")
        (if (= (game_difficulty_get_real) normal)
            (ai_place "sq_pond_init01")
            (ai_place "sq_pond_init02")
            (sleep 1)
            (ai_place "sq_pond_init03")
            (ai_place "sq_pond_shade01" 1)
            (sleep 1)
            (ai_place "sq_pond_init04")
            (ai_place "sq_pond_init07")
            (sleep 1)
            (ai_place "sq_pond_init08")
            (ai_place "sq_pond_init06")
            (sleep 1)
            (ai_place "sq_pond_phantom1" 1)
            (if (= (game_difficulty_get_real) heroic)
                (ai_place "sq_pond_init01")
                (ai_place "sq_pond_init02")
                (sleep 1)
                (ai_place "sq_pond_init03")
                (ai_place "sq_pond_shade01" 2)
                (sleep 1)
                (ai_place "sq_pond_init04")
                (ai_place "sq_pond_init07")
                (sleep 1)
                (ai_place "sq_pond_init08")
                (ai_place "sq_pond_init06")
                (sleep 1)
                (ai_place "sq_pond_phantom1" 3)
                (if (= (game_difficulty_get_real) legendary)
                    (ai_place "sq_pond_init01")
                    (ai_place "sq_pond_init02")
                    (sleep 1)
                    (ai_place "sq_pond_init03")
                    (ai_place "sq_pond_shade01" 2)
                    (sleep 1)
                    (ai_place "sq_pond_init07")
                    (sleep 1)
                    (ai_place "sq_pond_init08")
                    (ai_place "sq_pond_init06")
                    (sleep 1)
                    (ai_place "sq_pond_phantom1" 3)
                )
            )
        )
    )
    (ai_place "sq_pond_warthog")
    (object_damage_damage_section "sq_pond_warthog/pond_warthog01" "hull" 0.5)
    (sleep_until (<= (ai_task_count "obj_pond_cov/forward_gate") 0) 1)
    (if (and (<= s_pond_obj_control 2) (or (= (game_difficulty_get_real) normal) (= (game_difficulty_get_real) heroic) (= (game_difficulty_get_real) legendary)))
        (ai_place "sq_pond_init05")
    )
)

(script dormant void sc_crash_start
    (wake sc_crash_cov)
    (wake sc_crash_marines)
    (sleep 5)
    (wake sc_crash_health_renew)
    (wake sc_crash_chopper_intro)
    (ai_set_objective "sg_allied_vehicles" "obj_crash_marine")
    (sleep_until (volume_test_players "tv_crash_oc1") 1)
    (data_mine_set_mission_segment "030_050_crash_site")
    (set s_crash_obj_control 1)
    (ai_place "sq_crash_warthog")
    (object_damage_damage_section "sq_crash_warthog/crash_warthog01" "hull" 0.5)
    (sleep_until (volume_test_players "tv_crash_oc2") 1)
    (set s_crash_obj_control 2)
    (wake sc_crash_navpoint)
    (wake sc_crash_filler_dialog)
    (wake sc_crash_filler_dialog02)
    (wake sc_crash_truth)
    (wake sc_crash_shield_destroy)
    (wake sc_crash_music)
    (wake sc_crash_mid_save)
    (sleep_until (volume_test_players "tv_crash_oc3") 1)
    (set s_crash_obj_control 3)
    (wake sc_crash_prompt)
    (wake sc_bridge_flocks)
    (wake sc_bridge_flocks2)
    (wake sc_bridge_flocks3)
    (sleep_until (volume_test_players "tv_crash_oc4") 1)
    (set s_crash_obj_control 4)
    (sleep_until (volume_test_players "tv_crash_oc5") 1)
    (set s_crash_obj_control 5)
    (game_can_use_flashlights true)
    (sleep_until (volume_test_players "tv_crash_oc6") 1)
    (set s_crash_obj_control 6)
    (ai_set_objective "sg_allied_infantry" "obj_bridge_marine")
    (ai_set_objective "sg_allied_vehicles" "obj_bridge_marine")
)

(script dormant void sc_crash_marines
    (sleep 10)
    (if (and (< (ai_task_count "obj_crash_marine/main_gate") 4) (= (game_is_cooperative) false))
        (ai_place "sq_crash_marines")
        (ai_place "sq_crash_marines" 2)
    )
)

(script dormant void sc_crash_cov
    (if (= (game_difficulty_get_real) easy)
        (ai_place "sq_crash_initial01")
        (ai_place "sq_crash_initial02")
        (sleep 1)
        (ai_place "sq_crash_initial03")
        (ai_place "sq_crash_initial06")
        (sleep_until (<= (ai_task_count "obj_crash_cov/forward_gate") 5))
        (if (<= s_crash_obj_control 4)
            (ai_place "sq_crash_second02")
        )
        (sleep_until (and (= (ai_task_count "obj_crash_cov/forward_gate") 0) (<= (ai_task_count "obj_crash_cov/third_gate") 3) (>= s_crash_obj_control 4)))
        (if (<= s_crash_obj_control 5)
            (ai_place "sq_crash_third01")
            (ai_place "sq_crash_third02")
        )
        (if (= (game_difficulty_get_real) normal)
            (ai_place "sq_crash_initial01")
            (ai_place "sq_crash_initial02")
            (sleep 1)
            (ai_place "sq_crash_initial03")
            (ai_place "sq_crash_initial06")
            (sleep 1)
            (ai_place "sq_crash_shade01")
            (sleep_until (and (<= (ai_task_count "obj_crash_cov/initial_gate") 5) (<= (ai_task_count "obj_crash_cov/second_gate") 5)))
            (if (<= s_crash_obj_control 4)
                (ai_place "sq_crash_second01")
                (ai_place "sq_crash_second02")
            )
            (sleep_until (and (= (ai_task_count "obj_crash_cov/initial_gate") 0) (= (ai_task_count "obj_crash_cov/second_gate") 0) (>= s_crash_obj_control 4)))
            (if (<= s_crash_obj_control 5)
                (begin
                    (ai_place "sq_crash_third01")
                    (ai_place "sq_crash_third02")
                    (ai_place "sq_crash_third03")
                )
            )
            (if (= (game_difficulty_get_real) heroic)
                (ai_place "sq_crash_initial01")
                (ai_place "sq_crash_initial02")
                (sleep 1)
                (ai_place "sq_crash_initial03")
                (ai_place "sq_crash_initial06")
                (sleep 1)
                (ai_place "sq_crash_initial07")
                (ai_place "sq_crash_shade01" 2)
                (sleep_until (<= (ai_task_count "obj_crash_cov/forward_gate") 5))
                (if (<= s_crash_obj_control 4)
                    (ai_place "sq_crash_second01")
                    (ai_place "sq_crash_second02")
                )
                (sleep_until (and (= (ai_task_count "obj_crash_cov/forward_gate") 0) (<= (ai_task_count "obj_crash_cov/third_gate") 5) (>= s_crash_obj_control 4)))
                (if (<= s_crash_obj_control 5)
                    (begin
                        (ai_place "sq_crash_third01")
                        (ai_place "sq_crash_third02")
                        (ai_place "sq_crash_third03")
                    )
                )
                (if (= (game_difficulty_get_real) legendary)
                    (ai_place "sq_crash_initial01")
                    (ai_place "sq_crash_initial02")
                    (sleep 1)
                    (ai_place "sq_crash_initial03")
                    (ai_place "sq_crash_initial06")
                    (sleep 1)
                    (ai_place "sq_crash_initial07")
                    (ai_place "sq_crash_shade01" 2)
                    (sleep_until (<= (ai_task_count "obj_crash_cov/forward_gate") 5))
                    (if (<= s_crash_obj_control 4)
                        (ai_place "sq_crash_second01")
                        (ai_place "sq_crash_second02")
                    )
                    (sleep_until (and (= (ai_task_count "obj_crash_cov/forward_gate") 0) (<= (ai_task_count "obj_crash_cov/third_gate") 5) (>= s_crash_obj_control 4)))
                    (if (<= s_crash_obj_control 5)
                        (begin
                            (ai_place "sq_crash_third01")
                            (ai_place "sq_crash_third02")
                            (ai_place "sq_crash_third03")
                        )
                    )
                )
            )
        )
    )
    (if (> (object_get_health "crash_generator") 0)
        (wake 030_music_04_start)
    )
)

(script dormant void sc_bridge_start
    (sleep_until (volume_test_players "tv_bridge_oc1") 1)
    (data_mine_set_mission_segment "030_060_bridge")
    (set s_bridge_obj_control 1)
    (garbage_collect_now)
    (game_save)
    (sleep 1)
    (wake sc_bridge_navpoint)
    (wake sc_bridge_cruiser)
    (sleep 1)
    (ai_set_objective "sg_allied_vehicles" "obj_bridge_marine")
    (wake sc_bridge_overhead_cruiser)
    (game_can_use_flashlights false)
    (sleep_until (volume_test_players "tv_bridge_oc2") 1)
    (set s_bridge_obj_control 2)
    (wake sc_bridge_dialog01)
    (sleep_until (volume_test_players "tv_bridge_oc3") 1)
    (set s_bridge_obj_control 3)
    (wake sc_bridge_dialog_getout)
    (sleep_until (volume_test_players "tv_bridge_oc4") 1)
    (set s_bridge_obj_control 4)
    (sleep_until (volume_test_players "tv_bridge_oc5") 1)
    (set s_bridge_obj_control 5)
    (wake 030_music_04_stop_backup)
    (sleep_until (volume_test_players "tv_bridge_oc6") 1)
    (set s_bridge_obj_control 6)
    (wake sc_bridge_brief02_sound)
    (wake sc_bridge_title2)
    (game_save)
    (sleep 1)
    (ai_set_objective "sg_allied_infantry" "obj_garage_marine")
    (ai_set_objective "sg_allied_vehicles" "obj_garage_marine")
)

(script dormant void sc_garage_start
    (wake sc_garage_initial)
    (if (<= (game_difficulty_get_real) normal)
        (wake sc_garage_reinforcements)
        (wake sc_garage_reinforcements2)
    )
    (wake sc_garage_health_renew)
    (wake sc_garage_health_renew2)
    (sleep_until (volume_test_players "tv_garage_oc1") 1)
    (data_mine_set_mission_segment "030_070_garage")
    (set s_garage_obj_control 1)
    (garbage_collect_now)
    (game_save)
    (sleep 1)
    (wake sc_garage_chatter01)
    (wake sc_garage_chatter02)
    (wake sc_garage_chatter03)
    (wake sc_garage_sniper_checkpoint)
    (wake sc_garage_sniping)
    (wake sc_garage_navpoint)
    (wake sc_garage_wraith_inc)
    (sleep_until (volume_test_players "tv_garage_oc2") 1)
    (set s_garage_obj_control 2)
    (set b_garage_zed_go true)
    (wake sc_garage_mid_save2)
    (sleep_until (volume_test_players "tv_garage_oc3") 1)
    (set s_garage_obj_control 3)
    (sleep_until (volume_test_players "tv_garage_oc4") 1)
    (set s_garage_obj_control 4)
    (wake sc_garage_objective)
)

(script dormant void sc_garage_initial
    (sleep 20)
    (if (= (game_difficulty_get_real) easy)
        (ai_place "sq_garage_initial01")
        (ai_place "sq_garage_initial02")
        (sleep 1)
        (ai_place "sq_garage_initial05")
        (ai_place "sq_garage_initial06")
        (sleep 1)
        (ai_place "sq_garage_jets01" 2)
        (ai_place "sq_garage_turret")
        (sleep 1)
        (if (= (game_difficulty_get_real) normal)
            (ai_place "sq_garage_initial01")
            (ai_place "sq_garage_initial02")
            (sleep 1)
            (ai_place "sq_garage_initial03")
            (ai_place "sq_garage_initial04")
            (sleep 1)
            (ai_place "sq_garage_initial05")
            (ai_place "sq_garage_initial06")
            (sleep 1)
            (ai_place "sq_garage_jets01")
            (ai_place "sq_garage_turret")
            (sleep 1)
            (if (= (game_difficulty_get_real) heroic)
                (ai_place "sq_garage_initial01")
                (ai_place "sq_garage_initial02")
                (sleep 1)
                (ai_place "sq_garage_initial03")
                (ai_place "sq_garage_initial04")
                (sleep 1)
                (ai_place "sq_garage_initial05")
                (ai_place "sq_garage_initial06")
                (sleep 1)
                (ai_place "sq_garage_jets01")
                (ai_place "sq_garage_turret")
                (sleep 1)
                (if (= (game_difficulty_get_real) legendary)
                    (ai_place "sq_garage_initial01")
                    (ai_place "sq_garage_initial02")
                    (sleep 1)
                    (ai_place "sq_garage_initial03")
                    (ai_place "sq_garage_initial04")
                    (sleep 1)
                    (ai_place "sq_garage_initial05")
                    (ai_place "sq_garage_initial06")
                    (sleep 1)
                    (ai_place "sq_garage_jets01")
                    (sleep 1)
                )
            )
        )
    )
    (if (and (>= (ai_task_count "obj_garage_marine/main_gate") 3) (= (game_is_cooperative) false))
        (begin
            (ai_place "sq_garage_initial_mar/01")
            (ai_place "sq_garage_initial_mar/02")
        )
        (ai_place "sq_garage_initial_mar" 4)
    )
    (if (and (>= (ai_task_count "obj_garage_marine/main_gate") 5) (= (game_is_cooperative) false))
        (ai_place "sq_garage_initial_mar2" 1)
        (ai_place "sq_garage_initial_mar2" 2)
    )
    (sleep 1)
    (ai_place "sq_garage_initial07")
    (sleep 1)
    (sleep_until (>= s_garage_obj_control 3) 5)
    (if (= (game_difficulty_get_real) easy)
        (ai_place "sq_garage_wraith")
        (if (= (game_difficulty_get_real) normal)
            (ai_place "sq_garage_wraith2")
            (ai_place "sq_tether_sniper01")
            (if (= (game_difficulty_get_real) heroic)
                (ai_place "sq_garage_wraith2")
                (ai_place "sq_tether_sniper01")
                (if (= (game_difficulty_get_real) legendary)
                    (ai_place "sq_garage_wraith2")
                    (ai_place "sq_tether_sniper01")
                )
            )
        )
    )
)

(script dormant void sc_garage_reinforcements
    (sleep_until (and (>= s_garage_obj_control 2) (< (ai_task_count "obj_garage_cov/main_gate") 3)))
    (set s_garage_gate_latch 1)
    (ai_place "sq_garage_phantom1")
    (wake 030_music_051_stop)
    (set s_garage_wraith 1)
    (sleep 20)
    (wake 030_music_055_start)
    (sleep_until (and (<= (ai_task_count "obj_garage_cov/main_gate") 2) (= s_garage_phantom 1)) 30 3600)
    (sleep 120)
    (game_save)
    (set s_garage_wraith 2)
    (wake sc_garage_mid_save3)
    (wake 030_music_056_start)
    (wake 030_music_057_start)
    (wake sc_garage_music_end)
    (flock_stop "bridge_flock3")
    (sleep_until (= (ai_task_count "obj_garage_cov/wraith_gate") 0) 5)
    (game_save)
    (set b_garage_marine_latch true)
    (if (= (game_is_cooperative) false)
        (begin
            (ai_place "sq_garage_pelican1")
            (sleep 30)
            (ai_place "sq_garage_pelican2")
        )
        (begin
            (ai_place "sq_garage_pelican1")
            (sleep 10)
            (ai_place "sq_garage_pelican3")
        )
    )
    (wake sc_garage_player_not_driving)
    (if (<= s_tether_obj_control 1)
        (begin
            (ai_place "sq_tether_sniper02")
            (ai_place "sq_tether_brute01")
        )
    )
    (flock_stop "bridge_flock")
    (flock_stop "bridge_flock2")
)

(script dormant void sc_garage_reinforcements2
    (sleep_until (and (>= s_garage_obj_control 2) (< (ai_task_count "obj_garage_cov/main_gate") 3)))
    (set s_garage_gate_latch 1)
    (ai_place "sq_garage_phantom1")
    (wake 030_music_051_stop)
    (set s_garage_wraith 1)
    (sleep 20)
    (wake 030_music_055_start)
    (sleep_until (and (<= (ai_task_count "obj_garage_cov/main_gate") 2) (= s_garage_phantom 1)) 30 3600)
    (set s_garage_gate_latch 2)
    (ai_place "sq_garage_phantom2")
    (sleep 20)
    (sleep_until (and (<= (ai_task_count "obj_garage_cov/main_gate") 2) (= s_garage_phantom 2)) 30 7200)
    (sleep 120)
    (game_save)
    (set s_garage_wraith 2)
    (wake sc_garage_mid_save3)
    (wake 030_music_056_start)
    (wake 030_music_057_start)
    (wake sc_garage_music_end)
    (flock_stop "bridge_flock3")
    (sleep_until (= (ai_task_count "obj_garage_cov/wraith_gate") 0) 5)
    (game_save)
    (set b_garage_marine_latch true)
    (if (= (game_is_cooperative) false)
        (begin
            (ai_place "sq_garage_pelican1")
            (sleep 30)
            (ai_place "sq_garage_pelican2")
        )
        (begin
            (ai_place "sq_garage_pelican1")
            (sleep 10)
            (ai_place "sq_garage_pelican3")
        )
    )
    (wake sc_garage_player_not_driving)
    (if (<= s_tether_obj_control 1)
        (begin
            (ai_place "sq_tether_sniper02")
            (ai_place "sq_tether_brute01")
        )
    )
    (if (= s_tether_obj_control 0)
        (ai_place "sq_tether_shade01")
    )
    (flock_stop "bridge_flock")
    (flock_stop "bridge_flock2")
)

(script dormant void sc_tether_start
    (sleep_until (volume_test_players "tv_tether_oc1") 1)
    (data_mine_set_mission_segment "030_080_tether_hole")
    (set s_tether_obj_control 1)
    (wake sc_tether_cov)
    (wake sc_tether_navpoint)
    (wake sc_exit_flocks)
    (wake sc_exit_flocks2)
    (wake sc_exit_flocks3)
    (game_save)
    (ai_set_objective "sg_allied_vehicles" "obj_tether_marine")
    (sleep_until (volume_test_players "tv_tether_oc2") 1)
    (set s_tether_obj_control 2)
    (wake sc_tether_prompt)
    (wake 030_music_055_stop)
    (wake 030_music_056_stop)
    (wake 030_music_057_stop)
    (sleep_until (volume_test_players "tv_tether_oc3") 1)
    (set s_tether_obj_control 3)
    (sleep_until (= (ai_task_count "obj_tether_cov/mg_no_sniper") 0) 1)
    (ai_set_objective "sg_all_allies" "obj_round_marine")
)

(script dormant void sc_tether_cov
    (ai_place "sq_tether_brute02")
)

(script dormant void sc_round_start
    (sleep_until (or (volume_test_players "tv_round_oc1a") (volume_test_players "tv_round_oc1")) 1)
    (data_mine_set_mission_segment "030_090_roundabout")
    (set s_round_obj_control 1)
    (garbage_collect_now)
    (game_save)
    (ai_set_objective "sg_allied_vehicles" "obj_round_marine")
    (sleep 1)
    (wake sc_round_reinforce)
    (sleep 10)
    (wake sc_round_holdout_hogs)
    (wake sc_round_holdout_dialog)
    (sleep_until (volume_test_players "tv_round_oc2") 1)
    (set s_round_obj_control 2)
    (wake sc_round_fallback_save)
    (wake sc_round_warthog_reinforce)
    (game_save)
    (wake sc_round_navpoint)
    (wake sc_round_prompt)
    (wake sc_round_dialog_storm)
    (wake sc_round_mid_save)
    (wake sc_round_music_stop)
    (sleep_until (volume_test_players "tv_round_oc3") 1)
    (set s_round_obj_control 3)
    (sleep_until (volume_test_players "tv_round_oc4") 1)
    (set s_round_obj_control 4)
    (ai_set_objective "sg_all_allies" "obj_exit_marine")
)

(script dormant void sc_round_reinforce
    (ai_place "sq_round_warthog01")
    (sleep 15)
    (if (= (game_is_cooperative) false)
        (begin
            (if (< (ai_living_count "sg_all_allies") 4)
                (ai_place "sq_round_marine01")
                (begin
                    (object_create "round_mar01")
                    (object_create "round_mar02")
                )
            )
            (ai_place "sq_round_hold")
            (ai_place "sq_round_hold_chopper")
            (sleep 1)
            (ai_magically_see "sq_round_hold" "sq_round_marine01")
        )
        (begin
            (object_create "round_mar01")
            (object_create "round_mar02")
            (ai_place "sq_round_hold_chopper")
            (object_create "round_brute01")
            (object_create "round_brute02")
        )
    )
    (if (and (< (ai_living_count "sg_all_allies") 4) (= (game_is_cooperative) false))
        (ai_place "sq_round_marine02")
    )
    (sleep 1)
    (ai_place "sq_round_init02")
    (ai_place "sq_round_init03")
    (sleep 1)
    (ai_place "sq_round_init04")
    (ai_place "sq_round_init05")
    (sleep 1)
    (ai_place "sq_round_shade01")
    (ai_place "sq_round_shade02")
    (sleep 1)
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (begin
            (ai_magically_see_object "sg_round_cov" (player0))
            (ai_magically_see_object "sg_round_cov" (player1))
            (ai_magically_see_object "sg_round_cov" (player2))
            (ai_magically_see_object "sg_round_cov" (player3))
        )
        (begin
            (ai_magically_see_object "sg_round_cov_choppers" (player0))
            (ai_magically_see_object "sg_round_cov_choppers" (player1))
            (ai_magically_see_object "sg_round_cov_choppers" (player2))
            (ai_magically_see_object "sg_round_cov_choppers" (player3))
        )
    )
    (sleep_until (< (ai_living_count "sg_round_cov") 8))
    (if (<= s_exit_obj_control 3)
        (ai_place "sq_round_phantom02")
    )
    (sleep 30)
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (begin
            (ai_magically_see_object "sg_round_cov" (player0))
            (ai_magically_see_object "sg_round_cov" (player1))
            (ai_magically_see_object "sg_round_cov" (player2))
            (ai_magically_see_object "sg_round_cov" (player3))
        )
        (begin
            (ai_magically_see_object "sg_round_cov_choppers" (player0))
            (ai_magically_see_object "sg_round_cov_choppers" (player1))
            (ai_magically_see_object "sg_round_cov_choppers" (player2))
            (ai_magically_see_object "sg_round_cov_choppers" (player3))
        )
    )
    (sleep_until (< (ai_living_count "sg_round_cov") 8))
    (if (< s_round_obj_control 3)
        (ai_place "sq_round_second01")
    )
    (sleep 30)
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (begin
            (ai_magically_see_object "sg_round_cov" (player0))
            (ai_magically_see_object "sg_round_cov" (player1))
            (ai_magically_see_object "sg_round_cov" (player2))
            (ai_magically_see_object "sg_round_cov" (player3))
        )
        (begin
            (ai_magically_see_object "sg_round_cov_choppers" (player0))
            (ai_magically_see_object "sg_round_cov_choppers" (player1))
            (ai_magically_see_object "sg_round_cov_choppers" (player2))
            (ai_magically_see_object "sg_round_cov_choppers" (player3))
        )
    )
    (sleep_until (< (ai_living_count "sg_round_cov") 8))
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (ai_place "sq_round_phantom01")
    )
    (sleep 30)
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (begin
            (ai_magically_see_object "sg_round_cov" (player0))
            (ai_magically_see_object "sg_round_cov" (player1))
            (ai_magically_see_object "sg_round_cov" (player2))
            (ai_magically_see_object "sg_round_cov" (player3))
        )
        (begin
            (ai_magically_see_object "sg_round_cov_choppers" (player0))
            (ai_magically_see_object "sg_round_cov_choppers" (player1))
            (ai_magically_see_object "sg_round_cov_choppers" (player2))
            (ai_magically_see_object "sg_round_cov_choppers" (player3))
        )
    )
    (sleep_until (< (ai_living_count "sg_round_cov") 8))
    (if (< s_round_obj_control 3)
        (ai_place "sq_round_second02")
    )
    (sleep 30)
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (begin
            (ai_magically_see_object "sg_round_cov" (player0))
            (ai_magically_see_object "sg_round_cov" (player1))
            (ai_magically_see_object "sg_round_cov" (player2))
            (ai_magically_see_object "sg_round_cov" (player3))
        )
        (begin
            (ai_magically_see_object "sg_round_cov_choppers" (player0))
            (ai_magically_see_object "sg_round_cov_choppers" (player1))
            (ai_magically_see_object "sg_round_cov_choppers" (player2))
            (ai_magically_see_object "sg_round_cov_choppers" (player3))
        )
    )
    (sleep_until (< (ai_living_count "sg_round_cov") 8))
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (ai_place "sq_round_phantom03")
    )
    (if (or (>= (game_difficulty_get_real) heroic) (= (game_is_cooperative) true))
        (begin
            (ai_magically_see_object "sg_round_cov" (player0))
            (ai_magically_see_object "sg_round_cov" (player1))
            (ai_magically_see_object "sg_round_cov" (player2))
            (ai_magically_see_object "sg_round_cov" (player3))
        )
        (begin
            (ai_magically_see_object "sg_round_cov_choppers" (player0))
            (ai_magically_see_object "sg_round_cov_choppers" (player1))
            (ai_magically_see_object "sg_round_cov_choppers" (player2))
            (ai_magically_see_object "sg_round_cov_choppers" (player3))
        )
    )
    (sleep_until (< (ai_task_count "obj_round_cov/main_gate") 0))
    (game_save)
)

(script dormant void sc_round_warthog_reinforce
    (sleep_until 
        (begin
            (if (and (<= (ai_task_count "obj_round_marine/main_gate") 1) (= (game_is_cooperative) false) (or (= (current_zone_set) 4) (= (current_zone_set) 5)))
                (begin
                    (sleep 30)
                    (if (< s_round_obj_control 4)
                        (begin
                            (ai_place "sq_round_reinforce")
                            (sleep 300)
                        )
                    )
                )
            )
            (>= s_round_obj_control 4)
        )
        30
    )
)

(script dormant void sc_exit_start
    (sleep_until (volume_test_players "tv_exit_oc1") 1)
    (data_mine_set_mission_segment "030_100_exit_tunnel")
    (set s_exit_obj_control 1)
    (garbage_collect_now)
    (game_save)
    (sleep 1)
    (wake sc_exit_reinforce)
    (wake sc_exit_truth)
    (wake sc_exit_brute_flavor_01)
    (wake sc_exit_johnson_flavor)
    (ai_set_objective "sg_allied_vehicles" "obj_exit_marine")
    (if (>= (game_difficulty_get) legendary)
        (object_create "exit_sniper")
    )
    (sleep_until (volume_test_players "tv_exit_oc2") 1)
    (set s_exit_obj_control 2)
    (wake sc_exit_music_stop)
    (wake sc_exit_music_start)
    (sleep_until (volume_test_players "tv_exit_oc3") 1)
    (set s_exit_obj_control 3)
    (object_create_anew "exit_pelican_crashed")
    (sleep_until (volume_test_players "tv_exit_oc4") 1)
    (set s_exit_obj_control 4)
    (wake sc_exit_prompt)
    (wake sc_exit_navpoint)
    (sleep_until (volume_test_players "tv_exit_oc5") 1)
    (set s_exit_obj_control 5)
    (wake sc_exit_fallback_save)
    (wake sc_exit_infantry_save)
    (wake sc_exit_shield_destroy)
    (wake sc_exit_brute_flavor_02)
    (wake sc_exit_music09_start)
    (wake sc_exit_music08_end)
    (game_save)
    (sleep_until (volume_test_players "tv_exit_oc6") 1)
    (set s_exit_obj_control 6)
    (wake sc_exit_mission_over)
    (wake sc_exit_midsave01)
    (sleep_until (volume_test_players "tv_exit_oc7") 1)
    (set s_exit_obj_control 7)
)

(script dormant void sc_exit_reinforce
    (ai_place "sq_exit_shade01")
    (if (= (game_difficulty_get_real) easy)
        (ai_place "sq_exit_brute01")
        (ai_place "sq_exit_jetpack01")
        (sleep 1)
        (ai_place "sq_exit_brute02")
        (if (= (game_difficulty_get_real) normal)
            (ai_place "sq_exit_brute01")
            (ai_place "sq_exit_jetpack01")
            (sleep 1)
            (ai_place "sq_exit_brute02")
            (if (= (game_difficulty_get_real) heroic)
                (ai_place "sq_exit_brute01")
                (ai_place "sq_exit_jetpack01")
                (sleep 1)
                (ai_place "sq_exit_brute02")
                (ai_place "sq_exit_jetpack02")
                (if (= (game_difficulty_get_real) legendary)
                    (ai_place "sq_exit_brute01")
                    (ai_place "sq_exit_jetpack01")
                    (sleep 1)
                    (ai_place "sq_exit_brute02")
                    (ai_place "sq_exit_jetpack02")
                )
            )
        )
    )
    (sleep 1)
    (ai_place "sq_exit_brute04")
    (ai_place "sq_exit_brute05")
    (sleep 1)
    (ai_place "sq_exit_jetpack04")
    (ai_place "sq_exit_jackal01")
    (sleep_until (>= s_exit_obj_control 4) 1)
    (if (<= (ai_task_count "obj_exit_cov/main_gate") 16)
        (begin
            (ai_place "sq_exit_brute06")
            (ai_place "sq_exit_jetpack05")
        )
    )
    (sleep_until (= (ai_task_count "obj_exit_cov/forward_gate") 0) 5)
    (game_save)
)

(script dormant void sc_exit_marine_reinforce
    (sleep_until (<= (ai_task_count "obj_round_marine/main_gate") 0))
    (sleep_until 
        (begin
            (if (and (<= (ai_task_count "obj_exit_marine/main_gate") 4) (= b_exit_pelican false) (= (game_is_cooperative) false))
                (begin
                    (set b_exit_pelican true)
                    (ai_place "sq_exit_pelican01")
                    (ai_place "sq_exit_marine01")
                    (ai_place "sq_exit_marine02")
                    (sleep 1)
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 27 (ai_actors "sq_exit_marine01"))
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_exit_pelican01/pilot") 27 (ai_actors "sq_exit_marine02"))
                    (set s_exit_marine_reinforce (+ s_exit_marine_reinforce 1))
                    (sleep 300)
                )
            )
            (= s_exit_marine_reinforce 5)
        )
        60
    )
)

(script dormant void sc_exit_midsave01
    (sleep_until (game_safe_to_save) 1 1200)
    (game_save)
)

(script dormant void sc_exit_mission_over
    (sleep_until (and (= (ai_living_count "sq_exit_shade01") 0) (= (volume_test_object "tv_exit_enemy_check" (ai_get_object "sg_exit_cov")) false) (= (volume_test_object "tv_exit_enemy_check2" (ai_get_object "sg_exit_cov")) false) (<= (object_get_health "exit_generator") 0)) 5)
    (vs_cast "sg_exit_mar" false 10 "030mf_240" "030mf_240" "030mf_240" "030mf_240")
    (set act_exit_marine1 (vs_role 1))
    (set act_exit_marine2 (vs_role 2))
    (set act_exit_marine3 (vs_role 3))
    (set act_exit_marine4 (vs_role 4))
    (print "marine:  ooh-rah!  alright!   hell yeah!")
    (vs_play_line act_exit_marine1 true 030mf_240)
    (vs_play_line act_exit_marine2 true 030mf_240)
    (vs_play_line act_exit_marine3 true 030mf_240)
    (vs_play_line act_exit_marine4 true 030mf_240)
    (sleep 30)
    (sleep_forever sc_exit_truth)
    (sleep 1)
    (sound_impulse_stop "sound\dialog\030_outskirts\mission\030mz_060_pot")
    (sound_impulse_stop "sound\dialog\030_outskirts\mission\030mz_070_pot")
    (sound_impulse_stop "sound\dialog\030_outskirts\mission\030mz_080_pot")
    (set b_exit_garbage_collect true)
    (wake sc_exit_ending_cinematic)
    (ai_erase_all)
    (ai_erase "sq_exit_brute01")
    (ai_erase "sq_exit_brute02")
    (ai_erase "sq_exit_brute04")
    (ai_erase "sq_exit_brute05")
    (ai_erase "sq_exit_jetpack01")
    (ai_erase "sq_exit_jetpack02")
    (ai_erase "sq_exit_jetpack04")
    (ai_erase "sq_exit_jackal01")
)

(script dormant void kill_stragglers
    (sleep_until 
        (begin
            (if (and (= (objects_can_see_object (players) (list_get (ai_actors "sq_elev_mar") straggler_no) 45) false) (> (objects_distance_to_object (players) (list_get (ai_actors "sq_elev_mar") straggler_no)) 250))
                (object_destroy (list_get (ai_actors "sq_elev_mar") straggler_no))
            )
            (if (and (= (objects_can_see_object (players) (list_get (ai_actors "sg_allied_vehicles") straggler_no) 45) false) (> (objects_distance_to_object (players) (list_get (ai_actors "sg_allied_vehicles") straggler_no)) 250))
                (object_destroy (list_get (ai_actors "sg_allied_vehicles") straggler_no))
            )
            (set straggler_no (+ straggler_no 1))
            (if (> straggler_no 30)
                (set straggler_no 0)
            )
            false
        )
    )
)

(script dormant void gs_camera_bounds
    (gs_camera_bounds_on)
    (sleep_until (>= s_cavern_obj_control 3) 1)
    (soft_ceiling_enable "camera_cv_00" false)
    (sleep_until (>= s_cavern_obj_control 6) 1)
    (soft_ceiling_enable "camera_cv_01" false)
    (sleep_until (>= s_drive_obj_control 4) 1)
    (soft_ceiling_enable "camera_dv_00" false)
    (sleep_until (>= s_drive_obj_control 7) 1)
    (soft_ceiling_enable "camera_dv_01" false)
    (sleep_until (>= s_pond_obj_control 1) 1)
    (soft_ceiling_enable "camera_pd_00" false)
    (sleep_until (>= s_pond_obj_control 5) 1)
    (soft_ceiling_enable "camera_cr_00" false)
    (sleep_until (>= s_crash_obj_control 5) 1)
    (soft_ceiling_enable "camera_cr_01" false)
    (sleep_until (>= s_bridge_obj_control 5) 1)
    (soft_ceiling_enable "camera_br_00" false)
    (sleep_until (>= s_bridge_obj_control 6) 1)
    (soft_ceiling_enable "camera_br_01" false)
    (sleep_until (>= s_tether_obj_control 2) 1)
    (soft_ceiling_enable "camera_th_00" false)
    (sleep_until (>= s_round_obj_control 1) 1)
    (soft_ceiling_enable "camera_rb_00" false)
    (sleep_until (>= s_round_obj_control 3) 1)
    (soft_ceiling_enable "camera_rb_01" false)
)

(script static void gs_camera_bounds_off
    (print "turn off camera bounds")
    (soft_ceiling_enable "camera_cv_00" false)
    (soft_ceiling_enable "camera_cv_01" false)
    (soft_ceiling_enable "camera_dv_00" false)
    (soft_ceiling_enable "camera_dv_01" false)
    (soft_ceiling_enable "camera_pd_00" false)
    (soft_ceiling_enable "camera_cr_00" false)
    (soft_ceiling_enable "camera_cr_01" false)
    (soft_ceiling_enable "camera_br_00" false)
    (soft_ceiling_enable "camera_br_01" false)
    (soft_ceiling_enable "camera_th_00" false)
    (soft_ceiling_enable "camera_rb_00" false)
    (soft_ceiling_enable "camera_rb_01" false)
)

(script static void gs_camera_bounds_on
    (print "turn on camera bounds")
    (soft_ceiling_enable "camera_cv_00" true)
    (soft_ceiling_enable "camera_cv_01" true)
    (soft_ceiling_enable "camera_dv_00" true)
    (soft_ceiling_enable "camera_dv_01" true)
    (soft_ceiling_enable "camera_pd_00" true)
    (soft_ceiling_enable "camera_cr_00" true)
    (soft_ceiling_enable "camera_cr_01" true)
    (soft_ceiling_enable "camera_br_00" true)
    (soft_ceiling_enable "camera_br_01" true)
    (soft_ceiling_enable "camera_th_00" true)
    (soft_ceiling_enable "camera_rb_00" true)
    (soft_ceiling_enable "camera_rb_01" true)
)

(script dormant void 030_music_01_start
    (print "***music: 030_music_01 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_01" none 1)
)

(script dormant void 030_music_02_start
    (print "***music: 030_music_02 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_02" none 1)
)

(script dormant void 030_music_01_stop
    (print "***music: 030_music_01 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_01")
)

(script dormant void 030_music_02_start_alt
    (print "***music: 030_music_02 start alt")
    (sound_looping_set_alternate "levels\solo\030_outskirts\music\030_music_02" true)
)

(script dormant void 030_music_02_stop
    (print "***music: 030_music_02 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_02")
)

(script dormant void 030_music_03_start
    (print "***music: 030_music_03 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_03" none 1)
)

(script dormant void 030_music_03_stop
    (print "***music: 030_music_03 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_03")
)

(script dormant void 030_music_04_start
    (print "***music: 030_music_04 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_04" none 1)
)

(script dormant void 030_music_04_stop
    (print "***music: 030_music_04 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_04")
)

(script dormant void 030_music_05_start
    (print "***music: 030_music_05 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_05" none 1)
)

(script dormant void 030_music_04_stop_backup
    (print "***music: 030_music_04 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_04")
)

(script dormant void 030_music_051_start
    (print "***music: 030_music_051 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_051" none 1)
)

(script dormant void 030_music_055_start
    (print "***music: 030_music_055 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_055" none 1)
)

(script dormant void 030_music_056_start
    (print "***music: 030_music_056 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_056" none 1)
)

(script dormant void 030_music_057_start
    (print "***music: 030_music_057 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_057" none 1)
)

(script dormant void 030_music_051_stop
    (print "***music: 030_music_051 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_051")
)

(script dormant void 030_music_055_stop
    (print "***music: 030_music_055 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_055")
)

(script dormant void 030_music_05_stop
    (print "***music: 030_music_05 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_05")
)

(script dormant void 030_music_06_start
    (print "***music: 030_music_06 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_06" none 1)
)

(script dormant void 030_music_056_stop
    (print "***music: 030_music_056 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_056")
)

(script dormant void 030_music_057_stop
    (print "***music: 030_music_057 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_057")
)

(script dormant void 030_music_06_start_alt
    (print "***music: 030_music_06 start alt")
    (sound_looping_set_alternate "levels\solo\030_outskirts\music\030_music_06" true)
)

(script dormant void 030_music_06_stop
    (print "***music: 030_music_06 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_06")
)

(script dormant void 030_music_07_start
    (print "***music: 030_music_07 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_07" none 1)
)

(script dormant void 030_music_07_stop
    (print "***music: 030_music_07 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_07")
)

(script dormant void 030_music_08_start
    (print "***music: 030_music_08 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_08" none 1)
)

(script dormant void 030_music_08_stop
    (print "***music: 030_music_08 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_08")
)

(script dormant void 030_music_09_start
    (print "***music: 030_music_09 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_09" none 1)
)

(script dormant void 030_music_09_stop
    (print "***music: 030_music_09 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_09")
)

(script dormant void 030_music_10_start
    (print "***music: 030_music_10 start")
    (sound_looping_start "levels\solo\030_outskirts\music\030_music_10" none 1)
)

(script dormant void 030_music_10_stop
    (print "***music: 030_music_10 stop")
    (sound_looping_stop "levels\solo\030_outskirts\music\030_music_10")
)

(script dormant void objective_1_set
    (sleep 30)
    (print "new objective set:")
    (print "clear a path for marine forces away from the base.")
    (objectives_show_up_to 0)
    (cinematic_set_chud_objective "obj_0")
)

(script dormant void objective_1_clear
    (print "objective complete:")
    (print "clear a path for marine forces away from the base.")
    (objectives_finish_up_to 0)
)

(script dormant void objective_2_set
    (sleep 30)
    (print "new objective set:")
    (print "clear a path into the town of voi.")
    (objectives_show_up_to 1)
    (cinematic_set_chud_objective "obj_1")
)

(script dormant void objective_2_clear
    (print "objective complete:")
    (print "clear a path into the town of voi.")
    (objectives_finish_up_to 1)
)

(script static void !030la01_we_made_it_sc_sh1
    (begin
        (object_destroy "fence01")
        (object_destroy "fence02")
        (object_destroy "cin_01")
        (object_destroy "cin_02")
        (object_destroy "cin_03")
        (object_destroy "cin_04")
        (object_destroy "cin_05")
        (object_destroy "cin_06")
        (object_destroy "cin_07")
        (object_destroy "cin_09")
        (object_destroy "cin_10")
    )
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 0 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 0)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (object_hide (cinematic_object_get_unit "cin_lord_hood") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 (cinematic_object_get_unit "cin_masterchief") "030la01_cin_masterchief_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 (cinematic_object_get_unit "cin_miranda") "030la01_cin_miranda_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 (cinematic_object_get_scenery "cin_assault_rifle") "030la01_cin_assault_rifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 (cinematic_object_get_scenery "cin_pelican1") "030la01_cin_pelican1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 (cinematic_object_get_scenery "cin_pelican2") "030la01_cin_pelican2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 (cinematic_object_get_scenery "cin_warthog1") "030la01_cin_warthog1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 (cinematic_object_get_scenery "cin_warthog2") "030la01_cin_warthog2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 (cinematic_object_get_unit "cin_arbiter") "030la01_cin_arbiter_1" true)
    (object_hide (cinematic_object_get_unit "cin_grunt1") true)
    (object_hide (cinematic_object_get_unit "cin_grunt2") true)
    (object_hide (cinematic_object_get_scenery "cin_bridge1") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 (cinematic_object_get_scenery "cin_speaker") "030la01_cin_speaker_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 2 0)
    (cinematic_scripting_start_music 0 0 0 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_active" 1 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 0.5 0)
    (cinematic_scripting_start_music 0 0 0 1)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_power" 1 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_power" 0.25 0)
    (sleep 15)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 1 5)
    (sleep 5)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_power" 0.75 0)
    (sleep 10)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 0.25 10)
    (sleep 55)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la01_we_made_it_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 1 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 1)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (object_hide (cinematic_object_get_unit "cin_lord_hood") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 (cinematic_object_get_unit "cin_masterchief") "030la01_cin_masterchief_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 (cinematic_object_get_unit "cin_miranda") "030la01_cin_miranda_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 (cinematic_object_get_scenery "cin_assault_rifle") "030la01_cin_assault_rifle_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 (cinematic_object_get_scenery "cin_pelican1") "030la01_cin_pelican1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 (cinematic_object_get_scenery "cin_pelican2") "030la01_cin_pelican2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 (cinematic_object_get_scenery "cin_warthog1") "030la01_cin_warthog1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 (cinematic_object_get_scenery "cin_warthog2") "030la01_cin_warthog2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 (cinematic_object_get_unit "cin_arbiter") "030la01_cin_arbiter_2" true)
    (object_hide (cinematic_object_get_unit "cin_grunt1") true)
    (object_hide (cinematic_object_get_unit "cin_grunt2") true)
    (object_hide (cinematic_object_get_scenery "cin_bridge1") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 (cinematic_object_get_scenery "cin_speaker") "030la01_cin_speaker_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 2.5 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_active" 1 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_power" 1 0)
    (sleep 66)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la01_we_made_it_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 2 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 2)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 (cinematic_object_get_unit "cin_lord_hood") "030la01_cin_lord_hood_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 (cinematic_object_get_unit "cin_masterchief") "030la01_cin_masterchief_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 (cinematic_object_get_unit "cin_miranda") "030la01_cin_miranda_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 (cinematic_object_get_scenery "cin_assault_rifle") "030la01_cin_assault_rifle_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 (cinematic_object_get_scenery "cin_pelican1") "030la01_cin_pelican1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 (cinematic_object_get_scenery "cin_pelican2") "030la01_cin_pelican2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 (cinematic_object_get_scenery "cin_warthog1") "030la01_cin_warthog1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 (cinematic_object_get_scenery "cin_warthog2") "030la01_cin_warthog2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 (cinematic_object_get_unit "cin_arbiter") "030la01_cin_arbiter_3" true)
    (object_hide (cinematic_object_get_unit "cin_grunt1") true)
    (object_hide (cinematic_object_get_unit "cin_grunt2") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 (cinematic_object_get_scenery "cin_bridge1") "030la01_bridge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 (cinematic_object_get_scenery "cin_speaker") "030la01_cin_speaker_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 4 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_power" 0.25 0)
    (set texture_camera_near_plane 0.02)
    (cinematic_print "custom script play")
    (sleep 2)
    (cinematic_scripting_start_dialogue 0 0 2 0 (cinematic_object_get_unit "cin_miranda"))
    (sleep 63)
    (cinematic_scripting_start_dialogue 0 0 2 1 none)
    (cinematic_scripting_start_dialogue 0 0 2 7 (cinematic_object_get_unit "cin_lord_hood"))
    (sleep 68)
    (cinematic_scripting_start_dialogue 0 0 2 2 none)
    (cinematic_scripting_start_dialogue 0 0 2 6 (cinematic_object_get_unit "cin_lord_hood"))
    (sleep 35)
    (cinematic_scripting_start_dialogue 0 0 2 3 (cinematic_object_get_unit "cin_miranda"))
    (sleep 55)
    (cinematic_scripting_start_dialogue 0 0 2 4 none)
    (cinematic_scripting_start_dialogue 0 0 2 5 (cinematic_object_get_unit "cin_lord_hood"))
    (sleep 20)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la01_we_made_it_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 3 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 3)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 (cinematic_object_get_unit "cin_lord_hood") "030la01_cin_lord_hood_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 (cinematic_object_get_unit "cin_masterchief") "030la01_cin_masterchief_4" true)
    (object_hide (cinematic_object_get_unit "cin_miranda") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 (cinematic_object_get_scenery "cin_assault_rifle") "030la01_cin_assault_rifle_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 (cinematic_object_get_scenery "cin_pelican1") "030la01_cin_pelican1_4" true)
    (object_hide (cinematic_object_get_scenery "cin_pelican2") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 (cinematic_object_get_scenery "cin_warthog1") "030la01_cin_warthog1_4" true)
    (object_hide (cinematic_object_get_scenery "cin_warthog2") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 (cinematic_object_get_unit "cin_arbiter") "030la01_cin_arbiter_4" true)
    (object_hide (cinematic_object_get_unit "cin_grunt1") true)
    (object_hide (cinematic_object_get_unit "cin_grunt2") true)
    (object_hide (cinematic_object_get_scenery "cin_bridge1") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 (cinematic_object_get_scenery "cin_speaker") "030la01_cin_speaker_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 2.7 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_active" 1 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_power" 0.25 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 0 0)
    (sleep 25)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 1 15)
    (sleep 10)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_power" 1 10)
    (sleep 7)
    (cinematic_scripting_start_dialogue 0 0 3 0 none)
    (sleep 68)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la01_we_made_it_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 4 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 4)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (object_hide (cinematic_object_get_unit "cin_lord_hood") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 (cinematic_object_get_unit "cin_masterchief") "030la01_cin_masterchief_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 (cinematic_object_get_unit "cin_miranda") "030la01_cin_miranda_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 (cinematic_object_get_scenery "cin_assault_rifle") "030la01_cin_assault_rifle_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 (cinematic_object_get_scenery "cin_pelican1") "030la01_cin_pelican1_5" true)
    (object_hide (cinematic_object_get_scenery "cin_pelican2") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 (cinematic_object_get_scenery "cin_warthog1") "030la01_cin_warthog1_5" true)
    (object_hide (cinematic_object_get_scenery "cin_warthog2") true)
    (object_hide (cinematic_object_get_unit "cin_arbiter") true)
    (object_hide (cinematic_object_get_unit "cin_grunt1") true)
    (object_hide (cinematic_object_get_unit "cin_grunt2") true)
    (object_hide (cinematic_object_get_scenery "cin_bridge1") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 (cinematic_object_get_scenery "cin_speaker") "030la01_cin_speaker_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 2.5 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "jet_wash_active" 0 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 0.75 0)
    (sleep 15)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 0.35 10)
    (sleep 124)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la01_we_made_it_sc
    (sound_class_set_gain "amb" 0 60)
    (cinematic_print "beginning scene 1")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 0)
    (!030la01_we_made_it_sc_sh1)
    (!030la01_we_made_it_sc_sh2)
    (!030la01_we_made_it_sc_sh3)
    (!030la01_we_made_it_sc_sh4)
    (!030la01_we_made_it_sc_sh5)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
    (cinematic_scripting_destroy_object 0 0 0 (cinematic_object_get_unit "cin_lord_hood"))
    (cinematic_scripting_destroy_object 0 0 1 (cinematic_object_get_unit "cin_masterchief"))
    (cinematic_scripting_destroy_object 0 0 2 (cinematic_object_get_unit "cin_miranda"))
    (cinematic_scripting_destroy_object 0 0 3 (cinematic_object_get_scenery "cin_assault_rifle"))
    (cinematic_scripting_destroy_object 0 0 4 (cinematic_object_get_scenery "cin_pelican1"))
    (cinematic_scripting_destroy_object 0 0 5 (cinematic_object_get_scenery "cin_pelican2"))
    (cinematic_scripting_destroy_object 0 0 6 (cinematic_object_get_scenery "cin_warthog1"))
    (cinematic_scripting_destroy_object 0 0 7 (cinematic_object_get_scenery "cin_warthog2"))
    (cinematic_scripting_destroy_object 0 0 8 (cinematic_object_get_unit "cin_arbiter"))
    (cinematic_scripting_destroy_object 0 0 9 (cinematic_object_get_unit "cin_grunt1"))
    (cinematic_scripting_destroy_object 0 0 10 (cinematic_object_get_unit "cin_grunt2"))
    (cinematic_scripting_destroy_object 0 0 11 (cinematic_object_get_scenery "cin_bridge1"))
    (cinematic_scripting_destroy_object 0 0 12 (cinematic_object_get_scenery "cin_speaker"))
)

(script static void !030la02_final_effort_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 0 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 0)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 (cinematic_object_get_unit "cin_masterchief") "030la02_cin_masterchief_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 (cinematic_object_get_unit "cin_miranda") "030la02_cin_miranda_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 (cinematic_object_get_scenery "cin_assault_rifle") "030la02_cin_assault_rifle_1" true)
    (object_hide (cinematic_object_get_scenery "cin_pelican1") true)
    (object_hide (cinematic_object_get_scenery "cin_pelican2") true)
    (object_hide (cinematic_object_get_scenery "cin_warthog1") true)
    (object_hide (cinematic_object_get_scenery "cin_warthog2") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 (cinematic_object_get_scenery "cin_cap_ship") "cap_ship_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 (cinematic_object_get_scenery "cin_cruiser01") "cruiser1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 (cinematic_object_get_scenery "cin_cruiser02") "cruiser2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 (cinematic_object_get_scenery "cin_cruiser03") "cruiser3_1" true)
    (object_hide (cinematic_object_get_scenery "cin_light_cheat") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 (cinematic_object_get_scenery "cin_speaker") "030la02_cin_speaker_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1.5 0)
    (sleep 1)
    (cinematic_scripting_start_dialogue 0 1 0 0 none)
    (sleep 111)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la02_final_effort_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 1 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 1)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (object_hide (cinematic_object_get_unit "cin_masterchief") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 (cinematic_object_get_unit "cin_miranda") "030la02_cin_miranda_2" true)
    (object_hide (cinematic_object_get_scenery "cin_assault_rifle") true)
    (object_hide (cinematic_object_get_scenery "cin_pelican1") true)
    (object_hide (cinematic_object_get_scenery "cin_pelican2") true)
    (object_hide (cinematic_object_get_scenery "cin_warthog1") true)
    (object_hide (cinematic_object_get_scenery "cin_warthog2") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 (cinematic_object_get_scenery "cin_cap_ship") "cap_ship_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 (cinematic_object_get_scenery "cin_cruiser01") "cruiser1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 (cinematic_object_get_scenery "cin_cruiser02") "cruiser2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 (cinematic_object_get_scenery "cin_cruiser03") "cruiser3_2" true)
    (object_hide (cinematic_object_get_scenery "cin_light_cheat") true)
    (object_hide (cinematic_object_get_scenery "cin_speaker") true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 0.75 0)
    (sleep 97)
    (cinematic_scripting_start_dialogue 0 1 1 0 none)
    (sleep 68)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la02_final_effort_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 2 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 2)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 (cinematic_object_get_unit "cin_masterchief") "030la02_cin_masterchief_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 (cinematic_object_get_unit "cin_miranda") "030la02_cin_miranda_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 (cinematic_object_get_scenery "cin_assault_rifle") "030la02_cin_assault_rifle_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 (cinematic_object_get_scenery "cin_pelican1") "030la02_cin_pelican1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 (cinematic_object_get_scenery "cin_pelican2") "030la02_cin_pelican2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 (cinematic_object_get_scenery "cin_warthog1") "030la02_cin_warthog1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 (cinematic_object_get_scenery "cin_warthog2") "030la02_cin_warthog2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 (cinematic_object_get_scenery "cin_cap_ship") "cap_ship_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 (cinematic_object_get_scenery "cin_cruiser01") "cruiser1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 (cinematic_object_get_scenery "cin_cruiser02") "cruiser2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 (cinematic_object_get_scenery "cin_cruiser03") "cruiser3_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 (cinematic_object_get_scenery "cin_light_cheat") "light_cheat_3" true)
    (object_hide (cinematic_object_get_scenery "cin_speaker") true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 0.25 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican2") "thrusters_down" 1 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican2") "thrusters_back" 0 0)
    (sleep 15)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 1 25)
    (sleep 35)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican2") "thrusters_down" 0 10)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican2") "thrusters_back" 1 5)
    (sleep 70)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la02_final_effort_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 1) 3 "cin_030la_tunnel_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 3)
    (cinematic_object_create_cinematic_anchor "cin_030la_tunnel_anchor" "cin_030la_tunnel_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 (cinematic_object_get_unit "cin_masterchief") "030la02_cin_masterchief_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 (cinematic_object_get_unit "cin_miranda") "030la02_cin_miranda_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 (cinematic_object_get_scenery "cin_assault_rifle") "030la02_cin_assault_rifle_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 (cinematic_object_get_scenery "cin_pelican1") "030la02_cin_pelican1_4" true)
    (object_hide (cinematic_object_get_scenery "cin_pelican2") true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 (cinematic_object_get_scenery "cin_warthog1") "030la02_cin_warthog1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 (cinematic_object_get_scenery "cin_warthog2") "030la02_cin_warthog2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 (cinematic_object_get_scenery "cin_cap_ship") "cap_ship_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 (cinematic_object_get_scenery "cin_cruiser01") "cruiser1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 (cinematic_object_get_scenery "cin_cruiser02") "cruiser2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 (cinematic_object_get_scenery "cin_cruiser03") "cruiser3_4" true)
    (object_hide (cinematic_object_get_scenery "cin_light_cheat") true)
    (object_hide (cinematic_object_get_scenery "cin_speaker") true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 2.5 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_down" 0.25 0)
    (object_set_function_variable (cinematic_object_get_scenery "cin_pelican1") "thrusters_back" 1 0)
    (sleep 110)
    (cinematic_print "custom script play")
    (fade_out 0 0 0 40)
    (sleep 10)
    (cinematic_scripting_fade_out 0 0 0 30)
    (sleep 30)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !030la02_final_effort_sc
    (cinematic_print "beginning scene 2")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 1) 0)
    (!030la02_final_effort_sc_sh1)
    (!030la02_final_effort_sc_sh2)
    (!030la02_final_effort_sc_sh3)
    (!030la02_final_effort_sc_sh4)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
    (cinematic_scripting_destroy_object 0 1 0 (cinematic_object_get_unit "cin_masterchief"))
    (cinematic_scripting_destroy_object 0 1 1 (cinematic_object_get_unit "cin_miranda"))
    (cinematic_scripting_destroy_object 0 1 2 (cinematic_object_get_scenery "cin_assault_rifle"))
    (cinematic_scripting_destroy_object 0 1 3 (cinematic_object_get_scenery "cin_pelican1"))
    (cinematic_scripting_destroy_object 0 1 4 (cinematic_object_get_scenery "cin_pelican2"))
    (cinematic_scripting_destroy_object 0 1 5 (cinematic_object_get_scenery "cin_warthog1"))
    (cinematic_scripting_destroy_object 0 1 6 (cinematic_object_get_scenery "cin_warthog2"))
    (cinematic_scripting_destroy_object 0 1 7 (cinematic_object_get_scenery "cin_cap_ship"))
    (cinematic_scripting_destroy_object 0 1 8 (cinematic_object_get_scenery "cin_cruiser01"))
    (cinematic_scripting_destroy_object 0 1 9 (cinematic_object_get_scenery "cin_cruiser02"))
    (cinematic_scripting_destroy_object 0 1 10 (cinematic_object_get_scenery "cin_cruiser03"))
    (cinematic_scripting_destroy_object 0 1 11 (cinematic_object_get_scenery "cin_light_cheat"))
    (cinematic_scripting_destroy_object 0 1 12 (cinematic_object_get_scenery "cin_speaker"))
    (sleep 50)
)

(script static void 030la_highway_debug
    (cinematic_zone_activate_for_debugging 0)
    (sleep 1)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 2)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
    (fade_in 0 0 0 60)
    (cinematic_outro_start)
    (!030la01_we_made_it_sc)
    (!030la02_final_effort_sc)
    (sleep 90)
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 0)
)

(script static void 030la_highway
    (cinematic_zone_activate 0)
    (sleep 1)
    (camera_set_cinematic)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
    (fade_in 0 0 0 60)
    (cinematic_outro_start)
    (!030la01_we_made_it_sc)
    (!030la02_final_effort_sc)
    (sleep 90)
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 030la_highway_cleanup
    (cinematic_scripting_clean_up 0)
)

; Decompilation finished in ~0.2482384s
