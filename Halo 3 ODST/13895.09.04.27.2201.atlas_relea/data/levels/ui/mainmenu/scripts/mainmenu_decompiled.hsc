; Decompiled with Assembly
; 
; Source file: mainmenu.hsc
; Start time: 2018-02-05 12:30:34 PM
; 
; Remember that all script code is property of Bungie/343 Industries.
; You have no rights. Play nice.

; Globals
(global short player_00 0)
(global short player_01 1)
(global short player_02 2)
(global short player_03 3)
(global string data_mine_mission_segment "")
(global short s_waypoint_index 0)
(global short s_waypoint_timer (* 30 10))
(global short g_pda_breadcrumb_fade (* 30 45))
(global short g_pda_breadcrumb_timer (* 30 1.5))
(global sound sfx_a_button "sound\game_sfx\ui\hud_ui\b_button")
(global sound sfx_b_button "sound\game_sfx\ui\hud_ui\a_button")
(global sound sfx_hud_in "sound\game_sfx\ui\hud_ui\hud_in")
(global sound sfx_hud_out "sound\game_sfx\ui\hud_ui\hud_out")
(global sound sfx_objective "sound\game_sfx\ui\hud_ui\mission_objective")
(global short s_sc110_01 0)
(global short s_sc110_02 0)
(global short s_sc110_03 0)
(global short s_sc110_04 0)
(global short s_sc110_05 0)
(global short s_sc110_06 0)
(global short s_sc120_01 0)
(global short s_sc120_02 0)
(global short s_sc120_03 0)
(global short s_sc120_04 0)
(global short s_sc120_05 0)
(global short s_sc120_06 0)
(global short s_sc130_01 0)
(global short s_sc130_02 0)
(global short s_sc130_03 0)
(global short s_sc130_04 0)
(global short s_sc130_05 0)
(global short s_sc130_06 0)
(global short s_sc140_01 0)
(global short s_sc140_02 0)
(global short s_sc140_03 0)
(global short s_sc140_04 0)
(global short s_sc140_05 0)
(global short s_sc140_06 0)
(global short s_sc150_01 0)
(global short s_sc150_02 0)
(global short s_sc150_03 0)
(global short s_sc150_04 0)
(global short s_sc150_05 0)
(global short s_l200_01 0)
(global boolean debug true)
(global boolean g_play_cinematics true)
(global short ui_location 65535)
(global real mainmenu_offset 0)
(global long wait_ticks 0)
(global short ui_location_clock_start 65535)
(global boolean main_menu_sc_sh1_loop false)

; Scripts
(script static unit player0
    (player_get 0)
)

(script static unit player1
    (player_get 1)
)

(script static unit player2
    (player_get 2)
)

(script static unit player3
    (player_get 3)
)

(script static short player_count
    (list_count (players))
)

(script static void print_difficulty
    (if (= (game_difficulty_get_real) easy)
        (print "easy")
        (if (= (game_difficulty_get_real) normal)
            (print "normal")
            (if (= (game_difficulty_get_real) heroic)
                (print "heroic")
                (if (= (game_difficulty_get_real) legendary)
                    (print "legendary")
                )
            )
        )
    )
)

(script static boolean difficulty_legendary
    (= (game_difficulty_get_real) legendary)
)

(script static boolean difficulty_heroic
    (= (game_difficulty_get_real) heroic)
)

(script static boolean difficulty_normal
    (<= (game_difficulty_get_real) normal)
)

(script static void replenish_players
    (if debug
        (print "replenish player health...")
    )
    (unit_set_current_vitality (player0) 80 80)
    (unit_set_current_vitality (player1) 80 80)
    (unit_set_current_vitality (player2) 80 80)
    (unit_set_current_vitality (player3) 80 80)
)

(script static boolean coop_players_2
    (>= (game_coop_player_count) 2)
)

(script static boolean coop_players_3
    (>= (game_coop_player_count) 3)
)

(script static boolean coop_players_4
    (>= (game_coop_player_count) 4)
)

(script dormant void player0_award_tourist
    (f_award_tourist player_00)
)

(script dormant void player1_award_tourist
    (f_award_tourist player_01)
)

(script dormant void player2_award_tourist
    (f_award_tourist player_02)
)

(script dormant void player3_award_tourist
    (f_award_tourist player_03)
)

(script static void (f_award_tourist (short player_short))
    (sleep_until (pda_is_active_deterministic (player_get player_short)) 45)
    (sleep 30)
    (achievement_grant_to_player (player_get player_short) "_achievement_tourist")
)

(script static void (f_sleep_until_activate_waypoint (short player_short))
    (sleep 3)
    (unit_action_test_reset (player_get player_short))
    (sleep 3)
    (sleep_until (and (> (object_get_health (player_get player_short)) 0) (or (unit_action_test_dpad_up (player_get player_short)) (unit_action_test_dpad_down (player_get player_short)))) 1)
    (f_sfx_b_button player_short)
    (sleep 3)
)

(script static void (f_sleep_deactivate_waypoint (short player_short))
    (sleep 3)
    (unit_action_test_reset (player_get player_short))
    (sleep 3)
    (sleep_until (or (<= (unit_get_health (player_get player_short)) 0) (unit_action_test_dpad_up (player_get player_short)) (unit_action_test_dpad_down (player_get player_short))) 1 s_waypoint_timer)
    (if (or (unit_action_test_dpad_up (player_get player_short)) (unit_action_test_dpad_down (player_get player_short)))
        (f_sfx_b_button player_short)
    )
    (sleep 3)
)

(script static void (f_waypoint_message (short player_short, cutscene_flag waypoint_01, cutscene_title display_title, cutscene_title blank_title))
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short)))
        (begin
            (chud_show_cinematic_title (player_get player_short) display_title)
            (sleep 15)
            (f_sleep_deactivate_waypoint player_short)
            (chud_show_cinematic_title (player_get player_short) blank_title)
        )
        (sleep 5)
    )
)

(script static void (f_waypoint_activate_1 (short player_short, cutscene_flag waypoint_01))
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short)))
        (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true)
    )
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0 false)
)

(script static void (f_waypoint_activate_2 (short player_short, cutscene_flag waypoint_01, cutscene_flag waypoint_02))
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short)))
        (begin
            (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_02 0.55 true)
        )
    )
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0 false)
    (chud_show_navpoint (player_get player_short) waypoint_02 0 false)
)

(script static void (f_waypoint_activate_3 (short player_short, cutscene_flag waypoint_01, cutscene_flag waypoint_02, cutscene_flag waypoint_03))
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short)))
        (begin
            (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_02 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_03 0.55 true)
        )
    )
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0 false)
    (chud_show_navpoint (player_get player_short) waypoint_02 0 false)
    (chud_show_navpoint (player_get player_short) waypoint_03 0 false)
)

(script static void (f_waypoint_activate_4 (short player_short, cutscene_flag waypoint_01, cutscene_flag waypoint_02, cutscene_flag waypoint_03, cutscene_flag waypoint_04))
    (unit_action_test_reset (player_get player_short))
    (if (not (pda_is_active_deterministic (player_get player_short)))
        (begin
            (chud_show_navpoint (player_get player_short) waypoint_01 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_02 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_03 0.55 true)
            (chud_show_navpoint (player_get player_short) waypoint_04 0.55 true)
        )
    )
    (sleep 15)
    (f_sleep_deactivate_waypoint player_short)
    (chud_show_navpoint (player_get player_short) waypoint_01 0 false)
    (chud_show_navpoint (player_get player_short) waypoint_02 0 false)
    (chud_show_navpoint (player_get player_short) waypoint_03 0 false)
    (chud_show_navpoint (player_get player_short) waypoint_04 0 false)
)

(script static void (f_coop_resume_unlocked (cutscene_title resume_title, short insertion_point))
    (if (game_is_cooperative)
        (begin
            (sound_impulse_start sfx_hud_in none 1)
            (cinematic_set_chud_objective resume_title)
            (game_insertion_point_unlock insertion_point)
        )
    )
)

(script static boolean cinematic_skip_start
    (cinematic_skip_start_internal)
    (game_save_cinematic_skip)
    (sleep_until (not (game_saving)) 1)
    (not (game_reverted))
)

(script static void cinematic_skip_stop
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (game_revert)
    )
)

(script static void cinematic_skip_stop_terminal
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (if debug
                (print "sleeping forever...")
            )
            (sleep_forever)
        )
    )
)

(script static void cinematic_snap_to_black
    (fade_out 0 0 0 0)
    (cinematic_snap_from_black)
)

(script static void cinematic_snap_to_white
    (fade_out 1 1 1 0)
    (cinematic_snap_from_black)
)

(script static void cinematic_preparation
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 0)
    (object_hide (player0) true)
    (object_hide (player1) true)
    (object_hide (player2) true)
    (object_hide (player3) true)
    (unit_enable_vision_mode (player0) false)
    (unit_enable_vision_mode (player1) false)
    (unit_enable_vision_mode (player2) false)
    (unit_enable_vision_mode (player3) false)
    (player_close_pda (player0))
    (player_close_pda (player1))
    (player_close_pda (player2))
    (player_close_pda (player3))
    (replenish_players)
    (pda_stop_arg_sound (player0))
    (pda_stop_arg_sound (player1))
    (pda_stop_arg_sound (player2))
    (pda_stop_arg_sound (player3))
    (chud_cinematic_fade 0 0)
    (chud_show_messages false)
    (campaign_metagame_time_pause true)
    (player_enable_input false)
    (player_disable_movement false)
    (sleep 1)
    (cinematic_start)
    (camera_control true)
)

(script static void cinematic_snap_from_black
    (cinematic_snap_from_post)
    (sleep 5)
    (fade_in 0 0 0 5)
    (cinematic_fade_to_black)
)

(script static void cinematic_snap_from_white
    (cinematic_snap_from_post)
    (sleep 5)
    (fade_in 1 1 1 5)
    (cinematic_fade_to_black)
)

(script static void cinematic_snap_from_pre
    (cinematic_stop)
    (camera_control false)
    (cinematic_show_letterbox_immediate false)
    (pda_breadcrumbs)
    (sleep 1)
    (chud_cinematic_fade 1 0)
    (object_hide (player0) false)
    (object_hide (player1) false)
    (object_hide (player2) false)
    (object_hide (player3) false)
)

(script static void cinematic_snap_from_post
    (unit_enable_vision_mode (player0) true)
    (unit_enable_vision_mode (player1) true)
    (unit_enable_vision_mode (player2) true)
    (unit_enable_vision_mode (player3) true)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
    (chud_show_messages true)
    (if (not (campaign_survival_enabled))
        (game_save)
    )
)

(script static void cinematic_fade_to_black
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (campaign_metagame_time_pause true)
    (sleep 10)
    (chud_cinematic_fade 0 0.5)
    (cinematic_show_letterbox true)
    (sleep 5)
    (fade_out 0 0 0 30)
    (sleep 30)
    (object_hide (player0) true)
    (object_hide (player1) true)
    (object_hide (player2) true)
    (object_hide (player3) true)
    (unit_enable_vision_mode (player0) false)
    (unit_enable_vision_mode (player1) false)
    (unit_enable_vision_mode (player2) false)
    (unit_enable_vision_mode (player3) false)
    (player_close_pda (player0))
    (player_close_pda (player1))
    (player_close_pda (player2))
    (player_close_pda (player3))
    (cinematic_start)
    (camera_control true)
    (player_enable_input false)
    (player_disable_movement false)
    (sleep 1)
    (cinematic_show_letterbox_immediate true)
)

(script static void cinematic_fade_to_gameplay
    (cinematic_stop)
    (camera_control false)
    (cinematic_show_letterbox_immediate true)
    (object_hide (player0) false)
    (object_hide (player1) false)
    (object_hide (player2) false)
    (object_hide (player3) false)
    (player_control_unlock_gaze (player0))
    (player_control_unlock_gaze (player1))
    (player_control_unlock_gaze (player2))
    (player_control_unlock_gaze (player3))
    (sleep 1)
    (sleep 1)
    (fade_in 0 0 0 15)
    (sleep 15)
    (cinematic_show_letterbox false)
    (sleep 15)
    (chud_cinematic_fade 1 1)
    (unit_raise_weapon (player0) 30)
    (unit_raise_weapon (player1) 30)
    (unit_raise_weapon (player2) 30)
    (unit_raise_weapon (player3) 30)
    (sleep 10)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void cinematic_hud_on
    (chud_cinematic_fade 1 0)
    (chud_show_compass false)
    (chud_show_crosshair false)
)

(script static void cinematic_hud_off
    (chud_cinematic_fade 0 0)
    (chud_show_compass true)
    (chud_show_crosshair true)
)

(script dormant void pda_breadcrumbs
    (pda_set_footprint_dead_zone 5)
    (sleep_until 
        (begin
            (player_add_footprint (player0) g_pda_breadcrumb_fade)
            (player_add_footprint (player1) g_pda_breadcrumb_fade)
            (player_add_footprint (player2) g_pda_breadcrumb_fade)
            (player_add_footprint (player3) g_pda_breadcrumb_fade)
            false
        )
        g_pda_breadcrumb_timer
    )
)

(script static void end_mission
    (if global_playtest_mode
        (begin
            (data_mine_set_mission_segment "questionaire")
            (cinematic_hud_on)
            (sleep 1)
            (print "end mission!")
            (sleep 15)
            (hud_show_training_text true)
            (sleep 90)
            (player_action_test_reset)
            (sleep_until 
                (begin
                    (sleep_until (player_action_test_accept) 1 90)
                    (player_action_test_accept)
                )
                1
            )
            (hud_show_training_text false)
            (print "loading next mission...")
            (sleep 15)
        )
        (begin
            (fade_out 0 0 0 0)
            (cinematic_stop)
            (camera_control false)
        )
    )
    (game_won)
)

(script static void (f_end_scene (script cinematic_outro, zone_set cinematic_zone_set, string_id scene_boolean, string_id scene_name, string snap_color))
    (if (= snap_color "black")
        (cinematic_snap_to_white)
        (if (= snap_color "white")
            (cinematic_preparation)
        )
    )
    (sleep 1)
    (game_award_level_complete_achievements)
    (game_level_prepare scene_name)
    (ai_erase_all)
    (switch_zone_set cinematic_zone_set)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (if (= g_play_cinematics true)
        (begin
            (if (cinematic_skip_stop)
                (begin
                    (if debug
                        (print "play outro cinematic...")
                    )
                    (cinematic_show_letterbox true)
                    (sleep 30)
                    (evaluate cinematic_outro)
                    (sound_class_set_gain "" 0 0)
                )
            )
            (cinematic_skip_stop_internal)
        )
    )
    (sound_class_set_gain "" 0 0)
    (sound_class_set_gain "ui" 1 0)
    (cinematic_snap_to_white)
    (gp_boolean_set scene_boolean true)
    (gp_boolean_set "gp_l100_complete" true)
    (if debug
        (print "switch to scene...")
    )
    (game_level_advance scene_name)
)

(script startup void beginning_mission_segment
    (data_mine_set_mission_segment "mission_start")
)

(script static void (f_sfx_a_button (short player_short))
    (sound_impulse_start sfx_a_button (player_get player_short) 1)
)

(script static void (f_sfx_b_button (short player_short))
    (sound_impulse_start sfx_b_button (player_get player_short) 1)
)

(script static void (f_sfx_hud_in (short player_short))
    (sound_impulse_start sfx_hud_in (player_get player_short) 1)
)

(script static void (f_sfx_hud_out (short player_short))
    (sound_impulse_start sfx_hud_out (player_get player_short) 1)
)

(script static void (f_display_message (short player_short, cutscene_title display_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
)

(script static void (f_display_message_accept (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_message (player_get player_short))
    (sleep_until (unit_action_test_accept (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_cancel (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_cancel_message (player_get player_short))
    (sleep_until (unit_action_test_cancel (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_confirm (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_message (player_get player_short))
    (unit_confirm_cancel_message (player_get player_short))
    (sleep_until (or (unit_action_test_accept (player_get player_short)) (unit_action_test_cancel (player_get player_short))) 1)
    (if (unit_action_test_accept (player_get player_short))
        (f_sfx_b_button player_short)
        (if (unit_action_test_cancel (player_get player_short))
            (f_sfx_hud_in player_short)
        )
    )
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_repeat_training (short player_short, cutscene_title display_title, cutscene_title blank_title, trigger_volume volume_01, trigger_volume volume_02))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_y_button (player_get player_short))
    (unit_confirm_cancel_message (player_get player_short))
    (sleep_until (or (unit_action_test_y (player_get player_short)) (unit_action_test_cancel (player_get player_short)) (and (not (volume_test_object volume_01 (player_get player_short))) (not (volume_test_object volume_02 (player_get player_short))))) 1)
    (if (or (volume_test_object volume_01 (player_get player_short)) (volume_test_object volume_02 (player_get player_short)))
        (begin
            (if (unit_action_test_y (player_get player_short))
                (f_sfx_b_button player_short)
                (if (unit_action_test_cancel (player_get player_short))
                    (f_sfx_hud_in player_short)
                )
            )
            (chud_show_cinematic_title (player_get player_short) blank_title)
            (sleep 5)
        )
    )
)

(script static void (f_display_message_vision (short player_short, cutscene_title display_title, cutscene_title blank_title, trigger_volume volume_01, trigger_volume volume_02))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (or (unit_action_test_vision_trigger (player_get player_short)) (and (not (volume_test_object volume_01 (player_get player_short))) (not (volume_test_object volume_02 (player_get player_short))))) 1)
    (if (or (volume_test_object volume_01 (player_get player_short)) (volume_test_object volume_02 (player_get player_short)))
        (begin
            (f_sfx_b_button player_short)
            (chud_show_cinematic_title (player_get player_short) blank_title)
            (sleep 5)
        )
    )
)

(script static void (f_display_message_accept_volume (short player_short, cutscene_title display_title, cutscene_title blank_title, trigger_volume volume_01, trigger_volume volume_02))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (unit_confirm_message (player_get player_short))
    (sleep_until (or (unit_action_test_accept (player_get player_short)) (and (not (volume_test_object volume_01 (player_get player_short))) (not (volume_test_object volume_02 (player_get player_short))))) 1)
    (if (or (volume_test_object volume_01 (player_get player_short)) (volume_test_object volume_02 (player_get player_short)))
        (begin
            (f_sfx_b_button player_short)
            (chud_show_cinematic_title (player_get player_short) blank_title)
            (sleep 5)
        )
    )
)

(script static void (f_display_message_a (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_accept (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_b (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_cancel (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_x (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_x (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_y (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_y (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_back (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_back (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_back_b (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (or (unit_action_test_back (player_get player_short)) (unit_action_test_cancel (player_get player_short))) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_left_bumper (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_left_shoulder (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_right_bumper (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_right_shoulder (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_bumpers (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (or (unit_action_test_left_shoulder (player_get player_short)) (unit_action_test_right_shoulder (player_get player_short))) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_rotate_gren (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_rotate_grenades (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_action (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_action (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_dpad_up (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_dpad_up (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_dpad_up_down (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (or (unit_action_test_dpad_up (player_get player_short)) (unit_action_test_dpad_down (player_get player_short))) 1)
    (f_sfx_b_button player_short)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_move_stick (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (unit_action_test_move_relative_all_directions (player_get player_short)) 1)
    (f_sfx_b_button player_short)
    (sleep 150)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static void (f_display_message_look_stick (short player_short, cutscene_title display_title, cutscene_title blank_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
    (unit_action_test_reset (player_get player_short))
    (sleep 5)
    (sleep_until (or (unit_action_test_look_relative_up (player_get player_short)) (unit_action_test_look_relative_down (player_get player_short)) (unit_action_test_look_relative_left (player_get player_short)) (unit_action_test_look_relative_right (player_get player_short))) 1)
    (f_sfx_b_button player_short)
    (sleep 150)
    (chud_show_cinematic_title (player_get player_short) blank_title)
    (sleep 5)
)

(script static short h100_arg_completed_short
    (sleep_ui)
    (sleep 1)
    (h100_reset_arg_shorts)
    (sleep 1)
    (+ s_sc110_01 s_sc110_02 s_sc110_03 s_sc110_04 s_sc110_05 s_sc110_06 s_sc120_01 s_sc120_02 s_sc120_03 s_sc120_04 s_sc120_05 s_sc120_06 s_sc130_01 s_sc130_02 s_sc130_03 s_sc130_04 s_sc130_05 s_sc130_06 s_sc140_01 s_sc140_02 s_sc140_03 s_sc140_04 s_sc140_05 s_sc140_06 s_sc150_01 s_sc150_02 s_sc150_03 s_sc150_04 s_sc150_05 s_l200_01)
)

(script static void h100_set_arg_shorts
    (if (gp_boolean_get "gp_sc110_terminal_01_complete")
        (set s_sc110_01 1)
    )
    (if (gp_boolean_get "gp_sc110_terminal_02_complete")
        (set s_sc110_02 1)
    )
    (if (gp_boolean_get "gp_sc110_terminal_03_complete")
        (set s_sc110_03 1)
    )
    (if (gp_boolean_get "gp_sc110_terminal_04_complete")
        (set s_sc110_04 1)
    )
    (if (gp_boolean_get "gp_sc110_terminal_05_complete")
        (set s_sc110_05 1)
    )
    (if (gp_boolean_get "gp_sc110_terminal_06_complete")
        (set s_sc110_06 1)
    )
    (if (gp_boolean_get "gp_sc120_terminal_01_complete")
        (set s_sc120_01 1)
    )
    (if (gp_boolean_get "gp_sc120_terminal_02_complete")
        (set s_sc120_02 1)
    )
    (if (gp_boolean_get "gp_sc120_terminal_03_complete")
        (set s_sc120_03 1)
    )
    (if (gp_boolean_get "gp_sc120_terminal_04_complete")
        (set s_sc120_04 1)
    )
    (if (gp_boolean_get "gp_sc120_terminal_05_complete")
        (set s_sc120_05 1)
    )
    (if (gp_boolean_get "gp_sc120_terminal_06_complete")
        (set s_sc120_06 1)
    )
    (if (gp_boolean_get "gp_sc130_terminal_01_complete")
        (set s_sc130_01 1)
    )
    (if (gp_boolean_get "gp_sc130_terminal_02_complete")
        (set s_sc130_02 1)
    )
    (if (gp_boolean_get "gp_sc130_terminal_03_complete")
        (set s_sc130_03 1)
    )
    (if (gp_boolean_get "gp_sc130_terminal_04_complete")
        (set s_sc130_04 1)
    )
    (if (gp_boolean_get "gp_sc130_terminal_05_complete")
        (set s_sc130_05 1)
    )
    (if (gp_boolean_get "gp_sc130_terminal_06_complete")
        (set s_sc130_06 1)
    )
    (if (gp_boolean_get "gp_sc140_terminal_01_complete")
        (set s_sc140_01 1)
    )
    (if (gp_boolean_get "gp_sc140_terminal_02_complete")
        (set s_sc140_02 1)
    )
    (if (gp_boolean_get "gp_sc140_terminal_03_complete")
        (set s_sc140_03 1)
    )
    (if (gp_boolean_get "gp_sc140_terminal_04_complete")
        (set s_sc140_04 1)
    )
    (if (gp_boolean_get "gp_sc140_terminal_05_complete")
        (set s_sc140_05 1)
    )
    (if (gp_boolean_get "gp_sc140_terminal_06_complete")
        (set s_sc140_06 1)
    )
    (if (gp_boolean_get "gp_sc150_terminal_01_complete")
        (set s_sc150_01 1)
    )
    (if (gp_boolean_get "gp_sc150_terminal_02_complete")
        (set s_sc150_02 1)
    )
    (if (gp_boolean_get "gp_sc150_terminal_03_complete")
        (set s_sc150_03 1)
    )
    (if (gp_boolean_get "gp_sc150_terminal_04_complete")
        (set s_sc150_04 1)
    )
    (if (gp_boolean_get "gp_sc150_terminal_05_complete")
        (set s_sc150_05 1)
    )
    (if (gp_boolean_get "gp_l200_terminal_01_complete")
        (set s_l200_01 1)
    )
)

(script static void h100_reset_arg_shorts
    (set s_sc110_01 0)
    (set s_sc110_02 0)
    (set s_sc110_03 0)
    (set s_sc110_04 0)
    (set s_sc110_05 0)
    (set s_sc110_06 0)
    (set s_sc120_01 0)
    (set s_sc120_02 0)
    (set s_sc120_03 0)
    (set s_sc120_04 0)
    (set s_sc120_05 0)
    (set s_sc120_06 0)
    (set s_sc130_01 0)
    (set s_sc130_02 0)
    (set s_sc130_03 0)
    (set s_sc130_04 0)
    (set s_sc130_05 0)
    (set s_sc130_06 0)
    (set s_sc140_01 0)
    (set s_sc140_02 0)
    (set s_sc140_03 0)
    (set s_sc140_04 0)
    (set s_sc140_05 0)
    (set s_sc140_06 0)
    (set s_sc150_01 0)
    (set s_sc150_02 0)
    (set s_sc150_03 0)
    (set s_sc150_04 0)
    (set s_sc150_05 0)
    (set s_l200_01 0)
)

(script static void (sleep_ui (long timer_ticks))
    (print "sleep ui script")
    (set ui_location_clock_start ui_location)
    (set wait_ticks 0)
    (sleep_until 
        (begin
            (set wait_ticks (+ wait_ticks 1))
            (if (!= ui_location ui_location_clock_start)
                (set wait_ticks timer_ticks)
            )
            (>= wait_ticks timer_ticks)
        )
        1
    )
)

(script static void (set_ui_location (short location))
    (set ui_location location)
    (sleep 1)
)

(script startup void mainmenu
    (print "mainmenu statup script")
    (cinematic_snap_to_white)
    (end_cinematic_mainmenu)
    (fade_in 0 0 0 30)
    (cinematic_show_letterbox_immediate false)
    (object_set_always_active "b_chief" true)
    (object_set_always_active "b_player0" true)
    (object_set_always_active "b_player1" true)
    (object_set_always_active "b_player2" true)
    (object_set_always_active "b_player3" true)
    (object_set_always_active "b_elite" true)
    (object_set_always_active "b_oni" true)
    (object_set_always_active "b_oni_op_00" true)
    (object_set_always_active "b_oni_op_01" true)
    (object_set_always_active "b_oni_op_02" true)
    (object_set_always_active "b_oni_op_03" true)
    (object_set_always_active "b_dutch" true)
    (object_set_always_active "b_mickey" true)
    (object_set_always_active "b_romeo" true)
    (object_set_always_active "b_sergeant" true)
    (object_set_always_active "b_odst01" true)
    (object_set_always_active "b_odst02" true)
    (object_set_always_active "b_odst03" true)
    (object_set_always_active "b_odst04" true)
    (sleep_until 
        (begin
            (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 0 "c100_01_anchor")
            (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 0)
            (cinematic_object_create_cinematic_anchor "c100_01_anchor" "c100_01_anchor")
            (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "player01_1" true)
            (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "player_pod_1" true)
            (cinematic_lights_initialize_for_shot 0)
            (cinematic_clips_initialize_for_shot 0)
            (sleep 292)
            false
        )
        1
    )
)

(script static void main_menu_sc_sh1
    (cinematic_show_letterbox_immediate false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0 0) 0 "c100_01_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 0)
    (cinematic_object_create_cinematic_anchor "c100_01_anchor" "c100_01_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "player01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "player_pod_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (sleep 292)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script continuous void !main_menu_sc_sh1_looper
    (sleep_until main_menu_sc_sh1_loop)
    (!main_menu_sc_sh1_looper)
)

(script static void !main_menu_sc
    (cinematic_print "beginning scene 1")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0 0) 0)
    (!main_menu_sc_sh1_looper)
    (cinematic_lights_destroy)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
    (cinematic_scripting_destroy_object 0 0 0)
    (cinematic_scripting_destroy_object 0 0 1)
)

(script static void cinematic_mainmenu_cleanup
    (cinematic_scripting_clean_up 0)
)

(script static void begin_cinematic_mainmenu_debug
    (cinematic_zone_activate_for_debugging 0)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 2)
    (cinematic_show_letterbox_immediate true)
    (chud_cinematic_fade 0 0)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_cinematic_mainmenu_debug
    (cinematic_destroy)
    (chud_cinematic_fade 1 0)
    (cinematic_stop)
    (cinematic_show_letterbox_immediate false)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 0)
    (fade_in 0 0 0 0)
)

(script static void cinematic_mainmenu_debug
    (end_cinematic_mainmenu_debug)
    (fade_in 0 0 0 0)
    (cinematic_mainmenu_cleanup)
    (cinematic_mainmenu_debug)
)

(script static void begin_cinematic_mainmenu
    (cinematic_zone_activate 0)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_cinematic_mainmenu
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void cinematic_mainmenu
    (end_cinematic_mainmenu)
    (fade_in 0 0 0 0)
    (cinematic_mainmenu_cleanup)
    (cinematic_mainmenu)
)

; Decompilation finished in ~0.0185175s
