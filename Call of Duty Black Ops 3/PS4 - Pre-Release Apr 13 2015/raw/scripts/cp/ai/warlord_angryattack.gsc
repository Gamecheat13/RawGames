#using scripts\shared\system_shared;
#using scripts\shared\ai\warlord;
#using scripts\cp\cybercom\_cybercom_gadget_firefly;

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  	   	   	   	   	   	                                                                                                                                                                                                           	      	                        	   	   	   	   	   	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  	    	                                                                                                                                                                                                         
    	   	                                                                                                                         	                                                                                                                                                                                                                                                                                                                                                                    	        	     	             	    	   	                           	                               	                                	                                                              	                                                                                                              	                            	                                     	                                       	                                                               	   	                  	       	                                                    	                   	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      	                                                                                        	           	                        	                                            	                                             	                                                   	                                                             	                                                         	                                                                    	                                                                                                                                                                                                    	                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    	                                                              	                                                          	                                   	                                   	                                                    	                                       

#namespace WarlordAngryAttack;


function WarlordAngryAttack_FireflyAttack( entity )
{
	if(isdefined(entity) && isdefined(entity.knownAttackers) && entity.knownAttackers.size > 0)
	{
		foreach( data in entity.knownAttackers )
		{
			attacker = data.attacker;
			
			if(isdefined(entity.enemy) && entity.enemy == attacker) //Warlord can handle this one with his minigun
			{
				if(!(WarlordServerUtils::GetAlivePlayersCount(entity) == 1 && IsPlayer(entity.enemy))) //allow attack on the enemy if we are on a single player game and the enemy is a player
					continue;
			}
			
	
			entity cybercom_gadget_firefly::spawn_firefly_swarm(false, attacker, 1, 0);
		}
	}
}
