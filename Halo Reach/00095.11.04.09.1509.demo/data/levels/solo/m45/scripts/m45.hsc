; Decompiled with Assembly
; 
; Source file: m45.hsc
; Start time: 2018-06-28 4:16:11 PM
; 
; Remember that all script code is property of Bungie/343 Industries.
; You have no rights. Play nice.

; Globals
(global boolean b_debug_fork true)
(global boolean b_debug_globals false)
(global short player_00 0)
(global short player_01 1)
(global short player_02 2)
(global short player_03 3)
(global short s_md_play_time 0)
(global string data_mine_mission_segment "")
(global boolean b_debug_cinematic_scripts true)
(global boolean b_cinematic_entered false)
(global sound sfx_a_button none)
(global sound sfx_b_button none)
(global sound sfx_hud_in none)
(global sound sfx_hud_out none)
(global sound sfx_objective none)
(global sound sfx_tutorial_complete "sound\game_sfx\ui\pda_transition.sound")
(global sound sfx_blip "sound\game_sfx\ui\transition_beeps")
(global object_list l_blip_list (players))
(global boolean b_blip_list_locked false)
(global short s_blip_list_index 0)
(global short blip_neutralize 0)
(global short blip_defend 1)
(global short blip_ordnance 2)
(global short blip_interface 3)
(global short blip_recon 4)
(global short blip_recover 5)
(global short blip_structure 6)
(global short blip_neutralize_alpha 7)
(global short blip_neutralize_bravo 8)
(global short blip_neutralize_charlie 9)
(global short blip_ammo 13)
(global short blip_hostile_vehicle 14)
(global short blip_hostile 15)
(global short blip_default_a 17)
(global short blip_default_b 18)
(global short blip_default_c 19)
(global short blip_default_d 20)
(global short blip_default 21)
(global short blip_destination 21)
(global boolean b_is_dialogue_playing false)
(global looping_sound mus_01 "levels\solo\m45\music\m45_music_01.sound_looping")
(global looping_sound mus_02 "levels\solo\m45\music\m45_music_02.sound_looping")
(global looping_sound mus_03 "levels\solo\m45\music\m45_music_03.sound_looping")
(global looping_sound mus_04 "levels\solo\m45\music\m45_music_04.sound_looping")
(global looping_sound mus_05 "levels\solo\m45\music\m45_music_05.sound_looping")
(global looping_sound mus_06 "levels\solo\m45\music\m45_music_06.sound_looping")
(global looping_sound mus_07 "levels\solo\m45\music\m45_music_07.sound_looping")
(global looping_sound mus_08 "levels\solo\m45\music\m45_music_08.sound_looping")
(global looping_sound mus_09 "levels\solo\m45\music\m45_music_09.sound_looping")
(global looping_sound mus_10 "levels\solo\m45\music\m45_music_10.sound_looping")
(global effect fx_warp_flash "objects\vehicles\covenant\seraph\fx\warp\warp.effect")
(global sound sfx_warp "sound\vehicles\seraph\seraph_slip_space.sound")
(global looping_sound sfx_chatter "sound\prototype\radio_chatter\radio_chatter_loop\radio_chatter_loop.sound_looping")
(global boolean b_dialogue_playing false)
(global short s_md_duration 0)
(global short s_md_reminder_wait (* 30 60))
(global short s_md_reminder_interval (* 30 45))
(global ai ai_carter none)
(global ai ai_kat none)
(global ai ai_jorge none)
(global ai ai_airboss none)
(global ai ai_tr1 none)
(global ai ai_tr2 none)
(global ai ai_tr3 none)
(global ai ai_tr4 none)
(global ai ai_tr5 none)
(global ai ai_tf1 none)
(global ai ai_tf2 none)
(global ai ai_fac_tr_door none)
(global ai ai_fac_tr_wraith none)
(global ai ai_fac_tr_mg none)
(global ai ai_slo_tr_stairs none)
(global ai ai_facility_escort none)
(global ai ai_facility_rocketguy none)
(global boolean b_lnc_bombing_started false)
(global ai ai_com_tr1 none)
(global ai ai_com_tr5 none)
(global boolean b_grm_hol_finishes_dialogue false)
(global boolean b_savannah_destroyed false)
(global boolean b_grm_terminals_alert false)
(global real r_crv_debris_speed 20)
(global short s_crv_debris_spawn_delay_min 60)
(global short s_crv_debris_spawn_delay_max 120)
(global short s_pod_drop_interval 15)
(global boolean b_ambient_battle_paused false)
(global short s_players_finished_tutorial 0)
(global boolean b_saber_tutorial_complete false)
(global short s_players_in_game 0)
(global short s_sabre_tutorial_delay 30)
(global short s_lnc_bombingrun_delay_min 10)
(global short s_lnc_bombingrun_delay_max 25)
(global real s_lnc_seraph_bombingrun_time 6)
(global sound sfx_light_quad "sound\levels\solo\m45\flood_light\flood_light_quad.sound")
(global sound sfx_light "sound\levels\solo\m45\flood_light\flood_light.sound")
(global short s_insertion_index 65535)
(global short s_bch_encounter_index 0)
(global short s_fac_encounter_index 1)
(global short s_slo_encounter_index 2)
(global short s_lnc_encounter_index 3)
(global short s_waf_encounter_index 4)
(global short s_wrp_encounter_index 5)
(global short s_crv_encounter_index 6)
(global short s_brd_encounter_index 7)
(global short s_com_encounter_index 8)
(global short s_frg_encounter_index 9)
(global short s_hgr_encounter_index 10)
(global short s_grm_encounter_index 11)
(global short s_brg_encounter_index 12)
(global short s_esc_encounter_index 13)
(global short s_fin_encounter_index 14)
(global short s_zoneindex_landing 0)
(global short s_zoneindex_beach 1)
(global short s_zoneindex_facility 2)
(global short s_zoneindex_silo 3)
(global short s_zoneindex_launch 4)
(global short s_zoneindex_wafer 5)
(global short s_zoneindex_wafercombat 6)
(global short s_zoneindex_warp 7)
(global short s_zoneindex_corvette 8)
(global short s_zoneindex_corvettecombat 9)
(global short s_zoneindex_aftship 10)
(global short s_zoneindex_hangar 11)
(global short s_zoneindex_cinbombdelivery 12)
(global short s_zoneindex_gunroom 13)
(global short s_zoneindex_bridge 14)
(global short s_zoneindex_escape 15)
(global vehicle test_saber none)
(global short s_fx_frigate_death_time 35)
(global boolean debug true)
(global boolean dialogue true)
(global boolean playmusic true)
(global boolean cinematics false)
(global boolean training true)
(global boolean autostart true)
(global boolean ambient_battle true)
(global short s_objcon_max 10000)
(global short s_objcon_bch 0)
(global short s_objcon_fac 0)
(global short s_objcon_slo 0)
(global short s_objcon_lnc 0)
(global short s_objcon_waf 0)
(global short s_objcon_crv 0)
(global short s_objcon_brd 0)
(global short s_objcon_com 0)
(global short s_objcon_hgr 0)
(global short s_objcon_grm 0)
(global short s_objcon_brg 0)
(global short s_objcon_esc 0)
(global short s_objcon_fin 0)
(global boolean b_bch_started false)
(global boolean b_fac_started false)
(global boolean b_slo_started false)
(global boolean b_lnc_started false)
(global boolean b_waf_started false)
(global boolean b_wrp_started false)
(global boolean b_crv_started false)
(global boolean b_brd_started false)
(global boolean b_com_started false)
(global boolean b_hgr_started false)
(global boolean b_grm_started false)
(global boolean b_brg_started false)
(global boolean b_esc_started false)
(global boolean b_fin_started false)
(global boolean b_bch_completed false)
(global boolean b_fac_completed false)
(global boolean b_slo_completed false)
(global boolean b_lnc_completed false)
(global boolean b_waf_completed false)
(global boolean b_wrp_completed false)
(global boolean b_crv_completed false)
(global boolean b_brd_completed false)
(global boolean b_com_completed false)
(global boolean b_hgr_completed false)
(global boolean b_grm_completed false)
(global boolean b_brg_completed false)
(global boolean b_esc_completed false)
(global boolean b_fin_completed false)
(global short s_current_encounter 65535)
(global boolean b_fac_scanner_activated false)
(global boolean b_com_beam_deactivated false)
(global boolean b_hgr_opened false)
(global boolean b_brg_refuel_activated false)
(global boolean b_dc_pods_10 false)
(global boolean b_dc_pods_25 false)
(global boolean b_dc_pods_50 false)
(global real r_deserter_warn_distance 420)
(global short g_player_start_pitch 65520)
(global boolean g_null false)
(global real g_nav_offset 0.55)
(global short s_tg_ambient_battle 100)
(global short clump_corvette_aa 19)
(global short clump_seraphs 18)
(global short clump_sabres 17)
(global short clump_savannah_aa 16)
(global short clump_banshees 15)
(global short clump_ground_flavor 14)
(global short clump_ground_aa 19)
(global boolean b_bch_counterattack_started false)
(global boolean b_bch_rocks_pods_complete false)
(global object o_bch_wraith none)
(global boolean b_fac_shutter_activated false)
(global boolean b_fac_deadman_kat_waiting false)
(global boolean b_fac_deadman_carter_waiting false)
(global boolean b_fac_deadman_jorge_waiting false)
(global boolean b_lnc_player_in_sabre false)
(global boolean b_lnc_start_cleanup false)
(global boolean b_waf_sabre_tut_complete false)
(global boolean b_waf_sabre_tut_skipped false)
(global short s_waf_min_sabres 4)
(global boolean b_waf_attempt_save false)
(global boolean b_waf_final_fighters_spawned false)
(global boolean b_waf_phantoms_in_position false)
(global boolean b_waf_phantom_torpedoes_away false)
(global boolean b_waf_phantoms_defeated false)
(global real r_waf_ph_firingpos_threshold 3)
(global boolean b_waf_ph_missile_armageddon false)
(global short s_waf_banshee_spawn_remaining 0)
(global short s_waf_seraph_spawn_remaining 0)
(global real r_phantom_approach_speed 0.75)
(global short s_waf_sabre_spawn_remaining 0)
(global boolean b_wrp_player_docks false)
(global unit u_wrp_player_sabre0 none)
(global unit u_wrp_player_sabre1 none)
(global unit u_wrp_player_sabre2 none)
(global unit u_wrp_player_sabre3 none)
(global short s_crv_min_sabres 4)
(global short s_crv_min_seraphs 4)
(global short s_crv_engines_damaged 0)
(global boolean b_crv_all_engines_damaged false)
(global boolean b_crv_banshee_launch false)
(global boolean b_crv_attempt_save false)
(global short s_achievement_timer (* 30 180))
(global short s_crv_seraph_spawn_remaining 0)
(global short s_crv_sabre_spawn_remaining 0)
(global unit u_crv_player_sabre0 none)
(global unit u_crv_player_sabre1 none)
(global unit u_crv_player_sabre2 none)
(global unit u_crv_player_sabre3 none)
(global boolean b_repressurization_complete false)
(global real r_corvette_low_gravity 0.23)
(global short s_hgr_cov_count 0)
(global short s_hgr_bravo_position 65535)
(global boolean b_hgr_cov_follow false)
(global boolean b_hgr_switch_flipped false)
(global boolean b_hgr_teleport_players_forward false)
(global boolean b_hgr_repressurize false)
(global boolean b_grm_hall_elites_flanked false)
(global boolean b_grm_doors_open false)
(global object_list l_pilots (players))
(global boolean b_fin_attempt_save false)
(global boolean b_fin_firefight_started false)
(global boolean b_fin_jorge_follow false)
(global boolean b_fin_wave_fallback false)
(global short s_fin_wave 0)
(global boolean b_fin_waves_complete false)
(global boolean b_play_warp_sound true)
(global boolean b_ai_test_loop true)
(global short s_ai_test_turret 0)
(global short s_ai_test_turret_cov 0)
(global short s_ai_test_turret_unsc 1)
(global short s_ai_test_fighter 0)
(global short s_ai_test_fighter_cov 0)
(global short s_ai_test_fighter_unsc 1)
(global short s_ai_test_distance 0)
(global short s_ai_test_distance_near 0)
(global short s_ai_test_distance_far 1)
(global short s_ai_test_distance_orbit 2)
(global short s_ai_test_distance_buzz 3)
(global boolean b_bch_infinite_kill false)
(global ai ai_bch_post_beach_00 "sq_cov_bch_post_beach_inf0")
(global ai ai_bch_post_beach_01 "sq_cov_bch_post_beach_inf1")
(global ai ai_bch_post_beach_02 none)
(global ai ai_bch_post_beach_03 none)
(global ai ai_bch_post_beach_heavy "sq_cov_bch_post_beach_heavy0")
(global boolean b_bch_post_beach_fork_enroute false)
(global short s_bch_post_heavy_chance 30)
(global ai ai_bch_post_dock_00 "sq_cov_bch_post_dock_inf0")
(global ai ai_bch_post_dock_01 "sq_cov_bch_post_dock_inf1")
(global ai ai_bch_post_dock_heavy "sq_cov_bch_post_dock_heavy0")
(global boolean b_bch_post_dock_fork_enroute false)
(global short s_bch_post_dock_wave 0)
(global short s_bch_post_beach_wave 0)
(global short s_bch_post_pelican_wave 0)
(global boolean b_bch_post_pelican_enroute false)
(global short s_bch_bomber_scale_ticks 90)
(global short s_bch_aa_targeting_group 18)
(global boolean b_mendicant_beach false)
(global boolean b_mendicant_bridge_alert false)

; Scripts
(script static void (f_load_fork (vehicle fork, string load_side, ai load_squad_01, ai load_squad_02, ai load_squad_03, ai load_squad_04))
    (ai_place load_squad_01)
    (ai_place load_squad_02)
    (ai_place load_squad_03)
    (ai_place load_squad_04)
    (sleep 1)
    (if (= load_side "left")
        (begin
            (if b_debug_fork
                (print "load fork left...")
            )
            (ai_vehicle_enter_immediate load_squad_01 fork 0)
            (ai_vehicle_enter_immediate load_squad_02 fork 0)
            (ai_vehicle_enter_immediate load_squad_03 fork 0)
            (ai_vehicle_enter_immediate load_squad_04 fork 0)
        )
        (if (= load_side "right")
            (begin
                (if b_debug_fork
                    (print "load fork right...")
                )
                (ai_vehicle_enter_immediate load_squad_01 fork 1)
                (ai_vehicle_enter_immediate load_squad_02 fork 1)
                (ai_vehicle_enter_immediate load_squad_03 fork 1)
                (ai_vehicle_enter_immediate load_squad_04 fork 1)
            )
            (if (= load_side "dual")
                (begin
                    (if b_debug_fork
                        (print "load fork dual...")
                    )
                    (ai_vehicle_enter_immediate load_squad_01 fork 0)
                    (ai_vehicle_enter_immediate load_squad_02 fork 0)
                    (ai_vehicle_enter_immediate load_squad_03 fork 1)
                    (ai_vehicle_enter_immediate load_squad_04 fork 1)
                )
                (if (= load_side "any")
                    (begin
                        (if b_debug_fork
                            (print "load fork any...")
                        )
                        (ai_vehicle_enter_immediate load_squad_01 fork 2)
                        (ai_vehicle_enter_immediate load_squad_02 fork 2)
                        (ai_vehicle_enter_immediate load_squad_03 fork 2)
                        (ai_vehicle_enter_immediate load_squad_04 fork 2)
                    )
                )
            )
        )
    )
)

(script static void (f_load_fork_cargo (vehicle fork, string load_type, ai load_squad_01, ai load_squad_02, ai load_squad_03))
    (if (= load_type "large")
        (begin
            (ai_place load_squad_01)
            (sleep 1)
            (vehicle_load_magic fork 3 (ai_vehicle_get_from_squad load_squad_01 0))
        )
        (if (= load_type "small")
            (begin
                (ai_place load_squad_01)
                (ai_place load_squad_02)
                (ai_place load_squad_03)
                (sleep 1)
                (vehicle_load_magic fork 4 (ai_vehicle_get_from_squad load_squad_01 0))
                (vehicle_load_magic fork 5 (ai_vehicle_get_from_squad load_squad_02 0))
                (vehicle_load_magic fork 6 (ai_vehicle_get_from_squad load_squad_03 0))
            )
        )
    )
)

(script static void (f_unload_fork (vehicle fork, string drop_side))
    (if b_debug_fork
        (print "opening fork...")
    )
    (unit_open fork)
    (sleep 30)
    (if (= drop_side "left")
        (begin
            (f_unload_fork_left fork)
            (sleep 75)
        )
        (if (= drop_side "right")
            (begin
                (f_unload_fork_right fork)
                (sleep 75)
            )
            (if (= drop_side "dual")
                (begin
                    (f_unload_fork_all fork)
                    (sleep 75)
                )
            )
        )
    )
    (if b_debug_fork
        (print "closing fork...")
    )
    (unit_close fork)
)

(script static void (f_unload_fork_left (vehicle fork))
    (begin_random
        (begin
            (vehicle_unload fork 7)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 8)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 9)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 10)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 11)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 12)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 13)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 14)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_fork_right (vehicle fork))
    (begin_random
        (begin
            (vehicle_unload fork 15)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 16)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 17)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 18)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 19)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 20)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 21)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 22)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_fork_all (vehicle fork))
    (begin_random
        (begin
            (vehicle_unload fork 7)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 8)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 9)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 10)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 11)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 12)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 13)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 14)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 15)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 16)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 17)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 18)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 19)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 20)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 21)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 22)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_fork_cargo (vehicle fork, string load_type))
    (if (= load_type "large")
        (vehicle_unload fork 3)
        (if (= load_type "small")
            (begin_random
                (begin
                    (vehicle_unload fork 4)
                    (sleep (random_range 15 30))
                )
                (begin
                    (vehicle_unload fork 5)
                    (sleep (random_range 15 30))
                )
                (begin
                    (vehicle_unload fork 6)
                    (sleep (random_range 15 30))
                )
            )
            (if (= load_type "small01")
                (vehicle_unload fork 4)
                (if (= load_type "small02")
                    (vehicle_unload fork 5)
                    (if (= load_type "small03")
                        (vehicle_unload fork 6)
                    )
                )
            )
        )
    )
)

(script static void f_hud_obj_complete
    (objectives_clear)
    (chud_show_screen_objective "campaign_hud_objcomplete")
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static unit player0
    (player_get 0)
)

(script static unit player1
    (player_get 1)
)

(script static unit player2
    (player_get 2)
)

(script static unit player3
    (player_get 3)
)

(script static short player_count
    (list_count (players))
)

(script static void print_difficulty
    (if (= (game_difficulty_get_real) easy)
        (print "easy")
        (if (= (game_difficulty_get_real) normal)
            (print "normal")
            (if (= (game_difficulty_get_real) heroic)
                (print "heroic")
                (if (= (game_difficulty_get_real) legendary)
                    (print "legendary")
                )
            )
        )
    )
)

(script static boolean difficulty_legendary
    (= (game_difficulty_get_real) legendary)
)

(script static boolean difficulty_heroic
    (= (game_difficulty_get_real) heroic)
)

(script static boolean difficulty_normal
    (<= (game_difficulty_get_real) normal)
)

(script static void replenish_players
    (if b_debug_globals
        (print "replenish player health...")
    )
    (unit_set_current_vitality player0 80 80)
    (unit_set_current_vitality player1 80 80)
    (unit_set_current_vitality player2 80 80)
    (unit_set_current_vitality player3 80 80)
)

(script static boolean coop_players_2
    (>= (game_coop_player_count) 2)
)

(script static boolean coop_players_3
    (>= (game_coop_player_count) 3)
)

(script static boolean coop_players_4
    (>= (game_coop_player_count) 4)
)

(script static boolean any_players_in_vehicle
    (or (unit_in_vehicle (unit player0)) (unit_in_vehicle (unit player1)) (unit_in_vehicle (unit player2)) (unit_in_vehicle (unit player3)))
)

(script static void (f_vehicle_scale_destroy (vehicle vehicle_variable))
    (object_set_scale vehicle_variable 0.01 (* 30 5))
    (sleep (* 30 5))
    (object_destroy vehicle_variable)
)

(script static void (f_ai_place_vehicle_deathless (ai squad))
    (ai_place squad)
    (ai_cannot_die (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0))) true)
    (object_cannot_die (ai_vehicle_get_from_squad squad 0) true)
)

(script static void (f_ai_place_vehicle_deathless_no_emp (ai squad))
    (ai_place squad)
    (ai_cannot_die (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0))) true)
    (object_cannot_die (ai_vehicle_get_from_squad squad 0) true)
    (object_ignores_emp (ai_vehicle_get_from_squad squad 0) true)
)

(script static short (f_vehicle_rider_number (vehicle v))
    (list_count (vehicle_riders v))
)

(script static boolean (f_all_squad_in_vehicle (ai inf_squad, ai vehicle_squad))
    (and (= (ai_living_count inf_squad) 0) (= (ai_living_count vehicle_squad) (f_vehicle_rider_number (ai_vehicle_get_from_squad vehicle_squad 0))))
)

(script static ai (f_ai_get_vehicle_driver (ai squad))
    (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0)))
)

(script static void (f_ai_magically_see_players (ai squad))
    (ai_magically_see_object squad player0)
    (ai_magically_see_object squad player1)
    (ai_magically_see_object squad player2)
    (ai_magically_see_object squad player3)
)

(script dormant void f_global_health_saves
    (sleep_until (> (player_count) 0))
    (sleep_until 
        (begin
            (sleep_until (< (object_get_health player0) 1))
            (sleep (* 30 7))
            (if (< (object_get_health player0) 1)
                (begin
                    (sleep_until (= (object_get_health player0) 1))
                    (print "global health: health pack aquired")
                    (game_save)
                )
                (print "global health: re-gen")
            )
            false
        )
    )
)

(script static void (f_coop_resume_unlocked (cutscene_title resume_title, short insertion_point))
    (if (game_is_cooperative)
        (begin
            (sound_impulse_start sfx_hud_in none 1)
            (cinematic_set_chud_objective resume_title)
            (game_insertion_point_unlock insertion_point)
        )
    )
)

(script static boolean cinematic_skip_start
    (cinematic_skip_start_internal)
    (game_save_cinematic_skip)
    (sleep_until (not (game_saving)) 1)
    (not (game_reverted))
)

(script static void (cinematic_skip_stop (string_id cinematic_name))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
        )
    )
)

(script static void (cinematic_skip_stop_load_zone (string_id cinematic_name, zone_set z))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
        )
    )
    (switch_zone_set z)
    (sleep 2)
)

(script static void (cinematic_skip_stop_terminal (string_id cinematic_name))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
            (if b_debug_globals
                (print "sleeping forever...")
            )
            (sleep_forever)
        )
    )
)

(script static void test_cinematic_enter_exit
    (sleep 30)
)

(script static void (cinematic_enter (string_id cinematic_name, boolean lower_weapon))
    (set b_cinematic_entered true)
    (cinematic_enter_pre lower_weapon)
    (sleep (cinematic_tag_fade_out_from_game cinematic_name))
    (cinematic_enter_post)
)

(script static void (designer_cinematic_enter (boolean lower_weapon))
    (cinematic_enter_pre lower_weapon)
    (sleep (cinematic_transition_fade_out_from_game "cinematics\transitions\default_intra.cinematic_transition"))
    (cinematic_enter_post)
)

(script static void (cinematic_enter_pre (boolean lower_weapon))
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (if (= lower_weapon true)
        (begin
            (if b_debug_cinematic_scripts
                (print "lowering weapon slowly...")
            )
            (unit_lower_weapon player0 30)
            (unit_lower_weapon player1 30)
            (unit_lower_weapon player2 30)
            (unit_lower_weapon player3 30)
        )
    )
    (campaign_metagame_time_pause true)
    (chud_cinematic_fade 0 0.5)
)

(script static void cinematic_enter_post
    (if b_debug_cinematic_scripts
        (print "hiding players...")
    )
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (player_enable_input false)
    (player_disable_movement true)
    (sleep 1)
    (if b_debug_cinematic_scripts
        (print "camera control on")
    )
    (camera_control true)
    (cinematic_start)
)

(script static void (cinematic_exit (string_id cinematic_name, boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (sleep (cinematic_tag_fade_in_to_game cinematic_name))
    (cinematic_exit_post weapon_starts_lowered)
)

(script static void (designer_cinematic_exit (boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (sleep (cinematic_transition_fade_in_to_game "cinematics\transitions\default_intra.cinematic_transition"))
    (cinematic_exit_post weapon_starts_lowered)
)

(script static void (cinematic_exit_into_title (string_id cinematic_name, boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (chud_cinematic_fade 0 0)
    (sleep (cinematic_tag_fade_in_to_game cinematic_name))
    (cinematic_exit_post_title weapon_starts_lowered)
)

(script static void (cinematic_exit_pre (boolean weapon_starts_lowered))
    (cinematic_stop)
    (camera_control false)
    (object_hide player0 false)
    (object_hide player1 false)
    (object_hide player2 false)
    (object_hide player3 false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "snapping weapon to lowered state...")
            )
            (unit_lower_weapon player0 1)
            (unit_lower_weapon player1 1)
            (unit_lower_weapon player2 1)
            (unit_lower_weapon player3 1)
            (sleep 1)
        )
        (begin
            (unit_raise_weapon player0 1)
            (unit_raise_weapon player1 1)
            (unit_raise_weapon player2 1)
            (unit_raise_weapon player3 1)
            (sleep 1)
        )
    )
    (player_control_unlock_gaze player0)
    (player_control_unlock_gaze player1)
    (player_control_unlock_gaze player2)
    (player_control_unlock_gaze player3)
    (sleep 1)
)

(script static void (cinematic_exit_post (boolean weapon_starts_lowered))
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (chud_cinematic_fade 1 1)
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void (cinematic_exit_post_title (boolean weapon_starts_lowered))
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void insertion_snap_to_black
    (fade_out 0 0 0 0)
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (unit_lower_weapon player0 0)
    (unit_lower_weapon player1 0)
    (unit_lower_weapon player2 0)
    (unit_lower_weapon player3 0)
    (campaign_metagame_time_pause true)
    (chud_cinematic_fade 0 0)
    (if b_debug_cinematic_scripts
        (print "hiding players...")
    )
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (player_enable_input false)
    (player_disable_movement true)
    (sleep 1)
    (if b_debug_cinematic_scripts
        (print "camera control on")
    )
)

(script static void insertion_fade_to_gameplay
    (designer_fade_in "fade_from_black" true)
)

(script static void (designer_fade_in (string fade_type, boolean weapon_starts_lowered))
    (cinematic_stop)
    (camera_control false)
    (object_hide player0 false)
    (object_hide player1 false)
    (object_hide player2 false)
    (object_hide player3 false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "snapping weapon to lowered state...")
            )
            (unit_lower_weapon player0 1)
            (unit_lower_weapon player1 1)
            (unit_lower_weapon player2 1)
            (unit_lower_weapon player3 1)
            (sleep 1)
        )
    )
    (player_control_unlock_gaze player0)
    (player_control_unlock_gaze player1)
    (player_control_unlock_gaze player2)
    (player_control_unlock_gaze player3)
    (sleep 1)
    (if (= fade_type "fade_from_black")
        (begin
            (if b_debug_cinematic_scripts
                (print "fading from black...")
            )
            (fade_in 0 0 0 30)
            (sleep 20)
        )
        (if (= fade_type "fade_from_white")
            (begin
                (if b_debug_cinematic_scripts
                    (print "fading from white...")
                )
                (fade_in 1 1 1 30)
                (sleep 20)
            )
            (if (= fade_type "snap_from_black")
                (begin
                    (if b_debug_cinematic_scripts
                        (print "snapping from black...")
                    )
                    (fade_in 0 0 0 5)
                    (sleep 5)
                )
                (if (= fade_type "snap_from_white")
                    (begin
                        (if b_debug_cinematic_scripts
                            (print "snapping from white...")
                        )
                        (fade_in 1 1 1 5)
                        (sleep 5)
                    )
                    (if (= fade_type "no_fade")
                        (begin
                            (fade_in 1 1 1 0)
                            (sleep 5)
                        )
                    )
                )
            )
        )
    )
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (chud_cinematic_fade 1 1)
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void cinematic_snap_to_black
    (sleep 0)
)

(script static void cinematic_snap_to_white
    (sleep 0)
)

(script static void cinematic_snap_from_black
    (sleep 0)
)

(script static void cinematic_snap_from_white
    (sleep 0)
)

(script static void cinematic_fade_to_black
    (sleep 0)
)

(script static void cinematic_fade_to_white
    (sleep 0)
)

(script static void cinematic_fade_to_gameplay
    (designer_fade_in "fade_from_black" true)
)

(script static void cinematic_hud_on
    (chud_cinematic_fade 1 0)
    (chud_show_crosshair false)
)

(script static void cinematic_hud_off
    (chud_cinematic_fade 0 0)
    (chud_show_crosshair true)
)

(script static void performance_default_script
    (sleep_until 
        (begin
            (performance_play_line_by_id (+ (performance_get_last_played_line_index) 1))
            (>= (+ (performance_get_last_played_line_index) 1) (performance_get_line_count))
        )
        0
    )
)

(script static void end_mission
    (game_won)
)

(script static void (f_start_mission (string_id cinematic_name))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name true)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_cinematic_scripts
                (print "f_start_mission: cinematic_skip_start is true... starting cinematic...")
            )
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop cinematic_name)
)

(script static void (f_play_cinematic_advanced (string_id cinematic_name, zone_set cinematic_zone_set, zone_set zone_to_load_when_done))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (set b_cinematic_entered false)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "f_play_cinematic: playing cinematic...")
            )
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_load_zone cinematic_name zone_to_load_when_done)
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: done with cinematic. resetting audio levels...")
    )
)

(script static void (f_play_cinematic_unskippable (string_id cinematic_name, zone_set cinematic_zone_set))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (begin
        (if b_debug_globals
            (print "f_play_cinematic: playing cinematic...")
        )
        (cinematic_show_letterbox true)
        (sleep 30)
        (cinematic_show_letterbox_immediate true)
        (cinematic_run_script_by_name cinematic_name)
    )
)

(script static void (f_play_cinematic (string_id cinematic_name, zone_set cinematic_zone_set))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "f_play_cinematic: playing cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop cinematic_name)
)

(script static void (f_end_mission (string_id cinematic_name, zone_set cinematic_zone_set))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (ai_erase_all)
    (garbage_collect_now)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "play outro cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_internal)
    (fade_out 0 0 0 0)
    (sleep 1)
)

(script static void (f_end_mission_ai (string_id cinematic_name, zone_set cinematic_zone_set))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (ai_disregard player0 true)
    (ai_disregard player1 true)
    (ai_disregard player2 true)
    (ai_disregard player3 true)
    (garbage_collect_now)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "play outro cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_internal)
    (fade_out 0 0 0 0)
    (sleep 1)
)

(script startup void beginning_mission_segment
    (data_mine_set_mission_segment "mission_start")
)

(script static void (f_sfx_a_button (short player_short))
    (sound_impulse_start sfx_a_button (player_get player_short) 1)
)

(script static void (f_sfx_b_button (short player_short))
    (sound_impulse_start sfx_b_button (player_get player_short) 1)
)

(script static void (f_sfx_hud_in (short player_short))
    (sound_impulse_start sfx_hud_in (player_get player_short) 1)
)

(script static void (f_sfx_hud_out (short player_short))
    (sound_impulse_start sfx_hud_out (player_get player_short) 1)
)

(script static void (f_sfx_hud_tutorial_complete (player player_to_train))
    (sound_impulse_start sfx_tutorial_complete player_to_train 1)
)

(script static void (f_display_message (short player_short, cutscene_title display_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
)

(script static void (f_tutorial_begin (player player_to_train, string_id display_title))
    (f_hud_training_forever player_to_train display_title)
    (sleep 5)
    (unit_action_test_reset player_to_train)
    (sleep 5)
)

(script static void (f_tutorial_end (player player_to_train))
    (f_sfx_hud_tutorial_complete player_to_train)
    (f_hud_training_clear player_to_train)
    (sleep 30)
)

(script static void (f_tutorial_boost (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_grenade_trigger player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_rotate_weapons (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_rotate_weapons player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_fire_weapon (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_primary_trigger player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_turn (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep 20)
    (sleep_until (unit_action_test_look_relative_all_directions player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_throttle (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep 20)
    (sleep_until (unit_action_test_move_relative_all_directions player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_tricks (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_vehicle_trick_secondary player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_hud_training (player player_num, string_id string_hud))
    (chud_show_screen_training player_num string_hud)
    (sleep 120)
    (chud_show_screen_training player_num "")
)

(script static void (f_hud_training_forever (player player_num, string_id string_hud))
    (chud_show_screen_training player_num string_hud)
)

(script static void (f_hud_training_clear (player player_num))
    (chud_show_screen_training player_num "")
)

(script static void f_hud_training_new_weapon
    (chud_set_static_hs_variable player0 0 1)
    (chud_set_static_hs_variable player1 0 1)
    (chud_set_static_hs_variable player2 0 1)
    (chud_set_static_hs_variable player3 0 1)
    (sleep 200)
    (chud_clear_hs_variable player0 0)
    (chud_clear_hs_variable player1 0)
    (chud_clear_hs_variable player2 0)
    (chud_clear_hs_variable player3 0)
)

(script static void (f_hud_training_new_weapon_player (player p))
    (chud_set_static_hs_variable p 0 1)
    (sleep 200)
    (chud_clear_hs_variable p 0)
)

(script static void (f_hud_training_new_weapon_player_clear (player p))
    (chud_clear_hs_variable p 0)
)

(script static void (f_hud_training_confirm (player player_num, string_id string_hud, string button_press))
    (if (= (player_is_in_game player_num) false)
        (sleep_forever)
    )
    (chud_show_screen_training player_num string_hud)
    (sleep 10)
    (player_action_test_reset)
    (sleep_until (if (= button_press "primary_trigger")
        (sleep_until (unit_action_test_primary_trigger player_num))
        (if (= button_press "grenade_trigger")
            (sleep_until (unit_action_test_grenade_trigger player_num))
            (if (= button_press "equipment")
                (sleep_until (unit_action_test_equipment player_num))
                (if (= button_press "melee")
                    (sleep_until (unit_action_test_melee player_num))
                    (if (= button_press "jump")
                        (sleep_until (unit_action_test_jump player_num))
                        (if (= button_press "rotate_grenades")
                            (sleep_until (unit_action_test_rotate_grenades player_num))
                            (if (= button_press "rotate_weapons")
                                (sleep_until (unit_action_test_rotate_weapons player_num))
                                (if (= button_press "context_primary")
                                    (sleep_until (unit_action_test_context_primary player_num))
                                    (if (= button_press "vision_trigger")
                                        (sleep_until (or (unit_action_test_vision_trigger player_num) (player_night_vision_on)))
                                        (if (= button_press "back")
                                            (sleep_until (unit_action_test_back player_num))
                                            (if (= button_press "vehicle_trick")
                                                (sleep_until (unit_action_test_vehicle_trick_primary player_num))
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
    ) 1 (* 30 10))
    (chud_show_screen_training player_num "")
)

(script static void (f_hud_obj_new (string_id string_hud, string_id string_start))
    (f_hud_start_menu_obj string_start)
    (chud_show_screen_objective string_hud)
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static void (f_hud_obj_repeat (string_id string_hud))
    (chud_show_screen_objective string_hud)
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static void (f_hud_start_menu_obj (string_id reference))
    (objectives_clear)
    (objectives_set_string 0 reference)
    (objectives_show_string reference)
)

(script static void (f_hud_chapter (string_id string_hud))
    (chud_cinematic_fade 0 30)
    (sleep 10)
    (chud_show_screen_chapter_title string_hud)
    (chud_fade_chapter_title_for_player player0 1 30)
    (chud_fade_chapter_title_for_player player1 1 30)
    (chud_fade_chapter_title_for_player player2 1 30)
    (chud_fade_chapter_title_for_player player3 1 30)
    (sleep 120)
    (chud_fade_chapter_title_for_player player0 0 30)
    (chud_fade_chapter_title_for_player player1 0 30)
    (chud_fade_chapter_title_for_player player2 0 30)
    (chud_fade_chapter_title_for_player player3 0 30)
    (chud_show_screen_chapter_title "")
    (sleep 10)
    (chud_cinematic_fade 1 30)
)

(script static void (f_hud_flash_object_fov (object_name hud_object_highlight))
    (sleep_until (or (objects_can_see_object player0 hud_object_highlight 25) (objects_can_see_object player1 hud_object_highlight 25) (objects_can_see_object player2 hud_object_highlight 25) (objects_can_see_object player3 hud_object_highlight 25)) 1)
    (object_create hud_object_highlight)
    (set chud_debug_highlight_object_color_red 1)
    (set chud_debug_highlight_object_color_green 1)
    (set chud_debug_highlight_object_color_blue 0)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (object_destroy hud_object_highlight)
)

(script static void (f_hud_flash_object (object_name hud_object_highlight))
    (object_create hud_object_highlight)
    (set chud_debug_highlight_object_color_red 1)
    (set chud_debug_highlight_object_color_green 1)
    (set chud_debug_highlight_object_color_blue 0)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (object_destroy hud_object_highlight)
)

(script static void (f_hud_flash_single (object_name hud_object_highlight))
    (object_hide hud_object_highlight false)
    (set chud_debug_highlight_object hud_object_highlight)
    (sleep 4)
    (object_hide hud_object_highlight true)
    (sleep 5)
)

(script static void (f_hud_flash_single_nodestroy (object_name hud_object_highlight))
    (set chud_debug_highlight_object hud_object_highlight)
    (sleep 4)
    (set chud_debug_highlight_object none)
    (sleep 5)
)

(script static void (f_blip_internal (object obj, short icon_disappear_time, short final_delay))
    (chud_track_object obj true)
    (sound_impulse_start sfx_blip none 1)
    (sleep icon_disappear_time)
    (chud_track_object obj false)
    (sleep final_delay)
)

(script static void (f_blip_flag_internal (cutscene_flag f, short icon_disappear_time, short final_delay))
    (chud_track_flag f true)
    (sound_impulse_start sfx_blip none 1)
    (sleep icon_disappear_time)
    (chud_track_flag f false)
    (sleep final_delay)
)

(script static void (f_blip_flag (cutscene_flag f, short type))
    (chud_track_flag_with_priority f type)
)

(script static void (f_blip_flag_forever (cutscene_flag f))
    (print "f_blip_flag_forever is going away. please use f_blip_flag")
    (f_blip_flag f blip_neutralize)
)

(script static void (f_unblip_flag (cutscene_flag f))
    (chud_track_flag f false)
)

(script static void (f_blip_object (object obj, short type))
    (chud_track_object_with_priority obj type)
)

(script static void (f_blip_object_offset (object obj, short type, short offset))
    (chud_track_object_with_priority obj type)
    (chud_track_object_set_vertical_offset obj offset)
)

(script static void (f_blip_object_forever (object obj))
    (print "f_blip_object_forever is going away. please use f_blip_object")
    (chud_track_object obj true)
)

(script static void (f_unblip_object (object obj))
    (chud_track_object obj false)
)

(script static void (f_blip_object_until_dead (object obj))
    (chud_track_object obj true)
    (sleep_until (<= (object_get_health obj) 0))
    (chud_track_object obj false)
)

(script static void (f_blip_ai (ai group, short blip_type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_blip_object (list_get l_blip_list s_blip_list_index) blip_type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_ai_offset (ai group, short blip_type, short offset))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_blip_object_offset (list_get l_blip_list s_blip_list_index) blip_type offset)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_ai_forever (ai group))
    (print "f_blip_ai_forever is going away. please use f_blip_ai")
    (f_blip_ai group 0)
)

(script static void (f_blip_ai_until_dead (ai char))
    (print "f_blip_ai_until_dead will be rolled into the new f_blip_ai command. consider using that instead.")
    (f_blip_ai_forever char)
    (sleep_until (<= (object_get_health (ai_get_object char)) 0))
    (f_unblip_ai char)
)

(script static void (f_unblip_ai (ai group))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_unblip_object (list_get l_blip_list s_blip_list_index))
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_title (object obj, string_id title))
    (chud_track_object_with_priority obj 6 title)
    (sleep 120)
    (chud_track_object obj false)
)

(script static void (f_blip_weapon (object gun, short dist, short dist2))
    (sleep_until (or (and (<= (objects_distance_to_object player0 gun) dist) (>= (objects_distance_to_object player0 gun) 0.1)) (and (<= (objects_distance_to_object player1 gun) dist) (>= (objects_distance_to_object player1 gun) 0.1)) (and (<= (objects_distance_to_object player2 gun) dist) (>= (objects_distance_to_object player2 gun) 0.1)) (and (<= (objects_distance_to_object player3 gun) dist) (>= (objects_distance_to_object player3 gun) 0.1))) 1)
    (print "blip on")
    (f_blip_object gun blip_ordnance)
    (sleep_until (or (not (object_get_at_rest gun)) (and (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2))) 1)
    (print "blip off")
    (f_unblip_object gun)
)

(script static void (f_hud_spartan_waypoint (ai spartan, string_id spartan_hud, short max_dist))
    (sleep_until 
        (begin
            (if (< (objects_distance_to_object (ai_get_object spartan) player0) 0.95)
                (begin
                    (chud_track_object spartan false)
                    (sleep 60)
                )
                (if (> (objects_distance_to_object (ai_get_object spartan) player0) max_dist)
                    (begin
                        (chud_track_object spartan false)
                        (sleep 60)
                    )
                    (if (< (objects_distance_to_object (ai_get_object spartan) player0) 3)
                        (begin
                            (chud_track_object_with_priority spartan 22 spartan_hud)
                            (sleep 60)
                        )
                        (if (objects_can_see_object player0 (ai_get_object spartan) 10)
                            (begin
                                (chud_track_object_with_priority spartan 22 spartan_hud)
                                (sleep 60)
                            )
                            (if true
                                (begin
                                    (chud_track_object_with_priority spartan 5 "")
                                )
                            )
                        )
                    )
                )
            )
            false
        )
        30
    )
)

(script static void (f_callout_atom (object obj, short type, short time, short postdelay))
    (chud_track_object_with_priority obj type)
    (sound_impulse_start sfx_blip none 1)
    (sleep time)
    (chud_track_object obj false)
    (sleep postdelay)
)

(script static void (f_callout_flag_atom (cutscene_flag f, short type, short time, short postdelay))
    (chud_track_flag_with_priority f type)
    (sound_impulse_start sfx_blip none 1)
    (sleep time)
    (chud_track_flag f false)
    (sleep postdelay)
)

(script static void (f_callout_object (object obj, short type))
    (f_callout_atom obj type 120 2)
)

(script static void (f_callout_object_fast (object obj, short type))
    (f_callout_atom obj type 20 5)
)

(script static void (f_callout_ai (ai actors, short type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set l_blip_list (ai_actors actors))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_callout_object (list_get l_blip_list s_blip_list_index) type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set s_blip_list_index 0)
    (set b_blip_list_locked false)
)

(script static void (f_callout_ai_fast (ai actors, short type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set l_blip_list (ai_actors actors))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_callout_object_fast (list_get l_blip_list s_blip_list_index) type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set s_blip_list_index 0)
    (set b_blip_list_locked false)
)

(script static void (f_callout_and_hold_flag (cutscene_flag f, short type))
    (chud_track_flag_with_priority f type)
    (sound_impulse_start sfx_blip none 1)
    (sleep 10)
)

(script static void (f_md_ai_play (short delay, ai character, ai_line line))
    (set b_is_dialogue_playing true)
    (if (>= (ai_living_count character) 1)
        (begin
            (set s_md_play_time (ai_play_line character line))
            (sleep s_md_play_time)
            (sleep delay)
        )
        (print "this actor does not exist to play f_md_ai_play")
    )
    (set b_is_dialogue_playing false)
)

(script static void (f_md_object_play (short delay, object obj, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (ai_play_line_on_object obj line))
    (sleep s_md_play_time)
    (sleep delay)
    (set b_is_dialogue_playing false)
)

(script static void (f_md_ai_play_cutoff (short cutoff_time, ai character, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (- (ai_play_line character line) cutoff_time))
    (sleep s_md_play_time)
    (set b_is_dialogue_playing false)
)

(script static void (f_md_object_play_cutoff (short cutoff_time, object obj, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (- (ai_play_line_on_object obj line) cutoff_time))
    (sleep s_md_play_time)
    (set b_is_dialogue_playing false)
)

(script static void f_md_abort
    (sleep s_md_play_time)
    (print "dialog script aborted!")
    (set b_is_dialogue_playing false)
    (ai_dialogue_enable true)
)

(script static void f_md_abort_no_combat_dialog
    (f_md_abort)
    (sleep 1)
    (ai_dialogue_enable false)
)

(script static void (f_md_play (short delay, sound line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (sound_impulse_language_time line))
    (sound_impulse_start line none 1)
    (sleep (sound_impulse_language_time line))
    (sleep delay)
    (set s_md_play_time 0)
    (set b_is_dialogue_playing false)
)

(script static boolean f_is_dialogue_playing
    b_is_dialogue_playing
)

(script static boolean (f_ai_has_spawned (ai actors))
    (> (ai_spawn_count actors) 0)
)

(script static boolean (f_ai_is_defeated (ai actors))
    (and (> (ai_spawn_count actors) 0) (<= (ai_living_count actors) 0))
)

(script static boolean (f_ai_is_partially_defeated (ai actors, short count))
    (and (>= (ai_spawn_count actors) count) (<= (ai_living_count actors) count))
)

(script static boolean (f_task_is_empty (ai task))
    (<= (ai_task_count task) 0)
)

(script static boolean (f_task_has_actors (ai task))
    (> (ai_task_count task) 0)
)

(script static ai (f_object_get_squad (object ai_obj))
    (ai_get_squad (object_get_ai ai_obj))
)

(script static void debug_toggle_cookie_cutters
    (if (= debug_instanced_geometry false)
        (begin
            (set debug_objects_collision_models false)
            (set debug_objects_physics_models false)
            (set debug_objects_bounding_spheres false)
            (set debug_objects_cookie_cutters true)
            (set debug_objects true)
            (set debug_instanced_geometry_collision_geometry false)
            (set debug_instanced_geometry_cookie_cutters true)
            (set debug_instanced_geometry true)
        )
        (begin
            (set debug_objects_cookie_cutters false)
            (set debug_objects false)
            (set debug_instanced_geometry_cookie_cutters false)
            (set debug_instanced_geometry false)
        )
    )
)

(script static void debug_toggle_pathfinding_collisions
    (if (= collision_debug false)
        (begin
            (set collision_debug true)
            (set collision_debug_flag_ignore_invisible_surfaces false)
        )
        (begin
            (set collision_debug false)
            (set collision_debug_flag_ignore_invisible_surfaces true)
        )
    )
)

(script static void f_branch_empty01
    (print "branch exit")
)

(script static void f_branch_empty02
    (print "branch exit")
)

(script static void f_branch_empty03
    (print "branch exit")
)

(script static void (mus_start (looping_sound s))
    (if playmusic
        (sound_looping_start s none 1)
    )
)

(script static void (mus_stop (looping_sound s))
    (sound_looping_stop s)
)

(script static void (mus_alt (looping_sound s))
    (sound_looping_set_alternate s true)
)

(script static void (mus_kill (looping_sound s))
    (sound_looping_stop_immediately s)
)

(script static void sfx_attach_chatter
    (sound_looping_start sfx_chatter (player0) 1)
)

(script static void sfx_detach_chatter
    (sound_looping_stop sfx_chatter)
)

(script static void mus_kill_all
    (mus_kill mus_01)
    (mus_kill mus_02)
    (mus_kill mus_03)
    (mus_kill mus_04)
    (mus_kill mus_05)
    (mus_kill mus_06)
    (mus_kill mus_07)
    (mus_kill mus_08)
    (mus_kill mus_09)
    (mus_kill mus_10)
)

(script static void (md_play (short delay, sound line))
    (sleep delay)
    (sound_impulse_start line none 1)
    (sleep (sound_impulse_language_time line))
)

(script static void (md_print (string line))
    (if dialogue
        (print line)
    )
)

(script static void md_start
    (sleep_until (not b_dialogue_playing) 1)
    (ai_dialogue_enable false)
    (set b_dialogue_playing true)
)

(script static void md_stop
    (set b_dialogue_playing false)
    (ai_dialogue_enable true)
)

(script static void (md_ai_play (short delay, ai char, ai_line line))
    (set s_md_duration (ai_play_line char line))
    (sleep s_md_duration)
    (sleep delay)
)

(script static void (md_object_play (short delay, object obj, ai_line line))
    (set s_md_duration (ai_play_line_on_object obj line))
    (sleep s_md_duration)
    (sleep delay)
)

(script static void md_abort
    (if debug
        (print "dialogue script aborted!")
    )
    (sleep 30)
    (md_stop)
)

(script dormant void md_bch_jor_intro
    (md_start)
    (md_print "jorge: bit of a hike to the launch facility")
    (md_ai_play 0 ai_jorge m45_0010)
    (md_print "carter: any closer's too hot to land.")
    (md_ai_play 0 ai_carter m45_0020)
    (md_stop)
    (wake show_objective_beach)
    (sleep (random_range 60 90))
)

(script dormant void md_bch_kat_calls_phantom
    (md_start)
    (md_print "kat: phantom. east. one five zero!")
    (md_ai_play 0 ai_kat m45_0030)
    (md_print "carter: move up the beach, noble.")
    (md_ai_play 0 ai_carter m45_0040)
    (md_stop)
)

(script dormant void md_bch_kat_launch_ahead
    (md_start)
    (md_print "kat: launch facility dead ahead.")
    (md_ai_play 0 ai_kat m45_0050)
    (md_stop)
)

(script dormant void md_bch_jor_friendlies_taking
    (md_start)
    (md_print "jorge: friendlies taking fire!")
    (md_ai_play 0 ai_jorge m45_0060)
    (md_print "carter: six, you're on point.")
    (md_ai_play 0 ai_carter m45_0070)
    (md_stop)
)

(script dormant void md_bch_car_six_on_point
    (md_start)
    (md_print "carter: six, you're on point.")
    (md_ai_play 0 ai_carter m45_0070)
    (md_stop)
)

(script dormant void md_bch_jor_hostile_rocks_south
    (md_start)
    (md_print "jorge: more hostiles in the rocks to the south!")
    (md_ai_play 20 ai_jorge m45_0080)
    (md_print "carter: root'em out!")
    (md_ai_play 0 ai_carter m45_0090)
    (md_stop)
)

(script dormant void md_bch_trf_spartans_coming
    (branch (= b_lnc_started true) (md_abort))
    (sleep_until (or (<= (objects_distance_to_object (ai_actors "gr_unsc_spartans") (ai_get_object "sq_unsc_bch_tf0")) 4.5) (<= (objects_distance_to_object (players) (ai_get_object "sq_unsc_bch_tf0")) 4.5)))
    (md_start)
    (md_print "female trooper: spartans coming in! watch your fire!")
    (md_ai_play 0 "sq_unsc_bch_tf0/trooper0" m45_0100)
    (md_stop)
)

(script dormant void md_fac_tr_everybody_inside
    (branch (>= s_objcon_fac 10) (branch_abort_dialogue))
    (md_start)
    (sleep 60)
    (vs_cast "sq_unsc_fac_tr_lead" false 10 "m45_0110")
    (set ai_facility_escort (vs_role 1))
    (md_print "trooper: everybody inside! more hostiles on the way!")
    (md_ai_play 30 ai_facility_escort m45_0110)
    (md_print "carter: inside, six. let's go.")
    (md_ai_play 0 ai_carter m45_0220)
    (md_stop)
    (wake md_fac_entrance_reminder)
)

(script dormant void md_fac_tr_inside_now
    (branch (= b_fac_started true) (branch_abort_dialogue))
    (md_start)
    (vs_cast "sq_unsc_fac_tr_lead" false 10 "m45_0120")
    (set ai_facility_escort (vs_role 1))
    (md_print "trooper: inside! now! we've got to seal this entrance!")
    (md_ai_play 0 ai_facility_escort m45_0120)
    (md_stop)
)

(script dormant void md_fac_car_move_inside
    (md_start)
    (md_print "carter: noble six, move inside!")
    (md_ai_play 0 ai_carter m45_0130)
    (md_stop)
)

(script dormant void md_fac_entrance_reminder
    (branch (or (>= s_objcon_fac 40) (= b_lnc_started true)) (branch_abort_fac_reminder))
    (if debug
        (print "facility: reminder started for entering facility...")
    )
    (sleep (* 30 30))
    (if (not (>= s_objcon_fac 20))
        (wake md_fac_tr_inside_now)
    )
    (sleep (* 30 60))
    (if (not (>= s_objcon_fac 20))
        (wake md_fac_tr_clocks_ticking)
    )
    (sleep s_md_reminder_interval)
    (sleep_until 
        (begin
            (if (not (>= s_objcon_fac 20))
                (begin
                    (wake md_fac_car_move_inside)
                    (sleep (* 30 180))
                )
            )
            (if (not (>= s_objcon_fac 20))
                (begin
                    (md_fac_car_enter_reminder)
                    (sleep (* 30 180))
                )
            )
            (>= s_objcon_fac 20)
        )
    )
)

(script static void branch_abort_fac_reminder
    (sleep 60)
    (branch_abort_dialogue)
)

(script dormant void md_fac_spkr_warning1
    (md_print "speaker: warning! launch facility breach! covenant forces have entered the base!")
    (md_object_play 0 none m45_0140)
    (sleep (random_range 210 360))
    (md_print "speaker: warning! launch facility has been -- *static*")
    (md_object_play 0 none m45_0150)
)

(script dormant void md_fac_tr_flight_control
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (vs_cast "sq_unsc_fac_tr_lead" false 10 "m45_0160")
    (set ai_facility_escort (vs_role 1))
    (md_start)
    (sleep 40)
    (md_print "trooper: flight control is this way. they're expecting you.")
    (md_ai_play 20 ai_facility_escort m45_0160)
    (md_stop)
    (wake show_objective_flight_control)
)

(script dormant void md_fac_jor_holland_said_yes
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (md_start)
    (sleep 30)
    (md_print "jorge: still can't believe holland said yes to this.")
    (md_ai_play 30 ai_jorge m45_0170)
    (md_print "kat: some plans are too go to say no.")
    (md_ai_play 20 ai_kat m45_0180)
    (md_print "carter: let's get that sabre airborne before he changes his mind.")
    (md_ai_play 0 ai_carter m45_0190)
    (md_stop)
)

(script dormant void md_fac_tr_calls_wraith
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (sleep 20)
    (if (bch_wraith_is_alive)
        (begin
            (md_start)
            (vs_cast "sq_unsc_fac_tr_rocketcrew/rocketcrew0" false 10 "m45_0200")
            (set ai_facility_rocketguy (vs_role 1))
            (md_print "trooper: we got a wraith on the lower platform!")
            (md_ai_play 0 ai_facility_rocketguy m45_0200)
            (md_stop)
        )
    )
)

(script dormant void md_fac_tr_clocks_ticking
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (vs_cast "sq_unsc_fac_tr_lead" false 10 "m45_0210")
    (set ai_facility_escort (vs_role 1))
    (md_start)
    (md_print "trooper: clock's ticking, spartans. we need to keep pushing to flight control.")
    (md_ai_play 0 "sq_unsc_fac_tr_lead" m45_0210)
    (md_stop)
)

(script static void md_fac_car_enter_reminder
    (md_start)
    (md_print "carter: inside, six. let's go.")
    (md_ai_play 0 ai_carter m45_0220)
    (md_stop)
)

(script dormant void md_fac_car_inside_six
    (md_start)
    (md_print "carter: inside, six. let's go.")
    (md_ai_play 0 ai_carter m45_0220)
    (md_stop)
)

(script dormant void md_fac_kat_orbit
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (md_start)
    (md_print "kat: boss, when we get into orbit...")
    (md_ai_play 0 ai_kat m45_0230)
    (md_print "carter: not now, kat.")
    (md_ai_play 30 ai_carter m45_0240)
    (md_print "kat: but shouldn't we iron out the --")
    (md_ai_play 5 ai_kat m45_0250)
    (md_print "carter: it was your plan, but it's holland's show.")
    (md_ai_play 15 ai_carter m45_0260)
    (md_stop)
)

(script dormant void md_fac_tr_be_coming
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (md_print "trooper: they'll be coming from this way.")
    (md_ai_play 0 "sq_unsc_fac_tr_hallgunners/gunner" m45_0270)
)

(script dormant void md_fac_tr_clear_los
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (sleep_until (<= (objects_distance_to_object (players) (ai_get_object "sq_unsc_fac_posthallway/trooper0")) 3) 10)
    (md_print "trooper: get a clear los down the corridor. split-jaws'll be here any second...")
    (md_ai_play 0 "sq_unsc_fac_posthallway/trooper0" m45_0280)
)

(script dormant void md_fac_tr_through_door
    (branch (= b_lnc_started true) (branch_abort_dialogue))
    (md_start)
    (md_print "trooper: control's right through that door, commander.")
    (md_ai_play 0 "sq_unsc_fac_tr_lead" m45_0290)
    (md_stop)
    (sleep (* 30 45))
    (ai_migrate "sq_unsc_fac_tr_lead" "sq_unsc_bch_reinforce_holding0")
)

(script dormant void md_fac_car_you_first_six
    (md_start)
    (md_print "carter: you first, six.")
    (md_ai_play 0 ai_carter m45_0300)
    (md_stop)
)

(script dormant void md_fac_car_get_in_control_room
    (md_start)
    (md_print "carter: noble six, get in the control room.")
    (md_ai_play 0 ai_carter m45_0310)
    (md_stop)
)

(script dormant void md_fac_car_control_room_now
    (md_start)
    (md_print "carter: lieutenant, in the control room. now.")
    (md_ai_play 0 ai_carter m45_0320)
    (md_stop)
)

(script dormant void md_fac_scn_jorge_confirmed
    (md_start)
    (md_print "security ai: spartan 052 identified. m-spec biometric sync confirmed. thank you.")
    (md_stop)
)

(script static void md_fac_jor_calms_kat
    (md_start)
    (md_print "jorge: kat...")
    (md_ai_play 0 ai_jorge m45_0480)
    (md_print "kat: forget it, jorge. just blow that super carrier out of the sky.")
    (md_ai_play 0 ai_kat m45_0490)
    (md_print "jorge: do my best.")
    (md_ai_play 0 ai_jorge m45_0500)
    (md_stop)
)

(script dormant void md_lnc_bay_breach
    (md_start)
    (md_print "speaker: warning, launch bay breach. warning, launch bay breach.")
    (md_object_play 0 none m45_0510)
    (md_stop)
)

(script dormant void md_lnc_car_get_to_sabre
    (branch (= b_lnc_player_in_sabre true) (md_abort))
    (sleep_until (>= (device_get_position "dm_slo_shutter") 1) 1)
    (set b_lnc_bombing_started true)
    (trigger_bombing_heavy)
    (sleep (random_range 20 35))
    (md_start)
    (md_print "carter: six, jorge, get to the sabre before the covenant wreck it.")
    (md_ai_play 15 ai_carter m45_0530)
    (md_print "jorge: what about you and kat?")
    (md_ai_play 20 ai_jorge m45_0540)
    (md_print "carter: jun's on his way with a falcon. we'll exfil after you launch. move!")
    (md_ai_play 20 ai_carter m45_0550)
    (thespian_performance_kill_by_name "thespian_controlroom_jorge")
    (sleep 1)
    (thespian_performance_setup_and_begin "thespian_launch_jorge" "" 0)
    (md_print "jorge: you heard him, six. let's go.")
    (md_ai_play 0 ai_jorge m45_0560)
    (if (not b_lnc_player_in_sabre)
        (begin
            (wake show_objective_launch)
            (f_blip_flag "fl_launch" 21)
            (thespian_performance_kill_by_name "thespian_controlroom_kat")
            (thespian_performance_kill_by_name "thespian_controlroom_carter")
            (sleep 1)
            (cs_run_command_script ai_kat cs_lnc_kat_post)
            (cs_run_command_script ai_carter cs_lnc_carter_post)
        )
    )
    (md_stop)
)

(script dormant void md_lnc_tr5_through_north_1
    (md_start)
    (md_print "trooper: through north doorway, spartans. we got your back.")
    (md_ai_play 0 ai_tr5 m45_0570)
    (md_stop)
)

(script dormant void md_lnc_tf1_through_north_3
    (md_start)
    (md_print "trooper female: through the north doorway, spartans. we got your back.")
    (md_ai_play 0 ai_tf1 m45_0590)
    (md_stop)
)

(script dormant void md_lnc_fco_sabre_prepped
    (md_start)
    (md_print "airboss: launch team, sabre is prepped and ready for launch.")
    (md_ai_play 0 "sq_unsc_fac_tr_boss" m45_0600)
    (md_stop)
)

(script dormant void md_lnc_car_hurry_up
    (md_start)
    (md_print "carter: hurry up, noble. we can't hold them off forever.")
    (md_ai_play 0 ai_carter m45_0610)
    (md_stop)
)

(script dormant void md_lnc_fco_sabres_ready
    (md_start)
    (md_print "airboss: sabre's ready, launch team. just waiting for you to get into position.")
    (md_ai_play 0 "sq_unsc_fac_tr_boss" m45_0620)
    (md_stop)
)

(script dormant void md_lnc_car_hustle
    (md_start)
    (md_print "carter: hustle, six. our launch window is closing.")
    (md_ai_play 0 ai_carter m45_0630)
    (md_stop)
)

(script dormant void md_lnc_car_get_move_on
    (md_start)
    (md_print "carter: move, spartans. if that sabre gets hit, this mission is over.")
    (md_ai_play 0 ai_carter m45_0640)
    (md_stop)
)

(script dormant void md_lnc_jor_at_sabre
    (md_start)
    (md_print "jorge: we're at the sabre now, commander.")
    (md_ai_play 0 ai_jorge m45_0680)
    (md_print "carter: copy, five. we see you.")
    (md_ai_play 0 ai_carter m45_0690)
    (md_print "jorge: after you, ace.")
    (md_ai_play 0 ai_jorge m45_0700)
    (md_stop)
    (wake md_lnc_sabre_reminder)
)

(script dormant void md_lnc_sabre_reminder
    (if debug
        (print "launch: reminder started for entering the sabre...")
    )
    (sleep s_md_reminder_wait)
    (sleep_until 
        (begin
            (if (not b_lnc_player_in_sabre)
                (md_lnc_jor_you_first)
            )
            (sleep s_md_reminder_interval)
            b_lnc_player_in_sabre
        )
    )
)

(script static void md_lnc_jor_you_first
    (md_start)
    (md_print "jorge: you first, six. i'm just a passenger on this leg.")
    (md_ai_play 0 ai_jorge m45_0710)
    (md_stop)
)

(script static void md_waf_hol_intro
    (md_start)
    (md_print "holland: noble actual to sabre b-029, over.")
    (md_object_play 20 none m45_0720)
    (md_print "jorge: copy, actual. colonel holland?")
    (md_object_play 15 none m45_0730)
    (md_print "holland: affirmative. i'll be your control from here on out. safer that way.")
    (md_object_play 20 none m45_0740)
    (md_print "jorge: understood, colonel.")
    (md_object_play 0 none m45_0750)
    (md_stop)
)

(script static void md_waf_jor_contacts
    (md_start)
    (md_print "jorge: multiple unidentified contacts!")
    (md_object_play 15 none m45_0840)
    (md_print "savannah: savannah actual to sabre team, be advised we have bogeys inbound.")
    (md_object_play 25 none m45_0850)
    (md_print "anchor 9: anchor 9 to all unsc ships, station defenses are down. requesting combat support until we can bring them back online.")
    (md_object_play 20 none m45_2200)
    (md_print "jorge: here we go, six. show them what you can do.")
    (md_object_play 0 none m45_0860)
    (md_stop)
)

(script dormant void md_waf_sav_skies_clear
    (md_start)
    (md_print "anchor 9 actual: anchor niner to all craft in the vicinity. be advised, we show a large attack force inbound.")
    (md_print "anchor 9 actual: combat air patrol and sabre teams are directed to defend the station.")
    (md_object_play 45 none m45_0890)
    (md_print "jorge: is there any place the covenant isn't?")
    (md_object_play 10 none m45_0910)
    (md_stop)
)

(script dormant void md_waf_an9_warning_fighter
    (md_start)
    (md_print "anchor 9 actual: anchor 9 to unsc ships, impulse drive signatures detected. fighter class. heads up, sabres!")
    (md_object_play 0 none m45_0920)
    (md_stop)
    (mus_stop mus_05)
    (mus_start mus_06)
)

(script static void md_waf_an9_warning_warning_bogeys
    (md_start)
    (md_print "anchor 9 actual: anchor 9 to unsc ships, inbound covenant bogeys. combat air patrol, align on intercept vector to inbound enemy craft.")
    (md_object_play 0 none m45_0930)
    (md_stop)
)

(script dormant void md_waf_an9_warning_signatures
    (md_start)
    (md_print "anchor 9 actual: anchor 9 to unsc ships, scan's detecting multiple inbound signatures. heading 126.")
    (md_object_play 0 none m45_0940)
    (md_stop)
)

(script dormant void md_waf_an9_warning_phantom
    (md_start)
    (md_print "anchor 9 actual: phantom! take it out, sabre teams.")
    (md_object_play 0 none m45_0950)
    (md_stop)
)

(script dormant void md_waf_an9_scrambling_reserves
    (md_start)
    (md_print "anchor 9 actual: scrambling reserve sabre squadron. that's all we got left.")
    (md_object_play 0 none m45_0960)
    (md_stop)
)

(script static void md_waf_an9_defenses_down
    (md_start)
    (md_print "anchor 9: anchor 9 to all unsc ships, station defenses are down. requesting combat support until we can bring them back online.")
    (md_object_play 0 none m45_2200)
    (md_stop)
)

(script dormant void md_waf_an9_batteries_at_56
    (md_start)
    (md_print "anchor 9: defensive batteries are at 56 percent. hang in there, sabre teams.")
    (md_object_play 0 none m45_2210)
    (md_stop)
)

(script dormant void md_waf_an9_batteries_at_79
    (sleep (random_range (* 30 10) (* 30 20)))
    (md_start)
    (md_print "anchor 9: defensive batteries at 79 percent. buy us another minute sabre teams!")
    (md_object_play 0 none m45_2220)
    (md_stop)
)

(script dormant void md_waf_an9_station_defenses_online
    (sleep (random_range (* 30 12) (* 30 15)))
    (md_start)
    (md_print "anchor 9: anchor 9 to all unsc ships, station defenses are back online. clear the lane. we'll light'em up.")
    (md_object_play 0 none m45_2230)
    (md_stop)
    (cs_run_command_script "sq_unsc_waf_aa" cs_abort)
)

(script static void md_waf_an9_phantoms_arrived
    (md_start)
    (md_print "anchor 9: anchor 9 to all unsc fighters: multiple inbound phantoms -- headed straight for our defensive batteries.")
    (md_object_play 20 none m45_2240)
    (md_print "anchor 9: sabre teams, we're marking high-value gunboat targets... now!")
    (md_object_play 30 none m45_2250)
    (md_stop)
)

(script static void md_waf_an9_intercept_gunboats
    (md_start)
    (md_print "anchor 9: all unsc ships: intercept gunboat-class phantoms. hit those markers!")
    (md_object_play 0 none m45_2260)
    (md_stop)
)

(script static void md_waf_incoming_phantoms_inbound
    (begin_random_count
        1
        (md_waf_an9_phantoms_inbound_vector)
        (md_waf_an9_phantoms_forward)
    )
    (mus_stop mus_06)
)

(script static void md_waf_an9_phantoms_inbound_vector
    (md_start)
    (md_print "anchor 9: anchor 9 to sabre teams, phantoms are inbound on vector seven mark four-niner.")
    (md_object_play 0 none m45_2270)
    (md_stop)
)

(script static void md_waf_an9_phantoms_forward
    (md_start)
    (md_print "anchor 9: anchor 9 to sabre teams: phantom signatures detected on a forward-facing vector.")
    (md_object_play 0 none m45_2280)
    (md_stop)
)

(script dormant void md_waf_an9_gunboats_in_position
    (branch (= b_waf_phantoms_defeated true) (md_abort))
    (sleep_until b_waf_phantoms_in_position)
    (md_start)
    (md_print "anchor 9: gunboats are in position! damage control teams, at the ready!")
    (md_object_play 0 none m45_2310)
    (md_stop)
)

(script dormant void md_waf_phantom_torpedoes_away
    (branch (= b_waf_phantoms_defeated true) (md_abort))
    (sleep_until b_waf_phantom_torpedoes_away)
    (begin_random_count
        1
        (md_waf_an9_torpedoes_away)
        (md_waf_an9_torpedo_launch)
        (md_waf_an9_torpedoes_incoming)
    )
    (sleep (* 30 5))
    (md_waf_an9_collision_alarm)
)

(script static void md_waf_an9_torpedoes_away
    (md_start)
    (md_print "anchor 9: phantom torpedoes away! bracing for impact!")
    (md_object_play 0 none m45_2290)
    (md_stop)
)

(script static void md_waf_an9_torpedo_launch
    (md_start)
    (md_print "anchor 9: torpedo launch detected!")
    (md_object_play 0 none m45_2300)
    (md_stop)
)

(script static void md_waf_an9_torpedoes_incoming
    (md_start)
    (md_print "anchor 9: torpedoes incoming!")
    (md_object_play 0 none m45_2320)
    (md_stop)
)

(script static void md_waf_an9_collision_alarm
    (md_start)
    (md_print "anchor 9: collision alarm!")
    (md_object_play 0 none m45_2330)
    (md_stop)
)

(script static void md_wrp_an9_ships_neutralized
    (md_start)
    (md_print "achor 9 actual: anchor 9 to unsc ships, all targets neutralized. b-029, you are clear to dock. activating marker.")
    (md_object_play 30 none m45_0970)
    (md_print "holland: holland to b-029 -- noble 5, you ready to go?")
    (md_object_play 15 none m45_0980)
    (md_print "jorge: affirmative, colonel.")
    (md_object_play 0 none m45_0990)
    (md_stop)
    (wake md_warp_dock_reminder)
)

(script dormant void md_warp_dock_reminder
    (branch (= b_wrp_player_docks true) (md_abort))
    (sleep 30)
    (sleep_until 
        (begin
            (sleep (* 30 30))
            (md_wrp_hol_dock_reminder_1)
            (sleep (* 30 30))
            (md_wrp_hol_dock_reminder_2)
            (sleep (* 30 30))
            (md_wrp_hol_dock_reminder_3)
            false
        )
        1
    )
)

(script static void md_wrp_hol_dock_reminder_1
    (md_start)
    (md_print "holland: noble 6, head for the marker. initiate docking procedure.")
    (md_object_play 0 none m45_1000)
    (md_stop)
)

(script static void md_wrp_hol_dock_reminder_2
    (md_start)
    (md_print "holland: spartan, dock at the marker. that's an order.")
    (md_object_play 0 none m45_1010)
    (md_stop)
)

(script static void md_wrp_hol_dock_reminder_3
    (md_start)
    (md_print "holland: lieutenant, this mission is a wash unless you dock at that marker.")
    (md_object_play 0 none m45_1020)
    (md_stop)
)

(script dormant void md_wrp_jor_my_stop
    (md_start)
    (md_print "jorge: this is my stop, lieutenant. see you on the other side.")
    (md_object_play 0 none m45_1030)
    (md_stop)
)

(script dormant void md_crv_sav_intro
    (sleep 60)
    (md_start)
    (md_print "savannah: frigate savannah in position, sabre team sound off.")
    (md_object_play 10 none m45_1040)
    (md_print "echo 1: echo 1, all systems nominal.")
    (md_object_play 5 none m45_1050)
    (md_print "echo 2: echo 2, good to go.")
    (md_object_play 7 none m45_1060)
    (md_print "echo 3: echo 3, systems green.")
    (md_object_play 4 none m45_1070)
    (md_print "echo 4: echo 4, all systems online.")
    (md_object_play 15 none m45_1080)
    (md_print "savannah: solid copy. we are currently jamming the corvette's comms. hit it hard while it could call for help.")
    (md_object_play 35 none m45_1090)
    (md_print "holland: agreed. sabre teams, clear a path to that corvette.")
    (md_object_play 0 none m45_1130)
    (md_stop)
)

(script dormant void md_crv_hol_sitrep
    (md_start)
    (md_print "holland: holland to strike force, sitrep.")
    (md_object_play 0 none m45_1100)
    (md_print "jorge: noble 5 reporting. my pelican's at the savannah. standing by.")
    (md_object_play 0 none none)
    (md_stop)
)

(script dormant void md_crv_sav_countermeasures
    (md_start)
    (md_print "savannah: unsc savannah in position 015 light seconds from target. electronic countermeasures are working for now. let's do this quick.")
    (md_object_play 0 none m45_1120)
    (md_print "holland: agreed. sabre teams, clear a path to that corvette.")
    (md_object_play 0 none m45_1130)
    (md_stop)
)

(script dormant void md_crv_sav_warning_seraphs
    (md_start)
    (md_print "savannah: savannah actual to sabre teams, seraphs on scan. light'em up!")
    (md_object_play 0 none m45_1150)
    (md_stop)
)

(script dormant void md_crv_dot_bomber_shields
    (md_start)
    (md_print "dot: colonel, be advised latest intel on covenant seraph bombers indicates active shield defenses.")
    (md_object_play 0 none m45_1160)
    (md_stop)
)

(script dormant void md_hol_guns_on_shields
    (md_start)
    (md_print "holland: sabre teams, use your guns to take down their shields then hit them with your missiles.")
    (md_object_play 0 none m45_1170)
    (md_stop)
)

(script dormant void md_crv_sav_warning_more_bogeys
    (md_start)
    (md_print "savannah: heads up, sabres. multiple impulse drive signatures detected. more bogeys incoming.")
    (md_object_play 0 none m45_1190)
    (md_stop)
)

(script dormant void md_crv_sav_warning_4_phantoms
    (md_start)
    (md_print "savannah: three -- strike that -- four-plus phantoms on scan. take them out.")
    (md_object_play 0 none m45_1200)
    (md_stop)
)

(script dormant void md_crv_sav_getting_hammered
    (md_start)
    (md_print "savannah: savannah to holland, we're getting hammered.")
    (md_object_play 0 none m45_1210)
    (md_print "holland: understood, savannah. noble 6, i need you to neutralize those phantoms.")
    (md_object_play 0 none m45_1220)
    (md_stop)
)

(script dormant void md_crv_ec1_new_contacts
    (md_start)
    (md_print "echo 1: echo 1, i've got new unknown contacts.")
    (md_object_play 0 none m45_1230)
    (md_print "savannah: stand by, looks like more phantoms, echo 1. but something's wrong with their profiles.")
    (md_object_play 0 none m45_1240)
    (md_print "dot: scans are consistent with gunboat class dropships. rare, but quite formidable.")
    (md_object_play 0 none m45_1250)
    (md_print "holland: you heard her, sabre teams. watch your step.")
    (md_object_play 0 none m45_1260)
    (md_stop)
)

(script dormant void md_crv_sav_more_heavy_phantoms
    (md_start)
    (md_print "savannah: more heavy phantoms, take them out.")
    (md_object_play 0 none m45_1300)
    (md_stop)
)

(script static void md_crv_ec2_reinforcements
    (md_start)
    (md_print "savannah: heads up, sabres. multiple impulse drive signatures detected. more bogeys incoming.")
    (md_object_play 30 none m45_1190)
    (md_print "echo 2: echo 2 to savannah actual, where are these reinforcements coming from. thought the target was jammed.")
    (md_object_play 45 none m45_1310)
    (md_print "savannah: must be squadrons coming back from patrol, echo 2.")
    (md_object_play 30 none m45_1320)
    (md_print "holland: don't let any of them get away, sabres. kill them before they bug out and warn that super carrier what we're up to.")
    (md_object_play 0 none m45_1330)
    (wake show_objective_corvette_escort)
    (md_stop)
)

(script dormant void md_crv_sav_clip_engines
    (sleep (random_range (* 30 5) (* 30 7)))
    (wake crv_hud_flash)
    (md_start)
    (md_print "savannah: shields eliminated, might want to clip her engines, colonel. see if we can slow her down.")
    (md_object_play 0 none m45_1430)
    (md_print "holland: good thinking, savannah. will make boarding her a whole lot easier.")
    (md_object_play 0 none m45_1440)
    (md_print "holland: noble 6, i'm marking targets. take out the corvette's main engines.")
    (md_object_play 0 none m45_1460)
    (md_stop)
    (wake crv_engine_control)
)

(script dormant void md_crv_dot_flares
    (sleep_until b_crv_all_engines_damaged)
    (sleep 30)
    (md_start)
    (md_print "dot: warning, energy flares detected in the corvette's aft launch bays.")
    (md_object_play 0 none m45_1470)
    (sleep 25)
    (md_stop)
)

(script dormant void md_crv_sav_deploying_pods
    (md_start)
    (md_print "savannah: they're deploying elite drop pods to the surface.")
    (md_object_play 0 none m45_1480)
    (md_print "holland: destroy as many as you can, noble 6. there are already too many of those murdering bastards on reach.")
    (md_object_play 0 none m45_1490)
    (md_stop)
)

(script dormant void md_crv_hol_destroy_pod_bays
    (md_start)
    (md_print "holland: lieutenant, destroy the drop pod launch bays. cook those elites in their cans.")
    (md_object_play 0 none m45_1500)
    (md_stop)
)

(script static void md_brd_hol_analyze_entrance
    (md_start)
    (sleep (random_range 45 75))
    (md_print "holland: dot, analyze all available data on that corvette. find a way inside.")
    (md_object_play 45 none m45_1510)
    (mus_start mus_07)
    (md_print "dot: scans indicate a structural weakness surrounding a platform on top of the vessel.")
    (md_object_play 30 none m45_1520)
    (md_print "holland: noble 6, set down immediately on that corvette's topside landing pad.")
    (md_object_play 0 none m45_1370)
    (md_stop)
)

(script dormant void md_brd_hol_breach_reminder_1
    (md_start)
    (md_print "holland: target the weak spot on the top of the corvette, lieutenant.")
    (md_object_play 0 none m45_1540)
    (md_stop)
)

(script dormant void md_brd_hol_breach_reminder_2
    (md_start)
    (md_print "holland: spartan, you won't be able to land until you breach that topside barrier.")
    (md_object_play 0 none m45_1550)
    (md_stop)
)

(script static void md_brd_sav_airspace_clear
    (md_start)
    (md_print "holland: noble 6, set down immediately on that corvette's topside landing pad.")
    (md_object_play 0 none m45_1370)
    (md_stop)
)

(script dormant void md_brd_hol_land_reminder_1
    (md_start)
    (md_print "holland: noble 6, repeat, set down on that landing pad.")
    (md_object_play 0 none m45_1380)
    (md_stop)
)

(script dormant void md_brd_hol_land_reminder_2
    (md_start)
    (md_print "holland: i need you to land on that corvette, lieutenant.")
    (md_object_play 0 none m45_1390)
    (md_stop)
)

(script dormant void md_brd_hol_land_reminder_3
    (md_start)
    (md_print "holland: spartan, park your bird topside. now.")
    (md_object_play 0 none m45_1400)
    (md_stop)
)

(script dormant void md_com_hol_intro
    (sleep (random_range 60 90))
    (md_start)
    (md_print "holland: noble six, the savannah's countermeasures won't work forever.")
    (md_print "holland: find a way inside and permanently disable that cruiser's communications.")
    (md_object_play 15 none m45_1560)
    (md_print "holland: as soon as we're sure the corvette can't squawk, we'll initiate uppercut phase 2.")
    (md_object_play 0 none m45_1600)
    (md_stop)
    (wake show_objective_comms_seize)
)

(script dormant void md_com_hol_inside_reminder_1
    (md_start)
    (md_print "holland: get inside, spartan. if that corvette calls for backup, we're done for.")
    (md_object_play 0 none m45_1580)
    (md_stop)
)

(script dormant void md_com_hol_inside_reminder_2
    (md_start)
    (md_print "holland: head for the comm center, lieutenant. find and destroy the relay core.")
    (md_object_play 0 none m45_1590)
    (md_stop)
)

(script dormant void md_com_hol_corvette_squawk
    (md_start)
    (md_print "holland: as soon as we're sure the corvette can't squawk, we'll initiate uppercut phase 2.")
    (md_object_play 0 none m45_1600)
    (md_stop)
)

(script dormant void md_com_hol_airlock_reminder
    (if debug
        (print "comms: reminder started for entering airlock...")
    )
    (branch (>= s_objcon_com 10) (mda_com_hol_airlock_reminder))
    (sleep s_md_reminder_wait)
    (sleep_until 
        (begin
            (if (< s_objcon_com 10)
                (md_com_hol_landing_pad)
            )
            (if (< s_objcon_com 10)
                (begin
                    (f_blip_flag "fl_comms_airlock_left" blip_recon)
                    (f_blip_flag "fl_comms_airlock_right" blip_recon)
                )
            )
            (sleep s_md_reminder_interval)
            (>= s_objcon_com 10)
        )
    )
    (if debug
        (print "comms: reminder for airlock no is longer necessary...")
    )
)

(script static void mda_com_hol_airlock_reminder
    (sleep_until (>= s_objcon_com 10) 1)
    (f_unblip_flag "fl_comms_airlock_left")
    (f_unblip_flag "fl_comms_airlock_right")
)

(script static void md_com_hol_landing_pad
    (md_start)
    (md_print "holland: six, i'm looking at recon shots of that landing pad -- ")
    (md_print "holland: should be airlocks to the interior, port and starboard. move inside.")
    (md_stop)
)

(script static void md_hgr_hol_intro
    (md_start)
    (md_print "holland: holland to savannah, enemy comm relay is now offline.")
    (md_object_play 30 none m45_1670)
    (md_print "savannah: copy that. halting countermeasures. diverting all power and personnel to weapons.")
    (md_object_play 15 none m45_1680)
    (md_print "holland: all right, noble. let's get that bomb onboard. six, head for the hangar.")
    (md_object_play 0 none m45_1690)
    (md_stop)
    (mus_stop mus_07)
)

(script dormant void md_hgr_pl1_hangar_this_way
    (md_start)
    (md_print "pilot #1: spartans, hangar's this way.")
    (md_object_play 0 none m45_1700)
    (md_stop)
)

(script dormant void md_hgr_pl2_on_our_way
    (sleep (random_range 90 120))
    (vs_cast "gr_unsc_pilots" false 10 "m45_1710")
    (md_start)
    (md_print "pilot #2: colonel, on our way to the hangar.")
    (md_ai_play 30 (vs_role 1) m45_1710)
    (md_print "holland: noble 5, meet them there.")
    (md_object_play 20 none m45_1720)
    (md_print "jorge: affirmative, on approach.")
    (md_object_play 0 none m45_1730)
    (md_stop)
)

(script dormant void md_grm_odst_sav_hitting
    (md_start)
    (md_print "odst: whoa... savannah's hitting this corvette hard!")
    (md_object_play 0 none m45_1870)
    (md_print "odst: hope the old girl can take it as well as she dishes it out!")
    (md_object_play 0 none m45_1880)
    (md_stop)
)

(script dormant void md_hgr_jor_shield_door_up
    (md_start)
    (md_print "jorge: hang on. shield door is up. six, i need you to disable it.")
    (md_object_play 0 none m45_1740)
    (md_stop)
)

(script dormant void md_hgr_tr5_in_hangar
    (vs_cast "sq_unsc_com_pilots" false 10 "m45_1750")
    (md_start)
    (md_print "trooper 5: we're in the hangar, noble 5.")
    (md_ai_play 0 (vs_role 1) m45_1750)
    (md_print "jorge: not a moment too soon. shield controls should be around there somewhere.")
    (md_object_play 0 none m45_1760)
    (md_stop)
)

(script dormant void md_hgr_jor_cant_land_until
    (md_start)
    (md_print "jorge: can't land until you drop that shield, lieutenant.")
    (md_object_play 0 none m45_1770)
    (md_stop)
)

(script dormant void md_hgr_tr5_shield_control_platform
    (md_start)
    (md_print "trooper 5: shield controls are on the far platform, spartan.")
    (md_ai_play 0 ai_tr5 m45_1780)
    (md_stop)
)

(script dormant void md_hgr_tf2_shield_control_platform
    (md_start)
    (md_print "trooper female 2: shield controls are on the far platform, spartan.")
    (md_ai_play 0 ai_tf2 m45_1790)
    (md_stop)
)

(script dormant void md_hgr_jor_go_for_controls
    (md_start)
    (md_print "jorge: six, go for those shield controls. i...")
    (md_object_play 0 none m45_1800)
    (md_stop)
    (mus_start mus_08)
)

(script dormant void md_hgr_tf2_head_for_controls
    (md_start)
    (md_print "trooper female 2: sir, head for the shield controls. we'll cover you.")
    (md_ai_play 0 ai_tf2 m45_1810)
    (md_stop)
)

(script dormant void md_hgr_tf2_maam_head_for_controls
    (md_start)
    (md_print "trooper female 2: ma'am, head for the shield controls. we'll cover you.")
    (md_ai_play 0 ai_tf2 m45_1820)
    (md_stop)
)

(script dormant void md_hgr_jor_splendid
    (md_start)
    (md_print "jorge: splendid, coming in.")
    (md_object_play 0 none m45_1830)
    (md_stop)
)

(script dormant void md_grm_hol_find_bridge
    (sleep 60)
    (md_start)
    (md_print "holland: noble 6, get that corvette moving toward that super carrier. head for the bridge, find the nav controls.")
    (md_object_play 0 none m45_1840)
    (wake show_objective_sieze_bridge)
    (mus_alt mus_08)
    (md_stop)
    (wake md_grm_tr1_plenty_of_arms)
)

(script dormant void md_grm_tr1_plenty_of_arms
    (sleep 30)
    (vs_cast "gr_unsc_pilots" false 10 "m45_1850")
    (set ai_tr1 (vs_role 1))
    (md_start)
    (md_print "trooper 1: we got plenty of arms and ammo if you need'em, spartan.")
    (md_ai_play 0 ai_tr1 m45_1850)
    (md_stop)
    (f_callout_object "dm_grm_weapons0" blip_ammo)
    (f_callout_object "dm_grm_weapons1" blip_ammo)
)

(script dormant void md_grm_tr5_lead_the_way
    (md_start)
    (md_print "trooper 5: lead the way, lieutenant.")
    (md_ai_play 0 ai_tr5 m45_1850)
    (md_stop)
)

(script dormant void md_hgr_tr1_savannah_hitting_hard
    (sleep (random_range 30 60))
    (sound_impulse_start "sound\levels\120_halo\trench_run\island_creak.sound" none 1)
    (cam_shake 0.2 1 2 3)
    (interpolator_start "corvette_power")
    (if (> (ai_living_count "sq_unsc_com_pilots") 0)
        (begin
            (if (>= (ai_living_count "sq_unsc_com_pilots") 3)
                (thespian_performance_setup_and_begin "thespian_corvette_stagger_pilot2" "" 0)
            )
            (if (>= (ai_living_count "sq_unsc_com_pilots") 2)
                (thespian_performance_setup_and_begin "thespian_corvette_stagger_pilot1" "" 0)
            )
            (if (>= (ai_living_count "sq_unsc_com_pilots") 1)
                (thespian_performance_setup_and_begin "thespian_corvette_stagger_pilot0" "" 0)
            )
            (sleep 60)
            (vs_cast "sq_unsc_com_pilots" false 10 "m45_1870" "m45_1880")
            (set ai_com_tr1 (vs_role 1))
            (set ai_com_tr5 (vs_role 2))
            (md_start)
            (md_print "trooper 1: whoa. savannah's hitting this corvette hard.")
            (md_ai_play 0 ai_com_tr1 m45_1870)
            (md_print "trooper 5: hope the old girl can take it as well as she dishes out.")
            (md_ai_play 0 ai_com_tr5 m45_1880)
            (md_stop)
        )
    )
)

(script static void md_grm_savannah_goes_down
    (md_start)
    (md_print "savannah: savannah to holland, sustaining major structural damage. we need to break off, colonel.")
    (md_object_play 0 none m45_1890)
    (md_print "holland: copy, savannah. our team is in. disengage.")
    (md_object_play 0 none m45_1900)
    (sleep_until (>= s_objcon_grm 60) 30 (* 30 120))
    (sleep (random_range 15 35))
    (mus_stop mus_08)
    (wake grm_kill_savannah_guns)
    (md_print "savannah: break off! break off!")
    (md_object_play 0 none m45_1910)
    (md_print "savannah: hull breach! reactor's flaring! dammit, i'm losing her!")
    (md_object_play 0 none m45_1920)
    (md_stop)
    (sleep 15)
    (mus_start mus_09)
)

(script dormant void md_grm_sav_need_to_break_off
    (md_start)
    (md_print "savannah: savannah to holland, sustaining major structural damage. we need to break off, colonel.")
    (md_object_play 0 none m45_1890)
    (md_print "holland: copy, savannah. our team is in. disengage.")
    (md_object_play 0 none m45_1900)
    (md_stop)
)

(script dormant void md_grm_sav_break_off
    (md_start)
    (md_print "savannah: break off! break off!")
    (md_object_play 0 none m45_1910)
    (md_print "savannah: hull breach! reactor's flaring! dammit, i'm losing her!")
    (md_object_play 0 none m45_1920)
    (md_stop)
)

(script dormant void md_grm_hol_savannah_can_you_hear
    (md_start)
    (md_print "holland: savannah actual, can you hear me?")
    (md_object_play 90 none m45_1930)
    (md_print "jorge: frigate's gone, six. nothing we could do.")
    (md_object_play 35 none m45_1940)
    (md_print "holland: noble, you are in deep with no cover. get that corvette moving and get the hell out of there.")
    (md_object_play 0 none m45_1950)
    (md_stop)
    (set b_grm_hol_finishes_dialogue true)
    (game_save_no_timeout)
)

(script dormant void md_grm_jor_frigates_gone
    (md_start)
    (md_print "jorge: frigate's gone, six. nothing we could do.")
    (md_ai_play 0 ai_jorge m45_1940)
    (md_stop)
)

(script dormant void md_grm_hol_you_are_in_deep
    (md_start)
    (md_print "holland: noble, you are in deep with no cover. get that corvette moving and get the hell out of there.")
    (md_object_play 0 none m45_1950)
    (md_stop)
)

(script dormant void md_brg_tr5_looks_like_bridge
    (sleep (random_range 30 60))
    (vs_cast "gr_unsc_pilots" false 10 "m45_1960")
    (md_start)
    (md_print "trooper 5: looks like the bridge, spartan. let's clear it out!")
    (md_ai_play 0 (vs_role 1) m45_1960)
    (md_stop)
)

(script dormant void md_brg_hol_locate_terminal
    (md_start)
    (md_print "holland: noble 6, locate that navigation terminal.")
    (md_object_play 0 none m45_1970)
    (md_stop)
)

(script dormant void md_brg_tf2_gotta_find_terminal
    (md_start)
    (md_print "trooper female 2: gotta find that nav terminal.")
    (md_ai_play 0 ai_tf2 m45_1980)
    (md_stop)
)

(script dormant void md_brg_tr_gotta_find_terminal_b
    (vs_cast "sq_unsc_grm_pilots" false 10 "m45_1990")
    (md_start)
    (md_print "trooper male 1: gotta find that nav terminal.")
    (md_ai_play 0 (vs_role 1) m45_1990)
    (md_stop)
)

(script static void md_brg_hol_move_lieutenant
    (md_start)
    (md_print "holland: move, lieutenant. put that corvette on a refueling track to the super carrier.")
    (md_object_play 0 none m45_2000)
    (md_stop)
)

(script dormant void md_brg_hol_taking_so_long
    (md_start)
    (md_print "holland: noble 6, what's taking so long? find that nav terminal!")
    (md_object_play 0 none m45_2010)
    (md_stop)
)

(script dormant void md_esc_tr5_think_that_did_it
    (md_start)
    (md_print "trooper 5: think that did it, lieutenant. refueling track confirmed.")
    (md_ai_play 0 ai_tr5 m45_2020)
    (md_stop)
)

(script dormant void md_esc_hol_well_done
    (sleep 30)
    (md_start)
    (md_print "holland: well done, noble 6. uppercut initiated. corvette is underway.")
    (md_object_play 30 none m45_2030)
    (md_print "jorge: six, our rides out of here are taking heavy fire. get back here.")
    (md_object_play 0 none m45_2040)
    (wake show_objective_rescue_jorge)
    (md_stop)
)

(script dormant void md_esc_at_your_earliest
    (sleep (random_range 60 210))
    (md_start)
    (md_print "jorge: at your earliest convenience, noble 6!")
    (md_object_play 0 none m45_2050)
    (md_stop)
)

(script dormant void md_fin_jor_good_of_you
    (sleep_until (>= s_objcon_fin 10))
    (sleep 60)
    (md_start)
    (md_print "jorge: good of you to come. hostiles are pounding the hell out of my pelican.")
    (md_ai_play 0 ai_jorge m45_2060)
    (md_stop)
    (wake show_objective_defend_bomb)
    (sleep 45)
    (f_blip_flag "fl_fin_slipspace" blip_defend)
    (sleep 30)
    (f_callout_object "dm_fin_weapons0" blip_ammo)
    (f_callout_object "dm_fin_weapons1" blip_ammo)
    (f_callout_object "dm_fin_weapons2" blip_ammo)
    (game_save)
)

(script static void md_fin_jor_and_stay_down
    (md_start)
    (md_print "jorge: and stay down!")
    (md_ai_play 0 ai_jorge m45_2070)
    (cs_run_command_script ai_jorge cs_fin_jorge_pelican)
    (sleep 60)
    (md_print "jorge: savannah did a number on the door. there's no way back up to the sabres. noble 6, form up on me.")
    (md_ai_play 0 ai_jorge m45_2080)
    (sleep 30)
    (f_blip_ai ai_jorge 21)
    (wake md_fin_jor_meet_reminder_loop)
    (md_stop)
)

(script dormant void md_fin_jor_savannah_did_number
    (md_start)
    (md_print "jorge: savannah did a number on the door. there's no way back up to the sabres. noble 6, form up on me.")
    (md_ai_play 0 ai_jorge m45_2080)
    (md_stop)
)

(script dormant void md_fin_jor_meet_reminder_loop
    (branch (= b_fin_completed true) (md_abort))
    (sleep_until 
        (begin
            (sleep (* 30 30))
            (md_fin_jor_meet_me_at_bomb)
            (sleep (* 30 45))
            (md_fin_jor_my_position_now)
            false
        )
        1
    )
)

(script static void md_fin_jor_meet_me_at_bomb
    (md_start)
    (md_print "jorge: meet me at the bomb, six.")
    (md_ai_play 0 ai_jorge m45_2090)
    (md_stop)
)

(script static void md_fin_jor_my_position_now
    (md_start)
    (md_print "jorge: spartan, my position. now.")
    (md_ai_play 0 ai_jorge m45_2100)
    (md_stop)
)

(script static void setup_corvette_cannons
    (object_create_folder_anew "v_corvette_cannons")
    (corvette_load_gunners)
    (sleep 1)
    (wake corvette_cannon_control)
)

(script static void corvette_load_gunners
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left0")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left0" "v_crv_cannon_left0")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left1")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left1" "v_crv_cannon_left1")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left2")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left2" "v_crv_cannon_left2")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_right0")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_right0" "v_crv_cannon_right0")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_right1")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_right1" "v_crv_cannon_right1")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_right2")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_right2" "v_crv_cannon_right2")
    (sleep 1)
    (ai_cannot_die "sq_cov_crv_cannon_gunners" true)
    (ai_disregard (ai_actors "sq_cov_crv_cannon_gunners") true)
    (ai_set_clump "sq_cov_crv_cannon_gunners" clump_corvette_aa)
)

(script static void corvette_load_gunners_left
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left0")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left0" "v_crv_cannon_left0")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left1")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left1" "v_crv_cannon_left1")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left2")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left2" "v_crv_cannon_left2")
    (sleep 1)
    (ai_cannot_die "sq_cov_crv_cannon_gunners" true)
)

(script static void setup_corvette_cannons_comms
    (ai_erase "sq_cov_crv_cannon_gunners")
    (object_create_folder_anew "v_corvette_cannons")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left0")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left0" "v_crv_cannon_left0")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left1")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left1" "v_crv_cannon_left1")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left2")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left2" "v_crv_cannon_left2")
    (sleep 1)
    (ai_cannot_die "sq_cov_crv_cannon_gunners" true)
    (ai_disregard (ai_actors "sq_cov_crv_cannon_gunners") true)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left0" cs_corvette_gunners_comms)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left1" cs_corvette_gunners_comms)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left2" cs_corvette_gunners_comms)
)

(script static void setup_corvette_cannons_hangar
    (ai_erase "sq_cov_crv_cannon_gunners")
    (object_create_folder_anew "v_corvette_cannons")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left0")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left0" "v_crv_cannon_left0")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left1")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left1" "v_crv_cannon_left1")
    (ai_place "sq_cov_crv_cannon_gunners/gunner_left2")
    (ai_vehicle_enter_immediate "sq_cov_crv_cannon_gunners/gunner_left2" "v_crv_cannon_left2")
    (sleep 1)
    (ai_cannot_die "sq_cov_crv_cannon_gunners" true)
    (ai_disregard (ai_actors "sq_cov_crv_cannon_gunners") true)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left0" cs_corvette_gunners_hangar)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left1" cs_corvette_gunners_hangar)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left2" cs_corvette_gunners_hangar)
)

(script command_script void cs_corvette_gunners_left
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_rear_top01"))
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_rear_bottom01"))
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_right_bottom01"))
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_right_top03"))
            )
            (sleep (random_range 100 200))
            false
        )
        1
    )
    (sleep_forever)
)

(script command_script void cs_corvette_gunners_right
    (begin_random_count
        1
        (cs_shoot true (object_at_marker "dm_savannah_corvette" "turret_rear_top01"))
        (cs_shoot true (object_at_marker "dm_savannah_corvette" "turret_rear_bottom01"))
        (cs_shoot true (object_at_marker "dm_savannah_corvette" "turret_right_bottom01"))
        (cs_shoot true (object_at_marker "dm_savannah_corvette" "turret_right_top03"))
    )
    (sleep_forever)
)

(script command_script void cs_corvette_gunners_comms
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_rear_top01"))
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_rear_bottom01"))
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_right_bottom01"))
                (cs_shoot true (object_at_marker "dm_savannah_comms" "turret_right_top03"))
            )
            (sleep (random_range 100 200))
            false
        )
        1
    )
    (sleep_forever)
)

(script command_script void cs_corvette_gunners_hangar
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot true (object_at_marker "dm_savannah_hangar" "turret_rear_top01"))
                (cs_shoot true (object_at_marker "dm_savannah_hangar" "turret_rear_bottom01"))
                (cs_shoot true (object_at_marker "dm_savannah_hangar" "turret_right_bottom01"))
                (cs_shoot true (object_at_marker "dm_savannah_hangar" "turret_right_top03"))
            )
            (sleep (random_range 100 200))
            false
        )
        1
    )
    (sleep_forever)
)

(script command_script void cs_gunroom_gunners_left
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot_point true "ps_grm_cannons/target0")
                (cs_shoot_point true "ps_grm_cannons/target1")
                (cs_shoot_point true "ps_grm_cannons/target2")
            )
            (sleep (random_range 90 150))
            (= (object_get_health "dm_savannah_gunroom") -1)
        )
        1
    )
    (sleep (* 30 1))
    (ai_erase ai_current_actor)
)

(script command_script void cs_gunroom_gunner_left0
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (ai_set_targeting_group ai_current_actor 2 false)
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot_point true "ps_grm_cannons/gun0_target0")
                (cs_shoot_point true "ps_grm_cannons/gun0_target1")
                (cs_shoot_point true "ps_grm_cannons/gun0_target2")
            )
            (sleep (random_range 90 150))
            (= (object_get_health "dm_savannah_gunroom") -1)
        )
        1
    )
    (ai_erase ai_current_actor)
)

(script command_script void cs_gunroom_gunner_left1
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (ai_set_targeting_group ai_current_actor 2 false)
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot_point true "ps_grm_cannons/gun1_target0")
                (cs_shoot_point true "ps_grm_cannons/gun1_target1")
                (cs_shoot_point true "ps_grm_cannons/gun1_target2")
            )
            (sleep (random_range 90 150))
            (= (object_get_health "dm_savannah_gunroom") -1)
        )
        1
    )
    (ai_erase ai_current_actor)
)

(script command_script void cs_gunroom_gunner_left2
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (ai_set_targeting_group ai_current_actor 2 false)
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot_point true "ps_grm_cannons/gun2_target0")
                (cs_shoot_point true "ps_grm_cannons/gun2_target1")
                (cs_shoot_point true "ps_grm_cannons/gun2_target2")
            )
            (sleep (random_range 90 150))
            (= (object_get_health "dm_savannah_gunroom") -1)
        )
        1
    )
    (ai_erase ai_current_actor)
)

(script dormant void corvette_cannon_control
    (branch (= b_com_started true) (branch_abort))
    (sleep_until 
        (begin
            (sleep_until (and (> (device_get_position "dm_savannah_corvette") 0) (< (device_get_position "dm_savannah_corvette") 0.15)) 1)
            (if debug
                (print "corvette: left cannons aiming at the frigate..")
            )
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left0" cs_corvette_gunners_left)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left1" cs_corvette_gunners_left)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left2" cs_corvette_gunners_left)
            (sleep_until (> (device_get_position "dm_savannah_corvette") 0.15) 1)
            (if debug
                (print "corvette: left cannons are free..")
            )
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left0" cs_abort)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left1" cs_abort)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left2" cs_abort)
            (sleep_until (and (> (device_get_position "dm_savannah_corvette") 0.44) (< (device_get_position "dm_savannah_corvette") 0.56)) 1)
            (if debug
                (print "corvette: right cannons aiming at the frigate..")
            )
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_right0" cs_corvette_gunners_right)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_right1" cs_corvette_gunners_right)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_right2" cs_corvette_gunners_right)
            (sleep_until (> (device_get_position "dm_savannah_corvette") 0.56) 1)
            (if debug
                (print "corvette: right cannons are free..")
            )
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_right0" cs_abort)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_right1" cs_abort)
            (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_right2" cs_abort)
            false
        )
        1
    )
)

(script static void test_corvette_cannons
    (setup_corvette_cannons)
    (crv_savannah_orbit)
    (sleep 1)
)

(script static void test_player_corvette_guns
    (vehicle_load_magic "v_crv_cannon_left0" none (player0))
)

(script static void (savannah_load_gunners (device_name d))
    (if debug
        (print "corvette savannah: loading right side gunners...")
    )
    (ai_place "sq_unsc_sav_gunners/gunner_right_top01")
    (vehicle_load_magic (object_at_marker d "turret_right_top01") none (ai_get_object "sq_unsc_sav_gunners/gunner_right_top01"))
    (ai_place "sq_unsc_sav_gunners/gunner_right_top02")
    (vehicle_load_magic (object_at_marker d "turret_right_top02") none (ai_get_object "sq_unsc_sav_gunners/gunner_right_top02"))
    (ai_place "sq_unsc_sav_gunners/gunner_right_top03")
    (vehicle_load_magic (object_at_marker d "turret_right_top03") none (ai_get_object "sq_unsc_sav_gunners/gunner_right_top03"))
    (ai_place "sq_unsc_sav_gunners/gunner_right_bottom01")
    (vehicle_load_magic (object_at_marker d "turret_right_bottom01") none (ai_get_object "sq_unsc_sav_gunners/gunner_right_bottom01"))
    (if debug
        (print "corvette savannah: loading left side gunners...")
    )
    (ai_place "sq_unsc_sav_gunners/gunner_left_top01")
    (vehicle_load_magic (object_at_marker d "turret_left_top01") none (ai_get_object "sq_unsc_sav_gunners/gunner_left_top01"))
    (ai_place "sq_unsc_sav_gunners/gunner_left_top02")
    (vehicle_load_magic (object_at_marker d "turret_left_top02") none (ai_get_object "sq_unsc_sav_gunners/gunner_left_top02"))
    (ai_place "sq_unsc_sav_gunners/gunner_left_top03")
    (vehicle_load_magic (object_at_marker d "turret_left_top03") none (ai_get_object "sq_unsc_sav_gunners/gunner_left_top03"))
    (ai_place "sq_unsc_sav_gunners/gunner_left_bottom01")
    (vehicle_load_magic (object_at_marker d "turret_left_bottom01") none (ai_get_object "sq_unsc_sav_gunners/gunner_left_bottom01"))
    (if debug
        (print "corvette savannah: loading rear gunners...")
    )
    (ai_place "sq_unsc_sav_gunners/gunner_rear_top01")
    (vehicle_load_magic (object_at_marker d "turret_rear_top01") none (ai_get_object "sq_unsc_sav_gunners/gunner_rear_top01"))
    (ai_place "sq_unsc_sav_gunners/gunner_rear_bottom01")
    (vehicle_load_magic (object_at_marker d "turret_rear_bottom01") none (ai_get_object "sq_unsc_sav_gunners/gunner_rear_bottom01"))
    (ai_set_clump "sq_unsc_sav_gunners" clump_savannah_aa)
    (ai_disregard (ai_actors "sq_unsc_sav_gunners") true)
)

(script command_script void cs_amb_savannah_guns_high
    (sleep_until 
        (begin
            (begin_random
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p0")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p1")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p2")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p3")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p4")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p5")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p6")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p7")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p8")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p9")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_high/p10")
                    (sleep (random_range 30 150))
                )
            )
            false
        )
        1
    )
)

(script command_script void cs_amb_savannah_guns_low
    (sleep_until 
        (begin
            (begin_random
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p0")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p1")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p2")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p3")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p4")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p5")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p6")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p7")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p8")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p9")
                    (sleep (random_range 30 150))
                )
                (begin
                    (cs_shoot_point true "ps_amb_sav_targets_low/p10")
                    (sleep (random_range 30 150))
                )
            )
            false
        )
        1
    )
)

(script static void com_savannah_chase
    (object_destroy_folder "dm_savannah")
    (object_create "dm_savannah_comms")
    (device_set_position_track "dm_savannah_comms" "m45_orbit_corvette" 0)
    (device_set_position_immediate "dm_savannah_comms" 0)
    (device_set_power "dm_savannah_comms" 1)
    (device_set_position "dm_savannah_comms" 1)
    (object_function_set 0 0.4)
)

(script static void hgr_savannah_chase
    (object_destroy_folder "dm_savannah")
    (object_create "dm_savannah_hangar")
    (device_set_position_track "dm_savannah_hangar" "m45_chase" 1)
    (device_set_power "dm_savannah_hangar" 1)
    (device_set_position "dm_savannah_hangar" 1)
)

(script static void grm_savannah_chase
    (object_destroy_folder "dm_savannah")
    (object_create "dm_savannah_gunroom")
    (device_set_position_track "dm_savannah_gunroom" "m45_chase" 1)
    (device_set_power "dm_savannah_gunroom" 1)
    (device_set_position "dm_savannah_gunroom" 1)
)

(script dormant void grm_savannah_moment
    (object_create_folder_anew "v_corvette_cannons")
    (sleep 1)
    (corvette_load_gunners_left)
    (object_destroy_folder "dm_savannah")
    (object_create "dm_savannah_gunroom")
    (sleep 1)
    (savannah_load_gunners "dm_savannah_gunroom")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_top01")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_top02")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_top03")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_bottom01")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_bottom02")
    (ai_erase "sq_unsc_sav_gunners/gunner_rear_bottom01")
    (ai_set_targeting_group "sq_unsc_sav_gunners" s_tg_ambient_battle false)
    (ai_set_clump "sq_unsc_sav_gunners" clump_sabres)
    (ai_set_team "sq_unsc_sav_gunners" spare)
    (if debug
        (print "corvette: left cannons aiming at the frigate..")
    )
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left0" cs_gunroom_gunner_left2)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left1" cs_gunroom_gunner_left1)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left2" cs_gunroom_gunner_left0)
    (ai_disregard (ai_actors "sq_cov_crv_cannon_gunners") true)
    (sleep_until (or (>= s_objcon_grm 30) (and (<= (ai_living_count "gr_cov_grm_hall") 0) (> (ai_spawn_count "gr_cov_grm_hall") 0))) 1)
    (sleep (random_range 30 60))
    (md_grm_savannah_goes_down)
    (wake grm_destroy_savannah)
    (sleep (random_range (* 30 10) (* 30 11)))
    (wake md_grm_hol_savannah_can_you_hear)
)

(script dormant void grm_destroy_savannah
    (wake grm_stagger_control)
    (if debug
        (print "swapping pristine frigate for destroyed...")
    )
    (object_destroy "dm_savannah_gunroom")
    (object_create "dm_savannah_destroyed")
    (if debug
        (print "putting destroyed frigate on m45_drift animation track...")
    )
    (device_set_position_track "dm_savannah_destroyed" "m45_drift" 0)
    (device_set_position_immediate "dm_savannah_destroyed" 0)
    (sleep 1)
    (device_animate_position "dm_savannah_destroyed" 1 s_fx_frigate_death_time 0.034 0.034 false)
    (set b_savannah_destroyed true)
    (wake grm_warp_seraphs_out)
    (sleep (* 30 s_fx_frigate_death_time))
    (object_destroy_folder "dm_savannah")
)

(script dormant void grm_warp_seraphs_out
    (sleep (random_range 120 240))
    (cs_run_command_script "sq_cov_amb_seraphs0" cs_grm_warpout)
)

(script command_script void cs_grm_warpout
    (cs_vehicle_speed 1)
    (begin_random_count
        1
        (begin
            (cs_fly_by "ps_grm_warpout/warpout0_0")
            (cs_fly_by "ps_grm_warpout/warpout0_1")
        )
        (begin
            (cs_fly_by "ps_grm_warpout/warpout1_0")
            (cs_fly_by "ps_grm_warpout/warpout1_1")
        )
        (begin
            (cs_fly_by "ps_grm_warpout/warpout2_0")
            (cs_fly_by "ps_grm_warpout/warpout2_1")
        )
    )
    (effect_new_on_object_marker fx_warp_flash (ai_vehicle_get ai_current_actor) "fx_warp")
    (object_set_velocity (ai_vehicle_get ai_current_actor) 1000)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 20)
    (sleep 20)
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void grm_kill_savannah_guns
    (begin_random
        (begin
            (ai_erase "sq_unsc_sav_gunners/gunner_right_top01")
            (sleep (random_range 15 35))
        )
        (begin
            (ai_erase "sq_unsc_sav_gunners/gunner_right_top02")
            (sleep (random_range 15 35))
        )
        (begin
            (ai_erase "sq_unsc_sav_gunners/gunner_right_top03")
            (sleep (random_range 15 35))
        )
        (begin
            (ai_erase "sq_unsc_sav_gunners/gunner_right_bottom01")
            (sleep (random_range 15 35))
        )
        (begin
            (ai_erase "sq_unsc_sav_gunners/gunner_right_bottom02")
            (sleep (random_range 15 35))
        )
        (begin
            (ai_erase "sq_unsc_sav_gunners/gunner_rear_top01")
            (sleep (random_range 15 35))
        )
    )
)

(script dormant void grm_stagger_control
    (sleep (* 30 11))
    (if (>= (ai_living_count "gr_unsc_pilots") 4)
        (thespian_performance_activate "thespian_grm_stagger_pilot3")
    )
    (if (>= (ai_living_count "gr_unsc_pilots") 3)
        (thespian_performance_activate "thespian_grm_stagger_pilot2")
    )
    (if (>= (ai_living_count "gr_unsc_pilots") 2)
        (thespian_performance_activate "thespian_grm_stagger_pilot1")
    )
    (if (>= (ai_living_count "gr_unsc_pilots") 1)
        (thespian_performance_activate "thespian_grm_stagger_pilot0")
    )
    (sleep 60)
    (set b_grm_terminals_alert true)
)

(script static void waf_savannah_dock
    (object_destroy "dm_savannah_wafer")
    (object_create "dm_savannah_wafer")
    (device_set_position_track "dm_savannah_wafer" "m45_dock" 0)
    (device_set_position_immediate "dm_savannah_wafer" 0)
    (device_animate_position "dm_savannah_wafer" 0.99 60 1 0 false)
)

(script static void crv_savannah_orbit
    (object_destroy "dm_savannah_corvette")
    (object_create "dm_savannah_corvette")
    (device_set_position_track "dm_savannah_corvette" "m45_orbit_corvette" 0)
    (device_set_position_immediate "dm_savannah_corvette" 0)
    (device_set_power "dm_savannah_corvette" 1)
)

(script dormant void crv_savannah_setup_and_start
    (crv_savannah_warp)
)

(script static void crv_savannah_warp
    (object_create_anew "dm_savannah_corvette")
    (object_function_set 0 0.8)
    (savannah_load_gunners "dm_savannah_corvette")
    (device_set_power "dm_savannah_corvette" 0)
    (device_set_position_track "dm_savannah_corvette" "m45_warp_in" 0)
    (device_set_position_immediate "dm_savannah_corvette" 0)
    (device_animate_position "dm_savannah_corvette" 0.99 25 0 3 false)
    (sleep (- (* 30 25) 12))
    (if debug
        (print "savannah: entering m45_orbit_corvette track...")
    )
    (object_destroy "dm_savannah_corvette")
    (object_create "dm_savannah_corvette")
    (savannah_load_gunners "dm_savannah_corvette")
    (device_set_position_immediate "dm_savannah_corvette" 0)
    (device_set_position_track "dm_savannah_corvette" "m45_orbit_corvette" 0)
    (device_set_power "dm_savannah_corvette" 1)
    (object_function_set 0 1)
    (if (< s_crv_engines_damaged 4)
        (wake md_crv_sav_clip_engines)
        (set b_crv_all_engines_damaged true)
    )
)

(script static void lnos_setup
    (object_create_anew "dm_lnos")
    (object_cinematic_visibility "dm_lnos" true)
    (device_set_position_track "dm_lnos" "m45_lnos_approach" 0)
)

(script static void lnos_setup_bridge
    (object_create_anew "dm_lnos")
    (object_cinematic_visibility "dm_lnos" true)
    (device_set_position_track "dm_lnos" "m45_lnos_approach" 0)
    (device_animate_position "dm_lnos" 0.65 0 0 0 false)
    (sleep 1)
)

(script static void lnos_arrive
    (sound_impulse_start "sound\levels\solo\m45\corvette_power_up.sound" none 1)
    (device_animate_position "dm_lnos" 1 (* 60 10) 1 3 false)
    (cam_shake 10 0.1 3 5)
)

(script static void lnos_arrive_fast
    (device_animate_position "dm_lnos" 1 10 1 3 false)
)

(script dormant void crv_debris_control
    (crv_spawn_moving_debris "sc_crv_debris_00" 10)
    (crv_spawn_moving_debris "sc_crv_debris_01" 10)
    (crv_spawn_moving_debris "sc_crv_debris_02" 10)
    (crv_spawn_moving_debris "sc_crv_debris_03" 10)
    (crv_spawn_moving_debris "sc_crv_debris_04" 10)
    (crv_spawn_moving_debris "sc_crv_debris_05" 10)
    (crv_spawn_moving_debris "sc_crv_debris_06" 10)
    (crv_spawn_moving_debris "sc_crv_debris_07" 10)
    (crv_spawn_moving_debris "sc_crv_debris_08" 10)
    (crv_spawn_moving_debris "sc_crv_debris_09" 10)
)

(script static void (crv_spawn_moving_debris (object_name debris, short frame))
    (object_create_anew debris)
    (object_cinematic_visibility debris true)
    (sleep (random_range s_crv_debris_spawn_delay_min s_crv_debris_spawn_delay_max))
)

(script static void (attach_and_animate (object_name to_attach, boolean cinematic_visibility, device_name marker, string_id track, real start_position, real end_position, real time))
    (object_create_anew marker)
    (object_cinematic_visibility marker true)
    (device_set_position_track marker track 0)
    (device_set_position_immediate marker start_position)
    (sleep 1)
    (object_create_anew to_attach)
    (objects_attach marker "" to_attach "")
    (device_animate_position marker end_position time 0 0 true)
)

(script static void bch_pod_test
    (drop_pod "dm_bch_pod_marker_start0" "sq_cov_bch_landing0/elite0")
    (drop_pod "dm_bch_pod_marker_start1" "sq_cov_bch_landing0/elite1")
)

(script dormant void crv_pod_drop_left_control
    (sleep_until 
        (begin
            (crv_launch_pods "dm_crv_pod_left_00" "m45_drop_a1" "dm_crv_pod_left_01" "m45_drop_a2" "dm_crv_pod_left_02" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_03" "m45_drop_a1" "dm_crv_pod_left_04" "m45_drop_a2" "dm_crv_pod_left_05" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_06" "m45_drop_a1" "dm_crv_pod_left_07" "m45_drop_a2" "dm_crv_pod_left_08" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_09" "m45_drop_a1" "dm_crv_pod_left_10" "m45_drop_a2" "dm_crv_pod_left_11" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_12" "m45_drop_a1" "dm_crv_pod_left_13" "m45_drop_a2" "dm_crv_pod_left_14" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_15" "m45_drop_a1" "dm_crv_pod_left_16" "m45_drop_a2" "dm_crv_pod_left_17" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_18" "m45_drop_a1" "dm_crv_pod_left_19" "m45_drop_a2" "dm_crv_pod_left_20" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_21" "m45_drop_a1" "dm_crv_pod_left_22" "m45_drop_a2" "dm_crv_pod_left_23" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_24" "m45_drop_a1" "dm_crv_pod_left_25" "m45_drop_a2" "dm_crv_pod_left_26" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_left_27" "m45_drop_a1" "dm_crv_pod_left_28" "m45_drop_a2" "dm_crv_pod_left_29" "m45_drop_a3")
            (sleep (* 30 10))
            b_brd_started
        )
        1
    )
)

(script dormant void crv_pod_drop_right_control
    (sleep_until 
        (begin
            (crv_launch_pods "dm_crv_pod_right_00" "m45_drop_a1" "dm_crv_pod_right_01" "m45_drop_a2" "dm_crv_pod_right_02" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_03" "m45_drop_a1" "dm_crv_pod_right_04" "m45_drop_a2" "dm_crv_pod_right_05" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_06" "m45_drop_a1" "dm_crv_pod_right_07" "m45_drop_a2" "dm_crv_pod_right_08" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_09" "m45_drop_a1" "dm_crv_pod_right_10" "m45_drop_a2" "dm_crv_pod_right_11" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_12" "m45_drop_a1" "dm_crv_pod_right_13" "m45_drop_a2" "dm_crv_pod_right_14" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_15" "m45_drop_a1" "dm_crv_pod_right_16" "m45_drop_a2" "dm_crv_pod_right_17" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_18" "m45_drop_a1" "dm_crv_pod_right_19" "m45_drop_a2" "dm_crv_pod_right_20" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_21" "m45_drop_a1" "dm_crv_pod_right_22" "m45_drop_a2" "dm_crv_pod_right_23" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_24" "m45_drop_a1" "dm_crv_pod_right_25" "m45_drop_a2" "dm_crv_pod_right_26" "m45_drop_a3")
            (sleep s_pod_drop_interval)
            (crv_launch_pods "dm_crv_pod_right_27" "m45_drop_a1" "dm_crv_pod_right_28" "m45_drop_a2" "dm_crv_pod_right_29" "m45_drop_a3")
            (sleep (* 30 10))
            b_brd_started
        )
        1
    )
)

(script static void (crv_launch_pods (device_name d1, string_id anim1, device_name d2, string_id anim2, device_name d3, string_id anim3))
    (object_create_anew d1)
    (object_create_anew d2)
    (object_create_anew d3)
    (device_set_position_track d1 anim1 0)
    (device_set_position_track d2 anim2 0)
    (device_set_position_track d3 anim3 0)
    (device_animate_position d1 0 0 0 0 false)
    (device_animate_position d2 0 0 0 0 false)
    (device_animate_position d3 0 0 0 0 false)
    (device_animate_position d1 1 10 0 0 false)
    (device_animate_position d2 1 10 0 0 false)
    (device_animate_position d3 1 10 0 0 false)
    (sleep (* 30 10))
    (if (<= (object_get_health d1) 0)
        (begin
            (if debug
                (print "submitting incident for pod")
            )
            (submit_incident_with_cause_player "m45_elite_pod" player0)
            (submit_incident_with_cause_player "m45_elite_pod" player1)
            (submit_incident_with_cause_player "m45_elite_pod" player2)
            (submit_incident_with_cause_player "m45_elite_pod" player3)
        )
    )
    (if (<= (object_get_health d2) 0)
        (begin
            (if debug
                (print "submitting incident for pod")
            )
            (submit_incident_with_cause_player "m45_elite_pod" player0)
            (submit_incident_with_cause_player "m45_elite_pod" player1)
            (submit_incident_with_cause_player "m45_elite_pod" player2)
            (submit_incident_with_cause_player "m45_elite_pod" player3)
        )
    )
    (if (<= (object_get_health d3) 0)
        (begin
            (if debug
                (print "submitting incident for pod")
            )
            (submit_incident_with_cause_player "m45_elite_pod" player0)
            (submit_incident_with_cause_player "m45_elite_pod" player1)
            (submit_incident_with_cause_player "m45_elite_pod" player2)
            (submit_incident_with_cause_player "m45_elite_pod" player3)
        )
    )
    (sleep 1)
    (object_destroy d1)
    (object_destroy d2)
    (object_destroy d3)
)

(script static void bch_test_jetpack_pods
    (wake bch_pod_drop_jetpack0)
    (sleep (random_range 10 15))
    (wake bch_pod_drop_jetpack1)
    (sleep (random_range 10 15))
    (wake bch_pod_drop_jetpack2)
)

(script dormant void bch_pod_drop_jetpack0
    (sleep 7)
    (drop_pod "dm_bch_pod_marker_jetpack0" "sq_cov_bch_rocks_jetpacks0/jetpack0")
)

(script dormant void bch_pod_drop_jetpack1
    (sleep (random_range 0 20))
    (drop_pod "dm_bch_pod_marker_jetpack1" "sq_cov_bch_rocks_jetpacks0/jetpack1")
)

(script dormant void bch_pod_drop_jetpack2
    (sleep 18)
    (sleep (random_range 0 20))
    (drop_pod "dm_bch_pod_marker_jetpack2" "sq_cov_bch_rocks_jetpacks0/jetpack2")
)

(script dormant void bch_pod_drop_counter0
    (sleep (random_range 120 180))
    (drop_pod "dm_bch_pod_marker_counter0" "sq_cov_bch_counter_elites0/elite0")
)

(script static void power_down_corvette
    (if debug
        (print "corvette gets rocked...")
    )
    (sound_impulse_start "sound\levels\120_halo\trench_run\island_creak.sound" none 1)
    (sound_class_set_gain "amb" 0 90)
    (cam_shake 0.2 1 2 3)
    (if debug
        (print "corvette powers back up")
    )
    (sound_class_set_gain "amb" 1 90)
)

(script dormant void bch_seraph_crash_control
    (sleep_until (>= s_objcon_bch 60))
    (ai_place "sq_cov_bch_seraphs/crash0")
    (object_create_anew "dm_bch_seraph_crash")
    (device_set_position_track "dm_bch_seraph_crash" "e3_seraph_crash0" 1)
    (sleep 2)
    (objects_attach "dm_bch_seraph_crash" "" (ai_vehicle_get "sq_cov_bch_seraphs/crash0") "")
    (device_set_power "dm_bch_seraph_crash" 1)
    (device_set_position "dm_bch_seraph_crash" 1)
    (device_animate_position "dm_bch_seraph_crash" 1 6 0 0 true)
    (sleep_until (>= (device_get_position "dm_bch_seraph_crash") 1) 1)
    (objects_detach "dm_bch_seraph_crash" (ai_vehicle_get_from_starting_location "sq_cov_bch_seraphs/crash0"))
    (ai_erase "sq_cov_bch_seraphs/crash0")
    (object_destroy (ai_vehicle_get_from_starting_location "sq_cov_bch_seraphs/crash0"))
    (effect_new_on_object_marker "objects\levels\solo\m45\wall_panel\fx\wall_panel_destroyed.effect" "sc_wall_panel" "")
    (object_set_permutation "sc_wall_panel" "default" "destroyed")
    (object_create_folder "seraph_impact")
    (object_destroy "dm_bch_seraph_crash")
    (damage_object "sc_wall_panel" "" 1000)
    (cam_shake 0.2 1 1 3)
    (sleep 300)
    (object_destroy "sc_wall_panel")
)

(script dormant void amb_corvette_battle
    (branch (= b_hgr_switch_flipped true) (branch_abort))
    (ai_place "sq_cov_amb_seraphs0")
    (sleep 1)
    (ai_set_targeting_group "sq_cov_amb_seraphs0" s_tg_ambient_battle true)
    (ai_set_clump "sq_cov_amb_seraphs0" clump_seraphs)
    (sleep 60)
    (sleep_until 
        (begin
            (sleep_until (not b_ambient_battle_paused))
            (sleep_until (or (<= (ai_living_count "gr_unsc_amb") 0) (<= (ai_living_count "gr_cov_amb") 0)))
            (sleep (random_range 90 210))
            (if debug
                (print "ambient space battle: squad defeated... spawning reinforcements...")
            )
            (if (<= (ai_living_count "gr_unsc_amb") 0)
                (begin
                    (ai_place "sq_unsc_amb_sabres0")
                    (sleep 1)
                    (ai_set_targeting_group "sq_unsc_amb_sabres0" s_tg_ambient_battle false)
                    (ai_set_clump "sq_unsc_amb_sabres0" clump_sabres)
                )
                (begin
                    (ai_place "sq_cov_amb_seraphs0")
                    (sleep 1)
                    (ai_set_targeting_group "sq_cov_amb_seraphs0" s_tg_ambient_battle false)
                    (ai_set_clump "sq_cov_amb_seraphs0" clump_seraphs)
                )
            )
            (ai_magically_see "sq_unsc_amb_sabres0" "sq_cov_amb_seraphs0")
            (ai_magically_see "sq_cov_amb_seraphs0" "sq_unsc_amb_sabres0")
            (ai_magically_see "sq_unsc_sav_gunners" "sq_cov_amb_seraphs0")
            (or b_hgr_switch_flipped b_grm_started b_brg_started b_esc_started b_fin_started)
        )
        1
    )
)

(script dormant void amb_gunroom_battle
    (branch (= b_savannah_destroyed true) (branch_abort))
    (ai_place "sq_cov_amb_seraphs0")
    (sleep 1)
    (ai_set_targeting_group "sq_cov_amb_seraphs0" s_tg_ambient_battle true)
    (ai_set_clump "sq_cov_amb_seraphs0" clump_seraphs)
    (sleep_until 
        (begin
            (sleep_until (<= (ai_living_count "gr_cov_amb") 0))
            (sleep (random_range 90 210))
            (ai_place "sq_cov_amb_seraphs0")
            (sleep 1)
            (ai_set_targeting_group "sq_cov_amb_seraphs0" s_tg_ambient_battle false)
            (ai_set_clump "sq_cov_amb_seraphs0" clump_seraphs)
            (ai_magically_see "sq_unsc_amb_sabres0" "sq_cov_amb_seraphs0")
            (ai_magically_see "sq_cov_amb_seraphs0" "sq_unsc_amb_sabres0")
            (ai_magically_see "sq_unsc_sav_gunners" "sq_cov_amb_seraphs0")
            b_savannah_destroyed
        )
        1
    )
)

(script static void (new_mission_objective (string_id screen, string_id start_menu))
    (chud_show_screen_objective "")
    (sound_impulse_start "sound\game_sfx\fireteam\issue_directive.sound" none 1)
    (f_hud_obj_new screen start_menu)
)

(script static void clear_mission_objectives
    (if debug
        (print "objectives: clearing objectives out of the start menu tray...")
    )
    (objectives_clear)
)

(script static void (show_tutorial (cutscene_title t))
    (sound_impulse_start "sound\game_sfx\fireteam\issue_directive.sound" none 1)
    (cinematic_set_title "ct_tutorial_footer")
    (cinematic_set_title t)
    (sleep (* 30 10))
)

(script static void show_fighter_warning
    (sound_impulse_start "sound\game_sfx\fireteam\issue_directive.sound" none 1)
    (chud_set_static_hs_variable player0 1 1)
    (chud_set_static_hs_variable player1 1 1)
    (chud_set_static_hs_variable player2 1 1)
    (chud_set_static_hs_variable player3 1 1)
)

(script static void clear_fighter_warning
    (sound_impulse_start "sound\game_sfx\fireteam\issue_directive.sound" none 1)
    (chud_clear_hs_variable player0 1)
    (chud_clear_hs_variable player1 1)
    (chud_clear_hs_variable player2 1)
    (chud_clear_hs_variable player3 1)
)

(script static void (show_update (cutscene_title t))
    (sound_impulse_start "sound\game_sfx\fireteam\issue_directive.sound" none 1)
    (cinematic_set_chud_objective t)
)

(script dormant void show_objective_beach
    (new_mission_objective "ct_obj_beach" "primary_objective_1")
)

(script dormant void show_objective_flight_control
    (new_mission_objective "ct_obj_command" "primary_objective_2")
)

(script dormant void show_objective_launch
    (new_mission_objective "ct_obj_launch" "primary_objective_4")
)

(script dormant void show_objective_corvette_escort
    (new_mission_objective "ct_obj_corvette" "primary_objective_9")
)

(script dormant void show_objective_comms_seize
    (new_mission_objective "ct_obj_comms_kill" "primary_objective_13")
)

(script dormant void show_objective_rescue_jorge
    (new_mission_objective "objective_crv_escape" "primary_objective_16")
)

(script dormant void show_objective_bioscanner
    (new_mission_objective "ct_obj_command_scanner" "primary_objective_3")
)

(script dormant void show_objective_wafer_defense
    (new_mission_objective "ct_obj_wafer_defend" "primary_objective_6")
)

(script dormant void show_objective_wafer_guns_online
    (new_mission_objective "ct_obj_wafer_online" "primary_objective_7")
)

(script dormant void show_objective_wafer_dock
    (new_mission_objective "ct_obj_wafer_dock" "primary_objective_8")
)

(script dormant void show_objective_corvette_entrance
    (new_mission_objective "ct_obj_corvette_hole" "primary_objective_11")
)

(script dormant void show_objective_corvette_landing
    (new_mission_objective "ct_obj_boarding" "primary_objective_12")
)

(script dormant void show_objective_go_to_hangar
    (new_mission_objective "objective_crv_hangar" "primary_objective_14")
)

(script dormant void show_objective_sieze_bridge
    (new_mission_objective "objective_crv_brg" "primary_objective_15")
)

(script dormant void show_objective_defend_bomb
    (new_mission_objective "objective_crv_final" "primary_objective_16")
)

(script dormant void show_objective_engage_refuel
    (new_mission_objective "objective_crv_brg_refuel" "primary_objective_15")
)

(script dormant void show_objective_corvette_engines
    (new_mission_objective "objective_crv_engines" "primary_objective_10")
)

(script dormant void show_chapter_title_beach
    (f_hud_chapter "ct_beach")
)

(script dormant void show_chapter_title_wafer
    (f_hud_chapter "ct_wafer")
)

(script dormant void show_chapter_title_corvette
    (begin_random_count
        1
        (f_hud_chapter "ct_corvette")
        (f_hud_chapter "ct_corvette_alt")
    )
)

(script static void (start_sabre_tutorial (player player_variable))
    (branch (= b_saber_tutorial_complete true) (cancel_sabre_tutorial))
    (f_tutorial_turn player_variable "ct_tutorial_turning")
    (sleep s_sabre_tutorial_delay)
    (f_tutorial_throttle player_variable "ct_tutorial_throttle")
    (sleep s_sabre_tutorial_delay)
    (f_tutorial_boost player_variable "ct_tutorial_boost")
    (md_sabre_boost player_variable)
    (sleep s_sabre_tutorial_delay)
    (f_tutorial_fire_weapon player_variable "ct_tutorial_weapon")
    (sleep s_sabre_tutorial_delay)
    (f_tutorial_rotate_weapons player_variable "ct_tutorial_toggle")
    (md_sabre_weapons_toggle player_variable)
    (sleep s_sabre_tutorial_delay)
    (f_tutorial_tricks player_variable "ct_tutorial_tricks")
    (if debug
        (print "tutorial: player has completed flight training!")
    )
    (set s_players_finished_tutorial (+ s_players_finished_tutorial 1))
)

(script static void cancel_sabre_tutorial
    (if debug
        (print "tutorial: canceling or finishing sabre tutorial for a player...")
    )
)

(script dormant void sabre_tutorial
    (wake player3_sabre_tutorial)
    (wake player2_sabre_tutorial)
    (wake player1_sabre_tutorial)
    (wake player0_sabre_tutorial)
    (sleep_until (>= s_players_finished_tutorial (game_coop_player_count)) 1 (* 30 60))
    (sleep 30)
    (f_hud_training_clear player0)
    (f_hud_training_clear player1)
    (f_hud_training_clear player2)
    (f_hud_training_clear player3)
    (md_sabre_tutorial_end)
    (set b_saber_tutorial_complete true)
)

(script dormant void player0_sabre_tutorial
    (if debug
        (print "tutorial: starting player 1 sabre training...")
    )
    (start_sabre_tutorial player0)
)

(script dormant void player1_sabre_tutorial
    (if debug
        (print "tutorial: starting player 2 sabre training...")
    )
    (start_sabre_tutorial player1)
)

(script dormant void player2_sabre_tutorial
    (if debug
        (print "tutorial: starting player 3 sabre training...")
    )
    (start_sabre_tutorial player2)
)

(script dormant void player3_sabre_tutorial
    (if debug
        (print "tutorial: starting player 4 sabre training...")
    )
    (start_sabre_tutorial player3)
)

(script static void (md_play_on_player (short player_short, sound line))
    (sound_impulse_start line (player_get player_short) 1)
    (sleep (sound_impulse_language_time line))
)

(script static void (md_sabre_boost (player player_variable))
    (md_print "sabre flight computer: forward thrusters online.")
    (md_object_play 0 player_variable m45_0780_sab)
)

(script static void (md_sabre_rear_thruster (player player_variable))
    (md_print "sabre flight computer: rear thrusters online.")
    (md_object_play 0 player_variable m45_0790_sab)
)

(script static void (md_sabre_weapons_toggle (player player_variable))
    (md_print "sabre flight computer: dual weapons systems online.")
    (md_object_play 0 player_variable m45_0810_sab)
)

(script static void (md_sabre_aux (player player_variable))
    (md_print "sabre flight computer: auxilliary boosters online.")
    (md_object_play 0 player_variable m45_0800_sab)
)

(script static void md_sabre_tutorial_start
    (md_start)
    (md_print "holland: noble six, these sabres have been customized for orbital defense. you may need to get reacquainted.")
    (md_print "holland: rendezvous at anchor 9 with frigate savannah and the other sabres as soon as you're ready. holland out.")
    (md_object_play 0 none m45_0770)
    (md_stop)
    (if debug
        (print "mus_05 starting")
    )
    (mus_start mus_05)
)

(script static void md_sabre_tutorial_end
    (md_start)
    (md_print "jorge: okay, lieutenant. playtime's over. let's get this show on the road.")
    (md_object_play 0 none m45_0820)
    (md_stop)
)

(script static void md_sabre_tutorial_end_2
    (md_print "jorge: come on, spartan. we need to rendezvous with the savannah.")
    (md_object_play 0 none m45_0830)
)

(script dormant void show_tutorial_seraph_shields
    (sleep (* 5 30))
    (wake md_hol_guns_on_shields)
    (f_hud_training_forever player0 "ct_tutorial_seraph_shields")
    (f_hud_training_forever player0 "ct_tutorial_seraph_shields")
    (f_hud_training_forever player0 "ct_tutorial_seraph_shields")
    (f_hud_training_forever player0 "ct_tutorial_seraph_shields")
    (sleep (* 4 30))
    (f_hud_training_clear player0)
    (f_hud_training_clear player1)
    (f_hud_training_clear player2)
    (f_hud_training_clear player3)
    (sleep (* 1 30))
    (f_hud_training_forever player0 "ct_tutorial_seraph_hull")
    (f_hud_training_forever player0 "ct_tutorial_seraph_hull")
    (f_hud_training_forever player0 "ct_tutorial_seraph_hull")
    (f_hud_training_forever player0 "ct_tutorial_seraph_hull")
    (sleep (* 4 30))
    (f_hud_training_clear player0)
    (f_hud_training_clear player1)
    (f_hud_training_clear player2)
    (f_hud_training_clear player3)
    (sleep (* 1 30))
)

(script static void (cam_shake (real attack, real intensity, short duration, real decay))
    (player_effect_set_max_rotation 3 3 3)
    (player_effect_start intensity attack)
    (sleep duration)
    (player_effect_stop decay)
)

(script static void trigger_bombing
    (sound_impulse_start "sound\levels\solo\m45\base_scripted_expl2.sound" none 1)
    (sleep 10)
    (cam_shake 1 0.28 50 0.45)
    (interpolator_start "base_bombing")
)

(script dormant void fac_trigger_bombing_00
    (sleep (random_range 15 45))
    (trigger_bombing)
)

(script dormant void fac_trigger_bombing_01
    (sleep (random_range 15 45))
    (trigger_bombing)
)

(script static void trigger_bombing_heavy
    (sound_impulse_start "sound\levels\solo\m45\base_scripted_expl1.sound" none 1)
    (sleep 10)
    (cam_shake 1 0.5 50 0.45)
    (interpolator_start "base_bombing")
)

(script static void (seraph_bombingrun_loop (device_name marker, object_name bomber))
    (sleep_until 
        (begin
            (seraph_bombingrun_start marker bomber)
            (sleep_until (>= (device_get_position marker) 1) 1)
            (object_destroy bomber)
            (sleep (random_range 0 10))
            false
        )
        1
    )
)

(script static void (seraph_bombingrun_single (device_name marker, object_name bomber))
    (seraph_bombingrun_start marker bomber)
    (sleep_until (>= (device_get_position marker) 1) 1)
    (object_destroy bomber)
    (sleep (random_range 0 10))
)

(script static void (seraph_bombingrun_start (device_name marker, object_name bomber))
    (object_create_anew marker)
    (device_set_position_track marker "e3_seraph_flyover0" 0)
    (device_set_position_immediate marker 0)
    (sleep 1)
    (object_create bomber)
    (sleep 1)
    (objects_attach marker "" bomber "")
    (device_animate_position marker 1 s_lnc_seraph_bombingrun_time 0 0 true)
)

(script dormant void lnc_bombingrun_00
    (seraph_bombingrun_single "dm_marker_bombingrun_00" "v_seraph_bomber_00")
)

(script dormant void lnc_bombingrun_01
    (seraph_bombingrun_single "dm_marker_bombingrun_01" "v_seraph_bomber_01")
)

(script dormant void lnc_bombingrun_02
    (seraph_bombingrun_single "dm_marker_bombingrun_02" "v_seraph_bomber_02")
)

(script dormant void lnc_bombingrun_03
    (seraph_bombingrun_single "dm_marker_bombingrun_03" "v_seraph_bomber_03")
)

(script static void start_lnc_bombingrun
    (if debug
        (print "starting launch facility bombing run")
    )
    (wake lnc_bombingrun_00)
    (sleep (random_range s_lnc_bombingrun_delay_min s_lnc_bombingrun_delay_max))
    (wake lnc_bombingrun_01)
    (sleep (random_range s_lnc_bombingrun_delay_min s_lnc_bombingrun_delay_max))
    (wake lnc_bombingrun_02)
    (sleep (random_range s_lnc_bombingrun_delay_min s_lnc_bombingrun_delay_max))
    (wake lnc_bombingrun_03)
    (sleep (random_range s_lnc_bombingrun_delay_min s_lnc_bombingrun_delay_max))
    (sleep (* 30 9))
    (lnc_setup_aa)
    (lnc_seraphs_loop)
)

(script static void lnc_bombingrun_kill
    (sleep_forever lnc_bombingrun_00)
    (sleep_forever lnc_bombingrun_01)
    (sleep_forever lnc_bombingrun_02)
    (sleep_forever lnc_bombingrun_03)
    (object_destroy_folder "v_lnc_seraphs")
    (object_destroy_folder "dm_lnc_bombingrun")
)

(script static void (setup_hangar_pelican (short enc))
    (object_create "sc_hgr_pelican")
    (scenery_animation_start_at_frame "sc_hgr_pelican" "objects\vehicles\human\pelican\pelican.model_animation_graph" "vehicle:fully_opened" 100)
    (object_create "sc_hgr_slipspace")
    (object_create "sc_hgr_equipmentcase0")
    (object_create "sc_hgr_equipmentcase1")
    (object_create_folder "cr_hgr_pelican")
    (object_create "sc_hgr_pelican_left_leg0")
    (object_create "sc_hgr_pelican_left_leg1")
    (object_create "sc_hgr_pelican_right_leg0")
    (object_create "sc_hgr_pelican_right_leg1")
    (object_create_folder "hp_hgr")
    (object_create_folder "wp_grm")
    (object_create "dm_grm_weapons0")
    (object_create "dm_grm_weapons1")
    (object_create_folder "eq_grm")
    (if (= enc 0)
        (begin
            (if debug
                (print "gunroom weapons")
            )
            (object_destroy "dm_fin_weapons0")
            (object_destroy "dm_fin_weapons1")
            (object_destroy "dm_fin_weapons2")
            (object_create "dm_grm_weapons_closed0")
            (object_create "dm_grm_weapons_closed1")
            (object_create "dm_grm_weapons_closed2")
        )
        (begin
            (if debug
                (print "final")
            )
            (object_destroy "dm_grm_weapons_closed0")
            (object_destroy "dm_grm_weapons_closed1")
            (object_destroy "dm_grm_weapons_closed2")
            (object_create "dm_fin_weapons0")
            (object_create "dm_fin_weapons1")
            (object_create "dm_fin_weapons2")
            (object_create "wp_fin_plasmalauncher0")
            (if (difficulty_is_heroic_or_higher)
                (begin
                    (if debug
                        (print "spawning dmrs")
                    )
                    (object_create "wp_fin_dmr0_heroic")
                    (object_create "wp_fin_dmr1_heroic")
                )
                (begin
                    (if debug
                        (print "spawning rocket launcher")
                    )
                    (object_create "wp_fin_rocketlauncher0")
                )
            )
        )
    )
)

(script dormant void lnc_light_control
    (sleep_until (> (device_get_position "dm_slo_shutter") 0.5) 1)
    (lnc_lights_on)
)

(script static void lnc_lights_on
    (object_destroy_folder "sc_lnc_lights")
    (sleep 1)
    (if debug
        (print "::: low lights on :::")
    )
    (object_create "sc_slo_lights_low")
    (sound_impulse_start sfx_light "ss_flood_light_low_left" 1)
    (sound_impulse_start sfx_light "ss_flood_light_low_right" 1)
    (sound_impulse_start sfx_light_quad "ss_flood_light_low_left" 1)
    (sound_impulse_start sfx_light_quad "ss_flood_light_low_right" 1)
    (sleep 45)
    (if debug
        (print "::: mid lights on :::")
    )
    (object_create "sc_slo_lights_mid")
    (sound_impulse_start sfx_light "ss_flood_light_mid_left" 1)
    (sound_impulse_start sfx_light "ss_flood_light_mid_right" 1)
    (sound_impulse_start sfx_light_quad "ss_flood_light_mid_left" 1)
    (sound_impulse_start sfx_light_quad "ss_flood_light_mid_right" 1)
    (sleep 55)
    (if debug
        (print "::: high lights on :::")
    )
    (object_create "launch_facility_light")
    (sound_impulse_start sfx_light "ss_flood_light_top_left" 1)
    (sound_impulse_start sfx_light "ss_flood_light_top_right" 1)
    (sound_impulse_start sfx_light_quad "ss_flood_light_top_left" 1)
    (sound_impulse_start sfx_light_quad "ss_flood_light_top_right" 1)
)

(script static void (bch_skybox_pod_drop (device_name d))
    (object_create_anew d)
    (object_cinematic_visibility d true)
    (device_set_position_track d "m45_skybox_drop_600wu" 0)
    (device_animate_position d 1 6 2 0 false)
)

(script static void bch_skybox_pod_trail
    (bch_skybox_pod_drop "dm_skybox_pod_00")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_01")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_02")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_03")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_04")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_05")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_06")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_07")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_08")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_09")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_10")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_11")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_12")
    (bch_skybox_pod_delay)
    (bch_skybox_pod_drop "dm_skybox_pod_13")
)

(script static void bch_skybox_pod_delay
    (sleep (random_range 5 10))
)

(script static boolean obj_ccove__0_28
    (> (ai_task_count "obj_cov_bch/cove_infantry_jackals_combat") 0)
)

(script static boolean obj_ccove__0_30
    (> (ai_task_count "obj_cov_bch/gate_cov_grunts") 0)
)

(script static boolean obj_ugate__1_9
    (>= s_objcon_bch 25)
)

(script static boolean obj_ugate__1_11
    (>= s_objcon_bch 80)
)

(script static boolean obj_ulandi_1_13
    (<= (ai_task_count "obj_cov_bch/gate_landing") 1)
)

(script static boolean obj_ulandi_1_14
    (<= (ai_task_count "obj_cov_bch/gate_landing") 0)
)

(script static boolean obj_urocks_1_18
    (or (<= (ai_task_count "obj_cov_bch/gate_rocks_infantry_forward") 0) (> s_objcon_bch 50))
)

(script static boolean obj_urocks_1_19
    (and (= b_bch_rocks_pods_complete true) (<= (ai_living_count "sq_cov_bch_rocks_pods") 0))
)

(script static boolean obj_urocks_1_20
    (<= (ai_task_count "obj_cov_bch/gate_rocks") 0)
)

(script static boolean obj_ubeach_1_22
    (= b_bch_completed true)
)

(script static boolean obj_uspart_1_24
    (= b_bch_counterattack_started true)
)

(script static boolean obj_uspart_1_25
    (and (<= (ai_strength "gr_cov_bch_cove") 0.75) (>= s_objcon_bch 100))
)

(script static boolean obj_uspart_1_26
    (and (<= (ai_strength "gr_cov_bch_cove") 0.75) (<= (ai_task_count "obj_cov_bch/gate_cove_forward") 0))
)

(script static boolean obj_ulead__3_4
    (>= s_objcon_fac 10)
)

(script static boolean obj_ulead__3_5
    (>= s_objcon_fac 80)
)

(script static boolean obj_uspart_3_8
    (>= s_objcon_fac 20)
)

(script static boolean obj_uspart_3_9
    (>= s_objcon_fac 80)
)

(script static boolean obj_uspart_3_11
    (>= s_objcon_fac 140)
)

(script static boolean obj_urocke_3_14
    (and b_fac_deadman_jorge_waiting b_fac_deadman_kat_waiting b_fac_deadman_carter_waiting)
)

(script static boolean obj_cchase_6_3
    (<= (ai_task_count "obj_cov_waf/gate_main") 3)
)

(script static boolean obj_cgrunt_10_9
    (> (ai_living_count "sq_cov_brg_captain") 0)
)

(script static boolean obj_uadvan_11_2
    (and (<= (ai_task_count "obj_cov_brg/gate_main") 1) (>= s_objcon_brg 20))
)

(script static boolean obj_uattac_11_3
    (>= s_objcon_brg 10)
)

(script static boolean obj_usteal_11_4
    (>= s_objcon_brg 10)
)

(script static boolean obj_ugate__11_5
    (< (ai_combat_status "gr_cov_brg") 3)
)

(script static boolean obj_udefea_11_6
    (and (>= s_objcon_brg 10) (<= (ai_task_count "obj_cov_brg/gate_main") 0))
)

(script static boolean obj_cback_12_5
    (= b_fin_wave_fallback true)
)

(script static boolean obj_cflak__12_17
    (<= (ai_living_count "gr_cov_fin") 3)
)

(script static boolean obj_cgate__12_20
    (<= s_fin_wave 0)
)

(script static boolean obj_cgate__12_23
    (<= s_fin_wave 1)
)

(script static boolean obj_cgate__12_26
    (<= s_fin_wave 2)
)

(script static boolean obj_cgate__12_28
    (<= s_fin_wave 3)
)

(script static boolean obj_ujorge_13_5
    (= b_fin_firefight_started true)
)

(script static boolean obj_ujorge_13_6
    (= b_fin_jorge_follow true)
)

(script static boolean obj_cfallb_14_2
    (<= (ai_task_count "obj_cov_com/gate_main") 3)
)

(script static boolean obj_cgate__14_3
    (< s_objcon_com 20)
)

(script static boolean obj_celite_14_6
    (>= s_objcon_com 30)
)

(script static boolean obj_uhold__15_3
    (>= s_objcon_com 20)
)

(script static boolean obj_ucompl_15_4
    (= b_com_completed true)
)

(script static boolean obj_udown_15_5
    (<= (ai_living_count "gr_cov_com_top") 0)
)

(script static boolean obj_cfollo_16_15
    (volume_test_players "tv_hgr_platform_rear")
)

(script static boolean obj_cgate__16_16
    (= b_hgr_cov_follow true)
)

(script static boolean obj_cgate__16_23
    (<= (ai_task_count "obj_cov_hgr/gate_grunts") 3)
)

(script static boolean obj_chall__17_5
    (>= (ai_task_count "obj_cov_grm/gate_hall") 2)
)

(script static boolean obj_ubreac_18_2
    (<= (ai_living_count "sq_cov_grm_hall_breachers0") 0)
)

(script static boolean obj_uwait__18_3
    (and (>= s_objcon_grm 20) (<= (ai_living_count "gr_cov_grm_hall") 0))
)

(script static boolean obj_ugunro_18_4
    (and (>= s_objcon_grm 60) (<= (ai_task_count "obj_cov_grm/gate_main") 0) (= b_grm_hol_finishes_dialogue true))
)

(script static boolean obj_uadvan_18_5
    (and (<= (ai_living_count "sq_cov_grm_hall_breachers0") 0) (<= (ai_task_count "obj_cov_grm/hall_elites_bunker") 0))
)

(script static boolean obj_uassau_18_6
    (>= s_objcon_grm 60)
)

(script static boolean obj_ugate__18_8
    (= b_grm_doors_open true)
)

(script static boolean obj_ugunro_18_10
    (and (>= s_objcon_grm 60) (<= (ai_task_count "obj_cov_grm/gate_main") 0))
)

(script static boolean obj_uhanga_21_1
    (>= s_objcon_hgr 30)
)

(script static boolean obj_uentra_21_3
    (not (f_ai_is_defeated "sq_cov_hgr_breachers0"))
)

(script static boolean obj_uhall__21_4
    (and (> (ai_spawn_count "sq_cov_hgr_breachers0") 0) (<= (ai_living_count "sq_cov_hgr_breachers0") 2))
)

(script static boolean obj_uhanga_21_5
    (and (>= s_objcon_hgr 30) (<= (ai_living_count "gr_cov_hgr") 0))
)

(script static boolean obj_uhanga_21_6
    (and (<= (ai_task_count "obj_cov_hgr/gate_main") 1) (>= (ai_living_count "gr_cov_hgr_snipers") 1))
)

(script static boolean obj_ufollo_23_1
    (>= s_objcon_esc 30)
)

(script static boolean obj_ubreac_23_3
    (<= (ai_task_count "obj_cov_esc/breach_forward") 0)
)

(script static boolean obj_uesc_d_23_4
    (and (>= s_objcon_esc 30) (<= (ai_task_count "obj_cov_esc/gate_main") 0))
)

(script static boolean obj_ubeach_25_1
    (> (ai_task_count "obj_unsc_bch_post/gate_dock") 0)
)

(script static boolean obj_ubeach_25_2
    (> (ai_task_count "obj_unsc_bch_post/gate_dock") 0)
)

(script static boolean obj_ugate__25_3
    (<= (ai_task_count "obj_unsc_bch_post/gate_main") 3)
)

(script static boolean obj_udock__25_6
    (>= (ai_task_count "obj_unsc_bch_post/gate_dock") 3)
)

(script static boolean obj_cbeach_26_2
    (= b_bch_post_pelican_enroute true)
)

(script static boolean obj_cdock__26_3
    (= b_bch_post_pelican_enroute true)
)

(script static void ins_beach
    (if debug
        (print "insertion: beach")
    )
    (set s_insertion_index s_bch_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_landing_001_005")
    (sleep 1)
    (teleport_players "fl_beach_player0" "fl_beach_player1" "fl_beach_player2" "fl_beach_player3")
)

(script static void ins_facility
    (if debug
        (print "insertion: facility")
    )
    (set s_insertion_index s_fac_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_facility_001_005_010")
    (sleep 1)
    (set s_objcon_bch 100)
    (print "teleporting players...")
    (object_teleport (player0) "fl_command_player0")
    (object_teleport (player1) "fl_command_player1")
    (object_teleport (player2) "fl_command_player2")
    (object_teleport (player3) "fl_command_player3")
    (sleep 1)
    (ai_erase "gr_unsc_spartans")
    (sleep 1)
    (ai_place "sq_carter/fac")
    (ai_place "sq_jorge/fac")
    (ai_place "sq_kat/fac")
    (sleep 1)
    (set ai_carter "sq_carter")
    (set ai_jorge "sq_jorge")
    (set ai_kat "sq_kat")
    (game_save)
)

(script static void ins_launch
    (if debug
        (print "insertion: launch")
    )
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_silo_005_010_015")
    (sleep 1)
    (set s_objcon_bch 100)
    (set s_objcon_fac 100)
    (print "teleporting players...")
    (object_teleport (player0) "fl_launch_player0")
    (object_teleport (player1) "fl_launch_player1")
    (object_teleport (player2) "fl_launch_player2")
    (object_teleport (player3) "fl_launch_player3")
    (sleep 1)
    (sleep 10)
    (lnc_spartan_spawn)
    (set s_insertion_index s_lnc_encounter_index)
)

(script static void ins_wafer
    (if debug
        (print "insertion: wafer")
    )
    (soft_ceiling_enable "beach_blocker_01" false)
    (set s_insertion_index s_waf_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_wafercombat_030")
    (sleep 1)
    (print "teleporting players...")
    (nuke_planet)
)

(script static void ins_warp
    (if debug
        (print "insertion: warp from wafer to corvette")
    )
    (set s_insertion_index s_wrp_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_wafercombat_030")
    (sleep 1)
    (create_player_sabres "v_warp_sabre_player0" "v_warp_sabre_player1" "v_warp_sabre_player2" "v_warp_sabre_player3")
    (load_player_sabres "v_warp_sabre_player0" "v_warp_sabre_player1" "v_warp_sabre_player2" "v_warp_sabre_player3")
    (object_create "dm_savannah_wafer")
    (nuke_planet)
)

(script static void ins_corvette
    (if debug
        (print "insertion: corvette assault")
    )
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_corvettecombat_050_070")
    (sleep 1)
    (nuke_planet)
    (set s_insertion_index s_crv_encounter_index)
)

(script static void ins_trailer
    (if debug
        (print "insertion: corvette assault")
    )
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_corvettecombat_050_070")
    (sleep 1)
    (nuke_planet)
    (wake trailer)
)

(script dormant void trailer
    (fade_in 0 0 0 0)
    (if debug
        (print "spooling up the ambient scene...")
    )
    (object_create_folder "sc_crv")
    (object_create_folder "dm_crv_engines")
    (ai_lod_full_detail_actors 42)
    (lnos_setup)
    (setup_corvette_cannons)
    (sleep_forever corvette_cannon_control)
    (wake trailer_corvette_cannon_control)
    (wake crv_pod_drop_left_control)
    (wake crv_pod_drop_right_control)
    (object_create "sc_crv_shutters")
    (object_cinematic_visibility "sc_crv_shutters" true)
    (sleep 30)
    (ai_disregard (ai_actors "sq_cov_crv_cannon_gunners") true)
    (wake trailer_savannah_control)
    (wake trailer_seraph_control)
    (wake trailer_banshee_control)
    (trailer_fly)
)

(script static void trailer_fly
    (if debug
        (print "new wafer sabre to test...")
    )
    (object_create_anew "v_trailer_sabre")
    (vehicle_load_magic "v_trailer_sabre" 23 (player0))
)

(script dormant void trailer_savannah_control
    (sleep_until 
        (begin
            (ai_erase "sq_unsc_sav_gunners")
            (object_destroy "dm_savannah_corvette")
            (object_create "dm_savannah_corvette")
            (sleep 1)
            (device_set_position_track "dm_savannah_corvette" "m45_orbit_corvette" 0)
            (device_set_position_immediate "dm_savannah_corvette" 0)
            (device_set_position_transition_time "dm_savannah_corvette" 0.5)
            (device_set_power "dm_savannah_corvette" 1)
            (savannah_load_gunners "dm_savannah_corvette")
            (sleep_until (> (device_get_position "dm_savannah_corvette") 0.26))
            false
        )
        1
    )
)

(script dormant void trailer_seraph_control
    (sleep_until 
        (begin
            (sleep_until (<= (ai_living_count "gr_cov_crv_seraphs") 3))
            (crv_seraph_spawn_immediate 8)
            false
        )
        1
    )
)

(script dormant void trailer_banshee_control
    (set b_crv_banshee_launch true)
    (sleep 450)
    (sleep_until 
        (begin
            (sleep_until (<= (ai_living_count "gr_cov_crv_banshees") 1))
            (ai_place "sq_cov_crv_bsh_start0")
            (ai_place "sq_cov_crv_bsh_start1")
            false
        )
        1
    )
)

(script dormant void trailer_sabre_control
    (sleep_until 
        (begin
            (sleep_until (<= (ai_living_count "gr_unsc_crv_sabres") 1))
            (crv_sabre_spawn_immediate 5)
            false
        )
        1
    )
)

(script dormant void trailer_corvette_cannon_control
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left0" cs_corvette_gunners_left)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left1" cs_corvette_gunners_left)
    (cs_run_command_script "sq_cov_crv_cannon_gunners/gunner_left2" cs_corvette_gunners_left)
)

(script static void ins_boarding
    (if debug
        (print "insertion: corvette boarding")
    )
    (set s_insertion_index s_brd_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_corvettecombat_050_070")
    (sleep 1)
    (set s_objcon_bch 1000)
    (set s_objcon_fac 1000)
    (set s_objcon_lnc 1000)
    (set s_objcon_waf 1000)
    (create_player_sabres "v_landing_sabre_player0" "v_landing_sabre_player1" "v_landing_sabre_player2" "v_landing_sabre_player3")
    (load_player_sabres "v_landing_sabre_player0" "v_landing_sabre_player1" "v_landing_sabre_player2" "v_landing_sabre_player3")
    (object_create "dm_savannah_corvette")
    (nuke_planet)
)

(script static void ins_comms
    (if debug
        (print "insertion: communications center")
    )
    (soft_ceiling_enable "beach_blocker_01" false)
    (set s_insertion_index s_com_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_aftship_050_070")
    (sleep 1)
    (print "teleporting players...")
    (teleport_players "fl_comms_player0" "fl_comms_player1" "fl_comms_player2" "fl_comms_player3")
    (object_destroy "dm_savannah_corvette")
    (object_create "dm_savannah_corvette")
    (lnos_setup)
    (nuke_planet)
    (mus_start mus_07)
)

(script static void ins_hangar
    (if debug
        (print "insertion: hangar")
    )
    (set s_insertion_index s_hgr_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_hangar_050_070_060")
    (sleep 1)
    (teleport_players "fl_hangar_player0" "fl_hangar_player1" "fl_hangar_player2" "fl_hangar_player3")
    (object_destroy "dm_savannah_corvette")
    (object_create "dm_savannah_hangar")
    (object_create_folder "sc_comms")
    (nuke_planet)
    (sleep 1)
    (ai_place "sq_unsc_com_pilots/hangar_pilot0")
    (ai_place "sq_unsc_com_pilots/hangar_pilot1")
    (ai_place "sq_unsc_com_pilots/hangar_pilot2")
    (ai_set_objective "sq_unsc_com_pilots" "obj_unsc_hgr")
)

(script static void ins_gunroom
    (if debug
        (print "insertion: gunroom")
    )
    (set s_insertion_index s_grm_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_gunroom_050_060_065")
    (sleep 1)
    (teleport_players "fl_gunroom_player0" "fl_gunroom_player1" "fl_gunroom_player2" "fl_gunroom_player3")
    (object_destroy "dm_savannah_corvette")
    (object_create "dm_savannah_hangar")
    (nuke_planet)
    (lnos_setup)
)

(script static void ins_bridge
    (if debug
        (print "insertion: bridge")
    )
    (set s_insertion_index s_brg_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_bridge_050_065_080")
    (sleep 1)
    (print "teleporting players...")
    (object_teleport (player0) "fl_bridge_player0")
    (object_teleport (player1) "fl_bridge_player1")
    (object_teleport (player2) "fl_bridge_player2")
    (object_teleport (player3) "fl_bridge_player3")
    (sleep 1)
    (object_destroy_folder "dm_savannah")
    (open_hangar_gunroom_doors)
    (lnos_setup)
    (nuke_planet)
    (ai_place "sq_unsc_brg_pilots0")
)

(script static void ins_escape
    (if debug
        (print "insertion: escape")
    )
    (set s_insertion_index s_esc_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_bridge_050_065_080")
    (sleep 1)
    (teleport_players "fl_escape_player0" "fl_escape_player1" "fl_escape_player2" "fl_escape_player3")
    (open_hangar_gunroom_doors)
    (nuke_planet)
)

(script static void ins_final
    (if debug
        (print "insertion: final")
    )
    (set s_insertion_index s_fin_encounter_index)
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_escape_050_065_060")
    (sleep 1)
    (print "teleporting players...")
    (teleport_players "fl_final_player0" "fl_final_player1" "fl_final_player2" "fl_final_player3")
    (sleep 1)
    (game_save)
    (open_hangar_gunroom_doors)
    (nuke_planet)
)

(script static void (create_player_sabres (object_name sabre0, object_name sabre1, object_name sabre2, object_name sabre3))
    (if (player_is_in_game player3)
        (begin
            (if debug
                (print "creating sabre3...")
            )
            (object_create sabre3)
        )
    )
    (if (player_is_in_game player2)
        (begin
            (if debug
                (print "creating sabre2...")
            )
            (object_create sabre2)
        )
    )
    (if (player_is_in_game player1)
        (begin
            (if debug
                (print "creating sabre1...")
            )
            (object_create sabre1)
        )
    )
    (if (player_is_in_game player0)
        (begin
            (if debug
                (print "creating sabre0...")
            )
            (object_create sabre0)
        )
    )
    (sleep 1)
)

(script static void (load_player_sabres (vehicle sabre0, vehicle sabre1, vehicle sabre2, vehicle sabre3))
    (if (player_is_in_game player3)
        (begin
            (if debug
                (print "loading sabre3...")
            )
            (vehicle_load_magic sabre3 23 player3)
            (vehicle_set_player_interaction sabre3 23 false false)
        )
    )
    (if (player_is_in_game player2)
        (begin
            (if debug
                (print "loading sabre2...")
            )
            (vehicle_load_magic sabre2 23 player2)
            (vehicle_set_player_interaction sabre2 23 false false)
        )
    )
    (if (player_is_in_game player1)
        (begin
            (if debug
                (print "loading sabre1...")
            )
            (vehicle_load_magic sabre1 23 player1)
            (vehicle_set_player_interaction sabre1 23 false false)
        )
    )
    (if (player_is_in_game player0)
        (begin
            (if debug
                (print "loading sabre0...")
            )
            (vehicle_load_magic sabre0 23 player0)
            (vehicle_set_player_interaction sabre0 23 false false)
        )
    )
)

(script dormant void sabre_seat_exit_control
    (branch (= b_com_started true) (branch_abort))
    (sleep_until 
        (begin
            (if (player_is_in_game player0)
                (vehicle_set_player_interaction (unit_get_vehicle player0) 23 true false)
            )
            (if (player_is_in_game player1)
                (vehicle_set_player_interaction (unit_get_vehicle player1) 23 true false)
            )
            (if (player_is_in_game player2)
                (vehicle_set_player_interaction (unit_get_vehicle player2) 23 true false)
            )
            (if (player_is_in_game player3)
                (vehicle_set_player_interaction (unit_get_vehicle player3) 23 true false)
            )
            false
        )
        1
    )
)

(script static void test_crv_fly
    (create_player_sabres "v_corvette_sabre_player0" "v_corvette_sabre_player1" "v_corvette_sabre_player2" "v_corvette_sabre_player3")
    (load_player_sabres "v_corvette_sabre_player0" "v_corvette_sabre_player1" "v_corvette_sabre_player2" "v_corvette_sabre_player3")
)

(script static void waf_test
    (object_create_folder "cr_waf")
    (object_create_folder "sc_waf_bays")
    (object_create_folder "sc_waf_debris")
)

(script static void waf_fly
    (if debug
        (print "new wafer sabre to test...")
    )
    (vehicle_unload "v_test_waf_sabre" none)
    (object_create_anew "v_test_waf_sabre")
    (vehicle_load_magic "v_test_waf_sabre" 23 (player0))
)

(script static void test_aft
    (if debug
        (print "switching zone sets...")
    )
    (switch_zone_set "set_aftship_050_070")
    (teleport_players "fl_comms_player0" "fl_comms_player1" "fl_comms_player2" "fl_comms_player3")
    (physics_set_gravity 0.3)
    (object_destroy "sc_aft_top")
    (ai_erase "gr_cov_com")
    (ai_place "gr_cov_com")
)

(script static void test_waf_start
    (create_player_sabres "v_wafer_sabre_player0" "v_wafer_sabre_player1" "v_wafer_sabre_player2" "v_wafer_sabre_player3")
    (load_player_sabres "v_wafer_sabre_player0" "v_wafer_sabre_player1" "v_wafer_sabre_player2" "v_wafer_sabre_player3")
)

(script static void ins_fx_frigate_destruction
    (if debug
        (print "switching zone sets for frigate destruction...")
    )
    (sleep 1)
    (object_teleport_to_ai_point (player0) "ps_grm_fx_teleport/player0")
    (physics_set_gravity 0)
)

(script static void fx_frigate_destruction
    (object_destroy_folder "dm_savannah")
    (if debug
        (print "pristing model created for 30 ticks...")
    )
    (object_create "dm_savannah_gunroom")
    (object_create_folder "v_corvette_cannons")
    (sleep 30)
    (if debug
        (print "swapping pristine frigate for destroyed...")
    )
    (object_destroy "dm_savannah_gunroom")
    (object_create "dm_savannah_destroyed")
    (if debug
        (print "putting destroyed frigate on m45_drift animation track...")
    )
    (device_set_position_track "dm_savannah_destroyed" "m45_drift" 0)
    (device_set_position_immediate "dm_savannah_destroyed" 0)
    (sleep 1)
    (device_animate_position "dm_savannah_destroyed" 1 s_fx_frigate_death_time 0.034 0.034 false)
    (sleep (* 30 s_fx_frigate_death_time))
    (object_destroy_folder "dm_savannah")
)

(script static void fx_loop_frigate_destruction
    (sleep_until 
        (begin
            (fx_frigate_destruction)
            (if debug
                (print "frigate destruction complete: restarting...")
            )
            false
        )
        1
    )
)

(script static void fx_phantom_shield
    (ai_erase_all)
    (ai_place "sq_cov_waf_ph_top_left")
    (ai_place "sq_unsc_waf_aa")
)

(script static void fx_phantom_vs_sabre
    (sleep_until 
        (begin
            (ai_erase_all)
            (ai_place "sq_cov_fx_phantom/pilot")
            (ai_place "sq_unsc_waf_sbr_station3")
            (sleep 10)
            (sleep_until (or (<= (ai_living_count "sq_cov_fx_phantom") 0) (<= (ai_living_count "sq_unsc_waf_sbr_station3") 0)))
            false
        )
        1
    )
)

(script static void ins_fx_corvette_exterior
    (if debug
        (print "switching zone sets for frigate destruction...")
    )
    (sleep 1)
    (object_teleport (player0) "fl_fx_frigate_destruction")
    (create_player_sabres "v_corvette_sabre_player0" "v_corvette_sabre_player1" "v_corvette_sabre_player2" "v_corvette_sabre_player3")
    (load_player_sabres "v_corvette_sabre_player0" "v_corvette_sabre_player1" "v_corvette_sabre_player2" "v_corvette_sabre_player3")
    (physics_set_gravity 0)
    (object_create "dm_savannah_corvette")
)

(script startup void space
    (if debug
        (print "::: m45 - space :::")
    )
    (fade_out 0 0 0 0)
    (if (or (not autostart) (editor_mode) (<= (player_count) 0))
        (begin
            (fade_in 0 0 0 0)
        )
        (start)
    )
    (player_disable_movement false)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (kill_volume_disable "kill_soft_bch_burglar")
    (kill_volume_disable "kill_crv_01")
    (kill_volume_disable "kill_soft_comms_00")
    (kill_volume_disable "kill_soft_comms_01")
    (kill_volume_disable "kill_soft_comms_02")
    (kill_volume_disable "kill_soft_comms_03")
    (kill_volume_disable "kill_silo")
    (if debug
        (print "-=-=-=- disabling zone sets -=-=-=-")
    )
    (zone_set_trigger_volume_enable "zone_set:set_facility_001_005_010" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_facility_001_005_010" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_silo_005_010_015" false)
    (zone_set_trigger_volume_enable "zone_set:set_silo_005_010_015" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_hangar_050_070_060" false)
    (zone_set_trigger_volume_enable "zone_set:set_hangar_050_070_060" false)
    (zone_set_trigger_volume_enable "zone_set:set_gunroom_050_060_065" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_bridge_050_065_080" false)
    (zone_set_trigger_volume_enable "zone_set:set_bridge_050_065_080" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_escape_050_065_060" false)
    (zone_set_trigger_volume_enable "zone_set:set_escape_050_065_060" false)
    (soft_ceiling_enable "soft_ceiling_ship_01" false)
    (sleep_until (>= s_insertion_index s_bch_encounter_index) 1)
    (if (<= s_insertion_index s_bch_encounter_index)
        (wake bch_encounter)
    )
    (sleep_until (or (= b_bch_completed true) (>= s_insertion_index s_fac_encounter_index)) 1)
    (if (<= s_insertion_index s_fac_encounter_index)
        (wake fac_encounter)
    )
    (sleep_until (or (volume_test_players "tv_lnc_start") (>= s_insertion_index s_lnc_encounter_index)) 1)
    (if (<= s_insertion_index s_lnc_encounter_index)
        (wake lnc_encounter)
    )
    (sleep_until (or (= b_lnc_completed true) (>= s_insertion_index s_waf_encounter_index)) 1)
    (if (<= s_insertion_index s_waf_encounter_index)
        (wake waf_encounter)
    )
    (sleep_until (or (= b_waf_completed true) (>= s_insertion_index s_wrp_encounter_index)) 1)
    (if (<= s_insertion_index s_wrp_encounter_index)
        (wake wrp_encounter)
    )
    (sleep_until (or (= b_wrp_completed true) (>= s_insertion_index s_crv_encounter_index)) 1)
    (game_won)
)

(script static void start
    (if debug
        (print "game mode. choosing insertion point...")
    )
    (if (= (game_insertion_point_get) 0)
        (ins_beach)
        (if (= (game_insertion_point_get) 1)
            (ins_wafer)
            (if (= (game_insertion_point_get) 2)
                (ins_comms)
                (if (= (game_insertion_point_get) 5)
                    (print "::: loading in debug mode :::")
                )
            )
        )
    )
)

(script dormant void carter_marker_control
    (if (not (game_is_cooperative))
        (begin
            (sleep_until (> (ai_living_count ai_carter) 0) 1)
            (f_hud_spartan_waypoint ai_carter "carter_name" 20)
        )
    )
)

(script dormant void kat_marker_control
    (if (not (game_is_cooperative))
        (begin
            (sleep_until (> (ai_living_count ai_kat) 0) 1)
            (f_hud_spartan_waypoint ai_kat "kat_name" 20)
        )
    )
)

(script dormant void jorge_marker_control
    (if (not (game_is_cooperative))
        (begin
            (sleep_until (> (ai_living_count ai_jorge) 0) 1)
            (f_hud_spartan_waypoint ai_jorge "jorge_name" 20)
        )
    )
)

(script dormant void jorge_gunroom_marker_control
    (if (not (game_is_cooperative))
        (begin
            (sleep_until (> (ai_living_count "sq_jorge") 0) 1)
            (f_hud_spartan_waypoint "sq_jorge" "jorge_name" 20)
        )
    )
)

(script dormant void jorge_final_marker_control
    (if (not (game_is_cooperative))
        (begin
            (sleep_until (> (ai_living_count "sq_jorge") 0) 1)
            (f_hud_spartan_waypoint "sq_jorge" "jorge_name" 20)
        )
    )
)

(script dormant void bch_encounter
    (if debug
        (print "encounter: beach")
    )
    (set s_current_encounter s_bch_encounter_index)
    (data_mine_set_mission_segment "beach")
    (if (or (not (editor_mode)) cinematics)
        (begin
            (if debug
                (print "starting with intro cinematic...")
            )
            (f_start_mission "045la_katsplan")
            (cinematic_skip_stop_internal)
            (cinematic_enter_pre false)
            (cinematic_enter_post)
            (cinematic_run_script_by_name "045la_katsplan_v2")
            (unit_raise_weapon player0 1)
            (unit_raise_weapon player1 1)
            (unit_raise_weapon player2 1)
            (unit_raise_weapon player3 1)
        )
    )
    (switch_zone_set "set_beach_001_005")
    (sleep_until (= (current_zone_set_fully_active) s_zoneindex_beach) 1)
    (kill_volume_enable "kill_soft_bch_burglar")
    (zone_set_trigger_volume_enable "zone_set:set_facility_001_005_010" true)
    (zone_set_trigger_volume_enable "begin_zone_set:set_facility_001_005_010" true)
    (wake bch_completion_control)
    (wake bch_spartan_main)
    (wake bch_object_creation_control)
    (wake bch_pod_control)
    (wake bch_seraph_crash_control)
    (wake bch_cov_cove_elite_pod_control)
    (wake bch_wraith1_control)
    (wake bch_fork_control)
    (wake bch_burglar_control)
    (wake save_bch_jetpacks)
    (wake save_bch_rocks)
    (wake carter_marker_control)
    (wake kat_marker_control)
    (wake jorge_marker_control)
    (ai_place "sq_cov_bch_ds0")
    (set b_bch_started true)
    (if (or (not (editor_mode)) cinematics)
        (cinematic_exit "045la_katsplan_v2" false)
    )
    (wake save_bch_start)
    (wake show_chapter_title_beach)
    (bch_setup_aa)
    (wake bch_seraphs_start)
    (sleep_until (or (volume_test_players "tv_objcon_bch_010") (>= s_objcon_bch 10)) 1)
    (if (<= s_objcon_bch 10)
        (begin
            (if debug
                (print " ::: bch ::: objective control 010")
            )
            (set s_objcon_bch 10)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_020") (>= s_objcon_bch 20)) 1)
    (if (<= s_objcon_bch 20)
        (begin
            (if debug
                (print " ::: bch ::: objective control 020")
            )
            (set s_objcon_bch 20)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_025a") (volume_test_players "tv_objcon_bch_025b") (>= s_objcon_bch 25)) 1)
    (if (<= s_objcon_bch 25)
        (begin
            (if debug
                (print " ::: bch ::: objective control 025")
            )
            (set s_objcon_bch 25)
            (mus_stop mus_01)
            (mus_start mus_02)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_028a") (volume_test_players "tv_objcon_bch_028b") (>= s_objcon_bch 28)) 1)
    (if (<= s_objcon_bch 28)
        (begin
            (if debug
                (print " ::: bch ::: objective control 028")
            )
            (set s_objcon_bch 28)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_030") (>= s_objcon_bch 30)) 1)
    (if (<= s_objcon_bch 30)
        (begin
            (if debug
                (print " ::: bch ::: objective control 030")
            )
            (set s_objcon_bch 30)
            (soft_ceiling_enable "beach_blocker_01" false)
            (wake md_bch_kat_launch_ahead)
            (wake save_bch_facility_zoneset)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_040") (>= s_objcon_bch 40)) 1)
    (if (<= s_objcon_bch 40)
        (begin
            (if debug
                (print " ::: bch ::: objective control 040")
            )
            (set s_objcon_bch 40)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_050") (>= s_objcon_bch 50)) 1)
    (if (<= s_objcon_bch 50)
        (begin
            (if debug
                (print " ::: bch ::: objective control 050")
            )
            (set s_objcon_bch 50)
            (ai_place "sq_cov_bch_ds3")
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_060") (>= s_objcon_bch 60)) 1)
    (if (<= s_objcon_bch 60)
        (begin
            (if debug
                (print " ::: bch ::: objective control 060")
            )
            (set s_objcon_bch 60)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_065") (>= s_objcon_bch 65)) 1)
    (if (<= s_objcon_bch 65)
        (begin
            (if debug
                (print " ::: bch ::: objective control 065")
            )
            (set s_objcon_bch 65)
            (game_save)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_070") (>= s_objcon_bch 70)) 1)
    (if (<= s_objcon_bch 70)
        (begin
            (if debug
                (print " ::: bch ::: objective control 070")
            )
            (set s_objcon_bch 70)
            (game_save)
            (add_recycling_volume "tv_bch_recycle" 7 15)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_080") (>= s_objcon_bch 80)) 1)
    (if (<= s_objcon_bch 80)
        (begin
            (if debug
                (print " ::: bch ::: objective control 080")
            )
            (set s_objcon_bch 80)
            (wake md_bch_jor_hostile_rocks_south)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_090") (>= s_objcon_bch 90)) 1)
    (if (<= s_objcon_bch 90)
        (begin
            (if debug
                (print " ::: bch ::: objective control 090")
            )
            (set s_objcon_bch 90)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_100") (>= s_objcon_bch 100)) 1)
    (if (<= s_objcon_bch 100)
        (begin
            (if debug
                (print " ::: bch ::: objective control 100")
            )
            (set s_objcon_bch 100)
            (game_save)
            (add_recycling_volume "tv_bch_recycle" 7 15)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_110") (>= s_objcon_bch 110)) 1)
    (if (<= s_objcon_bch 110)
        (begin
            (if debug
                (print " ::: bch ::: objective control 110")
            )
            (set s_objcon_bch 110)
            (set b_bch_counterattack_started true)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_bch_120") (>= s_objcon_bch 120)) 1)
    (if (<= s_objcon_bch 120)
        (begin
            (if debug
                (print " ::: bch ::: objective control 120")
            )
            (set s_objcon_bch 120)
        )
    )
    (sleep_until b_bch_completed 1)
    (game_save)
)

(script dormant void bch_object_creation_control
    (sleep_until (= (current_zone_set_fully_active) s_zoneindex_facility) 1)
    (object_create_folder "cr_beach")
    (object_create_folder "sc_bch")
)

(script dormant void bch_burglar_control
    (branch (= b_fac_started true) (branch_abort))
    (sleep_until 
        (begin
            (if (volume_test_object "kill_soft_bch_burglar" player0)
                (object_teleport player0 "fl_bch_burglar")
            )
            (if (volume_test_object "kill_soft_bch_burglar" player1)
                (object_teleport player1 "fl_bch_burglar")
            )
            (if (volume_test_object "kill_soft_bch_burglar" player2)
                (object_teleport player2 "fl_bch_burglar")
            )
            (if (volume_test_object "kill_soft_bch_burglar" player3)
                (object_teleport player3 "fl_bch_burglar")
            )
            (sleep 30)
            false
        )
        1
    )
)

(script dormant void bch_pod_control
    (sleep_until (>= s_objcon_bch 25))
    (sleep 35)
    (bch_skybox_pod_trail)
    (sleep 95)
    (drop_pod "dm_bch_rocks_pod0" "sq_cov_bch_rocks_pods/elite0")
    (open_pod "dm_bch_rocks_pod0" "sq_cov_bch_rocks_pods/elite0")
    (sleep (random_range 90 210))
    (drop_pod "dm_bch_rocks_pod1" "sq_cov_bch_rocks_pods/elite1")
    (open_pod "dm_bch_rocks_pod1" "sq_cov_bch_rocks_pods/elite1")
    (sleep_until (or (<= (ai_living_count "sq_cov_bch_rocks_pods") 1) (>= s_objcon_bch 50)))
    (drop_pod "dm_bch_rocks_pod2" "sq_cov_bch_rocks_pods/elite2")
    (open_pod "dm_bch_rocks_pod2" "sq_cov_bch_rocks_pods/elite2")
    (sleep_until (or (<= (ai_living_count "sq_cov_bch_rocks_pods") 1) (>= s_objcon_bch 60)))
    (drop_pod "dm_bch_rocks_pod3" "sq_cov_bch_rocks_pods/elite3")
    (open_pod "dm_bch_rocks_pod3" "sq_cov_bch_rocks_pods/elite3")
    (set b_bch_rocks_pods_complete true)
)

(script dormant void save_bch_start
    (sleep 120)
    (game_save_no_timeout)
)

(script dormant void save_bch_facility_zoneset
    (sleep_until (>= (current_zone_set_fully_active) s_zoneindex_facility))
    (sleep 60)
    (game_save_no_timeout)
)

(script dormant void save_bch_jetpacks
    (branch (= b_fac_started true) (branch_abort))
    (sleep_until (> (ai_spawn_count "sq_cov_bch_rocks_jetpacks0") 0))
    (sleep_until (<= (ai_spawn_count "sq_cov_bch_rocks_jetpacks0") 0))
    (sleep 30)
    (game_save_no_timeout)
)

(script dormant void save_bch_rocks
    (branch (= b_fac_started true) (branch_abort))
    (sleep_until (>= s_objcon_bch 60))
    (sleep_until (<= (ai_living_count "gr_cov_bch_rocks") 0))
    (sleep 30)
    (game_save_no_timeout)
)

(script dormant void bch_spartan_main
    (ai_place "sq_carter/bch")
    (ai_place "sq_jorge/bch")
    (ai_place "sq_kat/bch")
    (sleep 1)
    (set ai_carter "sq_carter")
    (set ai_kat "sq_kat")
    (set ai_jorge "sq_jorge")
    (set ai_kat "sq_kat")
    (set ai_jorge "sq_jorge")
    (set ai_carter "sq_carter")
    (ai_set_objective "gr_unsc_spartans" "obj_unsc_bch")
    (ai_cannot_die "gr_unsc_spartans" true)
)

(script dormant void bch_completion_control
    (sleep_until (and (> (ai_spawn_count "gr_cov_bch_cove") 0) (> (ai_spawn_count "sq_cov_bch_cove_elite0") 0)))
    (sleep_until (<= (ai_living_count "gr_cov_bch_cove") 0))
    (bch_start_infinite_encounter)
    (sleep (random_range 30 90))
    (if debug
        (print "beach: encounter complete. enemies defeated or sleep timed out...")
    )
    (set b_bch_completed true)
)

(script command_script void cs_bch_jetpackelite0
    (cs_enable_moving false)
    (sleep_until (or (< (object_get_shield (ai_get_object ai_current_actor)) 1) (>= s_objcon_bch 50) (<= (ai_strength "gr_cov_bch_rocks") 0.5)))
    (sleep (random_range 10 60))
    (cs_run_command_script "sq_cov_bch_rocks_jetpacks0" cs_abort)
)

(script dormant void bch_wraith1_control
    (sleep_until (>= s_objcon_bch 80))
    (ai_place "sq_cov_bch_ds4")
    (wake bch_wraith_water_kill)
    (sleep (* 30 10))
    (sleep_until (or (volume_test_players "tv_bch_wraith1_proximity") (= b_bch_completed true)))
    (if debug
        (print "aborting wraith firing script")
    )
    (cs_run_command_script "sq_cov_bch_wraith1" cs_abort)
)

(script command_script void cs_bch_trooper_female_door
    (cs_abort_on_damage true)
    (cs_aim true "ps_fac_door/trf_target")
    (sleep_until (>= s_objcon_fac 20))
    (sleep (random_range 60 90))
)

(script command_script void cs_bch_trooper_lead_door
    (cs_abort_on_damage true)
    (cs_aim true "ps_fac_door/trlead_target")
    (sleep_until (>= s_objcon_fac 20))
)

(script command_script void cs_bch_cov_ds0
    (cs_enable_pathfinding_failsafe true)
    (object_cannot_take_damage (ai_vehicle_get ai_current_actor))
    (f_load_fork (ai_vehicle_get ai_current_actor) "left" "sq_cov_bch_rocks_grunts0" "sq_cov_bch_rocks_jackals0" none none)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "ps_bch_cov_ds0/land" "ps_bch_cov_ds0/land_facing" 0.25)
    (sleep 30)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "left")
    (sleep 30)
    (cs_fly_to_and_face "ps_bch_cov_ds0/hover" "ps_bch_cov_ds0/land_facing" 0.25)
    (sleep 30)
    (cs_vehicle_speed 0.9)
    (cs_fly_by "ps_bch_cov_ds0/exit0")
    (cs_vehicle_boost true)
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_bch_cov_ds0/exit1")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_cov_ds0/erase")
    (ai_erase ai_current_squad)
)

(script command_script void cs_bch_cov_ds1
    (cs_enable_pathfinding_failsafe true)
    (ai_disregard (ai_actors ai_current_squad) true)
    (f_load_fork_cargo (ai_vehicle_get ai_current_actor) "large" "sq_cov_bch_wraith0" none none)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 150)
    (object_cannot_take_damage (ai_vehicle_get ai_current_actor))
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_bch_cov_ds1/entry2")
    (cs_fly_by "ps_bch_cov_ds1/entry1")
    (cs_fly_by "ps_bch_cov_ds1/entry0")
    (cs_vehicle_speed 0.4)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "ps_bch_cov_ds1/land" "ps_bch_cov_ds1/land_facing" 0.5)
    (sleep 30)
    (f_unload_fork_cargo (ai_vehicle_get ai_current_actor) "large")
    (sleep 30)
    (cs_fly_to_and_face "ps_bch_cov_ds1/hover" "ps_bch_cov_ds1/land_facing" 1)
    (sleep 30)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "ps_bch_cov_ds1/exit0")
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_cov_ds1/exit1")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_cov_ds1/erase")
    (ai_erase ai_current_squad)
)

(script command_script void cs_bch_cov_ds2
    (cs_enable_pathfinding_failsafe true)
    (object_cannot_take_damage (ai_vehicle_get ai_current_actor))
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_bch_cov_ds2/entry2")
    (cs_fly_by "ps_bch_cov_ds2/entry1")
    (cs_fly_by "ps_bch_cov_ds2/entry0")
    (cs_vehicle_speed 0.4)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "ps_bch_cov_ds2/land" "ps_bch_cov_ds2/land_facing" 2)
    (sleep 90)
    (cs_fly_to_and_face "ps_bch_cov_ds2/hover" "ps_bch_cov_ds2/land_facing" 1)
    (sleep 30)
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_bch_cov_ds2/entry2")
    (ai_erase ai_current_squad)
)

(script command_script void cs_bch_cov_ds4
    (cs_enable_pathfinding_failsafe true)
    (f_load_fork_cargo (ai_vehicle_get ai_current_actor) "large" "sq_cov_bch_wraith1" none none)
    (set o_bch_wraith (ai_vehicle_get "sq_cov_bch_wraith1/pilot"))
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 150)
    (object_cannot_take_damage (ai_vehicle_get ai_current_actor))
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_cov_ds4/entry2")
    (cs_fly_by "ps_bch_cov_ds4/entry1")
    (cs_vehicle_boost false)
    (cs_fly_by "ps_bch_cov_ds4/entry0")
    (cs_vehicle_speed 0.6)
    (cs_fly_to_and_face "ps_bch_cov_ds4/hover" "ps_bch_cov_ds4/land_facing" 1)
    (sleep 30)
    (cs_vehicle_speed 0.3)
    (cs_ignore_obstacles true)
    (cs_fly_to_and_face "ps_bch_cov_ds4/land" "ps_bch_cov_ds4/land_facing" 0.25)
    (f_unload_fork_cargo (ai_vehicle_get ai_current_actor) "large")
    (sleep 60)
    (cs_fly_to_and_face "ps_bch_cov_ds4/hover" "ps_bch_cov_ds4/land_facing" 1)
    (cs_ignore_obstacles false)
    (sleep 30)
    (cs_fly_by "ps_bch_cov_ds4/exit0")
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_bch_cov_ds4/exit1")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 120)
    (cs_fly_by "ps_bch_cov_ds4/erase")
    (ai_erase ai_current_squad)
)

(script command_script void cs_bch_cov_ds3
    (cs_enable_pathfinding_failsafe true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 150)
    (object_cannot_take_damage (ai_vehicle_get ai_current_actor))
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_bch_cov_ds3/entry0")
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "sq_cov_bch_cove_grunts0" "sq_cov_bch_cove_grunts1" "sq_cov_bch_cove_snipers0" "sq_cov_bch_cove_jackals0")
    (cs_vehicle_speed 0.6)
    (cs_fly_to "ps_bch_cov_ds3/hover" 2)
    (cs_vehicle_speed 0.3)
    (sleep 30)
    (cs_fly_to_and_face "ps_bch_cov_ds3/land" "ps_bch_cov_ds3/land_facing" 0.4)
    (sleep 30)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (cs_fly_to_and_face "ps_bch_cov_ds3/hover" "ps_bch_cov_ds3/land_facing" 0.5)
    (sleep 30)
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_bch_cov_ds3/erase")
    (ai_erase ai_current_squad)
)

(script dormant void bch_cov_cove_elite_pod_control
    (sleep_until (>= s_objcon_bch 100))
    (drop_pod "dm_bch_cove_pod0" "sq_cov_bch_cove_elite0/elite0")
    (open_pod "dm_bch_cove_pod0" "sq_cov_bch_cove_elite0/elite0")
)

(script dormant void bch_fork_control
    (sleep_until (>= s_objcon_bch 10) 30 (* 30 7))
    (ai_place "sq_cov_bch_amb_forks0")
    (ai_disregard (ai_actors "sq_cov_bch_amb_forks0") true)
    (ai_force_low_lod "sq_cov_bch_amb_forks0")
)

(script command_script void cs_bch_fork0
    (ai_disregard ai_current_actor true)
    (ai_erase (ai_get_turret_ai ai_current_actor 0))
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork0_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork0_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork1
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork1_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork1_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork2
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork2_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork2_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork3
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork3_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork3_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork4
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork4_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork4_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork5
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork5_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork5_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork6
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork6_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork6_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork7
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork7_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork7_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_fork8
    (ai_disregard ai_current_actor true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 180)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_forks/fork8_0")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_bch_forks/fork8_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void fac_encounter
    (if debug
        (print "encounter: facility")
    )
    (set s_current_encounter s_fac_encounter_index)
    (data_mine_set_mission_segment "facility")
    (object_create_folder "sc_fac")
    (zone_set_trigger_volume_enable "begin_zone_set:set_silo_005_010_015" true)
    (zone_set_trigger_volume_enable "zone_set:set_silo_005_010_015" true)
    (kill_volume_disable "kill_soft_bch_burglar")
    (ai_place "sq_unsc_fac_tr_lead")
    (ai_place "sq_unsc_bch_tf0")
    (wake fac_spartans_main)
    (wake fac_door_lock_return_to_breach)
    (wake fac_deadman_control)
    (wake fac_hallway_trooper_control)
    (wake md_bch_trf_spartans_coming)
    (wake fac_window_failsafe)
    (if (or (difficulty_is_normal) (difficulty_is_heroic) (difficulty_is_legendary))
        (object_create "elite_shield0")
    )
    (set b_fac_started true)
    (fac_setup_bodies)
    (wake md_fac_tr_everybody_inside)
    (f_blip_flag "fl_fac_interior" blip_recon)
    (device_set_power "dm_fac_entrance" 1)
    (device_set_position "dm_fac_entrance" 1)
    (sleep_until (or (volume_test_players "tv_objcon_fac_010") (>= s_objcon_fac 10)) 1)
    (if (<= s_objcon_fac 10)
        (begin
            (if debug
                (print " ::: fac ::: objective control 010")
            )
            (set s_objcon_fac 10)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_020") (>= s_objcon_fac 20)) 1)
    (if (<= s_objcon_fac 20)
        (begin
            (if debug
                (print " ::: fac ::: objective control 020")
            )
            (set s_objcon_fac 20)
            (wake md_fac_tr_flight_control)
            (f_unblip_flag "fl_fac_interior")
            (ai_place "sq_unsc_fac_tr_rocketcrew")
            (wake fac_trigger_bombing_00)
            (ai_migrate "sq_unsc_bch_tf0" "sq_unsc_bch_reinforce_holding0")
            (mus_stop mus_02)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_030") (>= s_objcon_fac 30)) 1)
    (if (<= s_objcon_fac 30)
        (begin
            (if debug
                (print " ::: fac ::: objective control 030")
            )
            (set s_objcon_fac 30)
            (wake md_fac_jor_holland_said_yes)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_040") (>= s_objcon_fac 40)) 1)
    (if (<= s_objcon_fac 40)
        (begin
            (if debug
                (print " ::: fac ::: objective control 040")
            )
            (set s_objcon_fac 40)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_050") (>= s_objcon_fac 50)) 1)
    (if (<= s_objcon_fac 50)
        (begin
            (if debug
                (print " ::: fac ::: objective control 050")
            )
            (set s_objcon_fac 50)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_060") (>= s_objcon_fac 60)) 1)
    (if (<= s_objcon_fac 60)
        (begin
            (if debug
                (print " ::: fac ::: objective control 060")
            )
            (set s_objcon_fac 60)
            (wake md_fac_tr_calls_wraith)
            (thespian_performance_activate "thespian_deadman_kat")
            (thespian_performance_activate "thespian_deadman_carter")
            (thespian_performance_activate "thespian_deadman_jorge")
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_070") (>= s_objcon_fac 70)) 1)
    (if (<= s_objcon_fac 70)
        (begin
            (if debug
                (print " ::: fac ::: objective control 070")
            )
            (set s_objcon_fac 70)
            (wake md_fac_tr_through_door)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_080") (>= s_objcon_fac 80)) 1)
    (if (<= s_objcon_fac 80)
        (begin
            (if debug
                (print " ::: fac ::: objective control 080")
            )
            (set s_objcon_fac 80)
            (garbage_collect_now)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_090") (>= s_objcon_fac 90)) 1)
    (if (<= s_objcon_fac 90)
        (begin
            (if debug
                (print " ::: fac ::: objective control 090")
            )
            (set s_objcon_fac 90)
        )
    )
    (object_create "dm_slo_shutter")
    (sleep_until (or (volume_test_players "tv_objcon_fac_100") (>= s_objcon_fac 100)) 1)
    (if (<= s_objcon_fac 100)
        (begin
            (if debug
                (print " ::: fac ::: objective control 100")
            )
            (set s_objcon_fac 100)
            (wake fac_trigger_bombing_01)
            (wake md_fac_spkr_warning1)
            (mus_start mus_03)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_110") (>= s_objcon_fac 110)) 1)
    (if (<= s_objcon_fac 110)
        (begin
            (if debug
                (print " ::: fac ::: objective control 110")
            )
            (set s_objcon_fac 110)
            (thespian_performance_kill_by_name "thespian_deadman_carter")
            (thespian_performance_kill_by_name "thespian_deadman_kat")
            (thespian_performance_kill_by_name "thespian_deadman_jorge")
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_120") (>= s_objcon_fac 120)) 1)
    (if (<= s_objcon_fac 120)
        (begin
            (if debug
                (print " ::: fac ::: objective control 120")
            )
            (set s_objcon_fac 120)
            (thespian_performance_activate "thespian_controlroom_kat")
            (thespian_performance_activate "thespian_controlroom_jorge")
            (thespian_performance_activate "thespian_controlroom_carter")
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_130") (>= s_objcon_fac 130)) 1)
    (if (<= s_objcon_fac 130)
        (begin
            (if debug
                (print " ::: fac ::: objective control 130")
            )
            (set s_objcon_fac 130)
            (bring_spartans_forward 13)
        )
    )
    (sleep_until (or (volume_test_players "tv_objcon_fac_140") (>= s_objcon_fac 140)) 1)
    (if (<= s_objcon_fac 140)
        (begin
            (if debug
                (print " ::: fac ::: objective control 140")
            )
            (set s_objcon_fac 140)
        )
    )
    (set b_fac_completed true)
)

(script dormant void fac_window_failsafe
    (branch (>= s_objcon_fac 70) (branch_abort))
    (if debug
        (print "player went through the window")
    )
    (sleep_until (volume_test_players "tv_objcon_fac_070") 1)
    (sleep_forever fac_hallway_trooper_control)
    (wake show_objective_flight_control)
    (f_unblip_flag "fl_fac_interior")
    (ai_migrate "sq_unsc_bch_tf0" "sq_unsc_bch_reinforce_holding0")
    (mus_stop mus_02)
    (set s_objcon_fac 70)
)

(script dormant void fac_door_lock_return_to_breach
    (sleep_until (>= (current_zone_set) s_zoneindex_silo) 1)
    (if debug
        (print "player is loading silo zone")
    )
    (set b_bch_infinite_kill true)
    (device_set_position_immediate "dm_fac_breach_exit" 0)
    (device_set_power "dm_fac_breach_exit" 0)
    (zone_set_trigger_volume_enable "zone_set:set_facility_001_005_010" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_facility_001_005_010" false)
    (game_save_no_timeout)
)

(script dormant void fac_spartans_main
    (ai_set_objective "gr_unsc_spartans" "obj_unsc_fac")
)

(script command_script void cs_fac_bch_post_reinforcements
    (cs_go_by "ps_fac_hall_troopers/p0" "ps_fac_hall_troopers/p0")
    (cs_go_by "ps_fac_hall_troopers/p1" "ps_fac_hall_troopers/p1")
    (cs_go_by "ps_fac_hall_troopers/p2" "ps_fac_hall_troopers/p2")
    (cs_go_by "ps_fac_hall_troopers/p3" "ps_fac_hall_troopers/p3")
    (cs_go_by "ps_fac_hall_troopers/p4" "ps_fac_hall_troopers/p4")
    (cs_go_by "ps_fac_hall_troopers/p5" "ps_fac_hall_troopers/p5")
)

(script dormant void fac_hallway_trooper_control
    (sleep_until (>= s_objcon_fac 10) 1)
    (ai_place "sq_unsc_fac_posthallway")
)

(script dormant void fac_shutter_control
    (sleep_until b_fac_shutter_activated 1 (* 30 20))
    (set b_fac_shutter_activated true)
)

(script static void fac_setup_bodies
    (object_create_folder "sc_fac_bodies")
    (scenery_animation_start "body2" "objects\characters\marine\marine" "e3_deadbody_02")
    (scenery_animation_start "body4" "objects\characters\marine\marine" "e3_deadbody_04")
    (scenery_animation_start "body5" "objects\characters\marine\marine" "e3_deadbody_05")
    (scenery_animation_start "body6" "objects\characters\marine\marine" "e3_deadbody_06")
    (scenery_animation_start "body7" "objects\characters\marine\marine" "e3_deadbody_07")
    (scenery_animation_start "body8" "objects\characters\marine\marine" "e3_deadbody_08")
    (scenery_animation_start "body9" "objects\characters\marine\marine" "e3_deadbody_09")
    (scenery_animation_start "body10" "objects\characters\marine\marine" "e3_deadbody_10")
    (scenery_animation_start "body11" "objects\characters\marine\marine" "e3_deadbody_11")
    (scenery_animation_start "body12" "objects\characters\marine\marine" "e3_deadbody_12")
    (scenery_animation_start "body13" "objects\characters\marine\marine" "e3_deadbody_13")
    (scenery_animation_start "body14" "objects\characters\marine\marine" "e3_deadbody_14")
    (scenery_animation_start "body15" "objects\characters\marine\marine" "e3_deadbody_15")
    (scenery_animation_start "body16" "objects\characters\marine\marine" "e3_deadbody_16")
    (scenery_animation_start "body17" "objects\characters\marine\marine" "e3_deadbody_17")
    (scenery_animation_start "body18" "objects\characters\marine\marine" "e3_deadbody_18")
    (scenery_animation_start "body19" "objects\characters\marine\marine" "e3_deadbody_19")
    (scenery_animation_start "body20" "objects\characters\marine\marine" "e3_deadbody_20")
)

(script static void fac_test_deadman
    (garbage_collect_unsafe)
    (fac_deadman_spawn)
)

(script dormant void fac_deadman_control
    (sleep_until (>= s_objcon_fac 90) 1)
    (fac_deadman_spawn)
)

(script static void fac_deadman_spawn
    (ai_place "sq_unsc_fac_deadman0")
    (sleep 1)
    (damage_new "levels\solo\m45\fx\facility_deadman_impulse.damage_effect" "fl_fac_damage")
    (sleep 5)
    (ai_place "sq_cov_fac_deadman0")
    (sleep 1)
)

(script command_script void cs_fac_wraith_shelling
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot_point true "ps_fac_wraith/target0")
                (cs_shoot_point true "ps_fac_wraith/target1")
                (cs_shoot_point true "ps_fac_wraith/target2")
            )
            (sleep 180)
            false
        )
        1
    )
)

(script command_script void cs_fac_fork
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 1)
    (f_load_fork_cargo (ai_vehicle_get ai_current_actor) "large" "sq_cov_fac_wraith" none none)
    (cs_fly_by "ps_fac_fork/entry2")
    (cs_fly_by "ps_fac_fork/entry1")
    (cs_fly_by "ps_fac_fork/entry0")
    (cs_vehicle_speed 0.6)
    (cs_fly_to_and_face "ps_fac_fork/hover" "ps_fac_fork/land_facing" 1)
    (sleep 30)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "ps_fac_fork/land" "ps_fac_fork/land_facing" 1)
    (f_unload_fork_cargo (ai_vehicle_get ai_current_actor) "large")
    (sleep 60)
    (cs_fly_to_and_face "ps_fac_fork/hover" "ps_fac_fork/land_facing" 1)
    (sleep 30)
    (cs_fly_by "ps_fac_fork/exit0")
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_fac_fork/exit1")
    (cs_fly_by "ps_fac_fork/erase")
    (ai_erase ai_current_squad)
)

(script dormant void lnc_encounter
    (if debug
        (print "encounter: launch")
    )
    (set s_current_encounter s_lnc_encounter_index)
    (data_mine_set_mission_segment "launch")
    (kill_volume_enable "kill_silo")
    (if (difficulty_is_legendary)
        (object_create "elite_shield1")
    )
    (wake lnc_boarding_control)
    (wake lnc_shutter_control)
    (wake lnc_bombingrun_control)
    (wake lnc_zoneset_control)
    (wake lnc_light_control)
    (wake lnc_trooper_salute_control)
    (wake lnc_trooper_control)
    (set b_lnc_started true)
    (wake md_lnc_car_get_to_sabre)
    (sleep_until (volume_test_players "tv_objcon_lnc_010") 1)
    (if debug
        (print "lnc: objective control 010")
    )
    (set s_objcon_lnc 10)
    (bring_spartans_forward 6)
    (sleep_until (volume_test_players "tv_objcon_lnc_020") 1)
    (if debug
        (print "lnc: objective control 020")
    )
    (set s_objcon_lnc 20)
    (sleep_until (volume_test_players "tv_objcon_lnc_030") 1)
    (if debug
        (print "lnc: objective control 030")
    )
    (set s_objcon_lnc 30)
    (sleep_until (volume_test_players "tv_objcon_lnc_040") 1)
    (if debug
        (print "lnc: objective control 040")
    )
    (set s_objcon_lnc 40)
    (sleep_until (volume_test_players "tv_objcon_lnc_050") 1)
    (if debug
        (print "lnc: objective control 050")
    )
    (set s_objcon_lnc 50)
)

(script dormant void lnc_zoneset_control
    (sleep_until (>= (current_zone_set) s_zoneindex_silo) 1)
    (sleep 1)
    (if debug
        (print "shutting off set_facility_001_005_010 triggers")
    )
    (zone_set_trigger_volume_enable "zone_set:set_facility_001_005_010" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_facility_001_005_010" false)
)

(script dormant void lnc_bombingrun_control
    (sleep_until (> (device_get_position "dm_slo_shutter") 0.47) 1)
    (if debug
        (print "silo bombing run...")
    )
    (start_lnc_bombingrun)
)

(script static void lnc_setup_silo
    (object_create "sc_slo_sabre")
    (object_cannot_take_damage "sc_slo_sabre")
    (object_create_folder "sc_lnc")
)

(script dormant void lnc_trooper_salute_control
    (sleep_until (> (device_get_position "dm_slo_shutter") 0) 1)
    (ai_place "sq_unsc_lnc_salute0")
    (thespian_performance_activate "thespian_lnc_salute0")
    (thespian_performance_activate "thespian_lnc_salute1")
)

(script dormant void lnc_trooper_catwalk_control
    (sleep_until (> (device_get_position "dm_slo_shutter") 0) 1)
    (ai_place "sq_unsc_lnc_catwalk0")
    (thespian_performance_activate "thespian_lnc_catwalk0")
)

(script dormant void lnc_boarding_control
    (sleep_until (volume_test_players "tv_lnc_platform") 1)
    (if debug
        (print "launch: player has entered sabre")
    )
    (set b_lnc_player_in_sabre true)
    (device_set_power "c_launch" 0)
    (f_unblip_flag "fl_launch")
    (mus_stop mus_04)
    (cinematic_enter "045la_blastoff" true)
    (sleep 31)
    (set b_lnc_start_cleanup true)
    (lnc_bombingrun_kill)
    (ai_erase_all)
    (teleport_players "fl_lnc_cinematic0" "fl_lnc_cinematic1" "fl_lnc_cinematic2" "fl_lnc_cinematic3")
    (kill_volume_disable "kill_silo")
    (object_destroy "sc_slo_sabre")
    (object_destroy_folder "sc_lnc_lights")
    (object_destroy "sc_slo_sabre")
    (object_destroy_folder "dm_bch_pods")
    (object_destroy_folder "sc_bch")
    (object_destroy_folder "cr_beach")
    (object_destroy_folder "sc_lnc")
    (object_destroy "murderer")
    (object_destroy_folder "wp_fac")
    (object_destroy_folder "sc_fac")
    (object_destroy_folder "seraph_impact")
    (ai_erase "gr_unsc_spartans")
    (ai_erase "gr_unsc_bch")
    (ai_erase "gr_cov_bch")
    (ai_erase "gr_command_allies")
    (ai_erase "gr_command_cov")
    (ai_erase "gr_launch_allies")
    (ai_erase "gr_launch_cov")
    (garbage_collect_unsafe)
    (if debug
        (print "playing launch cinematic...")
    )
    (switch_zone_set "set_launch_010_015_019")
    (cinematic_show_letterbox_immediate true)
    (cinematic_run_script_by_name "045la_blastoff")
    (if debug
        (print "launch: done with cinematic!")
    )
    (if debug
        (print "switching to wafercombat")
    )
    (switch_zone_set "set_wafercombat_030")
    (sleep 5)
    (set b_lnc_completed true)
)

(script command_script void cs_lnc_carter_post
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_shoot true)
    (cs_walk true)
    (cs_push_stance "alert")
    (sleep 60)
    (cs_enable_moving true)
    (sleep_until 
        (begin
            (sleep_until (> (objects_distance_to_flag (ai_actors ai_carter) "fl_lnc_carter") 2))
            (cs_go_to "ps_thespian_slo_control/carter_dest")
            (cs_face true "ps_thespian_slo_control/sabre")
            (sleep 60)
            (cs_face false "ps_thespian_slo_control/sabre")
            false
        )
        1
    )
)

(script command_script void cs_lnc_kat_post
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_shoot true)
    (cs_walk true)
    (cs_push_stance "alert")
    (sleep 60)
    (cs_enable_moving true)
    (sleep_until 
        (begin
            (sleep_until (> (objects_distance_to_flag (ai_actors ai_kat) "fl_lnc_kat") 2))
            (cs_go_to "ps_thespian_slo_control/kat_dest")
            (cs_face true "ps_thespian_slo_control/sabre")
            (sleep 60)
            (cs_face false "ps_thespian_slo_control/sabre")
            false
        )
        1
    )
)

(script dormant void lnc_shutter_control
    (sleep_until (>= s_objcon_lnc 20))
    (sleep (random_range 30 90))
    (lnc_setup_silo)
    (sleep 1)
    (mus_stop mus_03)
    (mus_start mus_04)
    (device_set_position "dm_slo_shutter" 1)
    (sleep (random_range (* 30 6) (* 30 9)))
    (device_set_power "dm_fac_cc_exit" 1)
    (device_set_position "dm_fac_cc_exit" 1)
)

(script static void lnc_spartan_spawn
    (if debug
        (print "::: spawning control room spartans")
    )
    (ai_erase "gr_unsc_spartans")
    (ai_place "sq_carter/fac_cc")
    (ai_place "sq_jorge/fac_cc")
    (ai_place "sq_kat/fac_cc")
    (sleep 1)
    (set ai_carter "sq_carter")
    (set ai_jorge "sq_jorge")
    (set ai_kat "sq_kat")
    (ai_cannot_die ai_carter true)
    (ai_cannot_die ai_jorge true)
    (ai_cannot_die ai_kat true)
)

(script static void lnc_spartan_setup
    (if debug
        (print "::: spartans now in obj_unsc_lnc")
    )
    (ai_set_objective "gr_unsc_spartans" "obj_unsc_lnc")
)

(script dormant void lnc_trooper_control
    (sleep_until (> (device_get_position "dm_slo_shutter") 0) 1)
    (if debug
        (print "spawning catwalk troopers")
    )
    (ai_place "sq_unsc_lnc_pelican0")
    (ai_place "sq_unsc_lnc_catwalk0")
    (object_create "murderer")
    (ai_place "sq_unsc_lnc_trophyhunter0")
    (ai_place "sq_unsc_lnc_evac0")
)

(script command_script void cs_lnc_catwalk_trooper0
    (cs_push_stance "alert")
    (sleep_until (>= (device_get_position "dm_slo_shutter") 0.3) 1)
    (cs_custom_animation "objects\characters\marine\marine" "global_alert:rifle:survey_environment" true)
    (sleep (unit_get_custom_animation_time (ai_get_unit ai_current_actor)))
    (sleep_until b_lnc_bombing_started 1)
    (sleep (random_range 3 10))
    (cs_custom_animation "objects\characters\marine\marine" "global_alert:rifle:off_balance:var2" true)
    (sleep (unit_get_custom_animation_time (ai_get_unit ai_current_actor)))
    (unit_stop_custom_animation (ai_get_unit ai_current_actor))
    (sleep (random_range 5 10))
    (cs_push_stance "none")
    (cs_force_combat_status 3)
    (cs_go_by "ps_thespian_slo/catwalk_left_exit1" "ps_thespian_slo/catwalk_left_exit1" 1)
    (cs_go_by "ps_thespian_slo/catwalk_left_erase" "ps_thespian_slo/catwalk_left_erase" 1)
    (ai_vehicle_enter ai_current_actor (ai_vehicle_get_from_spawn_point "sq_unsc_lnc_pelican0/pilot") 25)
)

(script command_script void cs_lnc_catwalk_trooper1
    (cs_push_stance "alert")
    (sleep_until (>= (device_get_position "dm_slo_shutter") 0.4) 1)
    (cs_custom_animation "objects\characters\marine\marine" "alert:rifle:posing_var1" true)
    (sleep (unit_get_custom_animation_time (ai_get_unit ai_current_actor)))
    (sleep_until b_lnc_bombing_started 1)
    (sleep (random_range 3 10))
    (cs_custom_animation "objects\characters\marine\marine" "global_alert:rifle:off_balance:var1" true)
    (sleep (unit_get_custom_animation_time (ai_get_unit ai_current_actor)))
    (unit_stop_custom_animation (ai_get_unit ai_current_actor))
    (sleep (random_range 5 10))
    (cs_push_stance "none")
    (cs_force_combat_status 3)
    (cs_go_by "ps_thespian_slo/catwalk_left_exit1" "ps_thespian_slo/catwalk_left_exit1")
    (cs_go_by "ps_thespian_slo/catwalk_left_erase" "ps_thespian_slo/catwalk_left_erase")
    (ai_vehicle_enter ai_current_actor (ai_vehicle_get_from_spawn_point "sq_unsc_lnc_pelican0/pilot") 25)
)

(script command_script void cs_lnc_catwalk_trooper2
    (cs_push_stance "alert")
    (sleep_until (>= (device_get_position "dm_slo_shutter") 0.6) 1)
    (cs_walk true)
    (cs_go_to "ps_thespian_slo/catwalk_trooper2")
    (sleep_until b_lnc_bombing_started 1)
    (sleep (random_range 3 10))
    (cs_custom_animation "objects\characters\marine\marine" "global_alert:rifle:off_balance:var1" true)
    (sleep (unit_get_custom_animation_time (ai_get_unit ai_current_actor)))
    (unit_stop_custom_animation (ai_get_unit ai_current_actor))
    (sleep (random_range 5 10))
    (cs_push_stance "none")
    (cs_force_combat_status 3)
    (cs_go_by "ps_thespian_slo/catwalk_right_exit1" "ps_thespian_slo/catwalk_right_exit1")
    (cs_go_by "ps_thespian_slo/catwalk_right_erase" "ps_thespian_slo/catwalk_right_erase")
    (ai_vehicle_enter ai_current_actor (ai_vehicle_get_from_spawn_point "sq_unsc_lnc_pelican0/pilot") 26)
)

(script command_script void cs_lnc_trooper_evac_left
    (sleep 120)
    (cs_go_by "ps_thespian_slo/catwalk_left_erase" "ps_thespian_slo/catwalk_left_erase")
    (ai_vehicle_enter ai_current_actor (ai_vehicle_get_from_spawn_point "sq_unsc_lnc_pelican0/pilot") 25)
)

(script command_script void cs_lnc_trooper_evac_right
    (cs_go_by "ps_thespian_slo/catwalk_right_erase" "ps_thespian_slo/catwalk_right_erase")
    (ai_vehicle_enter ai_current_actor (ai_vehicle_get_from_spawn_point "sq_unsc_lnc_pelican0/pilot") 26)
)

(script command_script void cs_lnc_trooper_trophyhunter
    (cs_push_stance "alert")
    (cs_enable_moving false)
    (cs_enable_looking false)
    (sleep_until (and (<= (objects_distance_to_object (players) (ai_get_object ai_current_actor)) 5.5) (> (device_get_position "dm_fac_cc_exit") 0.5)) 1)
    (sleep (random_range 10 15))
    (cs_custom_animation "objects\characters\marine\marine" "global_alert:rifle:kick_enemybody" true)
    (sleep (unit_get_custom_animation_time (ai_get_unit ai_current_actor)))
    (unit_stop_custom_animation (ai_get_unit ai_current_actor))
)

(script command_script void cs_lnc_trooper_evac_test
    (ai_vehicle_enter ai_current_actor (ai_vehicle_get_from_spawn_point "sq_unsc_lnc_pelican0/pilot") 27)
)

(script command_script void cs_lnc_pelican
    (cs_ignore_obstacles true)
    (vehicle_set_player_interaction (ai_vehicle_get ai_current_actor) none false false)
    (vehicle_hover (ai_vehicle_get ai_current_actor) true)
    (unit_open (ai_vehicle_get ai_current_actor))
    (sleep (* 30 47))
    (vehicle_hover (ai_vehicle_get ai_current_actor) false)
    (cs_fly_by "ps_lnc_pelican/exit0")
    (unit_close (ai_vehicle_get ai_current_actor))
    (cs_fly_by "ps_lnc_pelican/exit1")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 180)
    (cs_fly_by "ps_lnc_pelican/erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_lnc_tr_exit0
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "ps_lnc_troopers/exit0")
    (sleep_forever)
)

(script command_script void cs_lnc_tr_exit1
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "ps_lnc_troopers/exit1")
    (sleep_forever)
)

(script command_script void cs_lnc_jorge_p0
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "ps_lnc_jorge/p0")
    (cs_face_player true)
    (sleep_forever)
)

(script command_script void cs_lnc_jorge_p1
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "ps_lnc_jorge/p1")
    (cs_face_player true)
    (sleep_forever)
)

(script command_script void cs_lnc_jorge_p2
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "ps_lnc_jorge/p2")
    (cs_face_player true)
    (sleep_forever)
)

(script dormant void waf_encounter
    (if debug
        (print "encounter: wafer")
    )
    (set s_current_encounter s_waf_encounter_index)
    (data_mine_set_mission_segment "wafer")
    (game_insertion_point_unlock 1)
    (sound_disable_acoustic_palette "m45_ext_int")
    (sound_disable_acoustic_palette "m45_base_controlroom")
    (sound_looping_start "sound\levels\solo\m45\space_loop\space_loop" none 1)
    (sound_disable_acoustic_palette "space_filter_loop")
    (physics_set_gravity 0)
    (zone_set_trigger_volume_enable "zone_set:set_facility_001_005_010" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_facility_001_005_010" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_silo_005_010_015" false)
    (zone_set_trigger_volume_enable "zone_set:set_silo_005_010_015" false)
    (soft_ceiling_enable "corvette" false)
    (object_create_folder "sc_waf_bays")
    (object_create_folder "cr_waf")
    (waf_savannah_dock)
    (sfx_attach_chatter)
    (create_player_sabres "v_wafer_sabre_player0" "v_wafer_sabre_player1" "v_wafer_sabre_player2" "v_wafer_sabre_player3")
    (load_player_sabres "v_wafer_sabre_player0" "v_wafer_sabre_player1" "v_wafer_sabre_player2" "v_wafer_sabre_player3")
    (set_sabre_respawns true)
    (set player_respawn_check_airborne false)
    (wake waf_ejection_killer)
    (ai_place "sq_unsc_waf_sbr_start")
    (ai_set_clump "sq_unsc_waf_sbr_start" clump_sabres)
    (ai_place "sq_unsc_waf_aa")
    (ai_set_clump "sq_unsc_waf_aa" clump_savannah_aa)
    (wake waf_garbage_collector)
    (wake waf_savannah_engine_control)
    (wake sabre_seat_exit_control)
    (wake waf_save_loop)
    (set b_waf_started true)
    (replenish_players)
    (sleep 30)
    (cinematic_exit "045la_blastoff" true)
    (sleep 60)
    (game_save_immediate)
    (wake show_chapter_title_wafer)
    (md_waf_hol_intro)
    (md_sabre_tutorial_start)
    (if (or (difficulty_is_heroic_or_higher) (= (game_insertion_point_get) 1))
        (begin
            (if debug
                (print "-=-=- skipping sabre tutorial -=-=-")
            )
            (set b_saber_tutorial_complete true)
            (set b_waf_sabre_tut_skipped true)
        )
        (wake sabre_tutorial)
    )
    (sleep_until b_saber_tutorial_complete)
    (if (= b_waf_sabre_tut_skipped true)
        (sleep_until (>= (device_get_position "dm_savannah_wafer") 0.75))
        (sleep_until (>= (device_get_position "dm_savannah_wafer") 0.95))
    )
    (waf_replenish_sabres)
    (md_waf_jor_contacts)
    (wake show_objective_wafer_defense)
    (set b_waf_attempt_save true)
    (sleep (* 30 2))
    (f_blip_flag "fl_wafer_signatures" blip_recon)
    (show_fighter_warning)
    (sleep (* 30 5))
    (garbage_collect_now)
    (waf_banshee_spawn_immediate 15)
    (sleep (* 30 2))
    (f_unblip_flag "fl_wafer_signatures")
    (clear_fighter_warning)
    (wake md_waf_an9_batteries_at_56)
    (sleep_until (<= (ai_living_count "gr_cov_waf") 3))
    (waf_blip_living_covenant)
    (sleep_until (<= (ai_living_count "gr_cov_waf") 0))
    (set b_waf_attempt_save true)
    (sleep (random_range 60 90))
    (waf_replenish_sabres)
    (wake md_waf_an9_warning_fighter)
    (f_blip_flag "fl_wafer_signatures" blip_recon)
    (show_fighter_warning)
    (sleep (* 30 5))
    (garbage_collect_now)
    (waf_seraph_spawn_immediate 4)
    (sleep (* 30 2))
    (f_unblip_flag "fl_wafer_signatures")
    (clear_fighter_warning)
    (wake show_tutorial_seraph_shields)
    (wake md_waf_an9_batteries_at_79)
    (sleep_until (<= (ai_living_count "gr_cov_waf") 3))
    (waf_blip_living_covenant)
    (sleep_until (<= (ai_living_count "gr_cov_waf") 0))
    (sleep (random_range 30 95))
    (wake show_objective_wafer_guns_online)
    (wake md_waf_sav_skies_clear)
    (waf_replenish_sabres)
    (set b_waf_attempt_save true)
    (wake md_waf_an9_station_defenses_online)
    (sleep (* 30 13))
    (if debug
        (print "waf: mega wave 1 incoming...")
    )
    (f_blip_flag "fl_wafer_signatures" blip_recon)
    (show_fighter_warning)
    (sleep (* 30 5))
    (if (or (difficulty_is_heroic_or_higher) (>= (game_coop_player_count) 2))
        (begin
            (if (difficulty_is_legendary)
                (begin
                    (if debug
                        (print "spawning legendary wave")
                    )
                    (waf_seraph_spawn_immediate 8)
                    (waf_banshee_spawn_immediate 18)
                )
                (begin
                    (if debug
                        (print "spawning heroic or coop wave")
                    )
                    (waf_seraph_spawn_immediate 6)
                    (waf_banshee_spawn_immediate 20)
                )
            )
        )
        (begin
            (if debug
                (print "spawning normal wave")
            )
            (waf_seraph_spawn_immediate 4)
            (waf_banshee_spawn_immediate 22)
        )
    )
    (sleep (* 30 2))
    (f_unblip_flag "fl_wafer_signatures")
    (clear_fighter_warning)
    (sleep_until (<= (ai_living_count "gr_cov_waf") 6))
    (sleep_until (<= (ai_living_count "gr_cov_waf") 4))
    (if debug
        (print "waf: bringing in phantoms...")
    )
    (wake waf_phantom_wave_control)
    (wake waf_final_fighter_wave_control)
    (wake waf_phantom_wave_save)
    (sleep_until (and (<= (ai_living_count "gr_cov_waf_phantom") 0) (> (ai_spawn_count "gr_cov_waf_phantom") 0) (= b_waf_final_fighters_spawned true)) 30 (* 30 300))
    (if (> (ai_living_count "gr_cov_waf") 0)
        (cs_run_command_script "gr_cov_waf" cs_waf_warpout)
    )
    (if debug
        (print "waf: waves complete...")
    )
    (sleep_until (<= (ai_living_count "gr_cov_waf") 0) 30 (* 30 30))
    (ai_erase "gr_cov_waf")
    (sleep 90)
    (set b_waf_completed true)
)

(script dormant void waf_save_loop
    (branch (= b_waf_completed true) (branch_abort))
    (sleep_until 
        (begin
            (sleep_until (= b_waf_attempt_save true))
            (game_save_no_timeout)
            (set b_waf_attempt_save false)
            false
        )
        1
    )
)

(script dormant void waf_ejection_killer
    (sleep 30)
    (sleep_until 
        (begin
            (ejection_kill_player player0)
            (ejection_kill_player player1)
            (ejection_kill_player player2)
            (ejection_kill_player player3)
            (sleep 30)
            false
        )
        1
    )
)

(script static void (ejection_kill_player (player p))
    (if (and (player_is_in_game p) (not (unit_in_vehicle p)))
        (begin
            (if debug
                (print "trying to kill a player... delaying in case it's actually ok")
            )
            (sleep 5)
            (if (and (player_is_in_game p) (not (unit_in_vehicle p)))
                (unit_kill p)
            )
        )
    )
)

(script dormant void waf_phantom_wave_save
    (sleep_until (>= (ai_spawn_count "gr_cov_waf_phantom") 5))
    (sleep_until (<= (ai_living_count "gr_cov_waf_phantom") 3))
    (game_save_no_timeout)
)

(script command_script void cs_waf_aa_hold
    (cs_enable_targeting false)
    (cs_enable_looking false)
    (cs_shoot false)
    (sleep_forever)
)

(script dormant void waf_savannah_engine_control
    (object_function_set 0 0.2)
    (sleep_until (>= (device_get_position "dm_savannah_wafer") 0.8))
    (object_function_set 0 0.01)
)

(script dormant void waf_final_fighter_wave_control
    (sleep (random_range (* 30 20) (* 30 30)))
    (if (or (difficulty_is_heroic_or_higher) (game_is_cooperative))
        (begin
            (waf_banshee_spawn_immediate 7)
            (waf_seraph_spawn_immediate 3)
        )
        (begin
            (waf_banshee_spawn_immediate 6)
            (waf_seraph_spawn_immediate 1)
        )
    )
    (set b_waf_final_fighters_spawned true)
)

(script dormant void waf_phantom_wave_control
    (wake md_waf_an9_gunboats_in_position)
    (wake md_waf_phantom_torpedoes_away)
    (wake waf_phantom_blip)
    (set b_waf_attempt_save true)
    (md_waf_incoming_phantoms_inbound)
    (sleep (random_range 100 150))
    (wake waf_phantom_spawn_control)
    (sleep_until (script_finished "waf_phantom_spawn_control"))
    (sleep (random_range 30 60))
    (md_waf_an9_phantoms_arrived)
    (f_blip_object (ai_vehicle_get "sq_cov_waf_ph_top_left/pilot") 14)
    (f_blip_object (ai_vehicle_get "sq_cov_waf_ph_top_mid/pilot") 14)
    (f_blip_object (ai_vehicle_get "sq_cov_waf_ph_top_right/pilot") 14)
    (f_blip_object (ai_vehicle_get "sq_cov_waf_ph_bottom_right/pilot") 14)
    (f_blip_object (ai_vehicle_get "sq_cov_waf_ph_bottom_left/pilot") 14)
    (set b_waf_attempt_save true)
    (sleep_until (and (f_ai_is_defeated "sq_cov_waf_ph_top_left") (f_ai_is_defeated "sq_cov_waf_ph_top_right") (f_ai_is_defeated "sq_cov_waf_ph_top_mid") (f_ai_is_defeated "sq_cov_waf_ph_bottom_right") (f_ai_is_defeated "sq_cov_waf_ph_bottom_left")))
    (set b_waf_phantoms_defeated true)
)

(script dormant void waf_phantom_spawn_control
    (begin_random
        (begin
            (ai_place "sq_cov_waf_ph_top_left")
            (ai_set_clump "sq_cov_waf_ph_top_left" clump_seraphs)
            (sleep (random_range 20 45))
        )
        (begin
            (ai_place "sq_cov_waf_ph_top_right")
            (ai_set_clump "sq_cov_waf_ph_top_right" clump_seraphs)
            (sleep (random_range 20 45))
        )
        (begin
            (ai_place "sq_cov_waf_ph_top_mid")
            (ai_set_clump "sq_cov_waf_ph_top_mid" clump_seraphs)
            (sleep (random_range 20 45))
        )
        (begin
            (ai_place "sq_cov_waf_ph_bottom_left")
            (ai_set_clump "sq_cov_waf_ph_bottom_left" clump_seraphs)
            (sleep (random_range 20 45))
        )
        (begin
            (ai_place "sq_cov_waf_ph_bottom_right")
            (ai_set_clump "sq_cov_waf_ph_bottom_right" clump_seraphs)
            (sleep (random_range 20 45))
        )
    )
)

(script dormant void waf_phantom_blip
    (sleep 60)
    (begin_random
        (f_callout_and_hold_flag "fl_wafer_phantom_top_left" blip_hostile_vehicle)
        (f_callout_and_hold_flag "fl_wafer_phantom_top_mid" blip_hostile_vehicle)
        (f_callout_and_hold_flag "fl_wafer_phantom_top_right" blip_hostile_vehicle)
        (f_callout_and_hold_flag "fl_wafer_phantom_bottom_right" blip_hostile_vehicle)
        (f_callout_and_hold_flag "fl_wafer_phantom_bottom_left" blip_hostile_vehicle)
    )
)

(script command_script void cs_waf_ph_top_left
    (cs_stack_command_script ai_current_actor cs_phantom_warp)
    (sleep 1)
    (if (not b_waf_ph_missile_armageddon)
        (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_hold)
    )
    (f_unblip_flag "fl_wafer_phantom_top_left")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed r_phantom_approach_speed)
    (cs_fly_to_and_face "ps_waf_phantoms/firingpos_top_left" "ps_waf_phantoms/target_top_left_1" r_waf_ph_firingpos_threshold)
    (if debug
        (print "waf: top left phantom has reached its firing position...")
    )
    (set b_waf_phantoms_in_position true)
    (sleep (random_range 120 150))
    (if (not b_waf_ph_missile_armageddon)
        (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_attack_top_left)
    )
    (sleep_until 
        (begin
            (cs_fly_to_and_face "ps_waf_phantoms/firingpos_top_left" "ps_waf_phantoms/aim_mid_left" r_waf_ph_firingpos_threshold)
            (sleep (random_range 300 400))
            false
        )
        1
    )
)

(script command_script void cs_waf_phg_attack_top_left
    (if debug
        (print "waf: phantom torpodoes incoming to top left aa gun...")
    )
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (set b_waf_phantom_torpedoes_away true)
    (cs_shoot_point true "ps_waf_phantoms/target_top_left_1")
    (sleep_forever)
)

(script command_script void cs_waf_ph_top_mid
    (cs_stack_command_script ai_current_actor cs_phantom_warp)
    (sleep 1)
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_hold)
    (f_unblip_flag "fl_wafer_phantom_top_mid")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed r_phantom_approach_speed)
    (cs_fly_to_and_face "ps_waf_phantoms/firingpos_top_mid" "ps_waf_phantoms/target_top_mid_1" r_waf_ph_firingpos_threshold)
    (if debug
        (print "waf: top mid phantom has reached its firing position...")
    )
    (set b_waf_phantoms_in_position true)
    (sleep (random_range 120 150))
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_attack_top_mid)
    (sleep_until 
        (begin
            (cs_fly_to_and_face "ps_waf_phantoms/firingpos_top_mid" "ps_waf_phantoms/aim_mid" r_waf_ph_firingpos_threshold)
            (sleep (random_range 300 400))
            false
        )
        1
    )
)

(script command_script void cs_waf_phg_attack_top_mid
    (if debug
        (print "waf: phantom torpodoes incoming to top mid aa gun...")
    )
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (set b_waf_phantom_torpedoes_away true)
    (cs_shoot_point true "ps_waf_phantoms/target_top_mid_1")
    (sleep_forever)
)

(script command_script void cs_waf_ph_top_right
    (cs_stack_command_script ai_current_actor cs_phantom_warp)
    (sleep 1)
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_hold)
    (f_unblip_flag "fl_wafer_phantom_top_right")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed r_phantom_approach_speed)
    (cs_fly_to_and_face "ps_waf_phantoms/firingpos_top_right" "ps_waf_phantoms/target_top_right_1" r_waf_ph_firingpos_threshold)
    (if debug
        (print "waf: top right phantom has reached its firing position...")
    )
    (set b_waf_phantoms_in_position true)
    (sleep (random_range 120 150))
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_attack_top_right)
    (sleep_until 
        (begin
            (cs_fly_to_and_face "ps_waf_phantoms/firingpos_top_right" "ps_waf_phantoms/aim_mid" r_waf_ph_firingpos_threshold)
            (sleep (random_range 300 400))
            false
        )
        1
    )
)

(script command_script void cs_waf_phg_hold
    (cs_aim true "ps_waf_phantoms/aim_mid")
    (sleep_forever)
)

(script command_script void cs_waf_phg_attack_top_right
    (if debug
        (print "waf: phantom torpodoes incoming to top right aa gun...")
    )
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (set b_waf_phantom_torpedoes_away true)
    (cs_shoot_point true "ps_waf_phantoms/target_top_right_1")
    (sleep_forever)
)

(script command_script void cs_waf_ph_bottom_left
    (cs_stack_command_script ai_current_actor cs_phantom_warp)
    (sleep 1)
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_hold)
    (f_unblip_flag "fl_wafer_phantom_bottom_left")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed r_phantom_approach_speed)
    (cs_fly_to_and_face "ps_waf_phantoms/firingpos_bottom_left" "ps_waf_phantoms/target_bottom_left_1" r_waf_ph_firingpos_threshold)
    (if debug
        (print "waf: bottom left phantom has reached its firing position...")
    )
    (set b_waf_phantoms_in_position true)
    (sleep (random_range 120 150))
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_attack_bottom_left)
    (sleep_forever)
)

(script command_script void cs_waf_phg_attack_bottom_left
    (if debug
        (print "waf: phantom torpodoes incoming to bottom left aa gun...")
    )
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (set b_waf_phantom_torpedoes_away true)
    (cs_shoot_point true "ps_waf_phantoms/target_bottom_left_1")
    (sleep_forever)
)

(script command_script void cs_waf_ph_bottom_right
    (cs_stack_command_script ai_current_actor cs_phantom_warp)
    (sleep 1)
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_hold)
    (f_unblip_flag "fl_wafer_phantom_bottom_right")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed r_phantom_approach_speed)
    (cs_fly_to_and_face "ps_waf_phantoms/firingpos_bottom_right" "ps_waf_phantoms/target_bottom_right_1" r_waf_ph_firingpos_threshold)
    (if debug
        (print "waf: bottom right phantom has reached its firing position...")
    )
    (set b_waf_phantoms_in_position true)
    (sleep (random_range 120 150))
    (cs_run_command_script (ai_get_turret_ai ai_current_squad 0) cs_waf_phg_attack_bottom_right)
    (sleep_until 
        (begin
            (cs_fly_to_and_face "ps_waf_phantoms/firingpos_bottom_right" "ps_waf_phantoms/target_bottom_right_1" r_waf_ph_firingpos_threshold)
            (sleep (random_range 300 400))
            false
        )
        1
    )
)

(script command_script void cs_waf_phg_attack_bottom_right
    (if debug
        (print "waf: phantom torpodoes incoming to bottom right aa gun...")
    )
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (set b_waf_phantom_torpedoes_away true)
    (cs_shoot_point true "ps_waf_phantoms/target_bottom_right_1")
    (sleep_forever)
)

(script command_script void cs_phantom_gunner_hold
    (if debug
        (print "waf: phantom chin gunner holding...")
    )
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (sleep_forever)
)

(script command_script void cs_waf_warpout
    (cs_vehicle_speed 1)
    (begin_random_count
        1
        (begin
            (cs_fly_by "ps_waf_warpout/warpout0_0")
            (cs_fly_by "ps_waf_warpout/warpout0_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout1_0")
            (cs_fly_by "ps_waf_warpout/warpout1_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout2_0")
            (cs_fly_by "ps_waf_warpout/warpout2_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout3_0")
            (cs_fly_by "ps_waf_warpout/warpout3_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout4_0")
            (cs_fly_by "ps_waf_warpout/warpout4_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout5_0")
            (cs_fly_by "ps_waf_warpout/warpout5_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout6_0")
            (cs_fly_by "ps_waf_warpout/warpout6_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout7_0")
            (cs_fly_by "ps_waf_warpout/warpout7_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout8_0")
            (cs_fly_by "ps_waf_warpout/warpout8_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout9_0")
            (cs_fly_by "ps_waf_warpout/warpout9_1")
        )
        (begin
            (cs_fly_by "ps_waf_warpout/warpout10_0")
            (cs_fly_by "ps_waf_warpout/warpout10_1")
        )
    )
    (effect_new_on_object_marker fx_warp_flash (ai_vehicle_get ai_current_actor) "fx_warp")
    (object_set_velocity (ai_vehicle_get ai_current_actor) 1000)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 20)
    (sleep 20)
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script static void waf_replenish_sabres
    (waf_sabre_spawn_immediate (- s_waf_min_sabres (ai_living_count "gr_unsc_waf_sabres")))
)

(script static void (waf_banshee_spawn_immediate (short count))
    (ai_designer_clump_perception_range 600)
    (sleep_until (<= s_waf_banshee_spawn_remaining 0) 1)
    (set s_waf_banshee_spawn_remaining count)
    (sleep_until 
        (begin
            (if (>= s_waf_banshee_spawn_remaining 7)
                (begin
                    (waf_spawn_banshee_center_7)
                    (set s_waf_banshee_spawn_remaining (- s_waf_banshee_spawn_remaining 7))
                )
            )
            (if (>= s_waf_banshee_spawn_remaining 5)
                (begin
                    (waf_spawn_banshee_center_5)
                    (set s_waf_banshee_spawn_remaining (- s_waf_banshee_spawn_remaining 5))
                )
            )
            (if (>= s_waf_banshee_spawn_remaining 3)
                (begin
                    (waf_spawn_banshee_center_3)
                    (set s_waf_banshee_spawn_remaining (- s_waf_banshee_spawn_remaining 3))
                )
            )
            (if (>= s_waf_banshee_spawn_remaining 2)
                (begin
                    (waf_spawn_banshee_center_2)
                    (set s_waf_banshee_spawn_remaining (- s_waf_banshee_spawn_remaining 2))
                )
            )
            (if (>= s_waf_banshee_spawn_remaining 1)
                (begin
                    (waf_spawn_banshee_center_1)
                    (set s_waf_banshee_spawn_remaining (- s_waf_banshee_spawn_remaining 1))
                )
            )
            (<= s_waf_banshee_spawn_remaining 0)
        )
        1
    )
)

(script static void waf_spawn_banshee_center_7
    (if debug
        (print "waf: spawning center banshees (count 7)...")
    )
    (ai_place "sq_cov_waf_bsh_center7/banshee0")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center7/banshee1")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center7/banshee2")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center7/banshee3")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center7/banshee4")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center7/banshee5")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center7/banshee6")
    (ai_set_clump "sq_cov_waf_bsh_center7" clump_banshees)
)

(script static void waf_spawn_banshee_center_5
    (if debug
        (print "waf: spawning center banshees (count 5)...")
    )
    (ai_place "sq_cov_waf_bsh_center5/banshee0")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center5/banshee1")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center5/banshee2")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center5/banshee3")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center5/banshee4")
    (ai_set_clump "sq_cov_waf_bsh_center5" clump_banshees)
)

(script static void waf_spawn_banshee_center_3
    (if debug
        (print "waf: spawning center banshees (count 3)...")
    )
    (ai_place "sq_cov_waf_bsh_center3/banshee0")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center3/banshee1")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center3/banshee2")
    (ai_set_clump "sq_cov_waf_bsh_center3" clump_banshees)
)

(script static void waf_spawn_banshee_center_2
    (if debug
        (print "waf: spawning center banshees (count 2)...")
    )
    (ai_place "sq_cov_waf_bsh_center2/banshee0")
    (banshee_warp_stagger)
    (ai_place "sq_cov_waf_bsh_center2/banshee1")
    (ai_set_clump "sq_cov_waf_bsh_center2" clump_banshees)
)

(script static void waf_spawn_banshee_center_1
    (if debug
        (print "waf: spawning center banshees (count 1)...")
    )
    (ai_place "sq_cov_waf_bsh_center1/banshee0")
    (ai_set_clump "sq_cov_waf_bsh_center2" clump_banshees)
)

(script static void (waf_seraph_spawn_immediate (short count))
    (ai_designer_clump_perception_range 600)
    (sleep_until (<= s_waf_seraph_spawn_remaining 0) 1)
    (set s_waf_seraph_spawn_remaining count)
    (sleep_until 
        (begin
            (if (>= s_waf_seraph_spawn_remaining 3)
                (begin
                    (waf_spawn_seraph_center_3)
                    (set s_waf_seraph_spawn_remaining (- s_waf_seraph_spawn_remaining 3))
                )
            )
            (if (>= s_waf_seraph_spawn_remaining 2)
                (begin
                    (waf_spawn_seraph_center_2)
                    (set s_waf_seraph_spawn_remaining (- s_waf_seraph_spawn_remaining 2))
                )
            )
            (if (>= s_waf_seraph_spawn_remaining 1)
                (begin
                    (waf_spawn_seraph_center_1)
                    (set s_waf_seraph_spawn_remaining (- s_waf_seraph_spawn_remaining 1))
                )
            )
            (<= s_waf_seraph_spawn_remaining 0)
        )
        1
    )
)

(script static void waf_spawn_seraph_center_3
    (if debug
        (print "waf: spawning center seraphs (count 3)...")
    )
    (ai_place "sq_cov_waf_sph_center3/seraph0")
    (seraph_warp_stagger)
    (ai_place "sq_cov_waf_sph_center3/seraph1")
    (seraph_warp_stagger)
    (ai_place "sq_cov_waf_sph_center3/seraph2")
    (ai_set_clump "sq_cov_waf_sph_center3" clump_seraphs)
)

(script static void waf_spawn_seraph_center_2
    (if debug
        (print "waf: spawning center seraphs (count 2)...")
    )
    (ai_place "sq_cov_waf_sph_center2/seraph0")
    (seraph_warp_stagger)
    (ai_place "sq_cov_waf_sph_center2/seraph1")
    (ai_set_clump "sq_cov_waf_sph_center2" clump_seraphs)
)

(script static void waf_spawn_seraph_center_1
    (if debug
        (print "waf: spawning center seraphs (count 1)...")
    )
    (ai_place "sq_cov_waf_sph_center1/seraph0")
    (ai_set_clump "sq_cov_waf_sph_center1" clump_seraphs)
)

(script static void (waf_sabre_spawn_immediate (short count))
    (ai_designer_clump_perception_range 600)
    (sleep_until (<= s_waf_sabre_spawn_remaining 0) 1)
    (set s_waf_sabre_spawn_remaining count)
    (sleep_until 
        (begin
            (if (>= s_waf_sabre_spawn_remaining 3)
                (begin
                    (waf_spawn_sabre_center_3)
                    (set s_waf_sabre_spawn_remaining (- s_waf_sabre_spawn_remaining 3))
                )
            )
            (if (>= s_waf_sabre_spawn_remaining 2)
                (begin
                    (waf_spawn_sabre_center_2)
                    (set s_waf_sabre_spawn_remaining (- s_waf_sabre_spawn_remaining 2))
                )
            )
            (if (>= s_waf_sabre_spawn_remaining 1)
                (begin
                    (waf_spawn_sabre_center_1)
                    (set s_waf_sabre_spawn_remaining (- s_waf_sabre_spawn_remaining 1))
                )
            )
            (<= s_waf_sabre_spawn_remaining 0)
        )
        1
    )
)

(script static void waf_spawn_sabre_center_3
    (if debug
        (print "waf: spawning station sabres (count 3)...")
    )
    (ai_place "sq_unsc_waf_sbr_station3/sabre0")
    (sabre_station_stagger)
    (ai_place "sq_unsc_waf_sbr_station3/sabre1")
    (sabre_station_stagger)
    (ai_place "sq_unsc_waf_sbr_station3/sabre2")
    (sabre_station_stagger)
    (ai_set_clump "sq_unsc_waf_sbr_station3" clump_sabres)
)

(script static void waf_spawn_sabre_center_2
    (if debug
        (print "waf: spawning station sabres (count 2)...")
    )
    (ai_place "sq_unsc_waf_sbr_station2/sabre0")
    (sabre_station_stagger)
    (ai_place "sq_unsc_waf_sbr_station2/sabre1")
    (sabre_station_stagger)
    (ai_set_clump "sq_unsc_waf_sbr_station2" clump_sabres)
)

(script static void waf_spawn_sabre_center_1
    (if debug
        (print "waf: spawning station sabres (count 1)...")
    )
    (ai_place "sq_unsc_waf_sbr_station1/sabre0")
    (sabre_station_stagger)
    (ai_set_clump "sq_unsc_waf_sbr_station1" clump_sabres)
)

(script static void waf_blip_living_covenant
    (if debug
        (print "blipping final covenant...")
    )
    (blip_ai_object "sq_cov_waf_bsh_center7/banshee0")
    (blip_ai_object "sq_cov_waf_bsh_center7/banshee1")
    (blip_ai_object "sq_cov_waf_bsh_center7/banshee2")
    (blip_ai_object "sq_cov_waf_bsh_center7/banshee3")
    (blip_ai_object "sq_cov_waf_bsh_center7/banshee4")
    (blip_ai_object "sq_cov_waf_bsh_center7/banshee5")
    (blip_ai_object "sq_cov_waf_bsh_center7/banshee6")
    (blip_ai_object "sq_cov_waf_bsh_center5/banshee0")
    (blip_ai_object "sq_cov_waf_bsh_center5/banshee1")
    (blip_ai_object "sq_cov_waf_bsh_center5/banshee2")
    (blip_ai_object "sq_cov_waf_bsh_center5/banshee3")
    (blip_ai_object "sq_cov_waf_bsh_center5/banshee4")
    (blip_ai_object "sq_cov_waf_bsh_center3/banshee0")
    (blip_ai_object "sq_cov_waf_bsh_center3/banshee1")
    (blip_ai_object "sq_cov_waf_bsh_center3/banshee2")
    (blip_ai_object "sq_cov_waf_bsh_center2/banshee0")
    (blip_ai_object "sq_cov_waf_bsh_center2/banshee1")
    (blip_ai_object "sq_cov_waf_bsh_center1/banshee0")
    (blip_ai_object "sq_cov_waf_sph_center3/seraph0")
    (blip_ai_object "sq_cov_waf_sph_center3/seraph1")
    (blip_ai_object "sq_cov_waf_sph_center3/seraph2")
    (blip_ai_object "sq_cov_waf_sph_center2/seraph0")
    (blip_ai_object "sq_cov_waf_sph_center2/seraph1")
    (blip_ai_object "sq_cov_waf_sph_center1/seraph0")
)

(script dormant void waf_garbage_collector
    (sleep_until 
        (begin
            (add_recycling_volume "tv_recycle_waf" 10 10)
            b_crv_started
        )
        300
    )
)

(script dormant void wrp_encounter
    (if debug
        (print "encounter: warp from wafer to corvette")
    )
    (set s_current_encounter s_wrp_encounter_index)
    (data_mine_set_mission_segment "post-wafer")
    (set b_wrp_started true)
    (md_wrp_an9_ships_neutralized)
    (wake show_objective_wafer_dock)
    (sleep 45)
    (f_blip_flag "fl_wafer_land" 21)
    (sleep_until (volume_test_players "tv_wafer_land") 1)
    (if debug
        (print "warp: player is now docking with the wafer...")
    )
    (set b_wrp_player_docks true)
    (f_unblip_flag "fl_wafer_land")
    (chud_show_screen_objective "")
    (object_cannot_take_damage "v_wafer_sabre_player0")
    (object_cannot_take_damage "v_wafer_sabre_player1")
    (object_cannot_take_damage "v_wafer_sabre_player2")
    (object_cannot_take_damage "v_wafer_sabre_player3")
    (object_cannot_take_damage "v_warp_sabre_player0")
    (object_cannot_take_damage "v_warp_sabre_player1")
    (object_cannot_take_damage "v_warp_sabre_player2")
    (object_cannot_take_damage "v_warp_sabre_player3")
    (cinematic_enter "045lb_pitstop" true)
    (sfx_detach_chatter)
    (sound_looping_stop "sound\levels\solo\m45\space_loop\space_loop.sound_looping")
    (replenish_players)
    (set u_wrp_player_sabre0 (unit_get_vehicle player0))
    (set u_wrp_player_sabre1 (unit_get_vehicle player1))
    (set u_wrp_player_sabre2 (unit_get_vehicle player2))
    (set u_wrp_player_sabre3 (unit_get_vehicle player3))
    (sleep_forever waf_ejection_killer)
    (teleport_players "fl_warp_teleport0" "fl_warp_teleport1" "fl_warp_teleport2" "fl_warp_teleport3")
    (object_destroy "dm_savannah_wafer")
    (object_destroy_folder "v_warp_sabres")
    (object_destroy_folder "v_wafer_sabres")
    (sleep 1)
    (object_destroy u_wrp_player_sabre0)
    (object_destroy u_wrp_player_sabre1)
    (object_destroy u_wrp_player_sabre2)
    (object_destroy u_wrp_player_sabre3)
    (ai_erase_all)
    (cinematic_show_letterbox_immediate true)
    (cinematic_run_script_by_name "045lb_pitstop")
    (set b_wrp_completed true)
)

(script dormant void crv_encounter
    (if debug
        (print "encounter: corvette assault")
    )
    (set s_current_encounter s_crv_encounter_index)
    (data_mine_set_mission_segment "corvette")
    (soft_ceiling_enable "corvette" true)
    (sound_looping_start "sound\levels\solo\m45\space_loop\space_loop" none 1)
    (sleep 1)
    (object_create_folder "sc_crv")
    (object_create_folder "dm_crv_engines")
    (lnos_setup)
    (setup_corvette_cannons)
    (create_player_sabres "v_corvette_sabre_player0" "v_corvette_sabre_player1" "v_corvette_sabre_player2" "v_corvette_sabre_player3")
    (load_player_sabres "v_corvette_sabre_player0" "v_corvette_sabre_player1" "v_corvette_sabre_player2" "v_corvette_sabre_player3")
    (sleep 1)
    (set_sabre_respawns true)
    (wake crv_ejection_killer)
    (ai_lod_full_detail_actors 50)
    (chud_show_screen_objective "")
    (f_hud_start_menu_obj "primary_objective_9")
    (object_create "sc_aft_top")
    (object_cannot_take_damage "sc_aft_top")
    (ai_place "sq_unsc_crv_sbr_start0")
    (ai_set_clump "gr_unsc_crv_sabres" clump_sabres)
    (ai_designer_clump_perception_range 600)
    (ai_place "sq_cov_crv_sph_start0")
    (if (or (difficulty_is_heroic_or_higher) (>= (game_coop_player_count) 2))
        (ai_place "sq_cov_crv_sph_start1")
    )
    (ai_set_clump "gr_cov_crv_seraphs" clump_seraphs)
    (if (or (difficulty_is_heroic_or_higher) (>= (game_coop_player_count) 2))
        (begin
            (if debug
                (print "placing all banshees")
            )
            (ai_place "sq_cov_crv_bsh_start0")
            (ai_place "sq_cov_crv_bsh_start1")
        )
        (begin
            (if debug
                (print "placing 10 banshees")
            )
            (ai_place "sq_cov_crv_bsh_start0/banshee0")
            (ai_place "sq_cov_crv_bsh_start0/banshee1")
            (ai_place "sq_cov_crv_bsh_start0/banshee2")
            (ai_place "sq_cov_crv_bsh_start0/banshee3")
            (ai_place "sq_cov_crv_bsh_start0/banshee4")
            (ai_place "sq_cov_crv_bsh_start1/banshee0")
            (ai_place "sq_cov_crv_bsh_start1/banshee1")
            (ai_place "sq_cov_crv_bsh_start1/banshee2")
            (ai_place "sq_cov_crv_bsh_start1/banshee3")
            (ai_place "sq_cov_crv_bsh_start1/banshee4")
        )
    )
    (ai_set_clump "sq_cov_crv_bsh_start0" clump_banshees)
    (ai_set_clump "sq_cov_crv_bsh_start1" clump_banshees)
    (if (difficulty_is_heroic_or_higher)
        (begin
            (if debug
                (print "placing all aa on corvette")
            )
            (ai_place "sq_cov_crv_aa")
        )
        (begin
            (if debug
                (print "placing half the aa on the corvette")
            )
            (ai_place "sq_cov_crv_aa/front_left0")
            (ai_place "sq_cov_crv_aa/rear_left0")
            (ai_place "sq_cov_crv_aa/front_right0")
            (ai_place "sq_cov_crv_aa/rear_right0")
        )
    )
    (sleep 1)
    (ai_disregard (ai_actors "sq_cov_crv_aa") true)
    (ai_set_clump "sq_cov_crv_aa" clump_corvette_aa)
    (if (difficulty_is_legendary)
        (begin
            (ai_place "sq_cov_crv_aa_legendary")
            (ai_disregard (ai_actors "sq_cov_crv_aa_legendary") true)
            (ai_set_clump "sq_cov_crv_aa_legendary" clump_corvette_aa)
        )
    )
    (wake crv_garbage_collector)
    (wake crv_save_loop)
    (wake crv_pod_drop_left_control)
    (wake crv_pod_drop_right_control)
    (wake crv_banshee_control)
    (wake crv_engine0_control)
    (wake crv_engine1_control)
    (wake crv_engine2_control)
    (wake crv_engine3_control)
    (wake md_crv_dot_flares)
    (wake achievement_corvette_killer)
    (wake save_crv_all_engines_damaged)
    (set b_crv_started true)
    (wake crv_savannah_setup_and_start)
    (sleep 30)
    (cinematic_exit "045lb_pitstop" true)
    (sleep 60)
    (game_save_immediate)
    (wake md_crv_sav_intro)
    (sleep_until b_crv_all_engines_damaged)
    (crv_seraph_spawn_immediate 5)
    (md_crv_ec2_reinforcements)
    (set b_crv_attempt_save true)
    (if (> (ai_living_count "gr_cov_crv") 0)
        (begin
            (sleep_until (<= (ai_living_count "gr_cov_crv") 5))
            (f_blip_ai "gr_cov_crv" 14)
            (sleep_until (<= (ai_living_count "gr_cov_crv") 0))
        )
    )
    (sleep_until b_crv_all_engines_damaged)
    (set b_crv_completed true)
    (sleep_forever crv_save_loop)
)

(script dormant void crv_engine_control
    (if (< s_crv_engines_damaged 4)
        (begin
            (f_hud_start_menu_obj "primary_objective_10")
            (wake crv_engine_blip)
            (wake crv_engine_objective_update)
            (wake crv_engine_hud_flash)
        )
        (set b_crv_all_engines_damaged true)
    )
)

(script dormant void save_crv_all_engines_damaged
    (sleep_until b_crv_all_engines_damaged)
    (sleep 60)
    (game_save_no_timeout)
)

(script dormant void crv_ejection_killer
    (sleep 30)
    (sleep_until 
        (begin
            (ejection_kill_player player0)
            (ejection_kill_player player1)
            (ejection_kill_player player2)
            (ejection_kill_player player3)
            (sleep 30)
            false
        )
        1
    )
)

(script dormant void crv_hud_flash
    (sleep 60)
    (f_hud_flash_object "sc_highlight_crv_engines")
)

(script dormant void crv_engine_hud_flash
    (f_hud_flash_object "sc_hud_corvette_engines")
)

(script dormant void crv_cov_engine_reinforcements
    (if debug
        (print "crv: starting reinforcement loop...")
    )
    (sleep 300)
    (sleep_until 
        (begin
            (sleep_until (or b_brd_started (<= (ai_living_count "gr_cov_crv_seraphs") 0)))
            (sleep 600)
            (if (not b_brd_started)
                (crv_replenish_seraphs)
            )
            b_brd_started
        )
        1
    )
)

(script dormant void crv_banshee_control
    (sleep_until (or (volume_test_players "tv_crv_bsh_launch") (<= (ai_strength "gr_cov_crv_banshees") 0.9) (<= (ai_strength "gr_cov_crv_seraphs") 0.5) (>= s_crv_engines_damaged 2)))
    (set b_crv_banshee_launch true)
)

(script static void test_corvette_phantom
    (ai_erase "sq_cov_crv_ph_engine_left")
    (ai_erase "sq_cov_crv_ph_engine_right")
    (ai_place "sq_cov_crv_ph_engine_left")
    (ai_place "sq_cov_crv_ph_engine_right")
    (sleep 1)
    (crv_ph_attack_frigate "sq_cov_crv_ph_engine_left")
    (crv_ph_attack_frigate "sq_cov_crv_ph_engine_right")
)

(script static void (crv_ph_attack_frigate (ai pilot))
    (cs_run_command_script (ai_get_turret_ai pilot 0) cs_crv_phg_attack_frigate)
)

(script command_script void cs_crv_phg_attack_frigate
    (if debug
        (print "corvette phantom firing on the frigate...")
    )
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_shoot true (object_at_marker "dm_savannah_corvette" "turret_rear_top01"))
    (sleep_forever)
)

(script command_script void cs_crv_seraph_start
    (cs_enable_moving false)
    (cs_enable_targeting false)
    (cs_vehicle_speed 0)
    (cs_vehicle_boost false)
    (sleep 90)
    (if debug
        (print "crv: seraphs now free to attack...")
    )
    (cs_enable_moving true)
    (cs_enable_targeting true)
)

(script command_script void cs_crv_banshee_launch
    (vehicle_hover (ai_vehicle_get ai_current_actor) true)
    (ai_disregard (ai_get_object ai_current_actor) true)
    (sleep_until b_crv_banshee_launch (random_range 10 60))
    (if debug
        (print "launching banshee...")
    )
    (vehicle_hover (ai_vehicle_get ai_current_actor) false)
    (ai_disregard (ai_get_object ai_current_actor) false)
    (object_set_velocity (ai_vehicle_get ai_current_actor) 30)
)

(script dormant void crv_save_loop
    (branch (= b_brd_started true) (branch_abort_crv_save))
    (wake save_crv_50percent)
    (sleep_until 
        (begin
            (sleep_until (= b_crv_attempt_save true) 1)
            (sleep 20)
            (ai_disregard (players) true)
            (sleep_until (game_safe_to_save) 1)
            (if debug
                (print "crv: game should be safe to save now!")
            )
            (game_save_immediate)
            (sleep 45)
            (ai_disregard (players) false)
            (set b_crv_attempt_save false)
            b_crv_completed
        )
        60
    )
)

(script dormant void save_crv_50percent
    (sleep 180)
    (sleep_until (< (ai_strength "gr_cov_crv") 0.5))
    (if debug
        (print "50 percent save")
    )
    (set b_crv_attempt_save true)
)

(script static void branch_abort_crv_save
    (ai_disregard (players) false)
)

(script dormant void crv_garbage_collector
    (sleep_until 
        (begin
            (add_recycling_volume "tv_recycle_crv" 10 10)
            b_hgr_completed
        )
        300
    )
)

(script static void crv_blip_capital_ships
    (f_blip_flag "fl_crv_marker" blip_recon)
)

(script dormant void crv_boundary_control
    (sleep_until (< (objects_distance_to_flag (players) "fl_crv_deserter_center") r_deserter_warn_distance))
    (sleep_until 
        (begin
            (if (>= (objects_distance_to_flag (players) "fl_crv_deserter_center") r_deserter_warn_distance)
                (begin
                    (cinematic_set_title "ct_deserter_footer")
                    (cinematic_set_title "ct_deserter_warning")
                    (f_blip_flag "fl_crv_marker" blip_neutralize)
                    (sound_impulse_start "sound\game_sfx\fireteam\issue_directive.sound" none 1)
                )
                (begin
                    (f_unblip_flag "fl_crv_marker")
                )
            )
            false
        )
        10
    )
)

(script dormant void crv_engine_objective_update
    (chud_show_screen_objective "ct_obj_engines0")
    (sleep_until (>= s_crv_engines_damaged 1) 1)
    (if (<= s_crv_engines_damaged 1)
        (chud_show_screen_objective "ct_obj_engines1")
    )
    (sleep_until (>= s_crv_engines_damaged 2) 1)
    (if (<= s_crv_engines_damaged 2)
        (chud_show_screen_objective "ct_obj_engines2")
    )
    (sleep_until (>= s_crv_engines_damaged 3) 1)
    (if (<= s_crv_engines_damaged 3)
        (chud_show_screen_objective "ct_obj_engines3")
    )
    (sleep_until (>= s_crv_engines_damaged 4) 1)
    (chud_show_screen_objective "ct_obj_engines_complete")
    (sleep (* 30 5))
    (chud_show_screen_objective "")
    (set b_crv_all_engines_damaged true)
)

(script dormant void crv_kill_cannons_sequentially
    (if debug
        (print "-=-=- killing the corvette's anti-capital guns since it lost engine power -=-=-")
    )
    (begin_random
        (begin
            (ai_erase "sq_cov_crv_cannon_gunners/gunner_left0")
            (sleep (random_range 4 12))
        )
        (begin
            (ai_erase "sq_cov_crv_cannon_gunners/gunner_left1")
            (sleep (random_range 4 12))
        )
        (begin
            (ai_erase "sq_cov_crv_cannon_gunners/gunner_left2")
            (sleep (random_range 4 12))
        )
        (begin
            (ai_erase "sq_cov_crv_cannon_gunners/gunner_right0")
            (sleep (random_range 4 12))
        )
        (begin
            (ai_erase "sq_cov_crv_cannon_gunners/gunner_right1")
            (sleep (random_range 4 12))
        )
        (begin
            (ai_erase "sq_cov_crv_cannon_gunners/gunner_right2")
            (sleep (random_range 4 12))
        )
    )
    (sleep_forever corvette_cannon_control)
)

(script dormant void crv_engine0_control
    (object_can_take_damage "dm_crv_engine_large_left")
    (sleep_until (<= (object_get_health "dm_crv_engine_large_left") 0) 1)
    (set s_crv_engines_damaged (+ s_crv_engines_damaged 1))
    (set b_crv_attempt_save true)
)

(script dormant void crv_engine1_control
    (object_can_take_damage "dm_crv_engine_small_left")
    (sleep_until (<= (object_get_health "dm_crv_engine_small_left") 0) 1)
    (set s_crv_engines_damaged (+ s_crv_engines_damaged 1))
    (set b_crv_attempt_save true)
)

(script dormant void crv_engine2_control
    (object_can_take_damage "dm_crv_engine_small_right")
    (sleep_until (<= (object_get_health "dm_crv_engine_small_right") 0) 1)
    (set s_crv_engines_damaged (+ s_crv_engines_damaged 1))
    (set b_crv_attempt_save true)
)

(script dormant void crv_engine3_control
    (object_can_take_damage "dm_crv_engine_large_right")
    (sleep_until (<= (object_get_health "dm_crv_engine_large_right") 0) 1)
    (set s_crv_engines_damaged (+ s_crv_engines_damaged 1))
    (set b_crv_attempt_save true)
)

(script dormant void crv_engine_blip
    (if debug
        (print "blipping corvette engines...")
    )
    (if (> (object_get_health "dm_crv_engine_large_right") 0)
        (f_blip_object "dm_crv_engine_large_left" blip_neutralize)
    )
    (if (> (object_get_health "dm_crv_engine_large_right") 0)
        (f_blip_object "dm_crv_engine_small_left" blip_neutralize)
    )
    (if (> (object_get_health "dm_crv_engine_large_right") 0)
        (f_blip_object "dm_crv_engine_small_right" blip_neutralize)
    )
    (if (> (object_get_health "dm_crv_engine_large_right") 0)
        (f_blip_object "dm_crv_engine_large_right" blip_neutralize)
    )
)

(script dormant void achievement_corvette_killer
    (if (difficulty_is_heroic_or_higher)
        (begin
            (sleep_until (and b_crv_all_engines_damaged (<= (ai_living_count "gr_cov_crv") 0)) 1 s_achievement_timer)
            (if (and b_crv_all_engines_damaged (<= (ai_living_count "gr_cov_crv") 0))
                (begin
                    (submit_incident_with_cause_player "cruiser_fast_achieve" player0)
                    (submit_incident_with_cause_player "cruiser_fast_achieve" player1)
                    (submit_incident_with_cause_player "cruiser_fast_achieve" player2)
                    (submit_incident_with_cause_player "cruiser_fast_achieve" player3)
                    (if debug
                        (print "-=-=-=- <<< achievement unlocked: corvette_fast_achieve >>> -=-=-=-")
                    )
                )
            )
        )
    )
)

(script static void (crv_seraph_spawn_immediate (short count))
    (ai_designer_clump_perception_range 600)
    (sleep_until (<= s_crv_seraph_spawn_remaining 0) 1)
    (set s_crv_seraph_spawn_remaining count)
    (sleep_until 
        (begin
            (if (>= s_crv_seraph_spawn_remaining 3)
                (begin
                    (crv_spawn_seraph_center_3)
                    (set s_crv_seraph_spawn_remaining (- s_crv_seraph_spawn_remaining 3))
                )
            )
            (if (>= s_crv_seraph_spawn_remaining 2)
                (begin
                    (crv_spawn_seraph_center_2)
                    (set s_crv_seraph_spawn_remaining (- s_crv_seraph_spawn_remaining 2))
                )
            )
            (if (>= s_crv_seraph_spawn_remaining 1)
                (begin
                    (crv_spawn_seraph_center_1)
                    (set s_crv_seraph_spawn_remaining (- s_crv_seraph_spawn_remaining 1))
                )
            )
            (<= s_crv_seraph_spawn_remaining 0)
        )
        1
    )
)

(script static void crv_spawn_seraph_center_3
    (if debug
        (print "waf: spawning center seraphs (count 3)...")
    )
    (ai_place "sq_cov_crv_sph_center3/seraph0")
    (seraph_warp_stagger)
    (ai_place "sq_cov_crv_sph_center3/seraph1")
    (seraph_warp_stagger)
    (ai_place "sq_cov_crv_sph_center3/seraph2")
    (ai_set_clump "sq_cov_crv_sph_center3" clump_seraphs)
)

(script static void crv_spawn_seraph_center_2
    (if debug
        (print "waf: spawning center seraphs (count 2)...")
    )
    (ai_place "sq_cov_crv_sph_center2/seraph0")
    (seraph_warp_stagger)
    (ai_place "sq_cov_crv_sph_center2/seraph1")
    (ai_set_clump "sq_cov_crv_sph_center2" clump_seraphs)
)

(script static void crv_spawn_seraph_center_1
    (if debug
        (print "waf: spawning center seraphs (count 1)...")
    )
    (ai_place "sq_cov_crv_sph_center1/seraph0")
    (ai_set_clump "sq_cov_crv_sph_center1" clump_seraphs)
)

(script static void crv_replenish_seraphs
    (crv_seraph_spawn_immediate (- s_crv_min_seraphs (ai_living_count "gr_cov_crv_seraphs")))
)

(script static void (crv_sabre_spawn_immediate (short count))
    (ai_designer_clump_perception_range 600)
    (sleep_until (<= s_crv_sabre_spawn_remaining 0) 1)
    (set s_crv_sabre_spawn_remaining count)
    (sleep_until 
        (begin
            (if (>= s_crv_sabre_spawn_remaining 3)
                (begin
                    (crv_spawn_sabre_center_3)
                    (set s_crv_sabre_spawn_remaining (- s_crv_sabre_spawn_remaining 3))
                )
            )
            (if (>= s_crv_sabre_spawn_remaining 2)
                (begin
                    (crv_spawn_sabre_center_2)
                    (set s_crv_sabre_spawn_remaining (- s_crv_sabre_spawn_remaining 2))
                )
            )
            (if (>= s_crv_sabre_spawn_remaining 1)
                (begin
                    (crv_spawn_sabre_center_1)
                    (set s_crv_sabre_spawn_remaining (- s_crv_sabre_spawn_remaining 1))
                )
            )
            (<= s_crv_sabre_spawn_remaining 0)
        )
        1
    )
)

(script static void crv_spawn_sabre_center_3
    (if debug
        (print "crv: spawning sabres (count 3)...")
    )
    (ai_place "sq_unsc_crv_sbr_center3/sabre0")
    (sabre_warp_stagger)
    (ai_place "sq_unsc_crv_sbr_center3/sabre1")
    (sabre_warp_stagger)
    (ai_place "sq_unsc_crv_sbr_center3/sabre2")
    (sabre_warp_stagger)
    (ai_set_clump "sq_unsc_crv_sbr_center3" clump_sabres)
)

(script static void crv_spawn_sabre_center_2
    (if debug
        (print "crv: spawning sabres (count 2)...")
    )
    (ai_place "sq_unsc_crv_sbr_center2/sabre0")
    (sabre_warp_stagger)
    (ai_place "sq_unsc_crv_sbr_center2/sabre1")
    (sabre_warp_stagger)
    (ai_set_clump "sq_unsc_crv_sbr_center2" clump_sabres)
)

(script static void crv_spawn_sabre_center_1
    (if debug
        (print "crv: spawning sabre (count 1)...")
    )
    (ai_place "sq_unsc_crv_sbr_center1/sabre0")
    (sabre_warp_stagger)
    (ai_set_clump "sq_unsc_crv_sbr_center1" clump_sabres)
)

(script static void crv_replenish_sabres
    (crv_sabre_spawn_immediate (- s_crv_min_sabres (ai_living_count "gr_unsc_crv_sabres")))
)

(script dormant void brd_encounter
    (if debug
        (print "encounter: corvette boarding")
    )
    (data_mine_set_mission_segment "boarding")
    (set b_brd_started true)
    (crv_replenish_sabres)
    (md_brd_hol_analyze_entrance)
    (ai_disregard (players) false)
    (wake show_objective_corvette_landing)
    (f_blip_flag "fl_boarding_land" blip_recon)
    (sleep_until (volume_test_players "tv_boarding_land") 1)
    (f_unblip_flag "fl_boarding_land")
    (cinematic_enter "045lc_aftship_landing" true)
    (set_sabre_respawns false)
    (sound_looping_stop "sound\levels\solo\m45\space_loop\space_loop.sound_looping")
    (set u_crv_player_sabre0 (unit_get_vehicle player0))
    (set u_crv_player_sabre1 (unit_get_vehicle player1))
    (set u_crv_player_sabre2 (unit_get_vehicle player2))
    (set u_crv_player_sabre3 (unit_get_vehicle player3))
    (sleep_forever crv_ejection_killer)
    (teleport_players "fl_comms_player0" "fl_comms_player1" "fl_comms_player2" "fl_comms_player3")
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (sleep 1)
    (object_destroy u_crv_player_sabre0)
    (object_destroy u_crv_player_sabre1)
    (object_destroy u_crv_player_sabre2)
    (object_destroy u_crv_player_sabre3)
    (unit_lower_weapon player0 1)
    (unit_lower_weapon player1 1)
    (unit_lower_weapon player2 1)
    (unit_lower_weapon player3 1)
    (sleep 1)
    (ai_erase "sq_unsc_crv_sbr_start0")
    (object_destroy_folder "v_corvette_sabres")
    (object_destroy_folder "v_landing_sabres")
    (garbage_collect_now)
    (f_play_cinematic_advanced "045lc_aftship_landing" "set_corvettecombat_050_070" "set_aftship_050_070")
    (set b_brd_completed true)
)

(script dormant void com_encounter
    (if debug
        (print "encounter: comms center")
    )
    (set s_current_encounter s_com_encounter_index)
    (data_mine_set_mission_segment "comms")
    (game_insertion_point_unlock 2)
    (kill_volume_enable "kill_crv_01")
    (kill_volume_enable "kill_soft_comms_00")
    (kill_volume_enable "kill_soft_comms_01")
    (kill_volume_enable "kill_soft_comms_02")
    (kill_volume_enable "kill_soft_comms_03")
    (soft_ceiling_enable "soft_ceiling_ship_01" true)
    (set player_respawn_check_airborne true)
    (ai_disregard (players) false)
    (sound_class_set_gain "amb" 0 0)
    (sound_disable_acoustic_palette "space_filter_loop")
    (object_create "sc_crv_shutters")
    (sound_start_global_effect "space_lopass" 1)
    (physics_set_gravity r_corvette_low_gravity)
    (object_destroy "sc_aft_top")
    (object_create_folder "sc_comms")
    (object_cannot_take_damage "sc_comms_sabre0")
    (object_cannot_take_damage "sc_comms_sabre1")
    (object_cannot_take_damage "sc_comms_sabre2")
    (object_cannot_take_damage "sc_comms_sabre3")
    (object_create_folder "bp_aft")
    (object_create_folder "wp_aft")
    (object_create_folder "wp_aft")
    (set_sabre_respawns false)
    (ai_lod_full_detail_actors 30)
    (com_savannah_chase)
    (if ambient_battle
        (wake amb_corvette_battle)
    )
    (if ambient_battle
        (savannah_load_gunners "dm_savannah_comms")
    )
    (if debug
        (print "savannah gunners targeting nothing")
    )
    (ai_erase "sq_unsc_sav_gunners/gunner_left_top01")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_top02")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_top03")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_bottom01")
    (ai_erase "sq_unsc_sav_gunners/gunner_left_bottom02")
    (ai_erase "sq_unsc_sav_gunners/gunner_rear_bottom01")
    (ai_set_targeting_group "sq_unsc_sav_gunners" s_tg_ambient_battle false)
    (ai_set_clump "sq_unsc_sav_gunners" clump_sabres)
    (setup_corvette_cannons_comms)
    (fireteam_setup)
    (ai_place "sq_unsc_com_pilots/pilot0")
    (ai_place "sq_unsc_com_pilots/pilot1")
    (ai_place "sq_unsc_com_pilots/pilot2")
    (ai_set_fireteam_absorber "sq_unsc_com_pilots" true)
    (sleep 1)
    (ai_set_objective "gr_unsc_pilots" "obj_unsc_com")
    (ai_set_objective "fireteam_player0" "obj_unsc_com")
    (ai_place "sq_cov_com_elite_jetpacks1")
    (ai_place "sq_cov_com_jetpack_aft0")
    (thespian_performance_activate "thespian_com_elite_terminal0")
    (ai_place "sq_cov_com_jetpack_aft1")
    (thespian_performance_activate "thespian_com_elite_terminal1")
    (wake com_completion_control)
    (wake save_com_halfway)
    (set b_com_started true)
    (replenish_players)
    (cinematic_exit_into_title "045lc_aftship_landing" true)
    (zone_set_trigger_volume_enable "begin_zone_set:set_hangar_050_070_060" true)
    (zone_set_trigger_volume_enable "zone_set:set_hangar_050_070_060" true)
    (wake show_chapter_title_corvette)
    (game_save)
    (wake md_com_hol_intro)
    (sleep_until (volume_test_players "tv_com_objcon_010") 1)
    (if debug
        (print "objective control: comms 010")
    )
    (set s_objcon_com 10)
    (sleep_until (volume_test_players "tv_com_objcon_020") 1)
    (if debug
        (print "objective control: comms 020")
    )
    (set s_objcon_com 20)
    (render_weather false)
    (sleep_until (volume_test_players "tv_com_objcon_030") 1)
    (if debug
        (print "objective control: comms 030")
    )
    (set s_objcon_com 30)
    (sleep_until (volume_test_players "tv_com_objcon_040") 1)
    (if debug
        (print "objective control: comms 040")
    )
    (set s_objcon_com 40)
)

(script static boolean com_terminals_alert
    (or (>= s_objcon_com 30) (volume_test_objects "tv_com_objcon_030" (ai_actors "gr_unsc_pilots")))
)

(script static void fireteam_setup
    (if debug
        (print "::: global ::: setting up fireteams...")
    )
    (ai_player_add_fireteam_squad player0 "fireteam_player0")
    (ai_player_set_fireteam_max player0 4)
    (ai_player_set_fireteam_max_squad_absorb_distance player0 100)
)

(script dormant void com_prepare_hangar_zoneset
    (sleep 300)
    (prepare_to_switch_to_zone_set "set_hangar_050_070_060")
)

(script dormant void save_com_halfway
    (sleep 30)
    (sleep_until (< (ai_strength "gr_cov_com") 0.5))
    (if debug
        (print "save 50 percent dead")
    )
    (game_save_no_timeout)
)

(script dormant void com_completion_control
    (sleep_until (> (ai_living_count "gr_cov_com") 0))
    (sleep_until (<= (ai_living_count "gr_cov_com") 0) 30 (* 30 240))
    (sleep 60)
    (game_save)
    (set b_com_completed true)
)

(script command_script void cs_com_buggers_exit
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (cs_fly_by "ps_com_buggers/exit0")
    (cs_fly_by "ps_com_buggers/exit1")
    (cs_fly_by "ps_com_buggers/erase")
    (ai_erase ai_current_actor)
)

(script command_script void cs_com_jetpacks_start
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (cs_enable_moving false)
    (cs_shoot false)
    (sleep (random_range 90 120))
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_shoot true)
    (cs_enable_moving false)
    (cs_go_to_nearest "ps_com_jetpacks")
)

(script dormant void hgr_encounter
    (if debug
        (print "encounter: hangar")
    )
    (set s_current_encounter s_hgr_encounter_index)
    (data_mine_set_mission_segment "hangar")
    (physics_set_gravity r_corvette_low_gravity)
    (kill_volume_enable "kill_crv_01")
    (garbage_collect_now)
    (object_create "c_hangar_door")
    (device_set_power "c_hangar_door" 0)
    (wake hgr_atmosphere_control)
    (wake hgr_player_teleport_control)
    (wake hgr_follow_control)
    (wake hgr_engineer_escape_control)
    (set b_hgr_started true)
    (ai_set_objective "gr_unsc_pilots" "obj_unsc_hgr")
    (md_hgr_hol_intro)
    (wake show_objective_go_to_hangar)
    (switch_zone_set "set_hangar_050_070_060")
    (sleep 5)
    (wake save_hgr_start)
    (object_create_folder "bp_hgr")
    (object_create_folder "wp_hgr")
    (object_create_folder_anew "cr_hgr")
    (object_create_folder_anew "sc_hgr")
    (ai_place "gr_cov_hgr")
    (device_set_position "dm_door_comms_exit" 1)
    (f_blip_flag "fl_hangar_entrance" blip_recon)
    (sleep_until (volume_test_players "tv_hangar_objcon_010") 1)
    (if debug
        (print "objective control: hangar 010")
    )
    (set s_objcon_hgr 10)
    (game_save)
    (wake md_hgr_pl2_on_our_way)
    (sleep_until (volume_test_players "tv_hangar_objcon_020") 1)
    (if debug
        (print "objective control: hangar 020")
    )
    (set s_objcon_hgr 20)
    (sleep_until (> (device_get_position "dm_door_com_hgr") 0) 1)
    (f_unblip_flag "fl_hangar_entrance")
    (game_save)
    (set b_hgr_teleport_players_forward true)
    (sleep_until (volume_test_players "tv_hangar_objcon_030") 1)
    (if debug
        (print "objective control: hangar 030")
    )
    (set s_objcon_hgr 30)
    (wake save_hgr_halfway)
    (sleep_until (<= (ai_living_count "gr_cov_hgr") 3) 30 (* 30 600))
    (sleep 30)
    (f_blip_ai "gr_cov_hgr" blip_hostile)
    (sleep_until (<= (ai_living_count "gr_cov_hgr") 0) 30 (* 30 120))
    (sleep 90)
    (set b_hgr_repressurize true)
    (game_save)
    (wake md_hgr_jor_go_for_controls)
    (device_set_power "c_hangar_door" 1)
    (f_blip_object "c_hangar_door" blip_interface)
    (sleep_until (> (device_group_get "dg_hangar") 0))
    (sleep 10)
    (if debug
        (print "hangar: playing pelican cinematic...")
    )
    (f_unblip_object "c_hangar_door")
    (set b_hgr_switch_flipped true)
    (cinematic_enter "045le_bomb_delivery" true)
    (sleep 30)
    (object_destroy_folder "sc_hgr")
    (object_destroy_folder "cr_hgr")
    (object_destroy_folder "sc_comms")
    (object_destroy_folder "bp_aft")
    (object_destroy_folder "wp_aft")
    (object_destroy_folder "dm_savannah")
    (ai_erase_all)
    (garbage_collect_unsafe)
    (zone_set_trigger_volume_enable "begin_zone_set:set_hangar_050_070_060" false)
    (zone_set_trigger_volume_enable "zone_set:set_hangar_050_070_060" false)
    (f_play_cinematic_advanced "045le_bomb_delivery" "set_gunroom_050_060_065" "set_gunroom_050_060_065")
    (teleport_players "fl_gunroom_player0" "fl_gunroom_player1" "fl_gunroom_player2" "fl_gunroom_player3")
    (set b_hgr_completed true)
)

(script dormant void hgr_follow_control
    (sleep_until (>= s_objcon_hgr 30))
    (sleep (random_range (* 30 7) (* 30 12)))
    (set b_hgr_cov_follow true)
)

(script dormant void hgr_player_teleport_control
    (sleep_until b_hgr_teleport_players_forward)
    (teleport_players_not_in_bsp 11 "fl_hangar_teleport0" "fl_hangar_teleport1" "fl_hangar_teleport2" "fl_hangar_teleport3")
    (object_create "sc_aft_top")
    (object_destroy "sc_crv_shutters")
    (soft_ceiling_enable "soft_ceiling_ship_01" false)
)

(script dormant void save_hgr_initial
    (sleep 30)
    (game_save_no_timeout)
)

(script dormant void save_hgr_wave0
    (sleep 30)
    (game_save_no_timeout)
)

(script dormant void save_hgr_wave1
    (sleep 30)
    (game_save_no_timeout)
)

(script dormant void save_hgr_halfway
    (sleep_until (<= (ai_strength "gr_cov_hgr") 0.5))
    (sleep 30)
    (game_save_no_timeout)
)

(script dormant void save_hgr_start
    (sleep_until (>= (current_zone_set_fully_active) s_zoneindex_hangar))
    (sleep 90)
    (if debug
        (print "save hangar start")
    )
    (game_save_no_timeout)
)

(script dormant void hgr_atmosphere_control
    (sleep_until b_hgr_repressurize)
    (sound_stop_global_effect "space_lopass")
    (sound_impulse_start "sound\levels\solo\m45\airlock\airlock_repressurize.sound" none 1)
    (sleep 45)
    (sound_class_set_gain "amb" 1 90)
    (sound_impulse_start "sound\levels\solo\m45\corvette_power_up.sound" none 1)
    (physics_set_gravity 1)
)

(script static boolean hgr_player_at_front
    (volume_test_players "tv_hgr_front")
)

(script static boolean hgr_player_at_rear
    (volume_test_players "tv_hgr_rear")
)

(script static boolean hgr_player_at_left
    (volume_test_players "tv_hgr_left")
)

(script static boolean hgr_player_at_right
    (volume_test_players "tv_hgr_right")
)

(script static boolean hgr_player_on_platform
    (or (volume_test_players "tv_hgr_platform_rear") (volume_test_players "tv_hgr_platform_front_left") (volume_test_players "tv_hgr_platform_front_right"))
)

(script dormant void hgr_engineer_escape_control
    (sleep_until (> (ai_spawn_count "gr_cov_hgr_engineers") 0))
    (sleep_until (= (ai_living_count "gr_cov_hgr") (ai_living_count "gr_cov_hgr_engineers")))
    (cs_run_command_script "gr_cov_hgr_engineers" cs_hgr_engineer_despawn)
)

(script command_script void cs_hgr_engineer_despawn
    (cs_fly_by "ps_hgr_engineer/exit0")
    (cs_fly_by "ps_hgr_engineer/exit1")
    (cs_fly_by "ps_hgr_engineer/erase")
    (ai_erase ai_current_actor)
)

(script static void (weaken_pilot (short index))
    (if debug
        (print "pinning pilot's vitality")
    )
    (unit_set_maximum_vitality (unit (list_get l_pilots index)) 0.1 0)
    (unit_set_current_vitality (unit (list_get l_pilots index)) 0.1 0)
)

(script static void (bring_pilot_to_gunroom (short index, boolean from_hangar))
    (if (and (> (object_get_health (list_get l_pilots index)) 0) (!= (object_get_bsp (list_get l_pilots index)) 12))
        (begin
            (if debug
                (print "bringing a fireteam member to the gunroom")
            )
            (if (= from_hangar true)
                (object_teleport (list_get l_pilots index) "fl_grm_fireteam_from_hangar")
                (object_teleport (list_get l_pilots index) "fl_grm_fireteam_from_bridge")
            )
        )
    )
)

(script dormant void grm_encounter
    (if debug
        (print "encounter: gunroom")
    )
    (set s_current_encounter s_grm_encounter_index)
    (data_mine_set_mission_segment "gunroom")
    (zone_set_trigger_volume_enable "begin_zone_set:set_hangar_050_070_060" false)
    (zone_set_trigger_volume_enable "zone_set:set_hangar_050_070_060" false)
    (zone_set_trigger_volume_enable "zone_set:set_gunroom_050_060_065" true)
    (zone_set_trigger_volume_enable "begin_zone_set:set_bridge_050_065_080" true)
    (zone_set_trigger_volume_enable "zone_set:set_bridge_050_065_080" true)
    (kill_volume_enable "kill_crv_01")
    (soft_ceiling_enable "soft_ceiling_ship_01" false)
    (device_set_position_immediate "dm_door_com_hgr" 0)
    (device_one_sided_set "dm_door_com_hgr" true)
    (device_set_power "dm_door_com_hgr" 0)
    (object_create_folder "cr_grm")
    (object_create_folder "sc_grm")
    (object_create_folder "cr_hgr")
    (object_create_folder "sc_hgr")
    (setup_hangar_pelican 0)
    (sleep 1)
    (object_set_permutation "hgr_tower0" "" "destroyed")
    (object_set_permutation "hgr_tower1" "" "destroyed")
    (fireteam_setup)
    (ai_place "sq_unsc_grm_pilots")
    (sleep 1)
    (set l_pilots (ai_actors "sq_unsc_grm_pilots"))
    (ai_set_fireteam_absorber "sq_unsc_grm_pilots" true)
    (sleep 1)
    (ai_set_objective "gr_unsc_pilots" "obj_unsc_grm")
    (ai_place "sq_jorge/grm")
    (sleep 1)
    (ai_set_objective "sq_jorge" "obj_unsc_grm")
    (set ai_jorge "sq_jorge")
    (ai_cannot_die ai_jorge true)
    (wake grm_elites_hall_fallback)
    (wake grm_savannah_moment)
    (wake grm_spawn_control)
    (wake jorge_gunroom_marker_control)
    (wake grm_door_lock_return_to_hangar)
    (wake grm_door_lock_return_to_aftship)
    (wake grm_zoneset_bridge_disable)
    (wake save_grm_start)
    (wake amb_gunroom_battle)
    (set b_grm_started true)
    (replenish_players)
    (cinematic_exit "045le_bomb_delivery" true)
    (wake md_grm_hol_find_bridge)
    (sleep_until (or (volume_test_players "tv_objcon_grm_010_left") (volume_test_players "tv_objcon_grm_010_mid") (volume_test_players "tv_objcon_grm_010_right")) 1)
    (if debug
        (print "objective control: gunroom 010")
    )
    (set s_objcon_grm 10)
    (sleep_until (volume_test_players "tv_objcon_grm_020") 1)
    (if debug
        (print "objective control: gunroom 020")
    )
    (set s_objcon_grm 20)
    (grm_open_breacher_fallback_door)
    (sleep_until (volume_test_players "tv_objcon_grm_030") 1)
    (if debug
        (print "objective control: gunroom 030")
    )
    (set s_objcon_grm 30)
    (sleep_until (volume_test_players "tv_objcon_grm_040") 1)
    (if debug
        (print "objective control: gunroom 040")
    )
    (set s_objcon_grm 40)
    (game_save)
    (sleep_until (volume_test_players "tv_objcon_grm_050") 1)
    (if debug
        (print "objective control: gunroom 050")
    )
    (set s_objcon_grm 50)
    (sleep_until (volume_test_players "tv_objcon_grm_060") 1)
    (if debug
        (print "objective control: gunroom 060")
    )
    (set s_objcon_grm 60)
    (set b_grm_completed true)
)

(script dormant void grm_door_lock_return_to_hangar
    (sleep_until (>= (current_zone_set) s_zoneindex_bridge) 1)
    (if debug
        (print "locking door back to hangar")
    )
    (device_set_position_immediate "dm_door_hgr_grm" 0)
    (device_set_power "dm_door_hgr_grm" 0)
    (sleep 1)
    (bring_pilot_to_gunroom 0 true)
    (bring_pilot_to_gunroom 1 true)
    (bring_pilot_to_gunroom 2 true)
    (bring_pilot_to_gunroom 3 true)
)

(script dormant void grm_door_lock_return_to_aftship
    (device_set_position_immediate "dm_door_comms_exit" 0)
    (device_set_power "dm_door_comms_exit" 0)
)

(script dormant void grm_zoneset_bridge_disable
    (sleep_until (>= (current_zone_set) s_zoneindex_bridge) 1)
    (if debug
        (print "disabling gunroom and bridge zoneset triggers")
    )
    (zone_set_trigger_volume_enable "zone_set:set_gunroom_050_060_065" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_bridge_050_065_080" false)
    (zone_set_trigger_volume_enable "zone_set:set_bridge_050_065_080" false)
)

(script dormant void save_grm_start
    (sleep_until (>= (current_zone_set_fully_active) s_zoneindex_gunroom))
    (sleep 90)
    (game_save_no_timeout)
)

(script dormant void grm_spawn_control
    (sleep (random_range (* 30 12) (* 30 14)))
    (if debug
        (print "grm spawning now...")
    )
    (open_hangar_gunroom_doors)
    (set b_grm_doors_open true)
    (ai_place "sq_cov_grm_hall_breachers0")
    (ai_place "sq_cov_grm_hall_elites0")
    (wake grm_reset_suppression_control)
    (sleep_until (> (device_get_position "dm_door_grm_entrance") 0) 1)
    (grm_spawn_elites)
)

(script dormant void grm_reset_suppression_control
    (sleep_until (and (> (ai_spawn_count "sq_cov_grm_hall_breachers0") 0) (> (ai_spawn_count "sq_cov_grm_hall_elites0") 0)))
    (sleep_until (and (<= (ai_living_count "sq_cov_grm_hall_breachers0") 0) (<= (ai_living_count "sq_cov_grm_hall_elites0") 0)))
    (sleep 45)
    (if debug
        (print "-=-=- resetting unsc gunroom objective -=-=-")
    )
    (ai_reset_objective "obj_unsc_grm")
)

(script static void grm_spawn_elites
    (if (game_is_cooperative)
        (begin
            (if debug
                (print "spawning cooperative gunroom elites")
            )
            (if (>= (game_coop_player_count) 3)
                (begin
                    (if debug
                        (print "spawning an elite at terminal 2")
                    )
                    (grm_spawn_elite_at_terminal2)
                )
            )
            (grm_spawn_elite_at_terminal0)
            (grm_spawn_elite_at_terminal1)
        )
        (begin
            (if debug
                (print "spawning singleplayer gunroom elites")
            )
            (if (difficulty_is_legendary)
                (begin
                    (if debug
                        (print "legendary spawning an elite at the far terminal")
                    )
                    (grm_spawn_elite_at_terminal2)
                )
            )
            (if debug
                (print "randomly spawning an elite at terminal 1 or 2")
            )
            (begin_random_count
                1
                (grm_spawn_elite_at_terminal0)
                (grm_spawn_elite_at_terminal1)
            )
        )
    )
)

(script static void grm_spawn_elite_at_terminal0
    (ai_place "sq_cov_grm_elites0/elite0")
    (thespian_performance_activate "thespian_grm_elite_terminal0")
)

(script static void grm_spawn_elite_at_terminal1
    (ai_place "sq_cov_grm_elites0/elite1")
    (thespian_performance_activate "thespian_grm_elite_terminal1")
)

(script static void grm_spawn_elite_at_terminal2
    (ai_place "sq_cov_grm_elites0/elite2")
    (thespian_performance_activate "thespian_grm_elite_terminal2")
)

(script static void open_hangar_gunroom_doors
    (device_set_power "dm_gunroom_door_center" 1)
    (device_set_position "dm_gunroom_door_center" 1)
    (device_set_power "dm_gunroom_door_left" 1)
    (device_one_sided_set "dm_gunroom_door_left" false)
    (device_set_position "dm_gunroom_door_left" 1)
    (device_closes_automatically_set "dm_gunroom_door_left" false)
    (device_set_power "dm_gunroom_door_right" 1)
    (device_one_sided_set "dm_gunroom_door_right" false)
    (device_set_power "dm_grm_hall_left" 1)
    (device_one_sided_set "dm_grm_hall_left" false)
    (device_operates_automatically_set "dm_grm_hall_left" true)
    (device_set_power "dm_grm_hall_right" 1)
    (device_one_sided_set "dm_grm_hall_right" false)
    (device_operates_automatically_set "dm_grm_hall_right" true)
)

(script static void grm_open_breacher_fallback_door
    (device_operates_automatically_set "dm_door_hgr_grm" true)
)

(script dormant void grm_elites_hall_fallback
    (sleep_until (or (>= (device_get_position "dm_grm_hall_left") 1) (>= (device_get_position "dm_grm_hall_right") 1) (>= s_objcon_grm 30)))
    (if debug
        (print "grm: elites granted fallback permission...")
    )
    (set b_grm_hall_elites_flanked true)
)

(script dormant void grm_jackal_spawn
    (sleep_until (>= s_objcon_grm 60))
    (sleep_until (<= (ai_living_count "gr_cov_grm") 2) 30 (* 30 60))
    (ai_place "sq_cov_grm_jackals0")
)

(script dormant void brg_encounter
    (if debug
        (print "encounter: bridge")
    )
    (set s_current_encounter s_brg_encounter_index)
    (data_mine_set_mission_segment "bridge")
    (zone_set_trigger_volume_enable "begin_zone_set:set_bridge_050_065_080" false)
    (zone_set_trigger_volume_enable "zone_set:set_bridge_050_065_080" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_bridge_050_065_080" true)
    (zone_set_trigger_volume_enable "zone_set:set_bridge_050_065_080" true)
    (kill_volume_enable "kill_crv_01")
    (soft_ceiling_enable "soft_ceiling_ship_01" false)
    (object_create_folder "cr_bridge")
    (wake brg_switch_control)
    (wake brg_stealth_control)
    (wake save_brg_specops_defeated)
    (wake save_brg_captain_defeated)
    (wake brg_prop_control)
    (wake save_brg_start)
    (set b_brg_started true)
    (ai_set_objective "gr_unsc_pilots" "obj_unsc_brg")
    (wake md_brg_tr5_looks_like_bridge)
    (sleep_until (volume_test_players "tv_objcon_brg_010") 1)
    (if debug
        (print "objective control: bridge 010")
    )
    (set s_objcon_brg 10)
    (ai_place "sq_cov_brg_grunts0")
    (ai_place "sq_cov_brg_captain")
    (if (and (> (game_coop_player_count) 1) (difficulty_is_legendary))
        (ai_place "sq_cov_brg_captain2")
    )
    (ai_place "sq_cov_brg_specops0")
    (ai_place "sq_cov_brg_specops1")
    (ai_place "sq_cov_brg_specops2")
    (thespian_performance_activate "thespian_brg_elite_terminal0")
    (thespian_performance_activate "thespian_brg_elite_terminal5")
    (ai_magically_see "gr_unsc" "gr_cov_brg")
    (sleep_until (volume_test_players "tv_objcon_brg_020") 1)
    (if debug
        (print "objective control: bridge 020")
    )
    (set s_objcon_brg 20)
    (weaken_pilot 0)
    (sleep 1)
    (lnos_setup_bridge)
    (sleep_until (volume_test_players "tv_objcon_brg_030") 1)
    (if debug
        (print "objective control: bridge 030")
    )
    (set s_objcon_brg 30)
    (sleep_until (volume_test_players "tv_objcon_brg_040") 1)
    (if debug
        (print "objective control: bridge 040")
    )
    (set s_objcon_brg 40)
    (sleep_until (= (device_group_get "dg_bridge") 1) 1)
    (set b_brg_completed true)
)

(script dormant void brg_prop_control
    (sleep_until (> (device_get_position "dm_door_bridge_entrance") 0) 1)
    (if debug
        (print "placing bridge props")
    )
    (object_create_folder "sc_brg")
)

(script dormant void save_brg_start
    (sleep_until (>= (current_zone_set_fully_active) s_zoneindex_bridge))
    (sleep 60)
    (if debug
        (print "save bridge start")
    )
    (game_save_no_timeout)
)

(script dormant void save_brg_specops_defeated
    (sleep_until (and (> (ai_spawn_count "sq_cov_brg_specops0") 0) (> (ai_spawn_count "sq_cov_brg_specops1") 0) (> (ai_spawn_count "sq_cov_brg_specops2") 0)))
    (sleep_until (and (<= (ai_living_count "sq_cov_brg_specops0") 0) (<= (ai_living_count "sq_cov_brg_specops1") 0) (<= (ai_living_count "sq_cov_brg_specops2") 0)))
    (if debug
        (print "save specops defeated")
    )
    (game_save_no_timeout)
)

(script dormant void save_brg_captain_defeated
    (sleep_until (> (ai_spawn_count "gr_cov_brg_captain") 0))
    (sleep_until (<= (ai_living_count "gr_cov_brg_captain") 0))
    (sleep 60)
    (if debug
        (print "save capatain defeated")
    )
    (game_save_no_timeout)
)

(script dormant void brg_switch_control
    (sleep_until (> (ai_living_count "gr_cov_brg") 0))
    (sleep_until (<= (ai_living_count "gr_cov_brg") 2))
    (sleep_until (<= (ai_living_count "gr_cov_brg") 0) 30 (* 30 240))
    (sleep 120)
    (if debug
        (print "brg: enemies defeated. blipping the console...")
    )
    (md_brg_hol_move_lieutenant)
    (sleep 15)
    (wake show_objective_engage_refuel)
    (f_blip_object "c_bridge_refuel" blip_interface)
    (device_set_power "c_bridge_refuel" 1)
    (mus_stop mus_09)
    (sleep_until (> (device_group_get "dg_bridge") 0))
    (if debug
        (print "brg: player has flipped the switch...")
    )
    (f_unblip_object "c_bridge_refuel")
    (device_set_power "c_bridge_refuel" 0)
    (f_unblip_ai "gr_cov_brg")
    (lnos_arrive)
)

(script dormant void brg_stealth_control
    (sleep_until (> (ai_spawn_count "gr_cov_brg") 0))
    (sleep 30)
    (sleep_until (or (<= (ai_living_count "sq_cov_brg_captain") 0) (<= (ai_living_count "sq_cov_brg_specops0") 0) (<= (ai_living_count "sq_cov_brg_specops1") 0) (<= (ai_living_count "sq_cov_brg_specops2") 0)))
    (if debug
        (print "bridge squads have better vision")
    )
    (ai_remove_cue "cue_brg_unaware")
)

(script static boolean (branch_terminal_elite (ai my_actor, ai group))
    (or (> (object_get_recent_shield_damage (ai_get_object my_actor)) 0) (> (object_get_recent_body_damage (ai_get_object my_actor)) 0) (>= (ai_combat_status group) 5))
)

(script static boolean (branch_grm_terminal_elite (ai my_actor, ai group))
    (or (> (object_get_recent_shield_damage (ai_get_object my_actor)) 0) (> (object_get_recent_body_damage (ai_get_object my_actor)) 0) (>= (ai_combat_status group) 5) (= b_grm_terminals_alert true))
)

(script command_script void cs_brg_captain_patrol
    (cs_stow true)
    (cs_abort_on_alert true)
    (cs_abort_on_damage true)
    (cs_push_stance "patrol")
    (cs_walk true)
    (sleep_until 
        (begin
            (begin_random
                (begin
                    (cs_go_to "ps_brg_elites/captain0")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/captain1")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/captain2")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/captain3")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/captain4")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/captain5")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/captain6")
                    (captain_delay_before_shift)
                )
            )
            false
        )
        1
    )
)

(script command_script void cs_brg_globe_patrol
    (cs_stow true)
    (cs_abort_on_alert true)
    (cs_abort_on_damage true)
    (cs_push_stance "patrol")
    (cs_walk true)
    (cs_face true "ps_brg_elites/globe_center")
    (sleep_until (>= s_objcon_brg 10))
    (sleep (random_range 120 210))
    (sleep_until 
        (begin
            (begin_random
                (begin
                    (cs_go_to "ps_brg_elites/globe1")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/globe2")
                    (captain_delay_before_shift)
                )
                (begin
                    (cs_go_to "ps_brg_elites/globe3")
                    (captain_delay_before_shift)
                )
            )
            false
        )
        1
    )
)

(script static void captain_delay_before_shift
    (sleep (random_range 120 400))
)

(script command_script void cs_brg_stand_in_place
    (cs_stow true)
    (cs_abort_on_alert true)
    (cs_abort_on_damage true)
    (cs_enable_moving false)
    (cs_push_stance "patrol")
    (sleep_until (>= (ai_combat_status "gr_cov_brg") 3))
)

(script dormant void esc_encounter
    (if debug
        (print "encounter: escape")
    )
    (set s_current_encounter s_esc_encounter_index)
    (data_mine_set_mission_segment "escape")
    (game_save)
    (kill_volume_enable "kill_crv_01")
    (soft_ceiling_enable "soft_ceiling_ship_01" false)
    (teleport_players_not_in_volume "tv_brg_teleport_safezone" "fl_brg_teleport0" "fl_brg_teleport1" "fl_brg_teleport2" "fl_brg_teleport3")
    (sleep 5)
    (zone_set_trigger_volume_enable "begin_zone_set:set_bridge_050_065_080" false)
    (zone_set_trigger_volume_enable "zone_set:set_bridge_050_065_080" false)
    (zone_set_trigger_volume_enable "begin_zone_set:set_escape_050_065_060" true)
    (zone_set_trigger_volume_enable "zone_set:set_escape_050_065_060" true)
    (ai_place "sq_cov_esc_breach0")
    (ai_set_objective "gr_unsc_pilots" "obj_unsc_esc")
    (wake esc_door_lock_return_to_bridge)
    (wake esc_door_unlock_return_to_hangar)
    (wake esc_door_unlock_hangar_center)
    (set b_esc_started true)
    (wake md_esc_hol_well_done)
    (sleep_until (volume_test_players "tv_objcon_esc_020") 1)
    (if debug
        (print "objective control: escape 020")
    )
    (set s_objcon_esc 20)
    (game_save)
    (weaken_pilot 1)
    (sleep_until (volume_test_players "tv_objcon_esc_030") 1)
    (if debug
        (print "objective control: escape 030")
    )
    (set s_objcon_esc 30)
    (ai_place "sq_cov_esc_gunroom0")
    (wake md_esc_at_your_earliest)
    (set b_esc_completed true)
)

(script dormant void esc_door_lock_return_to_bridge
    (sleep_until (>= (current_zone_set) s_zoneindex_escape) 1)
    (if debug
        (print "locking the door back to bridge...")
    )
    (device_set_position_immediate "dm_door_bridge_entrance" 0)
    (device_operates_automatically_set "dm_door_bridge_entrance" false)
    (sleep 1)
    (device_set_power "dm_door_bridge_entrance" 0)
    (sleep 1)
    (bring_pilot_to_gunroom 0 false)
    (bring_pilot_to_gunroom 1 false)
    (bring_pilot_to_gunroom 2 false)
    (bring_pilot_to_gunroom 3 false)
)

(script dormant void esc_door_unlock_return_to_hangar
    (sleep_until (>= (current_zone_set_fully_active) s_zoneindex_escape) 1)
    (if debug
        (print "unlocking door back to hangar")
    )
    (device_set_power "dm_door_hgr_grm" 1)
    (device_operates_automatically_set "dm_door_hgr_grm" true)
)

(script dormant void esc_door_unlock_hangar_center
    (sleep_until (>= (current_zone_set_fully_active) s_zoneindex_escape) 1)
    (if debug
        (print "unlocking hangar center_door")
    )
    (device_set_power "dm_gunroom_door_center" 1)
    (device_operates_automatically_set "dm_gunroom_door_center" false)
    (device_set_position "dm_gunroom_door_center" 1)
)

(script dormant void fin_encounter
    (if debug
        (print "encounter: final")
    )
    (set s_current_encounter s_fin_encounter_index)
    (data_mine_set_mission_segment "final")
    (zone_set_trigger_volume_enable "begin_zone_set:set_escape_050_065_060" true)
    (zone_set_trigger_volume_enable "zone_set:set_escape_050_065_060" true)
    (kill_volume_enable "kill_crv_01")
    (soft_ceiling_enable "soft_ceiling_ship_01" false)
    (device_one_sided_set "dm_gunroom_door_right" true)
    (device_one_sided_set "dm_gunroom_door_left" true)
    (device_one_sided_set "dm_grm_hall_right" true)
    (device_one_sided_set "dm_grm_hall_left" true)
    (ai_place "sq_cov_fin_initial0")
    (ai_place "sq_cov_fin_initial1")
    (ai_erase "sq_jorge")
    (ai_place "sq_jorge/fin")
    (sleep 1)
    (ai_set_objective "sq_jorge" "obj_unsc_fin")
    (set ai_jorge "sq_jorge")
    (ai_cannot_die ai_jorge true)
    (setup_hangar_pelican 1)
    (object_create_folder "sc_hgr")
    (object_create_folder "cr_hgr")
    (object_create_folder "bp_fin")
    (object_set_permutation "hgr_tower0" "" "destroyed")
    (object_set_permutation "hgr_tower1" "" "destroyed")
    (object_set_permutation "hgr_tower2" "" "destroyed")
    (wake jorge_final_marker_control)
    (object_create "dm_door_fin_coms_blocker")
    (set b_fin_started true)
    (mus_start mus_10)
    (ai_set_objective "gr_unsc_pilots" "obj_unsc_fin")
    (game_save)
    (sleep_until (volume_test_players "tv_objcon_fin_010") 1)
    (if debug
        (print "objective control: final 020")
    )
    (set s_objcon_fin 10)
    (sleep_until (<= (ai_living_count "gr_cov_fin") 1))
    (wake md_fin_jor_good_of_you)
    (sleep (random_range (* 30 12) (* 30 16)))
    (fin_firefight)
    (sleep_until b_fin_waves_complete)
    (sleep_until (<= (ai_living_count "gr_cov_fin") 0))
    (sleep 60)
    (f_unblip_flag "fl_fin_slipspace")
    (md_fin_jor_and_stay_down)
    (mus_stop mus_10)
    (sleep 30)
    (sleep_until (< (objects_distance_to_object (players) (ai_get_object ai_jorge)) 4))
    (set b_fin_completed true)
)

(script static void fin_firefight
    (device_operates_automatically_set "dm_door_com_hgr" true)
    (device_set_power "dm_door_com_hgr" 1)
    (device_one_sided_set "dm_door_com_hgr" true)
    (game_save)
    (set b_fin_firefight_started true)
    (wake fin_save_control)
    (sound_looping_activate_layer mus_10 1)
    (ai_place "sq_cov_fin_wave0_jackals0")
    (ai_place "sq_cov_fin_wave0_snipers0")
    (sleep_until (<= (ai_task_count "obj_cov_fin/gate_wave0") 0))
    (sleep (random_range 120 240))
    (set b_fin_attempt_save true)
    (set s_fin_wave 1)
    (ai_place "sq_cov_fin_wave1_e1g3")
    (add_recycling_volume "tv_hgr_recycle" 20 30)
    (sleep_until (<= (ai_living_count "gr_cov_fin") 0))
    (sound_looping_deactivate_layer mus_10 1)
    (sleep (random_range 60 120))
    (set b_fin_attempt_save true)
    (set s_fin_wave 2)
    (ai_place "sq_cov_fin_wave2_grunts0")
    (sleep_until (<= (ai_task_count "obj_cov_fin/gate_wave2") 0))
    (sleep (random_range 90 120))
    (set b_fin_attempt_save true)
    (set s_fin_wave 3)
    (ai_place "sq_cov_fin_wave3_elites0")
    (sleep_until (<= (ai_living_count "gr_cov_fin") 0))
    (sleep (random_range 90 120))
    (sound_looping_activate_layer mus_10 1)
    (set b_fin_attempt_save true)
    (ai_place "gr_cov_fin_boss")
    (sleep 1)
    (sleep_until (<= (ai_living_count "gr_cov_fin") 0))
    (set b_fin_waves_complete true)
)

(script dormant void fin_save_control
    (sleep_until 
        (begin
            (sleep_until b_fin_attempt_save)
            (game_save_no_timeout)
            (set b_fin_attempt_save false)
            false
        )
        1
    )
)

(script command_script void cs_fin_jorge_pelican
    (cs_go_to "ps_fin_jorge/jorge_dest")
    (cs_look_player true)
    (sleep_forever)
)

(script static void (bring_spartans_forward (real dist))
    (if debug
        (print "bringing spartans forward...")
    )
    (ai_bring_forward (ai_get_object "sq_jorge") dist)
    (ai_bring_forward (ai_get_object "sq_carter") dist)
    (ai_bring_forward (ai_get_object "sq_kat") dist)
)

(script static void (set_sabre_respawns (boolean in_vehicle))
    (if in_vehicle
        (begin
            (player_set_respawn_vehicle player0 "objects/vehicles/human/sabre/sabre.vehicle")
            (player_set_respawn_vehicle player1 "objects/vehicles/human/sabre/sabre.vehicle")
            (player_set_respawn_vehicle player2 "objects/vehicles/human/sabre/sabre.vehicle")
            (player_set_respawn_vehicle player3 "objects/vehicles/human/sabre/sabre.vehicle")
        )
        (begin
            (player_set_respawn_vehicle player0 none)
            (player_set_respawn_vehicle player1 none)
            (player_set_respawn_vehicle player2 none)
            (player_set_respawn_vehicle player3 none)
        )
    )
)

(script static boolean difficulty_is_heroic_or_higher
    (or (= (game_difficulty_get) heroic) (= (game_difficulty_get) legendary))
)

(script static boolean difficulty_is_easy
    (= (game_difficulty_get) easy)
)

(script static boolean difficulty_is_normal
    (= (game_difficulty_get) normal)
)

(script static boolean difficulty_is_heroic
    (= (game_difficulty_get) heroic)
)

(script static boolean difficulty_is_legendary
    (= (game_difficulty_get) legendary)
)

(script static boolean difficulty_is_easy_or_normal
    (or (= (game_difficulty_get) easy) (= (game_difficulty_get) normal))
)

(script static void branch_abort
    (if debug
        (print "branch aborting")
    )
)

(script static void branch_abort_dialogue
    (if debug
        (print "branch aborting dialogue")
    )
    (md_stop)
)

(script static void hgr_test
    (object_create_folder "sc_hgr")
    (object_create_folder "cr_hgr")
)

(script static void nuke_planet
    (if debug
        (print "*** nuclear launch detected: cleaning up planet props ***")
    )
    (ai_erase_all)
    (object_destroy_folder "cr_beach")
    (object_destroy_folder "dm_bch_pods")
    (object_destroy_folder "dm_slo")
    (object_destroy_folder "sc_bch")
    (object_destroy_folder "sc_lnc")
    (object_destroy_folder "sc_fac")
    (object_destroy_folder "dm_bch_skybox_pods")
    (kill_volume_disable "kill_silo")
    (kill_volume_disable "kill_soft_bch_01")
    (kill_volume_disable "kill_soft_bch_02")
    (garbage_collect_unsafe)
)

(script static void nuke_wafer
    (if debug
        (print "*** nuclear launch detected: cleaning up wafer encounter ***")
    )
    (ai_erase_all)
    (object_destroy_folder "sc_waf_bays")
    (object_destroy_folder "sc_waf_debris")
    (object_destroy_folder "cr_waf")
    (garbage_collect_unsafe)
)

(script static void nuke_corvette_exterior
    (if debug
        (print "*** nuclear launch detected: cleaning up exterior corvette ***")
    )
    (ai_erase_all)
    (object_destroy_folder "dm_crv_pods")
    (garbage_collect_unsafe)
)

(script static void (blip_ai_object (ai actor))
    (f_blip_object (ai_get_object actor) 14)
)

(script command_script void cs_sabre_warp
    (effect_new_on_object_marker fx_warp_flash (ai_vehicle_get ai_current_actor) "ai_antenna_center")
    (object_set_velocity (ai_vehicle_get ai_current_actor) 120)
)

(script command_script void cs_sabre_exit_station
    (ai_set_clump ai_current_actor clump_sabres)
    (object_set_velocity (ai_vehicle_get ai_current_actor) 20)
)

(script command_script void cs_banshee_warp
    (ai_set_clump ai_current_actor clump_banshees)
    (ai_enable_stuck_flying_kill ai_current_actor true)
    (ai_set_stuck_velocity_threshold ai_current_actor 1)
    (effect_new_on_object_marker fx_warp_flash (ai_vehicle_get ai_current_actor) "fx_warp")
    (object_set_velocity (ai_vehicle_get ai_current_actor) 50)
)

(script command_script void cs_seraph_warp
    (ai_set_clump ai_current_actor clump_seraphs)
    (ai_enable_stuck_flying_kill ai_current_actor true)
    (ai_set_stuck_velocity_threshold ai_current_actor 1)
    (effect_new_on_object_marker fx_warp_flash (ai_vehicle_get ai_current_actor) "fx_warp")
    (object_set_velocity (ai_vehicle_get ai_current_actor) 100)
)

(script command_script void cs_phantom_warp
    (effect_new_on_object_marker fx_warp_flash (ai_vehicle_get ai_current_actor) "fx_warp")
    (object_set_velocity (ai_vehicle_get ai_current_actor) 40)
)

(script static void banshee_warp_stagger
    (sleep (random_range 5 15))
)

(script static void seraph_warp_stagger
    (sleep (random_range 5 20))
)

(script static void sabre_station_stagger
    (sleep (random_range 15 25))
)

(script static void sabre_warp_stagger
    (sleep (random_range 5 20))
)

(script static void (teleport_players_in_volume (trigger_volume v, cutscene_flag teleport0, cutscene_flag teleport1, cutscene_flag teleport2, cutscene_flag teleport3))
    (if debug
        (print "teleporting players in a volume forward...")
    )
    (if (volume_test_object v player0)
        (object_teleport player0 teleport0)
    )
    (if (volume_test_object v player1)
        (object_teleport player1 teleport1)
    )
    (if (volume_test_object v player2)
        (object_teleport player2 teleport2)
    )
    (if (volume_test_object v player3)
        (object_teleport player3 teleport3)
    )
)

(script static void (teleport_players_not_in_volume (trigger_volume v, cutscene_flag teleport0, cutscene_flag teleport1, cutscene_flag teleport2, cutscene_flag teleport3))
    (if debug
        (print "teleporting players not in a volume forward...")
    )
    (if (not (volume_test_object v player0))
        (object_teleport player0 teleport0)
    )
    (if (not (volume_test_object v player1))
        (object_teleport player1 teleport1)
    )
    (if (not (volume_test_object v player2))
        (object_teleport player2 teleport2)
    )
    (if (not (volume_test_object v player3))
        (object_teleport player3 teleport3)
    )
)

(script static void (teleport_players (cutscene_flag fl0, cutscene_flag fl1, cutscene_flag fl2, cutscene_flag fl3))
    (if (unit_in_vehicle player0)
        (unit_exit_vehicle player0)
    )
    (object_teleport player0 fl0)
    (if (unit_in_vehicle player1)
        (unit_exit_vehicle player1)
    )
    (object_teleport player1 fl1)
    (if (unit_in_vehicle player2)
        (unit_exit_vehicle player2)
    )
    (object_teleport player2 fl2)
    (if (unit_in_vehicle player3)
        (unit_exit_vehicle player3)
    )
    (object_teleport player3 fl3)
)

(script static void (teleport_players_not_in_bsp (short bsp_index, cutscene_flag teleport0, cutscene_flag teleport1, cutscene_flag teleport2, cutscene_flag teleport3))
    (if (!= (object_get_bsp player0) bsp_index)
        (object_teleport player0 teleport0)
    )
    (if (!= (object_get_bsp player1) bsp_index)
        (object_teleport player1 teleport1)
    )
    (if (!= (object_get_bsp player2) bsp_index)
        (object_teleport player2 teleport2)
    )
    (if (!= (object_get_bsp player3) bsp_index)
        (object_teleport player3 teleport3)
    )
)

(script static void countdown
    (sound_impulse_start "sound\game_sfx\multiplayer\player_timer_beep" none 1)
    (if debug
        (print "::: 3 :::")
    )
    (sleep 30)
    (sound_impulse_start "sound\game_sfx\multiplayer\player_timer_beep" none 1)
    (if debug
        (print "::: 2 :::")
    )
    (sleep 30)
    (sound_impulse_start "sound\game_sfx\multiplayer\player_timer_beep" none 1)
    (if debug
        (print "::: 1 :::")
    )
    (sleep 30)
    (sound_impulse_start "sound\game_sfx\multiplayer\countdown_timer" none 1)
    (if debug
        (print "::: 0 :::")
    )
)

(script static void (f_bring_players_forward (trigger_volume volume, unit player_name, cutscene_flag flag))
    (if (not (volume_test_object volume player_name))
        (object_teleport player_name flag)
    )
)

(script command_script void cs_abort
    (sleep 1)
)

(script static void bch_start_infinite_encounter
    (wake bch_unsc_post_control)
    (wake bch_cov_post_beach_control)
    (wake bch_cov_post_dock_control)
    (wake bch_recycle_bipeds)
    (ai_fast_and_dumb true)
    (ai_lod_full_detail_actors 16)
)

(script static void branch_abort_bch_infinite
    (if debug
        (print "-=-=-=-=- killing the infinite beach encounter -=-=-=-=-")
    )
    (ai_erase "gr_cov_bch")
    (ai_erase "gr_cov_bch_counter")
    (ai_erase "gr_unsc_bch_post")
    (ai_erase "sq_cov_bch_post_beach_fork0")
    (ai_erase "sq_cov_bch_post_dock_fork0")
    (ai_erase "sq_unsc_bch_reinforce_pelican0")
    (ai_fast_and_dumb false)
    (ai_lod_full_detail_actors 20)
    (add_recycling_volume_by_type "tv_bch_recycle" 0 10 2)
)

(script dormant void bch_unsc_post_control
    (branch (= b_bch_infinite_kill true) (branch_abort_bch_infinite))
    (ai_place "sq_unsc_bch_reinforce_pelican0")
    (sleep_until (<= (ai_living_count "sq_unsc_bch_reinforce_pelican0") 0))
    (sleep_until 
        (begin
            (sleep_until (<= (ai_living_count "gr_unsc_bch_post") 1))
            (if debug
                (print "migrating remaining unsc on the bch to holding squad")
            )
            (ai_migrate "gr_unsc_bch_post" "sq_unsc_bch_reinforce_holding0")
            (sleep (random_range 150 300))
            (garbage_collect_now)
            (ai_place "sq_unsc_bch_reinforce_pelican0")
            (sleep_until (= b_bch_post_pelican_enroute true))
            (sleep_until (= b_bch_post_pelican_enroute false))
            (garbage_collect_now)
            false
        )
        1
    )
)

(script dormant void bch_cov_post_beach_control
    (branch (= b_bch_infinite_kill true) (branch_abort))
    (ai_place "sq_cov_bch_post_beach_fork0")
    (sleep_until (<= (ai_living_count "sq_cov_bch_post_beach_fork0") 0))
    (sleep_until 
        (begin
            (sleep_until (<= (ai_task_count "obj_cov_bch_post/beach") 1))
            (ai_migrate "gr_cov_bch_counter_beach" "sq_cov_bch_post_beach_holding0")
            (sleep (random_range 150 300))
            (garbage_collect_now)
            (ai_place "sq_cov_bch_post_beach_fork0")
            (sleep_until (= b_bch_post_beach_fork_enroute true))
            (sleep_until (= b_bch_post_beach_fork_enroute false))
            (garbage_collect_now)
            false
        )
        1
    )
)

(script dormant void bch_cov_post_dock_control
    (branch (= b_bch_infinite_kill true) (branch_abort))
    (sleep_until (not (bch_wraith_is_alive)) 30 (* 30 180))
    (sleep_until 
        (begin
            (if (bch_wraith_is_alive)
                (sleep_until (<= (ai_task_count "obj_cov_bch_post/dock") 0))
                (sleep_until (<= (ai_task_count "obj_cov_bch_post/dock") 1))
            )
            (ai_migrate "gr_cov_bch_counter_dock" "sq_cov_bch_post_dock_holding0")
            (garbage_collect_now)
            (sleep (random_range 90 150))
            (ai_place "sq_cov_bch_post_dock_fork0")
            (sleep_until (= b_bch_post_dock_fork_enroute true))
            (sleep_until (= b_bch_post_dock_fork_enroute false))
            (garbage_collect_now)
            false
        )
        1
    )
)

(script command_script void cs_bch_post_beach_fork
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 150)
    (set s_bch_post_beach_wave (+ s_bch_post_beach_wave 1))
    (set b_bch_post_beach_fork_enroute true)
    (cs_ignore_obstacles true)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_post_forks/beach_entry1")
    (cs_vehicle_boost false)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "ps_bch_post_forks/beach_entry0")
    (cs_vehicle_speed 0.5)
    (cs_fly_to "ps_bch_post_forks/beach_hover")
    (sleep 45)
    (cs_vehicle_speed 0.3)
    (if (and (<= s_bch_post_beach_wave 1) (= b_mendicant_beach true))
        (begin
            (if debug
                (print "spawning beach light")
            )
            (f_load_fork (ai_vehicle_get ai_current_actor) "right" none ai_bch_post_beach_01 ai_bch_post_beach_02 none)
        )
        (begin
            (if (<= (random_range 0 100) s_bch_post_heavy_chance)
                (begin
                    (if debug
                        (print "spawning beach heavy")
                    )
                    (f_load_fork (ai_vehicle_get ai_current_actor) "right" ai_bch_post_beach_heavy ai_bch_post_beach_01 ai_bch_post_beach_02 none)
                )
                (begin
                    (if debug
                        (print "spawning beach light")
                    )
                    (f_load_fork (ai_vehicle_get ai_current_actor) "right" ai_bch_post_beach_00 ai_bch_post_beach_01 ai_bch_post_beach_02 none)
                )
            )
        )
    )
    (set ai_bch_post_beach_02 none)
    (cs_fly_to_and_face "ps_bch_post_forks/beach_land" "ps_bch_post_forks/beach_land_facing" 0.25)
    (sleep 30)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "right")
    (set b_bch_post_beach_fork_enroute false)
    (cs_vehicle_speed 0.5)
    (cs_fly_to_and_face "ps_bch_post_forks/beach_hover" "ps_bch_post_forks/beach_land_facing" 0.25)
    (sleep 1)
    (cs_vehicle_speed 0.8)
    (cs_fly_to "ps_bch_post_forks/beach_exit0")
    (cs_vehicle_speed 1)
    (cs_fly_to "ps_bch_post_forks/beach_exit1")
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 150)
    (cs_fly_to "ps_bch_post_forks/beach_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script static boolean bch_wraith_is_alive
    (> (object_get_health o_bch_wraith) 0)
)

(script dormant void bch_wraith_water_kill
    (branch (= b_bch_infinite_kill true) (branch_abort))
    (sleep_until (volume_test_object "tv_bch_wraith_water" o_bch_wraith))
    (sleep (random_range 30 75))
    (damage_object o_bch_wraith "" 10000)
)

(script command_script void cs_bch_post_dock_fork
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 150)
    (set s_bch_post_dock_wave (+ s_bch_post_dock_wave 1))
    (set b_bch_post_dock_fork_enroute true)
    (cs_ignore_obstacles true)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_bch_post_forks/dock_entry1")
    (cs_vehicle_boost false)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "ps_bch_post_forks/dock_entry0")
    (cs_vehicle_speed 0.5)
    (cs_fly_to "ps_bch_post_forks/dock_hover")
    (sleep 45)
    (cs_vehicle_speed 0.3)
    (if (bch_wraith_is_alive)
        (begin
            (if debug
                (print "dock fork -- wraith is alive")
            )
            (begin_random_count
                1
                (f_load_fork (ai_vehicle_get ai_current_actor) "left" "sq_cov_bch_post_dock_lite0" none none none)
                (f_load_fork (ai_vehicle_get ai_current_actor) "left" "sq_cov_bch_post_dock_lite1" none none none)
            )
        )
        (begin
            (if debug
                (print "dock fork -- wraith is dead")
            )
            (if (<= (random_range 0 100) s_bch_post_heavy_chance)
                (f_load_fork (ai_vehicle_get ai_current_actor) "left" ai_bch_post_dock_heavy ai_bch_post_dock_01 none none)
                (f_load_fork (ai_vehicle_get ai_current_actor) "left" ai_bch_post_dock_00 ai_bch_post_dock_01 none none)
            )
        )
    )
    (cs_fly_to_and_face "ps_bch_post_forks/dock_land" "ps_bch_post_forks/dock_land_facing" 0.25)
    (sleep 30)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "left")
    (set b_bch_post_dock_fork_enroute false)
    (cs_vehicle_speed 0.5)
    (cs_fly_to_and_face "ps_bch_post_forks/dock_hover" "ps_bch_post_forks/dock_land_facing" 0.25)
    (sleep 1)
    (cs_vehicle_speed 0.8)
    (cs_fly_to "ps_bch_post_forks/dock_exit0")
    (cs_vehicle_speed 1)
    (cs_fly_to "ps_bch_post_forks/dock_exit1")
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 150)
    (cs_fly_to "ps_bch_post_forks/dock_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_post_pelican
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 90)
    (vehicle_set_player_interaction (ai_vehicle_get ai_current_actor) none false false)
    (cs_ignore_obstacles true)
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (load_pelican (ai_vehicle_get ai_current_actor) "dual" "sq_unsc_bch_reinforce0" "sq_unsc_bch_reinforce1" "sq_unsc_bch_reinforce2" "sq_unsc_bch_reinforce3")
    (cs_fly_by "ps_bch_post_forks/pelican_entry0")
    (cs_vehicle_speed 0.8)
    (cs_vehicle_boost false)
    (cs_fly_to "ps_bch_post_forks/pelican_hover")
    (sleep 30)
    (set b_bch_post_pelican_enroute true)
    (cs_vehicle_speed 0.6)
    (cs_fly_to_and_face "ps_bch_post_forks/pelican_land" "ps_bch_post_forks/pelican_land_facing" 0.25)
    (unload_pelican_all (ai_vehicle_get ai_current_actor))
    (sleep 60)
    (set b_bch_post_pelican_enroute false)
    (cs_fly_to "ps_bch_post_forks/pelican_hover")
    (cs_vehicle_speed 0.8)
    (cs_fly_to "ps_bch_post_forks/pelican_exit0")
    (cs_fly_to "ps_bch_post_forks/pelican_exit1")
    (cs_vehicle_speed 1)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 270)
    (cs_fly_to "ps_bch_post_forks/pelican_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script static void (load_pelican (vehicle pelican, string load_side, ai load_squad_01, ai load_squad_02, ai load_squad_03, ai load_squad_04))
    (ai_place load_squad_01)
    (ai_place load_squad_02)
    (ai_place load_squad_03)
    (ai_place load_squad_04)
    (sleep 1)
    (if (= load_side "left")
        (begin
            (if debug
                (print "load pelican left...")
            )
            (ai_vehicle_enter_immediate load_squad_01 pelican 25)
        )
        (if (= load_side "right")
            (begin
                (if debug
                    (print "load pelican right...")
                )
                (ai_vehicle_enter_immediate load_squad_01 pelican 26)
            )
            (if (= load_side "dual")
                (begin
                    (if debug
                        (print "load pelican dual...")
                    )
                    (ai_vehicle_enter_immediate load_squad_01 pelican 25)
                    (ai_vehicle_enter_immediate load_squad_02 pelican 26)
                    (ai_vehicle_enter_immediate load_squad_03 pelican 25)
                    (ai_vehicle_enter_immediate load_squad_04 pelican 26)
                )
            )
        )
    )
)

(script static void (unload_pelican_all (vehicle pelican))
    (unit_open pelican)
    (sleep 60)
    (begin
        (begin
            (vehicle_unload pelican 28)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 29)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 30)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 31)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 32)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 33)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 34)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 35)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 36)
            (pelican_unload_seat_delay)
        )
        (begin
            (vehicle_unload pelican 37)
            (pelican_unload_seat_delay)
        )
    )
)

(script static void pelican_unload_seat_delay
    (sleep (random_range 2 15))
)

(script dormant void bch_seraphs_start
    (bch_seraphs_loop)
)

(script static void bch_seraphs_loop
    (branch (or (= b_bch_infinite_kill true) (>= s_objcon_fac 110) (= b_lnc_started true)) (branch_abort_bch_seraphs))
    (sleep_until 
        (begin
            (if (<= (ai_living_count "sq_cov_bch_seraphs/pilot0") 0)
                (ai_place "sq_cov_bch_seraphs/pilot0")
                (if (<= (ai_living_count "sq_cov_bch_seraphs/pilot3") 0)
                    (ai_place "sq_cov_bch_seraphs/pilot3")
                    (if (<= (ai_living_count "sq_cov_bch_seraphs/pilot2") 0)
                        (ai_place "sq_cov_bch_seraphs/pilot2")
                        (if (<= (ai_living_count "sq_cov_bch_seraphs/pilot1") 0)
                            (ai_place "sq_cov_bch_seraphs/pilot1")
                        )
                    )
                )
            )
            (sleep (random_range 10 60))
            false
        )
        1
    )
)

(script static void branch_abort_bch_seraphs
    (ai_erase "sq_cov_bch_seraphs")
)

(script static void lnc_seraphs_loop
    (branch (= b_lnc_player_in_sabre true) (branch_abort_lnc_seraphs))
    (sleep_until 
        (begin
            (if (<= (ai_living_count "sq_cov_bch_seraphs/pilot3") 0)
                (ai_place "sq_cov_bch_seraphs/pilot3")
                (if (<= (ai_living_count "sq_cov_bch_seraphs/pilot2") 0)
                    (ai_place "sq_cov_bch_seraphs/pilot2")
                )
            )
            (sleep (random_range 10 60))
            false
        )
        1
    )
)

(script static void branch_abort_lnc_seraphs
    (ai_erase "sq_cov_bch_seraphs")
)

(script static void beach_seraph_setup
    (ai_magically_see "sq_unsc_bch_aa" ai_current_actor)
    (ai_set_clump ai_current_actor clump_ground_flavor)
    (ai_set_targeting_group ai_current_actor s_bch_aa_targeting_group)
    (cs_ignore_obstacles ai_current_actor true)
    (object_cannot_die (ai_vehicle_get ai_current_actor) true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 s_bch_bomber_scale_ticks)
)

(script command_script void cs_bch_seraph0
    (beach_seraph_setup)
    (cs_vehicle_speed 1)
    (ai_set_blind ai_current_actor true)
    (cs_fly_by "ps_bch_seraphs/seraph0_00")
    (ai_disregard (ai_actors ai_current_actor) true)
    (cs_fly_by "ps_bch_seraphs/seraph0_01")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 90)
    (cs_fly_by "ps_bch_seraphs/seraph0_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_seraph1
    (beach_seraph_setup)
    (cs_vehicle_speed 1)
    (ai_set_blind ai_current_actor true)
    (cs_fly_by "ps_bch_seraphs/seraph1_00")
    (ai_disregard (ai_actors ai_current_actor) true)
    (cs_fly_by "ps_bch_seraphs/seraph1_01")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 150)
    (cs_fly_by "ps_bch_seraphs/seraph1_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_seraph2
    (beach_seraph_setup)
    (cs_vehicle_speed 1)
    (ai_set_blind ai_current_actor true)
    (cs_fly_by "ps_bch_seraphs/seraph2_00")
    (ai_disregard (ai_actors ai_current_actor) true)
    (cs_fly_by "ps_bch_seraphs/seraph2_01")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 150)
    (cs_fly_by "ps_bch_seraphs/seraph2_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_bch_seraph3
    (beach_seraph_setup)
    (cs_vehicle_speed 1)
    (ai_set_blind ai_current_actor true)
    (cs_fly_by "ps_bch_seraphs/seraph3_00")
    (cs_shoot_point true "ps_bch_seraphs/seraph3_target")
    (cs_fly_by "ps_bch_seraphs/seraph3_01")
    (cs_shoot false)
    (ai_disregard (ai_actors ai_current_actor) true)
    (cs_fly_by "ps_bch_seraphs/seraph3_02")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 150)
    (cs_fly_by "ps_bch_seraphs/seraph3_erase")
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script static void bch_setup_aa
    (object_create_folder "sc_bch_turrets")
    (ai_place "sq_unsc_bch_aa")
    (sleep 1)
    (ai_set_clump "sq_unsc_bch_aa" clump_ground_aa)
    (ai_designer_clump_perception_range 600)
    (ai_set_targeting_group "sq_unsc_bch_aa" s_bch_aa_targeting_group)
)

(script static void lnc_setup_aa
    (object_create_folder "sc_bch_turrets")
    (ai_place "sq_unsc_bch_aa/turret0")
    (sleep 1)
    (ai_set_clump "sq_unsc_bch_aa" clump_ground_aa)
    (ai_designer_clump_perception_range 600)
    (ai_set_targeting_group "sq_unsc_bch_aa" s_bch_aa_targeting_group)
)

(script dormant void bch_recycle_bipeds
    (branch (= b_bch_infinite_kill true) (branch_abort))
    (sleep_until 
        (begin
            (if debug
                (print "beach recycling bipeds")
            )
            (add_recycling_volume_by_type "tv_bch_recycle" 2 10 1)
            (add_recycling_volume "tv_bch_recycle" 15 15)
            (sleep (* 30 15))
            false
        )
        1
    )
)

(script command_script void cs_bch_wraith0_shoot_facility
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot_point true "ps_bch_wraiths/wraith0_target0")
                (cs_shoot_point true "ps_bch_wraiths/wraith0_target1")
                (cs_shoot_point true "ps_bch_wraiths/wraith0_target2")
            )
            (sleep 180)
            (cs_go_to "ps_bch_wraiths/wraith0_firing_pos")
            false
        )
        1
    )
)

(script command_script void cs_bch_wraith1_shoot_facility
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_shoot_point true "ps_bch_wraiths/wraith1_target0")
                (cs_shoot_point true "ps_bch_wraiths/wraith1_target1")
                (cs_shoot_point true "ps_bch_wraiths/wraith1_target2")
            )
            (sleep 210)
            (cs_go_to "ps_bch_wraiths/wraith1_firing_pos")
            false
        )
        1
    )
)

(script static void (drop_pod (device_name pod_marker, ai pod_pilot))
    (print "pod drop started...")
    (object_create pod_marker)
    (ai_place pod_pilot)
    (sleep 1)
    (objects_attach pod_marker "" (ai_vehicle_get_from_spawn_point pod_pilot) "")
    (device_set_position_immediate pod_marker 0)
    (sleep 1)
    (device_set_power pod_marker 1)
    (device_set_position pod_marker 1)
    (sleep_until (>= (device_get_position pod_marker) 1) 1)
    (effect_new_on_object_marker "fx\fx_library\pod_impacts\default\pod_impact_default_medium.effect" (ai_vehicle_get_from_spawn_point pod_pilot) "fx_impact")
    (device_set_power pod_marker 0)
)

(script static void (open_pod (device_name pod_marker, ai pod_pilot))
    (objects_detach pod_marker (ai_vehicle_get_from_spawn_point pod_pilot))
    (object_destroy pod_marker)
    (object_damage_damage_section (ai_vehicle_get_from_spawn_point pod_pilot) "body" 100)
    (sleep 45)
    (vehicle_unload (ai_vehicle_get_from_spawn_point pod_pilot) none)
)

(script startup void mendicant_control
    (if debug
        (print "mendicant: choose your destiny")
    )
    (begin_random_count
        1
        (wake mendicant_beach_control)
        (wake mendicant_bridge_control)
        (wake mendicant_final_control)
    )
)

(script dormant void mendicant_beach_control
    (branch (= b_lnc_started true) (branch_abort))
    (set b_mendicant_beach true)
    (if debug
        (print "mendicant bias beach")
    )
    (sleep (* 30 10))
    (sleep_until (and (> s_bch_post_beach_wave 0) (> s_bch_post_dock_wave 0)))
    (sleep_until (and (not b_bch_post_beach_fork_enroute) (not b_bch_post_dock_fork_enroute)))
    (sleep (random_range (* 30 2) (* 30 4)))
    (begin_random_count
        1
        (begin
            (if debug
                (print "dropping mendicant pod 0")
            )
            (drop_pod "dm_mendicant_pod0" "sq_cov_mendicant_beach/bias")
            (open_pod "dm_mendicant_pod0" "sq_cov_mendicant_beach/bias")
        )
        (begin
            (if debug
                (print "dropping mendicant pod 1")
            )
            (drop_pod "dm_mendicant_pod1" "sq_cov_mendicant_beach/bias")
            (open_pod "dm_mendicant_pod1" "sq_cov_mendicant_beach/bias")
        )
        (begin
            (if debug
                (print "dropping mendicant pod 2")
            )
            (drop_pod "dm_mendicant_pod2" "sq_cov_mendicant_beach/bias")
            (open_pod "dm_mendicant_pod2" "sq_cov_mendicant_beach/bias")
        )
    )
)

(script command_script void cs_mendicant_beach
    (cs_enable_moving true)
    (cs_enable_targeting true)
    (cs_shoot true)
    (ai_disregard ai_current_actor true)
    (sleep_until (or (<= (ai_living_count "gr_cov_bch_counter_beach") 4) (<= (unit_get_shield ai_current_actor) 0) (= b_bch_post_pelican_enroute true)) 30 (* 30 35))
    (sleep (random_range 60 120))
    (if debug
        (print "camo now")
    )
    (ai_set_active_camo ai_current_actor true)
    (cs_enable_targeting false)
    (cs_shoot false)
    (sleep 30)
    (ai_erase ai_current_actor)
)

(script dormant void mendicant_bridge_control
    (if debug
        (print "mendicant bias bridge")
    )
    (branch (= b_fin_started true) (branch_abort))
    (sleep_until (>= s_objcon_brg 10) 1)
    (ai_place "sq_cov_mendicant_bridge")
    (thespian_performance_activate "thespian_brg_mendicant")
    (sleep_until b_mendicant_bridge_alert)
    (sleep 60)
    (cs_run_command_script "sq_cov_mendicant_bridge" cs_mendicant_bridge)
)

(script command_script void cs_mendicant_bridge
    (cs_enable_moving true)
    (cs_enable_targeting true)
    (cs_shoot true)
    (ai_disregard ai_current_actor true)
    (sleep (random_range (* 30 30) (* 30 45)))
    (if debug
        (print "camo now")
    )
    (ai_set_active_camo ai_current_actor true)
    (cs_enable_targeting false)
    (cs_shoot false)
    (sleep 30)
    (ai_erase ai_current_actor)
)

(script dormant void mendicant_final_control
    (if debug
        (print "mendicant bias final")
    )
    (sleep_until (= b_fin_started true) 1)
    (ai_place "sq_cov_mendicant_final")
)

(script command_script void cs_mendicant_final
    (cs_enable_moving true)
    (cs_enable_targeting true)
    (cs_shoot true)
    (ai_disregard ai_current_actor true)
    (sleep (random_range (* 30 30) (* 30 35)))
    (if debug
        (print "camo now")
    )
    (ai_set_active_camo ai_current_actor true)
    (cs_enable_targeting false)
    (cs_shoot false)
    (sleep 30)
    (ai_erase ai_current_actor)
)

(script static void thespian_corvette_stagger_pilot0
    (performance_play_line "pilot0_delay")
    (performance_play_line "pilot0_stagger")
)

(script static void thespian_corvette_stagger_pilot1
    (performance_play_line "pilot0_delay")
    (performance_play_line "pilot0_stagger")
)

(script static void thespian_corvette_stagger_pilot2
    (performance_play_line "pilot0_delay")
    (performance_play_line "pilot0_stagger")
)

(script static void thespian_brg_elite_terminal0
    (cs_stow (performance_get_actor "elite_specops") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (branch_terminal_elite (performance_get_actor "elite_specops") "gr_cov_brg") (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "elite_specops") false)
    (performance_play_line "unstow_weapon")
)

(script static void thespian_brg_elite_terminal5
    (cs_stow (performance_get_actor "elite_specops") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (branch_terminal_elite (performance_get_actor "elite_specops") "gr_cov_brg") (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "elite_specops") false)
    (performance_play_line "unstow_weapon")
)

(script static void thespian_deadman_kat
    (performance_play_line "goto_and_align")
    (set b_fac_deadman_kat_waiting true)
    (performance_play_line "set_boolean")
    (sleep_until (and (>= s_objcon_fac 100) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_player_moves")
)

(script static void thespian_deadman_carter
    (performance_play_line "go_by_entry1")
    (performance_play_line "go_by_entry0")
    (performance_play_line "goto_and_align")
    (set b_fac_deadman_carter_waiting true)
    (performance_play_line "set_boolean")
    (performance_play_line "anim_bunker_open_enter")
    (performance_play_line "anim_bunker_open_close")
    (performance_play_line "anim_bunker_closed_idle")
    (sleep_until (and (< (objects_distance_to_object (players) (ai_get_object (performance_get_actor "carter"))) 1.5) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_player_proximity")
    (performance_play_line "anim_bunker_closed_to_open")
    (performance_play_line "anim_bunker_open_idle")
    (sleep_until (and (>= s_objcon_fac 100) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_player_moves")
    (performance_play_line "anim_bunker_exit")
)

(script static void thespian_deadman_jorge
    (performance_play_line "go_by_entry0")
    (performance_play_line "go_to_wait")
    (set b_fac_deadman_jorge_waiting true)
    (performance_play_line "set_boolean")
    (sleep_until (and (>= s_objcon_fac 100) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_player_moves")
)

(script static void thespian_controlroom_carter
    (print "starting carter_controlroom")
    (performance_play_line "debug_print")
    (performance_play_line "go_by_entry0")
    (performance_play_line "go_to_dest")
    (performance_play_line "anim_investigate")
    (performance_play_line "anim_idle")
)

(script static void thespian_controlroom_kat
    (print "starting kat_controlroom")
    (performance_play_line "debug_print")
    (performance_play_line "go_by_entry0")
    (performance_play_line "go_to_dest")
    (performance_play_line "anim_idle0")
    (performance_play_line "anim_idle1")
)

(script static void thespian_controlroom_jorge
    (print "starting jorge_controlroom")
    (performance_play_line "debug_print")
    (performance_play_line "go_by_entry0")
    (performance_play_line "go_to_dest")
    (performance_play_line "anim_idle0")
    (performance_play_line "anim_idle1")
)

(script static void thespian_lnc_salute0
    (performance_play_line "teleport_to_point")
    (performance_play_line "stand_alert")
    (sleep_until (and (< (objects_distance_to_object (players) (ai_get_object (performance_get_actor "trooper"))) 5.5) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_player_proximity")
    (performance_play_line "dialogue_ready_for_launch")
    (performance_play_line "anim_salute")
)

(script static void thespian_lnc_salute1
    (performance_play_line "teleport_to_point")
    (performance_play_line "stand_alert")
    (sleep_until (and (< (objects_distance_to_object (players) (ai_get_object (performance_get_actor "trooper"))) 5.5) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_player_proximity")
    (performance_play_line "anim_salute")
)

(script static void thespian_lnc_catwalk0
    (performance_play_line "teleport_to_point")
    (performance_play_line "stand_alert")
    (sleep_until (< (device_get_position "dm_slo_shutter") 0.5) 1)
    (performance_play_line "sleep_until_idle_ready")
    (performance_play_line "anim_pose")
    (performance_play_line "anim_stagger")
    (performance_play_line "goto_exit")
)

(script static void thespian_launch_jorge
    (performance_play_line "go_by_intermediate")
    (performance_play_line "goto_dest")
    (performance_play_line "dialogue_wait")
    (performance_play_line "wait")
    (sleep_until (and (= 1 2) (not (thespian_performance_is_blocked))) 1)
)

(script static void thespian_grm_elite_terminal0
    (cs_stow (performance_get_actor "elite") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (branch_terminal_elite (performance_get_actor "elite") "gr_cov_grm") (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "elite") false)
    (performance_play_line "unstow_weapon")
)

(script static void thespian_grm_elite_terminal1
    (cs_stow (performance_get_actor "elite") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (branch_terminal_elite (performance_get_actor "elite") "gr_cov_grm") (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "elite") false)
    (performance_play_line "unstow_weapon")
)

(script static void thespian_grm_elite_terminal2
    (cs_stow (performance_get_actor "elite") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (branch_terminal_elite (performance_get_actor "elite") "gr_cov_grm") (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "elite") false)
    (performance_play_line "unstow_weapon")
)

(script static void thespian_grm_stagger_pilot0
    (performance_play_line "pilot0_delay")
    (performance_play_line "pilot0_stagger")
)

(script static void thespian_grm_stagger_pilot1
    (performance_play_line "pilot0_delay")
    (performance_play_line "pilot0_stagger")
)

(script static void thespian_grm_stagger_pilot2
    (performance_play_line "pilot0_delay")
    (performance_play_line "pilot0_stagger")
)

(script static void thespian_grm_stagger_pilot3
    (performance_play_line "pilot0_delay")
    (performance_play_line "pilot0_stagger")
)

(script static void thespian_brg_mendicant
    (cs_stow (performance_get_actor "mendicant") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (branch_terminal_elite (performance_get_actor "mendicant") "gr_cov_brg") (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "mendicant") false)
    (performance_play_line "unstow_weapon")
    (set b_mendicant_bridge_alert true)
    (performance_play_line "begin_command_script")
)

(script static void thespian_deadman_elite
    (ai_set_blind (performance_get_actor "elite") true)
    (ai_set_targeting_group (performance_get_actor "elite") 9 false)
    (performance_play_line "blind")
    (performance_play_line "goto_facing")
    (ai_set_blind (performance_get_actor "elite") false)
    (performance_play_line "unblind")
)

(script static void thespian_com_elite_terminal0
    (cs_stow (performance_get_actor "elite") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (com_terminals_alert) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "elite") false)
    (performance_play_line "unstow_weapon")
)

(script static void thespian_com_elite_terminal1
    (cs_stow (performance_get_actor "elite") true)
    (performance_play_line "stow_weapon")
    (performance_play_line "goto_terminal")
    (performance_play_line "anim_consolecheck_enter")
    (performance_play_line "anim_consolecheck_idle")
    (sleep_until (and (com_terminals_alert) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "sleep_until_active")
    (performance_play_line "anim_consolecheck_exit")
    (cs_stow (performance_get_actor "elite") false)
    (performance_play_line "unstow_weapon")
)

(script static void 045la_blastoff_005_sc_sh1
    (begin
        (object_destroy "dm_slo_shutter")
        (object_destroy "launch_facility_light")
        (object_destroy "sc_slo_sabre")
        (object_destroy "sc_lnc_gantry_steps")
        (render_weather false)
    )
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "sabre_1" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "sabre_sabre_fastpack1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "gantry_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "fx_light_marker_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "sabre_cockpit2_1" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "sabre_background_fastpack1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 "fx_smoke_tunnel_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_bro_glass_1" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_music 0 0 0)
    (cinematic_scripting_start_music 0 0 1)
    (sleep 15)
    (cinematic_print "custom script play")
    (ai_play_line_on_object (cinematic_object_get "player") none)
    (sleep 83)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "sabre_2" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "sabre_sabre_fastpack1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "gantry_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "fx_light_marker_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "sabre_cockpit2_2" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "sabre_background_fastpack1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "fx_smoke_tunnel_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "fx_bro_glass_2" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 124)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "sabre_3" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "sabre_sabre_fastpack1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "gantry_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "fx_light_marker_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "sabre_cockpit2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 8 "fx_light_marker02_3" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 10 "sabre_background_fastpack1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 11 "fx_smoke_tunnel_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 12 "fx_bro_glass_3" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 93)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 3 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 3)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 0 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 1 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 2 "sabre_4" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 4 "sabre_sabre_fastpack1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 5 "gantry_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 6 "fx_light_marker_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 7 "sabre_cockpit2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 8 "fx_light_marker02_4" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 10 "sabre_background_fastpack1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 11 "fx_smoke_tunnel_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 12 "fx_bro_glass_4" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 45)
    (cinematic_scripting_start_dialogue 0 3 0 none)
    (sleep 23)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 4 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 4)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 0 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 1 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 2 "sabre_5" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 4 "sabre_sabre_fastpack1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 5 "gantry_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 6 "fx_light_marker_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 7 "sabre_cockpit2_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 8 "fx_light_marker02_5" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 10 "sabre_background_fastpack1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 11 "fx_smoke_tunnel_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 12 "fx_bro_glass_5" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 136)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh6
    (object_destroy "launch_pad")
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 5 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 5)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 2 "sabre_6" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 4 "sabre_sabre_fastpack1_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 5 "gantry_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 6 "fx_light_marker_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 7 "sabre_cockpit2_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 8 "fx_light_marker02_6" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 10 "sabre_background_fastpack1_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 11 "fx_smoke_tunnel_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 12 "fx_bro_glass_6" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "primary_engine_glow" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "ambient_steam_off" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "secondary_engine_glow" 0 0)
    (sleep 8)
    (cinematic_scripting_start_effect 0 5 0 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 15)
    (cinematic_scripting_start_effect 0 5 1 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 45)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "primary_engine_glow" 1 60)
    (sleep 15)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "secondary_engine_glow" 1 60)
    (sleep 104)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 6 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 6)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 2 "sabre_7" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 4 "sabre_sabre_fastpack1_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 5 "gantry_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 6 "fx_light_marker_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 7 "sabre_cockpit2_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 8 "fx_light_marker02_7" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 10 "sabre_background_fastpack1_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 11 "fx_smoke_tunnel_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 12 "fx_bro_glass_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 13 "logo_7" true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (render_exposure 2 0)
    (cinematic_scripting_start_effect 0 6 0 (cinematic_object_get "sabre_sabre_fastpack1"))
    (cinematic_scripting_start_effect 0 6 2 (cinematic_object_get "fx_bro_glass"))
    (cinematic_scripting_start_screen_effect 0 6 0)
    (cinematic_scripting_start_effect 0 6 1 (cinematic_object_get "fx_smoke_tunnel"))
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 13) "camera" 0.25 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 13) "location" 0.5 0)
    (sleep 121)
    (cinematic_scripting_stop_screen_effect 0 6 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 7 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 7)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 0 "jorge_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 1 "player_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 2 "sabre_8" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 4 "sabre_sabre_fastpack1_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 5 "gantry_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 6 "fx_light_marker_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 7 "sabre_cockpit2_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 8 "fx_light_marker02_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 9 "sled_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 10 "sabre_background_fastpack1_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 11 "fx_smoke_tunnel_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 12 "fx_bro_glass_8" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (sleep 63)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_005_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 8 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 8)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 2 "sabre_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 3 "sabre_background_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 4 "sabre_sabre_fastpack1_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 5 "gantry_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 6 "fx_light_marker_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 7 "sabre_cockpit2_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 8 "fx_light_marker02_9" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 10 "sabre_background_fastpack1_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 11 "fx_smoke_tunnel_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 12 "fx_bro_glass_9" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (cinematic_scripting_start_effect 0 8 0 (cinematic_object_get "sabre_sabre_fastpack1"))
    (cinematic_scripting_start_effect 0 8 1 (cinematic_object_get "sabre_background_fastpack1"))
    (cinematic_scripting_start_effect 0 8 2 (cinematic_object_get "fx_smoke_tunnel"))
    (sleep 226)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_blastoff_005_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (045la_blastoff_005_sc_sh1)
    (045la_blastoff_005_sc_sh2)
    (045la_blastoff_005_sc_sh3)
    (045la_blastoff_005_sc_sh4)
    (045la_blastoff_005_sc_sh5)
    (045la_blastoff_005_sc_sh6)
    (045la_blastoff_005_sc_sh7)
    (045la_blastoff_005_sc_sh8)
    (045la_blastoff_005_sc_sh9)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 045la_blastoff_010_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "sabre_sabre_fastpack1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "fx_sunlight_marker_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "sabre_cockpit2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "fx_sunlight_rear_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "sabre_background_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "sabre_background_fastpack_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "fx_light_jorge_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_effect 1 0 0 (cinematic_object_get "sabre_background_fastpack"))
    (cinematic_scripting_start_effect 1 0 1 (cinematic_object_get "sabre"))
    (sleep 299)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_blastoff_010_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (prepare_to_switch_to_zone_set "set_wafer_019_030")
    (045la_blastoff_010_sc_sh1)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 045la_blastoff_020_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 0 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 0)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 0 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 1 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 2 "sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 3 "sabre_sabre_fastpack1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 4 "fx_light_marker_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 5 "sabre_cockpit2_1" true)
    (object_hide (cinematic_scripting_get_object 2 6) true)
    (object_hide (cinematic_scripting_get_object 2 7) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (sleep 35)
    (cinematic_scripting_start_dialogue 2 0 0 none)
    (sleep 63)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_020_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 1 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 1)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (object_hide (cinematic_scripting_get_object 2 0) true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 2 "sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 3 "sabre_sabre_fastpack1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 4 "fx_light_marker_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 5 "sabre_cockpit2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 6 "sabre_background_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 7 "sabre_background_fastpack_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (cinematic_scripting_start_effect 2 1 0 (cinematic_object_get "sabre"))
    (cinematic_scripting_start_effect 2 1 1 (cinematic_object_get "sabre_background_fastpack"))
    (sleep 129)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_blastoff_020_sc
    (cinematic_print "beginning scene 3")
    (cinematic_scripting_create_scene 2)
    (switch_zone_set "set_wafer_019_030")
    (045la_blastoff_020_sc_sh1)
    (045la_blastoff_020_sc_sh2)
    (cinematic_scripting_destroy_scene 2)
)

(script static void 045la_blastoff_030_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 0 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 0)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 0 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 1 "sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 2 "sabre_sabre_fastpack1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 3 "fx_light_marker_sun_cockpit_1" true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 5 "sabre_cockpit2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 6 "fx_light_main_booster_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 7 "fx_light_top_booster_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 8 "fx_light_sabre_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 2) "ambient_steam_off" 0 0)
    (sleep 34)
    (cinematic_scripting_start_dialogue 3 0 0 none)
    (sleep 41)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_030_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 1 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 1)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (object_hide (cinematic_scripting_get_object 3 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 1 "sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 2 "sabre_sabre_fastpack1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 3 "fx_light_marker_sun_cockpit_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 4 "planet_card_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 5 "sabre_cockpit2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 6 "fx_light_main_booster_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 7 "fx_light_top_booster_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 8 "fx_light_sabre_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (cinematic_scripting_start_effect 3 1 0 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 55)
    (cinematic_scripting_start_effect 3 1 1 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 11)
    (cinematic_scripting_start_dialogue 3 1 0 none)
    (sleep 19)
    (cinematic_scripting_start_effect 3 1 2 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 32)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_030_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 2 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 2)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (object_hide (cinematic_scripting_get_object 3 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 1 "sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 2 "sabre_sabre_fastpack1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 3 "fx_light_marker_sun_cockpit_3" true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 5 "sabre_cockpit2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 6 "fx_light_main_booster_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 7 "fx_light_top_booster_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 8 "fx_light_sabre_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (cinematic_scripting_start_effect 3 2 0 (cinematic_object_get "sabre_sabre_fastpack1"))
    (cinematic_scripting_start_effect 3 2 2 (cinematic_object_get "sabre_sabre_fastpack1"))
    (cinematic_scripting_start_effect 3 2 1 (cinematic_object_get "sabre_sabre_fastpack1"))
    (cinematic_scripting_start_effect 3 2 3 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 32)
    (cinematic_scripting_start_effect 3 2 4 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 34)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_030_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 3 "045la_blastoff_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 3)
    (cinematic_object_create_cinematic_anchor "045la_blastoff_anchor")
    (object_hide (cinematic_scripting_get_object 3 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 1 "sabre_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 2 "sabre_sabre_fastpack1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 3 "fx_light_marker_sun_cockpit_4" true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 5 "sabre_cockpit2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 6 "fx_light_main_booster_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 7 "fx_light_top_booster_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 8 "fx_light_sabre_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 2) "ambient_steam_off" 0 0)
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 3 1) "main_engine_fx")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 2) "secondary_engine_top" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 1) "boost_fx" 0 0)
    (sleep 32)
    (cinematic_scripting_start_effect 3 3 0 (cinematic_object_get "sabre_sabre_fastpack1"))
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 2) "secondary_engine_top" 1 5)
    (cinematic_scripting_start_effect 3 3 2 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 1)
    (cinematic_scripting_start_effect 3 3 1 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 2) "secondary_engine_top" 0 40)
    (sleep 4)
    (cinematic_scripting_start_effect 3 3 3 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 1)
    (cinematic_scripting_start_effect 3 3 4 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 14)
    (cinematic_scripting_start_effect 3 3 5 (cinematic_object_get "sabre_sabre_fastpack1"))
    (sleep 46)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 1) "main_engine_fx" 0.15 0)
    (sleep 180)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 1) "main_engine_fx" 1 35)
    (sleep 42)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 1) "boost_fx" 1 20)
    (sleep 23)
    (cinematic_scripting_start_effect 3 3 6 (cinematic_object_get "sabre"))
    (sleep 41)
    (cinematic_scripting_start_dialogue 3 3 0 none)
    (sleep 67)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_blastoff_030_sc
    (cinematic_print "beginning scene 4")
    (cinematic_scripting_create_scene 3)
    (045la_blastoff_030_sc_sh1)
    (045la_blastoff_030_sc_sh2)
    (045la_blastoff_030_sc_sh3)
    (045la_blastoff_030_sc_sh4)
    (switch_zone_set "set_wafer_019_030")
    (cinematic_scripting_destroy_scene 3)
)

(script static void 045la_blastoff_040_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 0 "wafer_cinematic_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 0)
    (cinematic_object_create_cinematic_anchor "wafer_cinematic_anchor")
    (object_hide (cinematic_scripting_get_object 4 0) true)
    (object_hide (cinematic_scripting_get_object 4 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 2 "sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 3 "fx_light_marker_sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 4 "fx_light_marker_cockpit_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 5 "nuke_card_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 6 "sabre_cockpit1_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (sleep 125)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_040_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 1 "wafer_cinematic_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 1)
    (cinematic_object_create_cinematic_anchor "wafer_cinematic_anchor")
    (object_hide (cinematic_scripting_get_object 4 0) true)
    (object_hide (cinematic_scripting_get_object 4 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 2 "sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 3 "fx_light_marker_sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 4 "fx_light_marker_cockpit_2" true)
    (object_hide (cinematic_scripting_get_object 4 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 6 "sabre_cockpit1_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 72)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_040_sc_sh3
    (begin
        (prepare_to_switch_to_zone_set "set_wafercombat_030")
        (object_create_folder "sc_waf_bays")
    )
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 2 "wafer_cinematic_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 2)
    (cinematic_object_create_cinematic_anchor "wafer_cinematic_anchor")
    (object_hide (cinematic_scripting_get_object 4 0) true)
    (object_hide (cinematic_scripting_get_object 4 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 2 "sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 3 "fx_light_marker_sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 4 "fx_light_marker_cockpit_3" true)
    (object_hide (cinematic_scripting_get_object 4 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 6 "sabre_cockpit1_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 339)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff_040_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 3 "wafer_cinematic_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 3)
    (cinematic_object_create_cinematic_anchor "wafer_cinematic_anchor")
    (object_hide (cinematic_scripting_get_object 4 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 1 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 2 "sabre_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 3 "fx_light_marker_sabre_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 4 "fx_light_marker_cockpit_4" true)
    (object_hide (cinematic_scripting_get_object 4 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 6 "sabre_cockpit1_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 46)
    (sleep (cinematic_tag_fade_out_from_cinematic "045la_blastoff"))
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_blastoff_040_sc
    (cinematic_print "beginning scene 5")
    (cinematic_scripting_create_scene 4)
    (045la_blastoff_040_sc_sh1)
    (045la_blastoff_040_sc_sh2)
    (045la_blastoff_040_sc_sh3)
    (045la_blastoff_040_sc_sh4)
    (cinematic_scripting_destroy_scene 4)
)

(script static void 045la_blastoff_cleanup
    (cinematic_scripting_clean_up 0)
)

(script static void begin_045la_blastoff_debug
    (cinematic_zone_activate_for_debugging 0)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_045la_blastoff_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 0)
    (fade_in 0 0 0 0)
)

(script static void 045la_blastoff_debug
    (begin_045la_blastoff_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "045la_blastoff"))
    (!045la_blastoff_005_sc)
    (!045la_blastoff_010_sc)
    (!045la_blastoff_020_sc)
    (!045la_blastoff_030_sc)
    (!045la_blastoff_040_sc)
    (end_045la_blastoff_debug)
)

(script static void begin_045la_blastoff
    (cinematic_zone_activate 0)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_045la_blastoff
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_blastoff
    (begin_045la_blastoff)
    (sleep (cinematic_tag_fade_in_to_cinematic "045la_blastoff"))
    (!045la_blastoff_005_sc)
    (!045la_blastoff_010_sc)
    (!045la_blastoff_020_sc)
    (!045la_blastoff_030_sc)
    (!045la_blastoff_040_sc)
    (end_045la_blastoff)
)

(script static void 045lf_jorge_010_sc_sh1
    (render_weather false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "slipspacedrive_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "jorge_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "fx_dyn_light_dialogue_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "fx_dyn_light_helmet_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "fx_dyn_light_bomb_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 "jorge_tags_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "reentry_pack_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 0 0)
    (cinematic_scripting_start_music 0 0 0)
    (cinematic_scripting_start_music 0 0 1)
    (sleep 1)
    (cinematic_scripting_start_dialogue 0 0 3 none)
    (sleep 187)
    (cinematic_scripting_start_dialogue 0 0 0 none)
    (sleep 34)
    (cinematic_scripting_start_dialogue 0 0 1 none)
    (sleep 183)
    (cinematic_scripting_start_dialogue 0 0 2 none)
    (sleep 156)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_010_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "pelican_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "slipspacedrive_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "jorge_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "fx_dyn_light_dialogue_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "fx_dyn_light_helmet_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "fx_dyn_light_bomb_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "jorge_tags_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 "reentry_pack_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1.5 0)
    (sleep 137)
    (cinematic_scripting_start_dialogue 0 1 0 none)
    (sleep 43)
    (cinematic_scripting_start_dialogue 0 1 1 none)
    (sleep 50)
    (cinematic_scripting_start_dialogue 0 1 3 none)
    (sleep 89)
    (cinematic_scripting_start_dialogue 0 1 2 none)
    (sleep 5)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "pelican_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 3 "slipspacedrive_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "jorge_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "fx_dyn_light_dialogue_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "fx_dyn_light_helmet_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "fx_dyn_light_bomb_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 8 "jorge_tags_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 9 "reentry_pack_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 0 0)
    (sleep 84)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_010_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 3 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 3)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 0 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 1 "pelican_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 2 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 3 "slipspacedrive_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 4 "jorge_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 5 "fx_dyn_light_dialogue_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 6 "fx_dyn_light_helmet_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 7 "fx_dyn_light_bomb_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 8 "jorge_tags_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 9 "reentry_pack_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1.5 0)
    (sleep 70)
    (cinematic_scripting_start_dialogue 0 3 0 none)
    (sleep 113)
    (cinematic_scripting_start_dialogue 0 3 1 none)
    (sleep 52)
    (cinematic_scripting_start_dialogue 0 3 2 none)
    (sleep 168)
    (cinematic_scripting_start_dialogue 0 3 3 none)
    (sleep 154)
    (cinematic_scripting_start_dialogue 0 3 4 none)
    (sleep 53)
    (cinematic_print "custom script play")
    (interpolator_start "hangar_door")
    (sleep 64)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_010_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 4 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 4)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 0 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 1 "pelican_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 2 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 3 "slipspacedrive_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 4 "jorge_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 5 "fx_dyn_light_dialogue_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 6 "fx_dyn_light_helmet_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 7 "fx_dyn_light_bomb_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 8 "jorge_tags_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 9 "reentry_pack_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 0 0)
    (sleep 34)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_010_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 5 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 5)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 0 "jorge_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 1 "pelican_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 2 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 3 "slipspacedrive_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 4 "jorge_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 5 "fx_dyn_light_dialogue_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 6 "fx_dyn_light_helmet_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 7 "fx_dyn_light_bomb_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 8 "jorge_tags_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 9 "reentry_pack_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 0 0)
    (sleep 73)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lf_jorge_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (045lf_jorge_010_sc_sh1)
    (045lf_jorge_010_sc_sh2)
    (045lf_jorge_010_sc_sh3)
    (045lf_jorge_010_sc_sh4)
    (045lf_jorge_010_sc_sh5)
    (045lf_jorge_010_sc_sh6)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 045lf_jorge_020_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "slipspacedrive_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "jorge_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "fx_dyn_light_barrier_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "pelican_pelican_interior1_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure -1 0)
    (sleep 63)
    (cinematic_scripting_start_dialogue 1 0 0 none)
    (sleep 145)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_020_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 1 "045lf_jorge_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 1)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "pelican_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "slipspacedrive_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "jorge_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "fx_dyn_light_barrier_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "pelican_pelican_interior1_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure -0.75 0)
    (sleep 90)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lf_jorge_020_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (object_destroy "dm_lnos")
    (045lf_jorge_020_sc_sh1)
    (045lf_jorge_020_sc_sh2)
    (fade_out 0 0 0 0)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 045lf_jorge_030_sc_sh1
    (begin
        (render_weather true)
        (fade_out 0 0 0 0)
    )
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 0 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 0)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 0 "corvette_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 1 "player_1" true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 3 "beacon_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 4 "longnight_of_solace_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 5 "longnight_of_solace_destro_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 6 "fx_bro_splosion_blackship_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 7 "fx_bro_splosion_corvette_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 8 "fx_light_player_marker_1" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "camera" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "location" 0.6 0)
    (sleep 1)
    (cinematic_print "custom script play")
    (fade_in 0 0 0 3)
    (sleep 299)
    (cinematic_scripting_start_effect 2 0 0 (cinematic_object_get "corvette"))
    (sleep 58)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_030_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 1 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 1)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 0 "corvette_2" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 3 "beacon_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 4 "longnight_of_solace_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 5 "longnight_of_solace_destro_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 6 "fx_bro_splosion_blackship_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 7 "fx_bro_splosion_corvette_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 8 "fx_light_player_marker_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 9 "logo_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (cinematic_scripting_start_effect 2 1 1 (cinematic_object_get "fx_bro_splosion_blackship"))
    (cinematic_scripting_start_screen_effect 2 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "camera" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "location" 0.6 0)
    (sleep 95)
    (cinematic_scripting_start_effect 2 1 2 (cinematic_object_get "longnight_of_solace"))
    (sleep 5)
    (cinematic_scripting_start_effect 2 1 0 (cinematic_object_get "fx_bro_splosion_blackship"))
    (sleep 30)
    (cinematic_scripting_stop_screen_effect 2 1 0)
    (sleep 1)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_030_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 2 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 2)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 0 "corvette_3" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 3 "beacon_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 4 "longnight_of_solace_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 5 "longnight_of_solace_destro_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 6 "fx_bro_splosion_blackship_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 7 "fx_bro_splosion_corvette_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 8 "fx_light_player_marker_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 9 "logo_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "camera" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "location" 0.6 0)
    (cinematic_scripting_start_screen_effect 2 2 0)
    (sleep 30)
    (cinematic_scripting_start_effect 2 2 0 (cinematic_object_get "longnight_of_solace_destro"))
    (sleep 57)
    (cinematic_scripting_stop_screen_effect 2 2 0)
    (sleep 1)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_030_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 3 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 3)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 0 "corvette_4" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 2 "fx_player_reentry_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 3 "beacon_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 4 "longnight_of_solace_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 5 "longnight_of_solace_destro_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 6 "fx_bro_splosion_blackship_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 7 "fx_bro_splosion_corvette_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 8 "fx_light_player_marker_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 9 "logo_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "camera" 0.5 0)
    (cinematic_scripting_start_screen_effect 2 3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "location" 0.6 0)
    (sleep 121)
    (cinematic_scripting_stop_screen_effect 2 3 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_030_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 4 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 4)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 0 "corvette_5" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 2 "fx_player_reentry_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 3 "beacon_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 4 "longnight_of_solace_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 5 "longnight_of_solace_destro_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 6 "fx_bro_splosion_blackship_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 7 "fx_bro_splosion_corvette_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 8 "fx_light_player_marker_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 9 "logo_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (cinematic_scripting_start_effect 2 4 0 (cinematic_object_get "fx_bro_splosion_blackship"))
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "location" 0.6 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 9) "camera" 0.5 0)
    (cinematic_scripting_start_screen_effect 2 4 0)
    (sleep 56)
    (cinematic_scripting_stop_screen_effect 2 4 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_030_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 5 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 5)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 0 "corvette_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 1 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 2 "fx_player_reentry_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 3 "beacon_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 4 "longnight_of_solace_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 5 "longnight_of_solace_destro_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 6 "fx_bro_splosion_blackship_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 7 "fx_bro_splosion_corvette_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 8 "fx_light_player_marker_6" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (cinematic_scripting_start_effect 2 5 0 (cinematic_object_get "fx_bro_splosion_blackship"))
    (sleep 190)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lf_jorge_030_sc
    (cinematic_print "beginning scene 3")
    (cinematic_scripting_create_scene 2)
    (switch_zone_set "set_outroend_090")
    (045lf_jorge_030_sc_sh1)
    (045lf_jorge_030_sc_sh2)
    (045lf_jorge_030_sc_sh3)
    (045lf_jorge_030_sc_sh4)
    (045lf_jorge_030_sc_sh5)
    (045lf_jorge_030_sc_sh6)
    (cinematic_scripting_destroy_scene 2)
)

(script static void 045lf_jorge_040_sc_sh1
    (fade_in 0 0 0 0)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 0 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 0)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (object_hide (cinematic_scripting_get_object 3 0) true)
    (object_hide (cinematic_scripting_get_object 3 1) true)
    (object_hide (cinematic_scripting_get_object 3 2) true)
    (object_hide (cinematic_scripting_get_object 3 3) true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (object_hide (cinematic_scripting_get_object 3 5) true)
    (object_hide (cinematic_scripting_get_object 3 6) true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (object_hide (cinematic_scripting_get_object 3 10) true)
    (object_hide (cinematic_scripting_get_object 3 11) true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 13 "fx_player_reentry_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 14 "beacon_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 15 "longnight_of_solace_destro_1" true)
    (object_hide (cinematic_scripting_get_object 3 16) true)
    (object_hide (cinematic_scripting_get_object 3 17) true)
    (object_hide (cinematic_scripting_get_object 3 18) true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (object_hide (cinematic_scripting_get_object 3 20) true)
    (object_hide (cinematic_scripting_get_object 3 21) true)
    (object_hide (cinematic_scripting_get_object 3 22) true)
    (object_hide (cinematic_scripting_get_object 3 23) true)
    (object_hide (cinematic_scripting_get_object 3 24) true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (object_hide (cinematic_scripting_get_object 3 26) true)
    (object_hide (cinematic_scripting_get_object 3 27) true)
    (object_hide (cinematic_scripting_get_object 3 28) true)
    (object_hide (cinematic_scripting_get_object 3 29) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 30 "logo_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 31 "fx_bro_splosion_blackship_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_effect 3 0 1 (cinematic_object_get "fx_bro_splosion_blackship"))
    (cinematic_scripting_start_screen_effect 3 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 30) "camera" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 30) "location" 0.6 0)
    (sleep 128)
    (cinematic_scripting_start_effect 3 0 0 (cinematic_object_get "beacon"))
    (sleep 9)
    (cinematic_scripting_start_effect 3 0 2 (cinematic_object_get "beacon"))
    (sleep 82)
    (cinematic_scripting_stop_screen_effect 3 0 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_040_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 1 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 1)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (object_hide (cinematic_scripting_get_object 3 0) true)
    (object_hide (cinematic_scripting_get_object 3 1) true)
    (object_hide (cinematic_scripting_get_object 3 2) true)
    (object_hide (cinematic_scripting_get_object 3 3) true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (object_hide (cinematic_scripting_get_object 3 5) true)
    (object_hide (cinematic_scripting_get_object 3 6) true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (object_hide (cinematic_scripting_get_object 3 10) true)
    (object_hide (cinematic_scripting_get_object 3 11) true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (object_hide (cinematic_scripting_get_object 3 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 14 "beacon_2" true)
    (object_hide (cinematic_scripting_get_object 3 15) true)
    (object_hide (cinematic_scripting_get_object 3 16) true)
    (object_hide (cinematic_scripting_get_object 3 17) true)
    (object_hide (cinematic_scripting_get_object 3 18) true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (object_hide (cinematic_scripting_get_object 3 20) true)
    (object_hide (cinematic_scripting_get_object 3 21) true)
    (object_hide (cinematic_scripting_get_object 3 22) true)
    (object_hide (cinematic_scripting_get_object 3 23) true)
    (object_hide (cinematic_scripting_get_object 3 24) true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (object_hide (cinematic_scripting_get_object 3 26) true)
    (object_hide (cinematic_scripting_get_object 3 27) true)
    (object_hide (cinematic_scripting_get_object 3 28) true)
    (object_hide (cinematic_scripting_get_object 3 29) true)
    (object_hide (cinematic_scripting_get_object 3 30) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 31 "fx_bro_splosion_blackship_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (cinematic_scripting_start_screen_effect 3 1 0)
    (sleep 215)
    (cinematic_scripting_start_dialogue 3 1 0 none)
    (sleep 44)
    (cinematic_scripting_start_dialogue 3 1 1 none)
    (sleep 47)
    (cinematic_scripting_stop_screen_effect 3 1 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_040_sc_sh3
    (fade_in 0 0 0 0)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 2 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 2)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 0 "cap_ship_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 1 "cap_ship_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 2 "cap_ship_03_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 3 "cruiser_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 4 "cruiser_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 5 "cruiser_03_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 6 "cruiser_04_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 7 "cruiser_05_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 8 "cruiser_06_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 9 "cruiser_07_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 10 "cruiser_08_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 11 "cruiser_09_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 12 "cruiser_10_3" true)
    (object_hide (cinematic_scripting_get_object 3 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 14 "beacon_3" true)
    (object_hide (cinematic_scripting_get_object 3 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 16 "dot_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 17 "led01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 18 "led02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 19 "led03_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 20 "led04_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 21 "led05_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 22 "led06_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 23 "led07_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 24 "led08_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 25 "led09_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 26 "led10_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 27 "ledcap01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 28 "ledcap02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 29 "ledcap03_3" true)
    (object_hide (cinematic_scripting_get_object 3 30) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 31 "fx_bro_splosion_blackship_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 17) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 21) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 23) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 24) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 22) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 16) "location" 0.6 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 18) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 19) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 20) "led_outer" 1 0)
    (cinematic_scripting_start_screen_effect 3 2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 16) "camera" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 29) "led_fill" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 16) "bg_dim" 0.94 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 25) "led_outer" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 27) "led_fill" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 28) "led_fill" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 26) "led_outer" 1 0)
    (sleep 48)
    (cinematic_scripting_start_dialogue 3 2 1 none)
    (sleep 34)
    (cinematic_scripting_start_dialogue 3 2 2 none)
    (sleep 26)
    (cinematic_scripting_start_effect 3 2 0 (cinematic_object_get "cap_ship_03"))
    (sleep 27)
    (cinematic_scripting_start_dialogue 3 2 3 none)
    (sleep 13)
    (cinematic_scripting_start_dialogue 3 2 0 none)
    (sleep 17)
    (cinematic_scripting_start_effect 3 2 1 (cinematic_object_get "cruiser_10"))
    (sleep 29)
    (cinematic_scripting_start_effect 3 2 2 (cinematic_object_get "cruiser_09"))
    (sleep 9)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 25) "led_outer" 0.3 10)
    (sleep 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 26) "led_outer" 0.3 10)
    (sleep 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 28) "led_fill" 0.3 10)
    (sleep 1)
    (cinematic_scripting_start_effect 3 2 3 (cinematic_object_get "cruiser_08"))
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 29) "led_fill" 0.3 10)
    (sleep 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 27) "led_fill" 0.3 10)
    (sleep 4)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 24) "led_outer" 0.3 10)
    (sleep 2)
    (cinematic_scripting_start_effect 3 2 4 (cinematic_object_get "cruiser_07"))
    (sleep 8)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 23) "led_outer" 0.3 10)
    (sleep 2)
    (cinematic_scripting_start_effect 3 2 5 (cinematic_object_get "cruiser_06"))
    (sleep 9)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 22) "led_outer" 0.3 10)
    (sleep 7)
    (cinematic_scripting_start_effect 3 2 6 (cinematic_object_get "cruiser_05"))
    (sleep 9)
    (cinematic_scripting_start_effect 3 2 7 (cinematic_object_get "cruiser_04"))
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 21) "led_outer" 0.3 10)
    (cinematic_scripting_start_effect 3 2 8 (cinematic_object_get "cruiser_02"))
    (sleep 5)
    (cinematic_scripting_start_effect 3 2 9 (cinematic_object_get "cruiser_03"))
    (sleep 1)
    (cinematic_scripting_start_dialogue 3 2 4 none)
    (sleep 1)
    (cinematic_scripting_start_effect 3 2 10 (cinematic_object_get "cruiser_01"))
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 20) "led_outer" 0.3 10)
    (sleep 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 18) "led_outer" 0.3 10)
    (sleep 4)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 19) "led_outer" 0.3 10)
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 17) "led_outer" 0.3 10)
    (sleep 7)
    (cinematic_scripting_stop_screen_effect 3 2 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge_040_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 3 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 3)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (object_hide (cinematic_scripting_get_object 3 0) true)
    (object_hide (cinematic_scripting_get_object 3 1) true)
    (object_hide (cinematic_scripting_get_object 3 2) true)
    (object_hide (cinematic_scripting_get_object 3 3) true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (object_hide (cinematic_scripting_get_object 3 5) true)
    (object_hide (cinematic_scripting_get_object 3 6) true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (object_hide (cinematic_scripting_get_object 3 10) true)
    (object_hide (cinematic_scripting_get_object 3 11) true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (object_hide (cinematic_scripting_get_object 3 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 14 "beacon_4" true)
    (object_hide (cinematic_scripting_get_object 3 15) true)
    (object_hide (cinematic_scripting_get_object 3 16) true)
    (object_hide (cinematic_scripting_get_object 3 17) true)
    (object_hide (cinematic_scripting_get_object 3 18) true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (object_hide (cinematic_scripting_get_object 3 20) true)
    (object_hide (cinematic_scripting_get_object 3 21) true)
    (object_hide (cinematic_scripting_get_object 3 22) true)
    (object_hide (cinematic_scripting_get_object 3 23) true)
    (object_hide (cinematic_scripting_get_object 3 24) true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (object_hide (cinematic_scripting_get_object 3 26) true)
    (object_hide (cinematic_scripting_get_object 3 27) true)
    (object_hide (cinematic_scripting_get_object 3 28) true)
    (object_hide (cinematic_scripting_get_object 3 29) true)
    (object_hide (cinematic_scripting_get_object 3 30) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 31 "fx_bro_splosion_blackship_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (cinematic_scripting_start_screen_effect 3 3 0)
    (sleep 5)
    (cinematic_scripting_start_dialogue 3 3 1 none)
    (sleep 2)
    (cinematic_scripting_start_dialogue 3 3 2 none)
    (sleep 27)
    (cinematic_scripting_start_dialogue 3 3 0 none)
    (sleep 161)
    (sleep (cinematic_tag_fade_out_from_cinematic "045lf_jorge"))
    (sleep 3)
    (cinematic_scripting_stop_screen_effect 3 3 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lf_jorge_040_sc
    (cinematic_print "beginning scene 4")
    (cinematic_scripting_create_scene 3)
    (045lf_jorge_040_sc_sh1)
    (045lf_jorge_040_sc_sh2)
    (045lf_jorge_040_sc_sh3)
    (045lf_jorge_040_sc_sh4)
    (cinematic_scripting_destroy_scene 3)
)

(script static void 045lf_jorge_cleanup
    (cinematic_scripting_clean_up 1)
)

(script static void begin_045lf_jorge_debug
    (cinematic_zone_activate_for_debugging 1)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_045lf_jorge_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 1)
    (fade_in 0 0 0 0)
)

(script static void 045lf_jorge_debug
    (begin_045lf_jorge_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "045lf_jorge"))
    (begin
        (render_weather false)
        (object_destroy_folder "sc_hgr_pelican")
        (object_destroy_folder "cr_hgr_pelican")
        (object_destroy_folder "wp_final")
        (object_destroy_folder "cr_hgr")
        (object_destroy_folder "dm_hgr_pelican")
        (garbage_collect_unsafe)
    )
    (cinematic_outro_start)
    (!045lf_jorge_010_sc)
    (!045lf_jorge_020_sc)
    (!045lf_jorge_030_sc)
    (!045lf_jorge_040_sc)
    (end_045lf_jorge_debug)
)

(script static void begin_045lf_jorge
    (cinematic_zone_activate 1)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_045lf_jorge
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lf_jorge
    (begin_045lf_jorge)
    (sleep (cinematic_tag_fade_in_to_cinematic "045lf_jorge"))
    (begin
        (render_weather false)
        (object_destroy_folder "sc_hgr_pelican")
        (object_destroy_folder "cr_hgr_pelican")
        (object_destroy_folder "wp_final")
        (object_destroy_folder "cr_hgr")
        (object_destroy_folder "dm_hgr_pelican")
        (garbage_collect_unsafe)
    )
    (cinematic_outro_start)
    (!045lf_jorge_010_sc)
    (!045lf_jorge_020_sc)
    (!045lf_jorge_030_sc)
    (!045lf_jorge_040_sc)
    (end_045lf_jorge)
)

(script static void 045lb_pitstop_010_sc_sh1
    (render_weather false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "frigate_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "player_sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "sabre_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "sabre_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "slipspace_bomb_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 "fx_sabre_01_dyn_light_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "fx_sabre_02_dyn_light_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "claw_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 "pelican_claw_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_light_for_landing_area_1" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "player_sabre_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "sabre_01_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "sabre_02_cockpit1_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_music 0 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "boost_fx" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "main_engine_fx" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "front_engine_light" 1 0)
    (cinematic_scripting_start_music 0 0 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 3) "front_engine_light" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "boost_fx" 0.25 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "front_engine_light" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "main_engine_fx" 1 0)
    (sleep 1)
    (cinematic_scripting_start_dialogue 0 0 0 none)
    (sleep 34)
    (cinematic_scripting_start_dialogue 0 0 2 none)
    (sleep 40)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 3) "front_engine_light" 0 80)
    (sleep 25)
    (cinematic_scripting_start_effect 0 0 0 (cinematic_object_get "claw"))
    (sleep 5)
    (cinematic_scripting_start_effect 0 0 2 (cinematic_object_get "claw"))
    (sleep 10)
    (cinematic_scripting_start_effect 0 0 1 (cinematic_object_get "claw"))
    (sleep 8)
    (cinematic_scripting_start_dialogue 0 0 1 none)
    (sleep 22)
    (cinematic_scripting_start_effect 0 0 3 (cinematic_object_get "claw"))
    (sleep 29)
    (cinematic_scripting_start_dialogue 0 0 3 none)
    (sleep 4)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_010_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "frigate_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "pelican_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "player_sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "sabre_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "sabre_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "slipspace_bomb_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "fx_sabre_01_dyn_light_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 "fx_sabre_02_dyn_light_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "claw_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "pelican_claw_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "fx_light_for_landing_area_2" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 14 "player_sabre_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 15 "sabre_01_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 16 "sabre_02_cockpit1_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "boost_fx" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "front_engine_light" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "front_engine_light" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "main_engine_fx" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "boost_fx" 0.25 0)
    (sleep 57)
    (cinematic_scripting_start_dialogue 0 1 0 none)
    (sleep 46)
    (cinematic_scripting_start_dialogue 0 1 1 none)
    (sleep 76)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "frigate_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "pelican_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 3 "player_sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "sabre_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "sabre_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "slipspace_bomb_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 8 "fx_sabre_01_dyn_light_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 9 "fx_sabre_02_dyn_light_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 10 "claw_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 11 "pelican_claw_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 12 "fx_light_for_landing_area_3" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 14 "player_sabre_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 15 "sabre_01_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 16 "sabre_02_cockpit1_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 48)
    (cinematic_scripting_start_dialogue 0 2 0 none)
    (sleep 84)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_010_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 3 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 3)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 0 "frigate_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 1 "pelican_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 2 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 3 "player_sabre_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 4 "sabre_01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 5 "sabre_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 6 "slipspace_bomb_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 7 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 8 "fx_sabre_01_dyn_light_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 9 "fx_sabre_02_dyn_light_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 10 "claw_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 11 "pelican_claw_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 12 "fx_light_for_landing_area_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 13 "nuke_card_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 14 "player_sabre_cockpit1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 15 "sabre_01_cockpit1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 16 "sabre_02_cockpit1_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 28)
    (cinematic_scripting_start_dialogue 0 3 0 none)
    (sleep 205)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_010_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 4 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 4)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 0 "frigate_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 1 "pelican_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 2 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 3 "player_sabre_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 4 "sabre_01_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 5 "sabre_02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 6 "slipspace_bomb_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 7 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 8 "fx_sabre_01_dyn_light_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 9 "fx_sabre_02_dyn_light_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 10 "claw_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 11 "pelican_claw_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 12 "fx_light_for_landing_area_5" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 14 "player_sabre_cockpit1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 15 "sabre_01_cockpit1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 16 "sabre_02_cockpit1_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 134)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lb_pitstop_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (045lb_pitstop_010_sc_sh1)
    (045lb_pitstop_010_sc_sh2)
    (045lb_pitstop_010_sc_sh3)
    (045lb_pitstop_010_sc_sh4)
    (045lb_pitstop_010_sc_sh5)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 045lb_pitstop_020_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "frigate_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "player_sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "sabre_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "sabre_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "slipspace_bomb_1" true)
    (object_hide (cinematic_scripting_get_object 1 8) true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "pelican_claw_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "sabre_claw_1" true)
    (object_hide (cinematic_scripting_get_object 1 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "player_sabre_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 14 "sabre_01_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "sabre_02_cockpit1_1" true)
    (object_hide (cinematic_scripting_get_object 1 16) true)
    (object_hide (cinematic_scripting_get_object 1 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 18 "fx_light_cockpit_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 19 "fx_light_sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 20 "pelican_pelican_chin_gun1_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 13) "screen_on" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_01" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_02" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 5) "boost_fx" 0.25 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 5) "front_engine_light" 1 0)
    (sleep 98)
    (cinematic_scripting_start_dialogue 1 0 0 none)
    (sleep 64)
    (cinematic_scripting_start_dialogue 1 0 1 none)
    (sleep 76)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_020_sc_sh2
    (fade_out 0 0 0 0)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 1 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 1)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "frigate_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "pelican_2" true)
    (object_hide (cinematic_scripting_get_object 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "player_sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "sabre_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "sabre_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "slipspace_bomb_2" true)
    (object_hide (cinematic_scripting_get_object 1 8) true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 10 "pelican_claw_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "sabre_claw_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "nukecard_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "player_sabre_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "sabre_01_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "sabre_02_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 16 "dot_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 17 "dot_led_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 18 "fx_light_cockpit_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 19 "fx_light_sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 20 "pelican_pelican_chin_gun1_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "nuke_1" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "nuke_2" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_01" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 16) "camera" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 16) "location" 0.4 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_02" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 16) "bg_dim" 0.9 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "nuke_3" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0 0)
    (sleep 3)
    (fade_in 0 0 0 5)
    (cinematic_print "custom script play")
    (sleep 17)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0 0)
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "nuke_1" 1 600)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 2)
    (cinematic_scripting_start_dialogue 1 1 0 none)
    (sleep 35)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 21)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 15)
    (cinematic_scripting_start_dialogue 1 1 1 none)
    (sleep 16)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 37)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 30)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "nuke_2" 1 600)
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 21)
    (cinematic_scripting_start_dialogue 1 1 2 none)
    (sleep 18)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 32)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 24)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 17)
    (cinematic_scripting_start_dialogue 1 1 3 none)
    (sleep 22)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "nuke_3" 1 600)
    (sleep 25)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 28)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 31)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 31)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 28)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 27)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 25)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 1 0)
    (sleep 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 17) "led_outer" 0.5 0)
    (sleep 28)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_020_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 2 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 2)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 0 "frigate_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 1 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 2 "pelican_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 3 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 4 "player_sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 5 "sabre_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 6 "sabre_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 7 "slipspace_bomb_3" true)
    (object_hide (cinematic_scripting_get_object 1 8) true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 10 "pelican_claw_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 11 "sabre_claw_3" true)
    (object_hide (cinematic_scripting_get_object 1 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 13 "player_sabre_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 14 "sabre_01_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 15 "sabre_02_cockpit1_3" true)
    (object_hide (cinematic_scripting_get_object 1 16) true)
    (object_hide (cinematic_scripting_get_object 1 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 18 "fx_light_cockpit_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 19 "fx_light_sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 20 "pelican_pelican_chin_gun1_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 13) "screen_on" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 13) "screen" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_02" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 13) "holland" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_01" 0 0)
    (sleep 44)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_020_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 3 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 3)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 0 "frigate_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 1 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 2 "pelican_4" true)
    (object_hide (cinematic_scripting_get_object 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 4 "player_sabre_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 5 "sabre_01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 6 "sabre_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 7 "slipspace_bomb_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 8 "space_marine01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 9 "space_marine02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 10 "pelican_claw_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 11 "sabre_claw_4" true)
    (object_hide (cinematic_scripting_get_object 1 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 13 "player_sabre_cockpit1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 14 "sabre_01_cockpit1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 15 "sabre_02_cockpit1_4" true)
    (object_hide (cinematic_scripting_get_object 1 16) true)
    (object_hide (cinematic_scripting_get_object 1 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 18 "fx_light_cockpit_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 19 "fx_light_sabre_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 20 "pelican_pelican_chin_gun1_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_01" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_02" 0 0)
    (sleep 43)
    (cinematic_scripting_start_dialogue 1 3 0 none)
    (sleep 51)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_020_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 4 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 4)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (object_hide (cinematic_scripting_get_object 1 0) true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 3 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 4 "player_sabre_5" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (object_hide (cinematic_scripting_get_object 1 6) true)
    (object_hide (cinematic_scripting_get_object 1 7) true)
    (object_hide (cinematic_scripting_get_object 1 8) true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 10 "pelican_claw_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 11 "sabre_claw_5" true)
    (object_hide (cinematic_scripting_get_object 1 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 13 "player_sabre_cockpit1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 14 "sabre_01_cockpit1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 15 "sabre_02_cockpit1_5" true)
    (object_hide (cinematic_scripting_get_object 1 16) true)
    (object_hide (cinematic_scripting_get_object 1 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 18 "fx_light_cockpit_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 19 "fx_light_sabre_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 20 "pelican_pelican_chin_gun1_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_01" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 10) "light_flash_02" 0 0)
    (cinematic_print "custom script play")
    (sleep 8)
    (cinematic_scripting_start_dialogue 1 4 0 none)
    (sleep 16)
    (cinematic_scripting_start_dialogue 1 4 2 none)
    (sleep 90)
    (cinematic_scripting_start_dialogue 1 4 1 none)
    (sleep 75)
    (cinematic_scripting_start_dialogue 1 4 3 none)
    (sleep 38)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lb_pitstop_020_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (045lb_pitstop_020_sc_sh1)
    (045lb_pitstop_020_sc_sh2)
    (045lb_pitstop_020_sc_sh3)
    (045lb_pitstop_020_sc_sh4)
    (045lb_pitstop_020_sc_sh5)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 045lb_pitstop_030_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 0 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 0)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 0 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 1 "pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 2 "slipspace_bomb_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 3 "space_marine01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 4 "space_marine02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 5 "cutting_torch_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 6 "claw_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 7 "fx_light_jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 8 "fx_light_pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 9 "pelican_pelican_interior1_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_effect 2 0 0 (cinematic_object_get "cutting_torch"))
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 6) "light_flash_01" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 6) "light_flash_02" 0 0)
    (sleep 3)
    (cinematic_scripting_start_dialogue 2 0 0 none)
    (sleep 272)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lb_pitstop_030_sc
    (cinematic_print "beginning scene 3")
    (cinematic_scripting_create_scene 2)
    (045lb_pitstop_030_sc_sh1)
    (cinematic_scripting_destroy_scene 2)
)

(script static void 045lb_pitstop_040_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 0 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 0)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 0 "frigate_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 1 "pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 2 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 3 "player_sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 4 "slipspace_bomb_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 5 "sabre_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 6 "sabre_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 7 "sabre_03_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 8 "claw_pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 9 "claw_sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 10 "player_sabre_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 11 "sabre_01_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 12 "sabre_02_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 13 "sabre_03_cockpit1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 14 "fx_light_cockpit_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 15 "pelican_pelican_chin_gun1_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 3) "main_engine_fx" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 3) "boost_fx" 0.1 0)
    (sleep 131)
    (cinematic_scripting_start_dialogue 3 0 1 none)
    (sleep 33)
    (cinematic_scripting_start_dialogue 3 0 0 none)
    (sleep 42)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_040_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 1 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 1)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 0 "frigate_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 1 "pelican_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 2 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 3 "player_sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 4 "slipspace_bomb_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 5 "sabre_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 6 "sabre_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 7 "sabre_03_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 8 "claw_pelican_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 9 "claw_sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 10 "player_sabre_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 11 "sabre_01_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 12 "sabre_02_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 13 "sabre_03_cockpit1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 14 "fx_light_cockpit_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 15 "pelican_pelican_chin_gun1_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 10) "screen_on" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 10) "holland" 0 0)
    (object_set_permutation (cinematic_object_get "player") "flair_left_shoulder" "")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 1) "thrusters_back" 0.75 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 10) "screen" 0 0)
    (cinematic_print "custom script play")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 3 1) "thrusters_down")
    (sleep 170)
    (cinematic_scripting_start_dialogue 3 1 0 none)
    (sleep 116)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop_040_sc_sh3
    (fade_in 0 0 0 0)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 2 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 2)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 0 "frigate_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 1 "pelican_3" true)
    (object_hide (cinematic_scripting_get_object 3 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 3 "player_sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 4 "slipspace_bomb_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 5 "sabre_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 6 "sabre_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 7 "sabre_03_3" true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 10 "player_sabre_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 11 "sabre_01_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 12 "sabre_02_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 13 "sabre_03_cockpit1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 14 "fx_light_cockpit_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 15 "pelican_pelican_chin_gun1_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 0) "frigate_engines" 0.25 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 6) "main_engine_fx" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 7) "main_engine_fx" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 5) "main_engine_fx" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 3) "main_engine_fx" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 1) "thrusters_back" 1 0)
    (sleep 7)
    (cinematic_scripting_start_dialogue 3 2 1 none)
    (sleep 103)
    (cinematic_scripting_start_dialogue 3 2 0 none)
    (sleep 140)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 0) "frigate_engines" 1 200)
    (sleep 200)
    (cinematic_print "custom script play")
    (fade_out 0 0 0 70)
    (sleep 75)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lb_pitstop_040_sc
    (cinematic_print "beginning scene 4")
    (cinematic_scripting_create_scene 3)
    (fade_in 0 0 0 0)
    (045lb_pitstop_040_sc_sh1)
    (045lb_pitstop_040_sc_sh2)
    (045lb_pitstop_040_sc_sh3)
    (switch_zone_set "set_corvettecombat_050_070")
    (cinematic_scripting_destroy_scene 3)
)

(script static void 045lb_pitstop_050_sc_sh1
    (fade_in 0 0 0 15)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 0 "045lf_jorge_030_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 0)
    (cinematic_object_create_cinematic_anchor "045lf_jorge_030_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 0 "beacon_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 1 "corvette_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 2 "frigate_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 3 "sabre_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 4 "sabre_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 5 "sabre_03_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 6 "sabre_04_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 7 "sabre_05_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 8 "sabre_06_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 9 "fx_light_marker_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 10 "unsc_logo_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 2) "frigate_engines")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 3) "main_engine_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 3) "boost_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 7) "boost_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 7) "main_engine_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 6) "main_engine_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 6) "boost_fx")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 10) "location" 0.6 0)
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 8) "boost_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 4) "main_engine_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 5) "main_engine_fx")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 5) "boost_fx")
    (cinematic_scripting_start_screen_effect 4 0 0)
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 4) "boost_fx")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 10) "camera" 0.5 0)
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 4 8) "main_engine_fx")
    (sleep 3)
    (cinematic_scripting_start_music 4 0 0)
    (sleep 27)
    (cinematic_print "custom script play")
    (cinematic_set_title "045lb_cine_timestamp_01")
    (sleep 52)
    (cinematic_scripting_start_dialogue 4 0 0 none)
    (sleep 174)
    (cinematic_scripting_start_dialogue 4 0 1 none)
    (sleep 89)
    (sleep (cinematic_tag_fade_out_from_cinematic "045lb_pitstop"))
    (sleep 13)
    (cinematic_scripting_stop_screen_effect 4 0 0)
    (sleep 1)
    (render_weather true)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lb_pitstop_050_sc
    (cinematic_print "beginning scene 5")
    (cinematic_scripting_create_scene 4)
    (045lb_pitstop_050_sc_sh1)
    (cinematic_scripting_destroy_scene 4)
)

(script static void 045lb_pitstop_cleanup
    (cinematic_scripting_clean_up 2)
)

(script static void begin_045lb_pitstop_debug
    (cinematic_zone_activate_for_debugging 2)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 2))
)

(script static void end_045lb_pitstop_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 2)
    (fade_in 0 0 0 0)
)

(script static void 045lb_pitstop_debug
    (begin_045lb_pitstop_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "045lb_pitstop"))
    (!045lb_pitstop_010_sc)
    (!045lb_pitstop_020_sc)
    (!045lb_pitstop_030_sc)
    (!045lb_pitstop_040_sc)
    (!045lb_pitstop_050_sc)
    (end_045lb_pitstop_debug)
)

(script static void begin_045lb_pitstop
    (cinematic_zone_activate 2)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 2))
)

(script static void end_045lb_pitstop
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lb_pitstop
    (begin_045lb_pitstop)
    (sleep (cinematic_tag_fade_in_to_cinematic "045lb_pitstop"))
    (!045lb_pitstop_010_sc)
    (!045lb_pitstop_020_sc)
    (!045lb_pitstop_030_sc)
    (!045lb_pitstop_040_sc)
    (!045lb_pitstop_050_sc)
    (end_045lb_pitstop)
)

(script static void 045lc_aftship_landing_010_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "player_sabre_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "sabre_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "sabre_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "sabre_03_1" true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "fx_dyn_light_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 "fx_dyn_light_rim_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_light_marker_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "fx_light_marker_2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "fx_light_marker_3_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "fx_light_marker_spartan1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "fx_light_spartan2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 17 "reentry_pack_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_music 0 0 0)
    (sleep 219)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lc_aftship_landing_010_sc_sh2
    (set visibility_enable_occlusion false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "player_sabre_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "sabre_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "sabre_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "sabre_03_2" true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "fx_dyn_light_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "fx_dyn_light_rim_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "fx_light_marker_1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 13 "fx_light_marker_2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 14 "fx_light_marker_3_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 15 "fx_light_marker_spartan1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 16 "fx_light_spartan2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 17 "reentry_pack_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 200)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lc_aftship_landing_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "045b_pitstop_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "045b_pitstop_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "player_sabre_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "sabre_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 3 "sabre_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "sabre_03_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "space_marine01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "space_marine02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "rifle_marine01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 8 "rifle_marine02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 9 "rifle_player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 10 "fx_dyn_light_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 11 "fx_dyn_light_rim_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 12 "fx_light_marker_1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 13 "fx_light_marker_2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 14 "fx_light_marker_3_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 15 "fx_light_marker_spartan1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 16 "fx_light_spartan2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 17 "reentry_pack_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 197)
    (sleep (cinematic_tag_fade_out_from_cinematic "045lc_aftship_landing"))
    (sleep 14)
    (set visibility_enable_occlusion true)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045lc_aftship_landing_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (045lc_aftship_landing_010_sc_sh1)
    (045lc_aftship_landing_010_sc_sh2)
    (045lc_aftship_landing_010_sc_sh3)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 045lc_aftship_landing_cleanup
    (cinematic_scripting_clean_up 3)
)

(script static void begin_045lc_aftship_landing_debug
    (cinematic_zone_activate_for_debugging 3)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 3))
)

(script static void end_045lc_aftship_landing_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 3)
    (fade_in 0 0 0 0)
)

(script static void 045lc_aftship_landing_debug
    (begin_045lc_aftship_landing_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "045lc_aftship_landing"))
    (!045lc_aftship_landing_010_sc)
    (end_045lc_aftship_landing_debug)
)

(script static void begin_045lc_aftship_landing
    (cinematic_zone_activate 3)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 3))
)

(script static void end_045lc_aftship_landing
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045lc_aftship_landing
    (begin_045lc_aftship_landing)
    (sleep (cinematic_tag_fade_in_to_cinematic "045lc_aftship_landing"))
    (!045lc_aftship_landing_010_sc)
    (end_045lc_aftship_landing)
)

(script static void 045le_bomb_delivery_010_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "045le_bomb_delivery_anchor_010")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "045le_bomb_delivery_anchor_010")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "player_ar_1" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_dyn_light_dialogue_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "pelican_pelican_chin_gun2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "pelican_pelican_interior1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "fx_light_marker_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "fx_light_marker_2_1" true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 18 "re_entry_pack_1" true)
    (object_hide (cinematic_scripting_get_object 0 19) true)
    (object_hide (cinematic_scripting_get_object 0 20) true)
    (object_hide (cinematic_scripting_get_object 0 21) true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 0 0)
    (cinematic_scripting_start_music 0 0 0)
    (cinematic_scripting_start_music 0 0 1)
    (sleep 45)
    (cinematic_print "custom script play")
    (interpolator_start "hangar_door")
    (sleep 29)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045le_bomb_delivery_010_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "045le_bomb_delivery_anchor_010")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "045le_bomb_delivery_anchor_010")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "marine_1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "marine_1_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "marine_2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "marine_2_ar_2" true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "pelican_2" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "slipspace_drive_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "fx_dyn_light_dialogue_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 13 "pelican_pelican_chin_gun2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 14 "pelican_pelican_interior1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 15 "fx_light_marker_1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 16 "fx_light_marker_2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 17 "firgate_01_2" true)
    (object_hide (cinematic_scripting_get_object 0 18) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 19 "frigate_turret_06_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 20 "frigate_turret_07_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 21 "frigate_turret_08_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 22 "frigate_turret_09_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 23 "frigate_turret_10_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 24 "frigate_turret_11_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 25 "frigate_turret_12_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "thrusters_back" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "thrusters_down" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "jetwash_off" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "jetwash" 1 0)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") true)
    (cinematic_print "custom script play")
    (sleep 13)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") true)
    (cinematic_print "custom script play")
    (sleep 2)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") true)
    (cinematic_print "custom script play")
    (sleep 1)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") false)
    (sleep 18)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") false)
    (sleep 9)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") false)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") true)
    (cinematic_print "custom script play")
    (sleep 14)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_08_weapon") true)
    (sleep 12)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") false)
    (sleep 11)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") true)
    (sleep 2)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_08_weapon") false)
    (cinematic_print "custom script play")
    (sleep 8)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") true)
    (cinematic_print "custom script play")
    (sleep 13)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") true)
    (sleep 8)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") false)
    (sleep 3)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") false)
    (cinematic_print "custom script play")
    (sleep 4)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") true)
    (cinematic_print "custom script play")
    (sleep 15)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") false)
    (cinematic_print "custom script play")
    (sleep 15)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") false)
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "thrusters_back" 0 50)
    (sleep 19)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_08_weapon") true)
    (cinematic_print "custom script play")
    (sleep 2)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") true)
    (cinematic_print "custom script play")
    (sleep 21)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") false)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_08_weapon") false)
    (sleep 8)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "jetwash_off" 0.5 100)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "thrusters_down" 0 100)
    (sleep 4)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") true)
    (sleep 16)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") true)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") true)
    (sleep 4)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") false)
    (sleep 12)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_08_weapon") true)
    (cinematic_print "custom script play")
    (sleep 4)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") false)
    (sleep 16)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_08_weapon") false)
    (sleep 6)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") true)
    (sleep 8)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") true)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") true)
    (sleep 12)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_06_weapon") false)
    (sleep 8)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_10_weapon") false)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_09_weapon") false)
    (cinematic_print "custom script play")
    (sleep 28)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") true)
    (sleep 20)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "frigate_turret_07_weapon") false)
    (cinematic_print "custom script play")
    (sleep 23)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045le_bomb_delivery_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "045le_bomb_delivery_anchor_010")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "045le_bomb_delivery_anchor_010")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "jorge_turret_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "marine_1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 3 "marine_1_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "marine_2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "marine_2_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "marine_3_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "marine_3_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 8 "pelican_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 9 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 10 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 11 "slipspace_drive_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 12 "fx_dyn_light_dialogue_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 13 "pelican_pelican_chin_gun2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 14 "pelican_pelican_interior1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 15 "fx_light_marker_1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 16 "fx_light_marker_2_3" true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 18 "re_entry_pack_3" true)
    (object_hide (cinematic_scripting_get_object 0 19) true)
    (object_hide (cinematic_scripting_get_object 0 20) true)
    (object_hide (cinematic_scripting_get_object 0 21) true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 0 0)
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 0 8) "thrusters_back")
    (object_clear_cinematic_function_variable (cinematic_scripting_get_object 0 8) "thrusters_down")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "jetwash_off" 0.5 0)
    (sleep 10)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 8) "jetwash_off" 1 150)
    (sleep 73)
    (cinematic_scripting_start_dialogue 0 2 0 (cinematic_scripting_get_object 0 0))
    (sleep 46)
    (cinematic_scripting_start_dialogue 0 2 1 none)
    (sleep 239)
    (cinematic_scripting_start_dialogue 0 2 2 (cinematic_scripting_get_object 0 9))
    (sleep 40)
    (cinematic_scripting_start_dialogue 0 2 3 none)
    (sleep 102)
    (cinematic_scripting_start_dialogue 0 2 4 (cinematic_scripting_get_object 0 0))
    (sleep 361)
    (sleep (cinematic_tag_fade_out_from_cinematic "045le_bomb_delivery"))
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045le_bomb_delivery_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (045le_bomb_delivery_010_sc_sh1)
    (045le_bomb_delivery_010_sc_sh2)
    (045le_bomb_delivery_010_sc_sh3)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 045le_bomb_delivery_cleanup
    (cinematic_scripting_clean_up 4)
)

(script static void begin_045le_bomb_delivery_debug
    (cinematic_zone_activate_for_debugging 4)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 4))
)

(script static void end_045le_bomb_delivery_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 4)
    (fade_in 0 0 0 0)
)

(script static void 045le_bomb_delivery_debug
    (begin_045le_bomb_delivery_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "045le_bomb_delivery"))
    (!045le_bomb_delivery_010_sc)
    (end_045le_bomb_delivery_debug)
)

(script static void begin_045le_bomb_delivery
    (cinematic_zone_activate 4)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 4))
)

(script static void end_045le_bomb_delivery
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045le_bomb_delivery
    (begin_045le_bomb_delivery)
    (sleep (cinematic_tag_fade_in_to_cinematic "045le_bomb_delivery"))
    (!045le_bomb_delivery_010_sc)
    (end_045le_bomb_delivery)
)

(script static void 045la_katsplan_010_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "carter_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "jorge_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "jun_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 "kat_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 "case_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "handle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "jun_dmr_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "kat_magnum_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "player_dmr_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 17 "scarab_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 18 "fx_dyn_light_jorgejun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 19 "fx_dyn_light_jorge_side_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 20 "fx_dyn_light__jorge_bg_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 21 "fx_dyn_light_player_int_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 22 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 23 "fx_dyn_light_carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 24 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 25 "fx_dyn_light_enter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 26 "fx_case_impact_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 27 "godray_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 28 "fx_bro_embers_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (cinematic_scripting_start_music 0 0 0)
    (cinematic_scripting_start_music 0 0 1)
    (sleep 30)
    (cinematic_set_title "045la_cine_timestamp_01")
    (cinematic_print "custom script play")
    (sleep 82)
    (cinematic_scripting_start_effect 0 0 0 (cinematic_object_get "scarab"))
    (sleep 53)
    (cinematic_set_title "045la_cine_timestamp_02")
    (cinematic_print "custom script play")
    (sleep 99)
    (cinematic_scripting_start_effect 0 0 1 (cinematic_object_get "scarab"))
    (sleep 14)
    (cinematic_scripting_start_dialogue 0 0 0 none)
    (sleep 242)
    (cinematic_scripting_start_effect 0 0 10 (cinematic_object_get "fx_bro_embers"))
    (sleep 13)
    (cinematic_scripting_start_dialogue 0 0 1 none)
    (sleep 60)
    (cinematic_scripting_start_effect 0 0 3 (cinematic_object_get "jorge"))
    (sleep 21)
    (cinematic_scripting_start_effect 0 0 4 (cinematic_object_get "jorge"))
    (sleep 22)
    (cinematic_scripting_start_effect 0 0 5 (cinematic_object_get "jorge"))
    (sleep 23)
    (cinematic_scripting_start_effect 0 0 6 (cinematic_object_get "jorge"))
    (sleep 19)
    (cinematic_scripting_start_effect 0 0 7 (cinematic_object_get "jorge"))
    (sleep 21)
    (cinematic_scripting_start_effect 0 0 8 (cinematic_object_get "jorge"))
    (sleep 23)
    (cinematic_scripting_start_effect 0 0 9 (cinematic_object_get "jorge"))
    (sleep 92)
    (cinematic_scripting_start_dialogue 0 0 2 (cinematic_scripting_get_object 0 4))
    (sleep 5)
    (cinematic_scripting_start_effect 0 0 2 (cinematic_object_get "fx_case_impact"))
    (sleep 46)
    (cinematic_scripting_start_effect 0 0 11 (cinematic_object_get "fx_bro_embers"))
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_010_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "jorge_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "jun_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "kat_head_2" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (object_hide (cinematic_scripting_get_object 0 12) true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 14 "jun_dmr_2" true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (object_hide (cinematic_scripting_get_object 0 16) true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 18 "fx_dyn_light_jorgejun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 19 "fx_dyn_light_jorge_side_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 20 "fx_dyn_light__jorge_bg_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 21 "fx_dyn_light_player_int_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 22 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 23 "fx_dyn_light_carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 24 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 25 "fx_dyn_light_enter_2" true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (object_hide (cinematic_scripting_get_object 0 27) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 28 "fx_bro_embers_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1.5 0)
    (sleep 9)
    (cinematic_scripting_start_dialogue 0 1 0 none)
    (sleep 38)
    (cinematic_scripting_start_dialogue 0 1 3 none)
    (sleep 39)
    (cinematic_scripting_start_dialogue 0 1 4 none)
    (sleep 79)
    (cinematic_scripting_start_dialogue 0 1 1 none)
    (sleep 117)
    (cinematic_scripting_start_dialogue 0 1 2 (cinematic_scripting_get_object 0 4))
    (sleep 22)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 3 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "jorge_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "jun_head_3" true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 9 "player_3" true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (object_hide (cinematic_scripting_get_object 0 12) true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 14 "jun_dmr_3" true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 16 "player_dmr_3" true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 18 "fx_dyn_light_jorgejun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 19 "fx_dyn_light_jorge_side_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 20 "fx_dyn_light__jorge_bg_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 21 "fx_dyn_light_player_int_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 22 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 23 "fx_dyn_light_carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 24 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 25 "fx_dyn_light_enter_3" true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (object_hide (cinematic_scripting_get_object 0 27) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 28 "fx_bro_embers_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1.5 0)
    (sleep 16)
    (cinematic_scripting_start_dialogue 0 2 0 none)
    (sleep 30)
    (cinematic_scripting_start_dialogue 0 2 1 (cinematic_scripting_get_object 0 4))
    (sleep 23)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_010_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 3 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 3)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 3 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 4 "jorge_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 5 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 6 "jun_head_4" true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (object_hide (cinematic_scripting_get_object 0 12) true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 14 "jun_dmr_4" true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (object_hide (cinematic_scripting_get_object 0 16) true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 18 "fx_dyn_light_jorgejun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 19 "fx_dyn_light_jorge_side_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 20 "fx_dyn_light__jorge_bg_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 21 "fx_dyn_light_player_int_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 22 "fx_dyn_light_emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 23 "fx_dyn_light_carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 24 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 25 "fx_dyn_light_enter_4" true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (object_hide (cinematic_scripting_get_object 0 27) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 28 "fx_bro_embers_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1.5 0)
    (sleep 24)
    (cinematic_scripting_start_dialogue 0 3 0 (cinematic_scripting_get_object 0 4))
    (sleep 24)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_010_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 4 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 4)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 1 "carter_head_5" true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 3 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 4 "jorge_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 5 "jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 6 "jun_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 7 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 8 "kat_head_5" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 10 "carter_ar_5" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (object_hide (cinematic_scripting_get_object 0 12) true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 14 "jun_dmr_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 15 "kat_magnum_5" true)
    (object_hide (cinematic_scripting_get_object 0 16) true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 18 "fx_dyn_light_jorgejun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 19 "fx_dyn_light_jorge_side_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 20 "fx_dyn_light__jorge_bg_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 21 "fx_dyn_light_player_int_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 22 "fx_dyn_light_emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 23 "fx_dyn_light_carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 24 "fx_dyn_light_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 25 "fx_dyn_light_enter_5" true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (object_hide (cinematic_scripting_get_object 0 27) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 28 "fx_bro_embers_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1.5 0)
    (sleep 5)
    (cinematic_scripting_start_music 0 4 0)
    (sleep 38)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_katsplan_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (045la_katsplan_010_sc_sh1)
    (045la_katsplan_010_sc_sh2)
    (045la_katsplan_010_sc_sh3)
    (045la_katsplan_010_sc_sh4)
    (045la_katsplan_010_sc_sh5)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 045la_katsplan_020_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "carter_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "kat_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "kat_magnum_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "fx_dyn_light_kat_carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "fx_dyn_light_carter_cu_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "fx_dyn_light_carter_bg_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "fx_dyn_light_kat_cu_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (sleep 13)
    (cinematic_scripting_start_dialogue 1 0 0 (cinematic_scripting_get_object 1 4))
    (sleep 105)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 1 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 1)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "carter_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "carter_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "kat_head_2" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "fx_dyn_light_kat_carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "fx_dyn_light_carter_cu_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "fx_dyn_light_carter_bg_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "fx_dyn_light_kat_cu_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (sleep 11)
    (cinematic_scripting_start_dialogue 1 1 0 (cinematic_scripting_get_object 1 2))
    (sleep 115)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 2 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 2)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 0 "carter_3" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 2 "carter_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 3 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 4 "kat_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 5 "kat_magnum_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 6 "fx_dyn_light_kat_carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 7 "fx_dyn_light_carter_cu_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 8 "fx_dyn_light_carter_bg_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 9 "fx_dyn_light_kat_cu_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (sleep 63)
    (cinematic_scripting_start_dialogue 1 2 0 (cinematic_scripting_get_object 1 4))
    (sleep 9)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 3 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 3)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 1 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 2 "carter_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 3 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 4 "kat_head_4" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 6 "fx_dyn_light_kat_carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 7 "fx_dyn_light_carter_cu_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 8 "fx_dyn_light_carter_bg_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 9 "fx_dyn_light_kat_cu_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (sleep 18)
    (cinematic_scripting_start_dialogue 1 3 0 (cinematic_scripting_get_object 1 2))
    (sleep 17)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 4 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 4)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 0 "carter_5" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 2 "carter_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 3 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 4 "kat_head_5" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 6 "fx_dyn_light_kat_carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 7 "fx_dyn_light_carter_cu_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 8 "fx_dyn_light_carter_bg_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 9 "fx_dyn_light_kat_cu_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1 0)
    (sleep 23)
    (cinematic_scripting_start_dialogue 1 4 0 (cinematic_scripting_get_object 1 4))
    (sleep 24)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 5 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 5)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 1 "carter_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 2 "carter_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 3 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 4 "kat_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 5 "kat_magnum_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 6 "fx_dyn_light_kat_carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 7 "fx_dyn_light_carter_cu_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 8 "fx_dyn_light_carter_bg_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 9 "fx_dyn_light_kat_cu_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 1 0)
    (sleep 2)
    (cinematic_scripting_start_dialogue 1 5 0 (cinematic_scripting_get_object 1 2))
    (sleep 29)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 6 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 6)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 0 "carter_7" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 2 "carter_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 3 "kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 4 "kat_head_7" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 6 "fx_dyn_light_kat_carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 7 "fx_dyn_light_carter_cu_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 8 "fx_dyn_light_carter_bg_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 9 "fx_dyn_light_kat_cu_7" true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (render_exposure 1 0)
    (sleep 2)
    (cinematic_scripting_start_dialogue 1 6 0 (cinematic_scripting_get_object 1 4))
    (sleep 44)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 7 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 7)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 0 "carter_8" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 2 "carter_head_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 3 "kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 4 "kat_head_8" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 6 "fx_dyn_light_kat_carter_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 7 "fx_dyn_light_carter_cu_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 8 "fx_dyn_light_carter_bg_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 9 "fx_dyn_light_kat_cu_8" true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (render_exposure 1 0)
    (sleep 12)
    (cinematic_scripting_start_dialogue 1 7 0 (cinematic_scripting_get_object 1 2))
    (sleep 63)
    (cinematic_scripting_start_dialogue 1 7 1 (cinematic_scripting_get_object 1 4))
    (sleep 46)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 8 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 8)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (object_hide (cinematic_scripting_get_object 1 0) true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (object_hide (cinematic_scripting_get_object 1 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 3 "kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 4 "kat_head_9" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 6 "fx_dyn_light_kat_carter_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 7 "fx_dyn_light_carter_cu_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 8 "fx_dyn_light_carter_bg_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 9 "fx_dyn_light_kat_cu_9" true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (render_exposure 1 0)
    (sleep 101)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh10
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 9 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 9)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 0 "carter_10" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 2 "carter_head_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 3 "kat_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 4 "kat_head_10" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 6 "fx_dyn_light_kat_carter_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 7 "fx_dyn_light_carter_cu_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 8 "fx_dyn_light_carter_bg_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 9 9 "fx_dyn_light_kat_cu_10" true)
    (cinematic_lights_initialize_for_shot 9)
    (cinematic_clips_initialize_for_shot 9)
    (render_exposure 1 0)
    (sleep 2)
    (cinematic_scripting_start_dialogue 1 9 0 (cinematic_scripting_get_object 1 2))
    (sleep 78)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh11
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 10 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 10)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 0 "carter_11" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 2 "carter_head_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 3 "kat_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 4 "kat_head_11" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 6 "fx_dyn_light_kat_carter_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 7 "fx_dyn_light_carter_cu_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 8 "fx_dyn_light_carter_bg_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 10 9 "fx_dyn_light_kat_cu_11" true)
    (cinematic_lights_initialize_for_shot 10)
    (cinematic_clips_initialize_for_shot 10)
    (render_exposure 1 0)
    (sleep 1)
    (cinematic_scripting_start_dialogue 1 10 0 (cinematic_scripting_get_object 1 4))
    (sleep 242)
    (cinematic_scripting_start_dialogue 1 10 1 (cinematic_scripting_get_object 1 2))
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh12
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 11 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 11)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 0 "carter_12" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 2 "carter_head_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 3 "kat_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 4 "kat_head_12" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 6 "fx_dyn_light_kat_carter_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 7 "fx_dyn_light_carter_cu_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 8 "fx_dyn_light_carter_bg_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 11 9 "fx_dyn_light_kat_cu_12" true)
    (cinematic_lights_initialize_for_shot 11)
    (cinematic_clips_initialize_for_shot 11)
    (render_exposure 1 0)
    (sleep 92)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh13
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 12 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 12)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 0 "carter_13" true)
    (object_hide (cinematic_scripting_get_object 1 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 2 "carter_head_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 3 "kat_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 4 "kat_head_13" true)
    (object_hide (cinematic_scripting_get_object 1 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 6 "fx_dyn_light_kat_carter_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 7 "fx_dyn_light_carter_cu_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 8 "fx_dyn_light_carter_bg_13" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 12 9 "fx_dyn_light_kat_cu_13" true)
    (cinematic_lights_initialize_for_shot 12)
    (cinematic_clips_initialize_for_shot 12)
    (render_exposure 1 0)
    (sleep 15)
    (cinematic_scripting_start_dialogue 1 12 0 (cinematic_scripting_get_object 1 4))
    (sleep 178)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh14
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 13 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 13)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 0 "carter_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 1 "carter_ar_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 2 "carter_head_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 3 "kat_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 4 "kat_head_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 5 "kat_magnum_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 6 "fx_dyn_light_kat_carter_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 7 "fx_dyn_light_carter_cu_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 8 "fx_dyn_light_carter_bg_14" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 13 9 "fx_dyn_light_kat_cu_14" true)
    (cinematic_lights_initialize_for_shot 13)
    (cinematic_clips_initialize_for_shot 13)
    (render_exposure 1 0)
    (sleep 1)
    (cinematic_scripting_start_dialogue 1 13 0 (cinematic_scripting_get_object 1 2))
    (sleep 60)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_020_sc_sh15
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 14 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 14)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 0 "carter_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 1 "carter_ar_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 2 "carter_head_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 3 "kat_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 4 "kat_head_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 5 "kat_magnum_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 6 "fx_dyn_light_kat_carter_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 7 "fx_dyn_light_carter_cu_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 8 "fx_dyn_light_carter_bg_15" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 14 9 "fx_dyn_light_kat_cu_15" true)
    (cinematic_lights_initialize_for_shot 14)
    (cinematic_clips_initialize_for_shot 14)
    (render_exposure 1 0)
    (sleep 2)
    (cinematic_scripting_start_dialogue 1 14 0 (cinematic_scripting_get_object 1 4))
    (sleep 18)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_katsplan_020_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (cinematic_object_destroy "emile")
    (045la_katsplan_020_sc_sh1)
    (045la_katsplan_020_sc_sh2)
    (045la_katsplan_020_sc_sh3)
    (045la_katsplan_020_sc_sh4)
    (045la_katsplan_020_sc_sh5)
    (045la_katsplan_020_sc_sh6)
    (045la_katsplan_020_sc_sh7)
    (045la_katsplan_020_sc_sh8)
    (045la_katsplan_020_sc_sh9)
    (045la_katsplan_020_sc_sh10)
    (045la_katsplan_020_sc_sh11)
    (045la_katsplan_020_sc_sh12)
    (045la_katsplan_020_sc_sh13)
    (045la_katsplan_020_sc_sh14)
    (045la_katsplan_020_sc_sh15)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 045la_katsplan_030_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 0 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 0)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 1 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 2 "carter_head_1" true)
    (object_hide (cinematic_scripting_get_object 2 3) true)
    (object_hide (cinematic_scripting_get_object 2 4) true)
    (object_hide (cinematic_scripting_get_object 2 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 6 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 7 "jorge_head_1" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (object_hide (cinematic_scripting_get_object 2 12) true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (object_hide (cinematic_scripting_get_object 2 14) true)
    (object_hide (cinematic_scripting_get_object 2 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 16 "fx_dyn_light_carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 17 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 18 "fx_dyn_light_lowkat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 19 "fx_dyn_light_wall_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 20 "fx_dyn_light_group_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 21 "emil_sheath_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (sleep 14)
    (cinematic_scripting_start_dialogue 2 0 0 (cinematic_scripting_get_object 2 2))
    (sleep 68)
    (cinematic_scripting_start_dialogue 2 0 1 (cinematic_scripting_get_object 2 7))
    (sleep 7)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 1 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 1)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 1 "carter_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 2 "carter_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 3 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 4 "emile_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 5 "emile_knife_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 6 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 7 "jorge_head_2" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 11 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 12 "kat_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 13 "kat_magnum_2" true)
    (object_hide (cinematic_scripting_get_object 2 14) true)
    (object_hide (cinematic_scripting_get_object 2 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 16 "fx_dyn_light_carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 17 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 18 "fx_dyn_light_lowkat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 19 "fx_dyn_light_wall_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 20 "fx_dyn_light_group_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 21 "emil_sheath_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (sleep 64)
    (cinematic_scripting_start_dialogue 2 1 0 (cinematic_scripting_get_object 2 2))
    (sleep 52)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 2 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 2)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 0 "carter_3" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 2 "carter_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 3 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 4 "emile_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 5 "emile_knife_3" true)
    (object_hide (cinematic_scripting_get_object 2 6) true)
    (object_hide (cinematic_scripting_get_object 2 7) true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 11 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 12 "kat_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 13 "kat_magnum_3" true)
    (object_hide (cinematic_scripting_get_object 2 14) true)
    (object_hide (cinematic_scripting_get_object 2 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 16 "fx_dyn_light_carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 17 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 18 "fx_dyn_light_lowkat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 19 "fx_dyn_light_wall_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 20 "fx_dyn_light_group_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 21 "emil_sheath_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (sleep 24)
    (cinematic_scripting_start_dialogue 2 2 0 (cinematic_scripting_get_object 2 12))
    (sleep 51)
    (cinematic_scripting_start_dialogue 2 2 1 (cinematic_scripting_get_object 2 3))
    (sleep 50)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 3 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 3)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 1 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 2 "carter_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 3 "emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 4 "emile_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 5 "emile_knife_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 6 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 7 "jorge_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 8 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 9 "jun_dmr_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 10 "jun_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 11 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 12 "kat_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 13 "kat_magnum_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 14 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 15 "player_dmr_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 16 "fx_dyn_light_carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 17 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 18 "fx_dyn_light_lowkat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 19 "fx_dyn_light_wall_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 20 "fx_dyn_light_group_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 21 "emil_sheath_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (sleep 24)
    (cinematic_scripting_start_dialogue 2 3 0 (cinematic_scripting_get_object 2 12))
    (sleep 121)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 4 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 4)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 1 "carter_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 2 "carter_head_5" true)
    (object_hide (cinematic_scripting_get_object 2 3) true)
    (object_hide (cinematic_scripting_get_object 2 4) true)
    (object_hide (cinematic_scripting_get_object 2 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 6 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 7 "jorge_head_5" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 11 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 12 "kat_head_5" true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (object_hide (cinematic_scripting_get_object 2 14) true)
    (object_hide (cinematic_scripting_get_object 2 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 16 "fx_dyn_light_carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 17 "fx_dyn_light_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 18 "fx_dyn_light_lowkat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 19 "fx_dyn_light_wall_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 20 "fx_dyn_light_group_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 21 "emil_sheath_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1 0)
    (sleep 12)
    (cinematic_scripting_start_dialogue 2 4 0 (cinematic_scripting_get_object 2 7))
    (sleep 36)
    (cinematic_scripting_start_dialogue 2 4 1 (cinematic_scripting_get_object 2 2))
    (sleep 36)
    (cinematic_scripting_start_dialogue 2 4 2 (cinematic_scripting_get_object 2 7))
    (sleep 12)
    (cinematic_scripting_start_dialogue 2 4 3 (cinematic_scripting_get_object 2 12))
    (sleep 1)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 5 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 5)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 0 "carter_6" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 2 "carter_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 3 "emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 4 "emile_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 5 "emile_knife_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 6 "jorge_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 7 "jorge_head_6" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 11 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 12 "kat_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 13 "kat_magnum_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 14 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 15 "player_dmr_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 16 "fx_dyn_light_carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 17 "fx_dyn_light_kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 18 "fx_dyn_light_lowkat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 19 "fx_dyn_light_wall_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 20 "fx_dyn_light_group_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 21 "emil_sheath_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 1 0)
    (sleep 123)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 6 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 6)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 0 "carter_7" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 2 "carter_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 3 "emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 4 "emile_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 5 "emile_knife_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 6 "jorge_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 7 "jorge_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 8 "jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 9 "jun_dmr_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 10 "jun_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 11 "kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 12 "kat_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 13 "kat_magnum_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 14 "player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 15 "player_dmr_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 16 "fx_dyn_light_carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 17 "fx_dyn_light_kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 18 "fx_dyn_light_lowkat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 19 "fx_dyn_light_wall_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 20 "fx_dyn_light_group_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 21 "emil_sheath_7" true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (render_exposure 1.5 0)
    (sleep 12)
    (cinematic_scripting_start_dialogue 2 6 0 (cinematic_scripting_get_object 2 12))
    (sleep 105)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 7 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 7)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 0 "carter_8" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 2 "carter_head_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 3 "emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 4 "emile_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 5 "emile_knife_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 6 "jorge_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 7 "jorge_head_8" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 11 "kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 12 "kat_head_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 13 "kat_magnum_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 14 "player_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 15 "player_dmr_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 16 "fx_dyn_light_carter_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 17 "fx_dyn_light_kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 18 "fx_dyn_light_lowkat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 19 "fx_dyn_light_wall_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 20 "fx_dyn_light_group_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 21 "emil_sheath_8" true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (render_exposure 1 0)
    (sleep 78)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_030_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 8 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 8)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 0 "carter_9" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 2 "carter_head_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 3 "emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 4 "emile_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 5 "emile_knife_9" true)
    (object_hide (cinematic_scripting_get_object 2 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 7 "jorge_head_9" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 11 "kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 12 "kat_head_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 13 "kat_magnum_9" true)
    (object_hide (cinematic_scripting_get_object 2 14) true)
    (object_hide (cinematic_scripting_get_object 2 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 16 "fx_dyn_light_carter_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 17 "fx_dyn_light_kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 18 "fx_dyn_light_lowkat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 19 "fx_dyn_light_wall_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 20 "fx_dyn_light_group_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 21 "emil_sheath_9" true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (render_exposure 1 0)
    (sleep 69)
    (cinematic_scripting_start_dialogue 2 8 0 (cinematic_scripting_get_object 2 12))
    (sleep 69)
    (cinematic_scripting_start_dialogue 2 8 1 (cinematic_scripting_get_object 2 2))
    (sleep 33)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_katsplan_030_sc
    (cinematic_print "beginning scene 3")
    (cinematic_scripting_create_scene 2)
    (045la_katsplan_030_sc_sh1)
    (045la_katsplan_030_sc_sh2)
    (045la_katsplan_030_sc_sh3)
    (045la_katsplan_030_sc_sh4)
    (045la_katsplan_030_sc_sh5)
    (045la_katsplan_030_sc_sh6)
    (045la_katsplan_030_sc_sh7)
    (045la_katsplan_030_sc_sh8)
    (045la_katsplan_030_sc_sh9)
    (cinematic_scripting_destroy_scene 2)
)

(script static void 045la_katsplan_040_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 0 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 0)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 0 "carter_1" true)
    (object_hide (cinematic_scripting_get_object 3 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 2 "carter_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 3 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 4 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 5 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 6 "jorge_head_1" true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (object_hide (cinematic_scripting_get_object 3 10) true)
    (object_hide (cinematic_scripting_get_object 3 11) true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (object_hide (cinematic_scripting_get_object 3 13) true)
    (object_hide (cinematic_scripting_get_object 3 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 15 "fx_dyn_light_skylight_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 16 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 17 "fx_dyn_light_jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 18 "fx_dyn_light_car_sit_1" true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 20 "fx_dyn_light_jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 21 "fx_dyn_light_player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 22 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 23 "fx_dyn_light_wall_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 24 "fx_dyn_light_jor_emi_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 25 "godray_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1.5 0)
    (sleep 96)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_040_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 1 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 1)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 0 "carter_2" true)
    (object_hide (cinematic_scripting_get_object 3 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 2 "carter_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 3 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 4 "emile_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 5 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 6 "jorge_head_2" true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 10 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 11 "kat_head_2" true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (object_hide (cinematic_scripting_get_object 3 13) true)
    (object_hide (cinematic_scripting_get_object 3 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 15 "fx_dyn_light_skylight_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 16 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 17 "fx_dyn_light_jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 18 "fx_dyn_light_car_sit_2" true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 20 "fx_dyn_light_jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 21 "fx_dyn_light_player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 22 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 23 "fx_dyn_light_wall_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 24 "fx_dyn_light_jor_emi_2" true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (sleep 77)
    (cinematic_scripting_start_dialogue 3 1 0 (cinematic_scripting_get_object 3 11))
    (sleep 159)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_040_sc_sh3
    (render_ssao false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 2 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 2)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 1 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 2 "carter_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 3 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 4 "emile_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 5 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 6 "jorge_head_3" true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 8 "jun_dmr_3" true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 10 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 11 "kat_head_3" true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 13 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 14 "player_dmr_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 15 "fx_dyn_light_skylight_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 16 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 17 "fx_dyn_light_jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 18 "fx_dyn_light_car_sit_3" true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 20 "fx_dyn_light_jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 21 "fx_dyn_light_player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 22 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 23 "fx_dyn_light_wall_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 24 "fx_dyn_light_jor_emi_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 25 "godray_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (sleep 247)
    (render_ssao true)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_040_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 3 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 3)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (object_hide (cinematic_scripting_get_object 3 0) true)
    (object_hide (cinematic_scripting_get_object 3 1) true)
    (object_hide (cinematic_scripting_get_object 3 2) true)
    (object_hide (cinematic_scripting_get_object 3 3) true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (object_hide (cinematic_scripting_get_object 3 5) true)
    (object_hide (cinematic_scripting_get_object 3 6) true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 10 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 11 "kat_head_4" true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (object_hide (cinematic_scripting_get_object 3 13) true)
    (object_hide (cinematic_scripting_get_object 3 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 15 "fx_dyn_light_skylight_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 16 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 17 "fx_dyn_light_jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 18 "fx_dyn_light_car_sit_4" true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 20 "fx_dyn_light_jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 21 "fx_dyn_light_player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 22 "fx_dyn_light_emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 23 "fx_dyn_light_wall_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 24 "fx_dyn_light_jor_emi_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 25 "godray_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (sleep 129)
    (cinematic_scripting_start_dialogue 3 3 0 (cinematic_scripting_get_object 3 11))
    (sleep 15)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_040_sc_sh5
    (begin
        (render_patchy_fog false)
        (render_ssao false)
    )
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 4 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 4)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 1 "carter_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 2 "carter_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 3 "emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 4 "emile_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 5 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 6 "jorge_head_5" true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 8 "jun_dmr_5" true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 10 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 11 "kat_head_5" true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 13 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 14 "player_dmr_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 15 "fx_dyn_light_skylight_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 16 "fx_dyn_light_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 17 "fx_dyn_light_jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 18 "fx_dyn_light_car_sit_5" true)
    (object_hide (cinematic_scripting_get_object 3 19) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 20 "fx_dyn_light_jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 21 "fx_dyn_light_player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 22 "fx_dyn_light_emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 23 "fx_dyn_light_wall_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 24 "fx_dyn_light_jor_emi_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 4 25 "godray_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1 0)
    (sleep 127)
    (cinematic_scripting_start_dialogue 3 4 0 (cinematic_scripting_get_object 3 3))
    (sleep 59)
    (cinematic_scripting_start_dialogue 3 4 1 (cinematic_scripting_get_object 3 11))
    (sleep 36)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_040_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 5 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 5)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 1 "carter_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 2 "carter_head_6" true)
    (object_hide (cinematic_scripting_get_object 3 3) true)
    (object_hide (cinematic_scripting_get_object 3 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 5 "jorge_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 6 "jorge_head_6" true)
    (object_hide (cinematic_scripting_get_object 3 7) true)
    (object_hide (cinematic_scripting_get_object 3 8) true)
    (object_hide (cinematic_scripting_get_object 3 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 10 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 11 "kat_head_6" true)
    (object_hide (cinematic_scripting_get_object 3 12) true)
    (object_hide (cinematic_scripting_get_object 3 13) true)
    (object_hide (cinematic_scripting_get_object 3 14) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 15 "fx_dyn_light_skylight_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 16 "fx_dyn_light_kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 17 "fx_dyn_light_jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 18 "fx_dyn_light_car_sit_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 19 "tac_pad_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 20 "fx_dyn_light_jorge_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 21 "fx_dyn_light_player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 22 "fx_dyn_light_emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 23 "fx_dyn_light_wall_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 5 24 "fx_dyn_light_jor_emi_6" true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 1 0)
    (sleep 17)
    (cinematic_scripting_start_dialogue 3 5 0 (cinematic_scripting_get_object 3 2))
    (sleep 28)
    (cinematic_scripting_start_dialogue 3 5 1 (cinematic_scripting_get_object 3 11))
    (sleep 213)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_040_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 6 "045la_katsplan_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 6)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 0 "carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 1 "carter_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 2 "carter_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 3 "emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 4 "emile_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 5 "jorge_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 6 "jorge_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 7 "jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 8 "jun_dmr_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 9 "jun_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 10 "kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 11 "kat_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 12 "kat_magnum_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 13 "player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 14 "player_dmr_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 15 "fx_dyn_light_skylight_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 16 "fx_dyn_light_kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 17 "fx_dyn_light_jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 18 "fx_dyn_light_car_sit_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 19 "tac_pad_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 20 "fx_dyn_light_jorge_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 21 "fx_dyn_light_player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 22 "fx_dyn_light_emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 23 "fx_dyn_light_wall_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 6 24 "fx_dyn_light_jor_emi_7" true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (render_exposure 1.5 0)
    (sleep 48)
    (cinematic_scripting_start_dialogue 3 6 0 (cinematic_scripting_get_object 3 2))
    (sleep 10)
    (cinematic_scripting_start_music 3 6 0)
    (sleep 123)
    (sleep (cinematic_tag_fade_out_from_cinematic "045la_katsplan"))
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_katsplan_040_sc
    (cinematic_print "beginning scene 4")
    (cinematic_scripting_create_scene 3)
    (045la_katsplan_040_sc_sh1)
    (045la_katsplan_040_sc_sh2)
    (045la_katsplan_040_sc_sh3)
    (045la_katsplan_040_sc_sh4)
    (045la_katsplan_040_sc_sh5)
    (045la_katsplan_040_sc_sh6)
    (045la_katsplan_040_sc_sh7)
    (cinematic_scripting_destroy_scene 3)
)

(script static void 045la_katsplan_cleanup
    (cinematic_scripting_clean_up 5)
)

(script static void begin_045la_katsplan_debug
    (cinematic_zone_activate_for_debugging 5)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 5))
)

(script static void end_045la_katsplan_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 5)
    (fade_in 0 0 0 0)
)

(script static void 045la_katsplan_debug
    (begin_045la_katsplan_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "045la_katsplan"))
    (!045la_katsplan_010_sc)
    (!045la_katsplan_020_sc)
    (!045la_katsplan_030_sc)
    (!045la_katsplan_040_sc)
    (end_045la_katsplan_debug)
)

(script static void begin_045la_katsplan
    (cinematic_zone_activate 5)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 5))
)

(script static void end_045la_katsplan
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan
    (begin_045la_katsplan)
    (sleep (cinematic_tag_fade_in_to_cinematic "045la_katsplan"))
    (!045la_katsplan_010_sc)
    (!045la_katsplan_020_sc)
    (!045la_katsplan_030_sc)
    (!045la_katsplan_040_sc)
    (end_045la_katsplan)
)

(script static void 045la_katsplan_050_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "045la_katsplan_050_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_050_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "falcon_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "falcon_1_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "falcon_1_falcon_side_gun_left2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "falcon_1_falcon_side_gun_right3_1" true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_dyn_light_sun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "carter_dmr_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_music 0 0 0)
    (cinematic_scripting_start_music 0 0 1)
    (sleep 30)
    (cinematic_set_title "045la_cine_timestamp_03")
    (cinematic_print "custom script play")
    (sleep 135)
    (cinematic_print "custom script play")
    (cinematic_set_title "045la_cine_timestamp_04")
    (sleep 193)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_050_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "045la_katsplan_050_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_050_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "falcon_1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "falcon_1_falcon_chin_gun1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "falcon_1_falcon_side_gun_left2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "falcon_1_falcon_side_gun_right3_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "jorge_turret_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "kat_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 "kat_magnum_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "fx_dyn_light_sun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 13 "carter_dmr_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 1) "driver_seat_power" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 1) "headlights" 0 0)
    (cinematic_print "custom script play")
    (object_set_model_state_property (cinematic_object_get "falcon_1") 0 true)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 1) "thrust" 0.05 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 1) "engine_exhaust" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 1) "blur" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 1) "jet_wash" 1 0)
    (sleep 130)
    (cinematic_scripting_start_effect 0 1 0 (cinematic_object_get "jorge"))
    (cinematic_scripting_start_effect 0 1 1 (cinematic_object_get "jorge"))
    (sleep 40)
    (cinematic_scripting_start_effect 0 1 2 (cinematic_object_get "kat"))
    (cinematic_scripting_start_effect 0 1 3 (cinematic_object_get "kat"))
    (sleep 35)
    (cinematic_scripting_start_effect 0 1 5 (cinematic_object_get "player"))
    (cinematic_scripting_start_effect 0 1 4 (cinematic_object_get "player"))
    (sleep 112)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_katsplan_050_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (045la_katsplan_050_sc_sh1)
    (045la_katsplan_050_sc_sh2)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 045la_katsplan_060_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "045la_katsplan_050_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "045la_katsplan_050_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "falcon_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "falcon_1_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "falcon_1_falcon_side_gun_left2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "falcon_1_falcon_side_gun_right3_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "fx_dyn_light_sun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "jorge_turret_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "kat_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "kat_magnum_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "player_fp_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "carter_dmr_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "blur" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "thrust" 1 0)
    (cinematic_print "custom script play")
    (cinematic_show_letterbox_immediate false)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 9) "primary_ammunition_tens" 0.3 0)
    (object_set_model_state_property (cinematic_object_get "falcon_1") 0 true)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "engine_rpm" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 9) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 12) "primary_ammunition_tens" 0.3 0)
    (cinematic_print "custom script play")
    (sleep 6)
    (cinematic_scripting_start_dialogue 1 0 0 (cinematic_scripting_get_object 1 6))
    (sleep 49)
    (cinematic_scripting_start_dialogue 1 0 1 (cinematic_scripting_get_object 1 0))
    (sleep 55)
    (cinematic_scripting_start_dialogue 1 0 2 (cinematic_scripting_get_object 1 8))
    (sleep 47)
    (cinematic_scripting_start_dialogue 1 0 3 (cinematic_scripting_get_object 1 0))
    (sleep 38)
    (sleep (cinematic_tag_fade_out_from_cinematic "045la_katsplan_v2"))
    (sleep 4)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !045la_katsplan_060_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (045la_katsplan_060_sc_sh1)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 045la_katsplan_v2_cleanup
    (cinematic_scripting_clean_up 6)
)

(script static void begin_045la_katsplan_v2_debug
    (cinematic_zone_activate_for_debugging 6)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 6))
)

(script static void end_045la_katsplan_v2_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 6)
    (fade_in 0 0 0 0)
)

(script static void 045la_katsplan_v2_debug
    (begin_045la_katsplan_v2_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "045la_katsplan_v2"))
    (prepare_to_switch_to_zone_set "set_beach_001_005")
    (!045la_katsplan_050_sc)
    (!045la_katsplan_060_sc)
    (end_045la_katsplan_v2_debug)
)

(script static void begin_045la_katsplan_v2
    (cinematic_zone_activate 6)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 6))
)

(script static void end_045la_katsplan_v2
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 045la_katsplan_v2
    (begin_045la_katsplan_v2)
    (sleep (cinematic_tag_fade_in_to_cinematic "045la_katsplan_v2"))
    (prepare_to_switch_to_zone_set "set_beach_001_005")
    (!045la_katsplan_050_sc)
    (!045la_katsplan_060_sc)
    (end_045la_katsplan_v2)
)

(script static void md_bch_trf_spartans_coming_to_md_abort
    (= b_lnc_started true)
    (md_abort)
)

(script static void md_fac_tr_everybody_inside_to_branch_abort_dialogue
    (>= s_objcon_fac 10)
    (branch_abort_dialogue)
)

(script static void md_fac_tr_inside_now_to_branch_abort_dialogue
    (= b_fac_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_entrance_reminder_to_branch_abort_fac_reminder
    (or (>= s_objcon_fac 40) (= b_lnc_started true))
    (branch_abort_fac_reminder)
)

(script static void md_fac_tr_flight_control_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_jor_holland_said_yes_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_tr_calls_wraith_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_tr_clocks_ticking_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_kat_orbit_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_tr_be_coming_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_tr_clear_los_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_fac_tr_through_door_to_branch_abort_dialogue
    (= b_lnc_started true)
    (branch_abort_dialogue)
)

(script static void md_lnc_car_get_to_sabre_to_md_abort
    (= b_lnc_player_in_sabre true)
    (md_abort)
)

(script static void md_waf_an9_gunboats_in_position_to_md_abort
    (= b_waf_phantoms_defeated true)
    (md_abort)
)

(script static void md_waf_phantom_torpedoes_away_to_md_abort
    (= b_waf_phantoms_defeated true)
    (md_abort)
)

(script static void md_warp_dock_reminder_to_md_abort
    (= b_wrp_player_docks true)
    (md_abort)
)

(script static void md_com_hol_airlock_reminder_to_mda_com_hol_airlock_reminder
    (>= s_objcon_com 10)
    (mda_com_hol_airlock_reminder)
)

(script static void md_fin_jor_meet_reminder_loop_to_md_abort
    (= b_fin_completed true)
    (md_abort)
)

(script static void corvette_cannon_control_to_branch_abort
    (= b_com_started true)
    (branch_abort)
)

(script static void amb_corvette_battle_to_branch_abort
    (= b_hgr_switch_flipped true)
    (branch_abort)
)

(script static void amb_gunroom_battle_to_branch_abort
    (= b_savannah_destroyed true)
    (branch_abort)
)

(script static void start_sabre_tutorial_to_cancel_sabre_tutorial
    (= b_saber_tutorial_complete true)
    (cancel_sabre_tutorial)
)

(script static void sabre_seat_exit_control_to_branch_abort
    (= b_com_started true)
    (branch_abort)
)

(script static void bch_burglar_control_to_branch_abort
    (= b_fac_started true)
    (branch_abort)
)

(script static void save_bch_jetpacks_to_branch_abort
    (= b_fac_started true)
    (branch_abort)
)

(script static void save_bch_rocks_to_branch_abort
    (= b_fac_started true)
    (branch_abort)
)

(script static void fac_window_failsafe_to_branch_abort
    (>= s_objcon_fac 70)
    (branch_abort)
)

(script static void waf_save_loop_to_branch_abort
    (= b_waf_completed true)
    (branch_abort)
)

(script static void crv_save_loop_to_branch_abort_crv_save
    (= b_brd_started true)
    (branch_abort_crv_save)
)

(script static void bch_unsc_post_control_to_branch_abort_bch_infinite
    (= b_bch_infinite_kill true)
    (branch_abort_bch_infinite)
)

(script static void bch_cov_post_beach_control_to_branch_abort
    (= b_bch_infinite_kill true)
    (branch_abort)
)

(script static void bch_cov_post_dock_control_to_branch_abort
    (= b_bch_infinite_kill true)
    (branch_abort)
)

(script static void bch_wraith_water_kill_to_branch_abort
    (= b_bch_infinite_kill true)
    (branch_abort)
)

(script static void bch_seraphs_loop_to_branch_abort_bch_seraphs
    (or (= b_bch_infinite_kill true) (>= s_objcon_fac 110) (= b_lnc_started true))
    (branch_abort_bch_seraphs)
)

(script static void lnc_seraphs_loop_to_branch_abort_lnc_seraphs
    (= b_lnc_player_in_sabre true)
    (branch_abort_lnc_seraphs)
)

(script static void bch_recycle_bipeds_to_branch_abort
    (= b_bch_infinite_kill true)
    (branch_abort)
)

(script static void mendicant_beach_control_to_branch_abort
    (= b_lnc_started true)
    (branch_abort)
)

(script static void mendicant_bridge_control_to_branch_abort
    (= b_fin_started true)
    (branch_abort)
)

; Decompilation finished in ~0.389372s
