; Decompiled with Assembly
; 
; Source file: m52.hsc
; Start time: 2018-02-05 12:54:36 PM
; 
; Remember that all script code is property of Bungie/343 Industries.
; You have no rights. Play nice.

; Globals
(global boolean b_debug_phantom false)
(global boolean b_debug_globals false)
(global short player_00 0)
(global short player_01 1)
(global short player_02 2)
(global short player_03 3)
(global short s_md_play_time 0)
(global string data_mine_mission_segment "")
(global boolean b_debug_cinematic_scripts true)
(global boolean b_cinematic_entered false)
(global sound sfx_a_button none)
(global sound sfx_b_button none)
(global sound sfx_hud_in none)
(global sound sfx_hud_out none)
(global sound sfx_objective none)
(global sound sfx_tutorial_complete "sound\game_sfx\ui\pda_transition.sound")
(global sound sfx_blip "sound\game_sfx\ui\transition_beeps")
(global object_list l_blip_list (players))
(global boolean b_blip_list_locked false)
(global short s_blip_list_index 0)
(global short blip_neutralize 0)
(global short blip_defend 1)
(global short blip_ordnance 2)
(global short blip_interface 3)
(global short blip_recon 4)
(global short blip_recover 5)
(global short blip_structure 6)
(global short blip_neutralize_alpha 7)
(global short blip_neutralize_bravo 8)
(global short blip_neutralize_charlie 9)
(global short blip_ammo 13)
(global short blip_hostile_vehicle 14)
(global short blip_hostile 15)
(global short blip_default_a 17)
(global short blip_default_b 18)
(global short blip_default_c 19)
(global short blip_default_d 20)
(global short blip_default 21)
(global short blip_destination 21)
(global boolean b_is_dialogue_playing false)
(global short g_music_m52_01 0)
(global short g_music_m52_02 0)
(global short g_music_m52_03 0)
(global short g_music_m52_04 0)
(global short g_music_m52_05 0)
(global short g_music_m52_06 0)
(global short g_music_m52_07 0)
(global short g_music_m52_08 0)
(global short g_music_m52_09 0)
(global boolean g_intro_dialog_played false)
(global short s_player0_training_progress 0)
(global short s_player1_training_progress 0)
(global short s_player2_training_progress 0)
(global short s_player3_training_progress 0)
(global boolean b_falcon_evac_dialog false)
(global long bldg_a_vig01 -1)
(global long bldg_a_vig01_exit -1)
(global long bldg_a_vig02 -1)
(global long bldg_a_vig02_exit -1)
(global long bldg_a_vig03 -1)
(global long bldg_a_vig03_exit -1)
(global boolean b_marine01_vignette_end false)
(global boolean b_marine02_vignette_end false)
(global boolean b_marine03_vignette_end false)
(global ai ai_crazy none)
(global point_reference l_point "sd_fx_master/p0")
(global point_reference n_point "sd_fx_master/p1")
(global point_reference o_point "sd_fx_master/p2")
(global boolean b_rain_is_active true)
(global boolean b_rain_always_thunderclap true)
(global short s_rain_min_on_time 60)
(global short s_rain_max_on_time 180)
(global short s_rain_min_off_time 30)
(global short s_rain_max_off_time 45)
(global short s_rain_min_ramp_up_time 2)
(global short s_rain_max_ramp_up_time 10)
(global short s_rain_min_ramp_down_time 6)
(global short s_rain_max_ramp_down_time 12)
(global short s_rain_min_lightning_delay 5)
(global short s_rain_max_lightning_delay 20)
(global short s_rain_min_thunder_delay 1)
(global short s_rain_max_thunder_delay 3)
(global short g_set_all 4)
(global boolean editor false)
(global boolean g_play_cinematics true)
(global short g_secondary_test 0)
(global short g_coop_simulation 0)
(global boolean debug true)
(global short m_progression 3)
(global boolean b_banshee_spawn true)
(global short g_prev_mission 0)
(global short oni_wave_progression 0)
(global short m_sec_started 0)
(global short m_sec_complete 0)
(global boolean g_main_dialog_playing false)
(global short g_mission_unlock 0)
(global short s_entry_timeout 900)
(global boolean m_sec_alpha false)
(global boolean m_sec_beta false)
(global boolean m_sec_gamma false)
(global boolean m_sec_delta false)
(global boolean m_alpha_complete false)
(global boolean m_beta_complete false)
(global boolean m_gamma_complete false)
(global boolean m_delta_complete false)
(global boolean m_coop_1st_dialog true)
(global boolean m_coop_1st_dialog_done false)
(global boolean m_sec_alpha01_start false)
(global boolean m_sec_alpha02_start false)
(global boolean m_sec_alpha03_start false)
(global boolean m_sec_beta01_start false)
(global boolean m_sec_beta02_start false)
(global boolean m_sec_beta03_start false)
(global boolean m_sec_gamma01_start false)
(global boolean m_sec_gamma02_start false)
(global boolean m_sec_gamma03_start false)
(global boolean m_sec_delta01_start false)
(global boolean m_sec_delta02_start false)
(global boolean m_sec_delta03_start false)
(global boolean mission_obj_gamma_1 false)
(global boolean mission_obj_gamma_2 false)
(global boolean mission_obj_gamma_3 false)
(global boolean b_start_hub false)
(global boolean b_training_complete false)
(global short obj_control_bldg_a 0)
(global short obj_control_bldg_b 0)
(global short obj_control_bldg_c 0)
(global boolean g_bldg_c_elev_active false)
(global boolean g_bldg_c_drones_attack false)
(global short g_alpha_enc 0)
(global short g_beta_enc 0)
(global short g_gamma_enc 0)
(global short g_delta_enc 0)
(global boolean g_alpha_1_marine_safe false)
(global boolean g_alpha_2_marine_safe false)
(global boolean g_alpha_3_marine_safe false)
(global boolean g_beta_1_marine_safe false)
(global boolean g_beta_2_marine_safe false)
(global boolean g_beta_3_marine_safe false)
(global boolean g_gamma_1_marine_safe false)
(global boolean g_gamma_complete false)
(global boolean g_gamma_2_marine_safe false)
(global boolean g_gamma_2_success false)
(global boolean g_gamma_3_marine_safe false)
(global boolean g_gamma_3_complete false)
(global ai ai_bldgb_trooper02 none)
(global ai ai_bldgb_trooper04 none)
(global ai ai_bldga_fem02 none)
(global ai ai_bldga_trooper01 none)
(global ai ai_buck none)
(global short g_clumps_turret 20)
(global short g_clumps_banshee 1)
(global short g_banshee_type 30)
(global short g_falcon_type 20)
(global short prev_zone 0)
(global object reserve_vehicle00 none)
(global object reserve_vehicle01 none)
(global object reserve_vehicle02 none)
(global object reserve_vehicle03 none)
(global object obj_final_falcon01 none)
(global object obj_final_falcon02 none)
(global object obj_final_falcon03 none)
(global short g_insertion_index 0)
(global real g_nav_offset 0.55)
(global boolean b_player_in_mission false)
(global boolean g_mission_nav_loop true)
(global boolean b_disco false)
(global boolean b_disco_disco false)
(global object_list shake_var (players))
(global short g_beat 15)
(global boolean dance_stop false)
(global short elevator_music_bool 1)
(global short s_bldg_c_bugger_max 15)
(global short s_bldg_c_bugger_per_vent 3)
(global short s_bldg_c_bugger_num 30)
(global boolean b_oni_start false)
(global boolean b_oni_begin false)
(global short pelican_status 0)
(global boolean oni_dropship01_exit false)
(global boolean oni_dropship02_exit false)
(global boolean oni_dropship03_exit false)
(global short s_oni_banshee_num 8)
(global short s_banshee_max 7)
(global short s_random_banshee_num0 0)
(global short s_random_banshee_num1 0)
(global short s_random_banshee_num2 0)
(global short s_random_banshee_num3 0)
(global boolean b_safe_for_ambient true)
(global boolean b_falcon_dispatched01 false)
(global boolean b_falcon_dispatched02 false)
(global short s_falcons_active 0)
(global short s_falcons_allowed 1)
(global boolean b_falcon01a_nanny false)
(global boolean b_falcon02a_nanny false)
(global boolean b_falcon01b_nanny false)
(global boolean b_falcon02b_nanny false)
(global boolean b_falcon01c_nanny false)
(global boolean b_falcon02c_nanny false)
(global boolean b_falcon01_start_nanny false)
(global boolean b_falcon02_start_nanny false)
(global short straggler_no 0)
(global short g_count0 0)
(global short g_count1 0)
(global short g_count2 0)
(global short g_count3 0)
(global short s_special_elite 0)
(global boolean b_special false)
(global boolean b_special_win false)
(global short player0_death 0)
(global short player1_death 0)
(global short player2_death 0)
(global short player3_death 0)

; Scripts
(script static void f_hud_obj_complete
    (objectives_clear)
    (chud_show_screen_objective "campaign_hud_objcomplete")
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static void (f_load_phantom (vehicle phantom, string load_side, ai load_squad_01, ai load_squad_02, ai load_squad_03, ai load_squad_04))
    (ai_place load_squad_01)
    (ai_place load_squad_02)
    (ai_place load_squad_03)
    (ai_place load_squad_04)
    (sleep 1)
    (if (= load_side "left")
        (begin
            (if b_debug_phantom
                (print "load phantom left...")
            )
            (ai_vehicle_enter_immediate load_squad_01 phantom 0)
            (ai_vehicle_enter_immediate load_squad_02 phantom 1)
            (ai_vehicle_enter_immediate load_squad_03 phantom 2)
            (ai_vehicle_enter_immediate load_squad_04 phantom 3)
        )
        (if (= load_side "right")
            (begin
                (if b_debug_phantom
                    (print "load phantom right...")
                )
                (ai_vehicle_enter_immediate load_squad_01 phantom 4)
                (ai_vehicle_enter_immediate load_squad_02 phantom 5)
                (ai_vehicle_enter_immediate load_squad_03 phantom 6)
                (ai_vehicle_enter_immediate load_squad_04 phantom 7)
            )
            (if (= load_side "dual")
                (begin
                    (if b_debug_phantom
                        (print "load phantom dual...")
                    )
                    (ai_vehicle_enter_immediate load_squad_01 phantom 1)
                    (ai_vehicle_enter_immediate load_squad_02 phantom 5)
                    (ai_vehicle_enter_immediate load_squad_03 phantom 0)
                    (ai_vehicle_enter_immediate load_squad_04 phantom 4)
                )
                (if (= load_side "any")
                    (begin
                        (if b_debug_phantom
                            (print "load phantom any...")
                        )
                        (ai_vehicle_enter_immediate load_squad_01 phantom 8)
                        (ai_vehicle_enter_immediate load_squad_02 phantom 8)
                        (ai_vehicle_enter_immediate load_squad_03 phantom 8)
                        (ai_vehicle_enter_immediate load_squad_04 phantom 8)
                    )
                    (if (= load_side "chute")
                        (begin
                            (if b_debug_phantom
                                (print "load phantom chute...")
                            )
                            (ai_vehicle_enter_immediate load_squad_01 phantom 9)
                            (ai_vehicle_enter_immediate load_squad_02 phantom 10)
                            (ai_vehicle_enter_immediate load_squad_03 phantom 11)
                            (ai_vehicle_enter_immediate load_squad_04 phantom 12)
                        )
                    )
                )
            )
        )
    )
)

(script static void (f_load_phantom_cargo (vehicle phantom, string load_number, ai load_squad_01, ai load_squad_02))
    (if (= load_number "single")
        (begin
            (ai_place load_squad_01)
            (sleep 1)
            (vehicle_load_magic phantom 13 (ai_vehicle_get_from_squad load_squad_01 0))
        )
        (if (= load_number "double")
            (begin
                (ai_place load_squad_01)
                (ai_place load_squad_02)
                (sleep 1)
                (vehicle_load_magic phantom 14 (ai_vehicle_get_from_squad load_squad_01 0))
                (vehicle_load_magic phantom 15 (ai_vehicle_get_from_squad load_squad_02 0))
            )
        )
    )
)

(script static void (f_unload_phantom (vehicle phantom, string drop_side))
    (if b_debug_phantom
        (print "opening phantom...")
    )
    (unit_open phantom)
    (sleep 60)
    (if (= drop_side "left")
        (begin
            (f_unload_ph_left phantom)
            (sleep 45)
            (f_unload_ph_mid_left phantom)
            (sleep 75)
        )
        (if (= drop_side "right")
            (begin
                (f_unload_ph_right phantom)
                (sleep 45)
                (f_unload_ph_mid_right phantom)
                (sleep 75)
            )
            (if (= drop_side "dual")
                (begin
                    (f_unload_ph_left phantom)
                    (f_unload_ph_right phantom)
                    (sleep 75)
                )
                (if (= drop_side "chute")
                    (begin
                        (f_unload_ph_chute phantom)
                        (sleep 75)
                    )
                )
            )
        )
    )
    (if b_debug_phantom
        (print "closing phantom...")
    )
    (unit_close phantom)
)

(script static void (f_unload_ph_left (vehicle phantom))
    (begin_random
        (begin
            (vehicle_unload phantom 1)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom 0)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_ph_right (vehicle phantom))
    (begin_random
        (begin
            (vehicle_unload phantom 5)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom 4)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_ph_mid_left (vehicle phantom))
    (begin_random
        (begin
            (vehicle_unload phantom 2)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom 3)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_ph_mid_right (vehicle phantom))
    (begin_random
        (begin
            (vehicle_unload phantom 6)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload phantom 7)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_ph_chute (vehicle phantom))
    (object_set_phantom_power phantom true)
    (if (vehicle_test_seat phantom 9)
        (begin
            (vehicle_unload phantom 9)
            (sleep 120)
        )
    )
    (if (vehicle_test_seat phantom 10)
        (begin
            (vehicle_unload phantom 10)
            (sleep 120)
        )
    )
    (if (vehicle_test_seat phantom 11)
        (begin
            (vehicle_unload phantom 11)
            (sleep 120)
        )
    )
    (if (vehicle_test_seat phantom 12)
        (begin
            (vehicle_unload phantom 12)
            (sleep 120)
        )
    )
    (object_set_phantom_power phantom false)
)

(script static void (f_unload_phantom_cargo (vehicle phantom, string load_number))
    (if (= load_number "single")
        (vehicle_unload phantom 13)
        (if (= load_number "double")
            (begin_random
                (begin
                    (vehicle_unload phantom 14)
                    (sleep (random_range 15 30))
                )
                (begin
                    (vehicle_unload phantom 15)
                    (sleep (random_range 15 30))
                )
            )
        )
    )
)

(script static unit player0
    (player_get 0)
)

(script static unit player1
    (player_get 1)
)

(script static unit player2
    (player_get 2)
)

(script static unit player3
    (player_get 3)
)

(script static short player_count
    (list_count (players))
)

(script static void print_difficulty
    (if (= (game_difficulty_get_real) easy)
        (print "easy")
        (if (= (game_difficulty_get_real) normal)
            (print "normal")
            (if (= (game_difficulty_get_real) heroic)
                (print "heroic")
                (if (= (game_difficulty_get_real) legendary)
                    (print "legendary")
                )
            )
        )
    )
)

(script static boolean difficulty_legendary
    (= (game_difficulty_get_real) legendary)
)

(script static boolean difficulty_heroic
    (= (game_difficulty_get_real) heroic)
)

(script static boolean difficulty_normal
    (<= (game_difficulty_get_real) normal)
)

(script static void replenish_players
    (if b_debug_globals
        (print "replenish player health...")
    )
    (unit_set_current_vitality player0 80 80)
    (unit_set_current_vitality player1 80 80)
    (unit_set_current_vitality player2 80 80)
    (unit_set_current_vitality player3 80 80)
)

(script static boolean coop_players_2
    (>= (game_coop_player_count) 2)
)

(script static boolean coop_players_3
    (>= (game_coop_player_count) 3)
)

(script static boolean coop_players_4
    (>= (game_coop_player_count) 4)
)

(script static boolean any_players_in_vehicle
    (or (unit_in_vehicle (unit player0)) (unit_in_vehicle (unit player1)) (unit_in_vehicle (unit player2)) (unit_in_vehicle (unit player3)))
)

(script static void (f_vehicle_scale_destroy (vehicle vehicle_variable))
    (object_set_scale vehicle_variable 0.01 (* 30 5))
    (sleep (* 30 5))
    (object_destroy vehicle_variable)
)

(script static void (f_ai_place_vehicle_deathless (ai squad))
    (ai_place squad)
    (ai_cannot_die (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0))) true)
    (object_cannot_die (ai_vehicle_get_from_squad squad 0) true)
)

(script static void (f_ai_place_vehicle_deathless_no_emp (ai squad))
    (ai_place squad)
    (ai_cannot_die (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0))) true)
    (object_cannot_die (ai_vehicle_get_from_squad squad 0) true)
    (object_ignores_emp (ai_vehicle_get_from_squad squad 0) true)
)

(script static short (f_vehicle_rider_number (vehicle v))
    (list_count (vehicle_riders v))
)

(script static boolean (f_all_squad_in_vehicle (ai inf_squad, ai vehicle_squad))
    (and (= (ai_living_count inf_squad) 0) (= (ai_living_count vehicle_squad) (f_vehicle_rider_number (ai_vehicle_get_from_squad vehicle_squad 0))))
)

(script static ai (f_ai_get_vehicle_driver (ai squad))
    (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0)))
)

(script static void (f_ai_magically_see_players (ai squad))
    (ai_magically_see_object squad player0)
    (ai_magically_see_object squad player1)
    (ai_magically_see_object squad player2)
    (ai_magically_see_object squad player3)
)

(script dormant void f_global_health_saves
    (sleep_until (> (player_count) 0))
    (sleep_until 
        (begin
            (sleep_until (< (object_get_health player0) 1))
            (sleep (* 30 7))
            (if (< (object_get_health player0) 1)
                (begin
                    (sleep_until (= (object_get_health player0) 1))
                    (print "global health: health pack aquired")
                    (game_save)
                )
                (print "global health: re-gen")
            )
            false
        )
    )
)

(script static void (f_coop_resume_unlocked (cutscene_title resume_title, short insertion_point))
    (if (game_is_cooperative)
        (begin
            (sound_impulse_start sfx_hud_in none 1)
            (cinematic_set_chud_objective resume_title)
            (game_insertion_point_unlock insertion_point)
        )
    )
)

(script static boolean cinematic_skip_start
    (cinematic_skip_start_internal)
    (game_save_cinematic_skip)
    (sleep_until (not (game_saving)) 1)
    (not (game_reverted))
)

(script static void (cinematic_skip_stop (string_id cinematic_name))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
        )
    )
)

(script static void (cinematic_skip_stop_load_zone (string_id cinematic_name, zone_set z))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
        )
    )
    (switch_zone_set z)
    (sleep 2)
)

(script static void (cinematic_skip_stop_terminal (string_id cinematic_name))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
            (if b_debug_globals
                (print "sleeping forever...")
            )
            (sleep_forever)
        )
    )
)

(script static void test_cinematic_enter_exit
    (sleep 30)
)

(script static void (cinematic_enter (string_id cinematic_name, boolean lower_weapon))
    (set b_cinematic_entered true)
    (cinematic_enter_pre lower_weapon)
    (sleep (cinematic_tag_fade_out_from_game cinematic_name))
    (cinematic_enter_post)
)

(script static void (designer_cinematic_enter (boolean lower_weapon))
    (cinematic_enter_pre lower_weapon)
    (sleep (cinematic_transition_fade_out_from_game "cinematics\transitions\default_intra.cinematic_transition"))
    (cinematic_enter_post)
)

(script static void (cinematic_enter_pre (boolean lower_weapon))
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (if (= lower_weapon true)
        (begin
            (if b_debug_cinematic_scripts
                (print "lowering weapon slowly...")
            )
            (unit_lower_weapon player0 30)
            (unit_lower_weapon player1 30)
            (unit_lower_weapon player2 30)
            (unit_lower_weapon player3 30)
        )
    )
    (campaign_metagame_time_pause true)
    (chud_cinematic_fade 0 0.5)
)

(script static void cinematic_enter_post
    (if b_debug_cinematic_scripts
        (print "hiding players...")
    )
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (player_enable_input false)
    (player_disable_movement true)
    (sleep 1)
    (if b_debug_cinematic_scripts
        (print "camera control on")
    )
    (camera_control true)
    (cinematic_start)
)

(script static void (cinematic_exit (string_id cinematic_name, boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (sleep (cinematic_tag_fade_in_to_game cinematic_name))
    (cinematic_exit_post weapon_starts_lowered)
)

(script static void (designer_cinematic_exit (boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (sleep (cinematic_transition_fade_in_to_game "cinematics\transitions\default_intra.cinematic_transition"))
    (cinematic_exit_post weapon_starts_lowered)
)

(script static void (cinematic_exit_into_title (string_id cinematic_name, boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (chud_cinematic_fade 0 0)
    (sleep (cinematic_tag_fade_in_to_game cinematic_name))
    (cinematic_exit_post_title weapon_starts_lowered)
)

(script static void (cinematic_exit_pre (boolean weapon_starts_lowered))
    (cinematic_stop)
    (camera_control false)
    (object_hide player0 false)
    (object_hide player1 false)
    (object_hide player2 false)
    (object_hide player3 false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "snapping weapon to lowered state...")
            )
            (unit_lower_weapon player0 1)
            (unit_lower_weapon player1 1)
            (unit_lower_weapon player2 1)
            (unit_lower_weapon player3 1)
            (sleep 1)
        )
        (begin
            (unit_raise_weapon player0 1)
            (unit_raise_weapon player1 1)
            (unit_raise_weapon player2 1)
            (unit_raise_weapon player3 1)
            (sleep 1)
        )
    )
    (player_control_unlock_gaze player0)
    (player_control_unlock_gaze player1)
    (player_control_unlock_gaze player2)
    (player_control_unlock_gaze player3)
    (sleep 1)
)

(script static void (cinematic_exit_post (boolean weapon_starts_lowered))
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (chud_cinematic_fade 1 1)
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void (cinematic_exit_post_title (boolean weapon_starts_lowered))
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void insertion_snap_to_black
    (fade_out 0 0 0 0)
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (unit_lower_weapon player0 0)
    (unit_lower_weapon player1 0)
    (unit_lower_weapon player2 0)
    (unit_lower_weapon player3 0)
    (campaign_metagame_time_pause true)
    (chud_cinematic_fade 0 0)
    (if b_debug_cinematic_scripts
        (print "hiding players...")
    )
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (player_enable_input false)
    (player_disable_movement true)
    (sleep 1)
    (if b_debug_cinematic_scripts
        (print "camera control on")
    )
)

(script static void insertion_fade_to_gameplay
    (designer_fade_in "fade_from_black" true)
)

(script static void (designer_fade_in (string fade_type, boolean weapon_starts_lowered))
    (cinematic_stop)
    (camera_control false)
    (object_hide player0 false)
    (object_hide player1 false)
    (object_hide player2 false)
    (object_hide player3 false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "snapping weapon to lowered state...")
            )
            (unit_lower_weapon player0 1)
            (unit_lower_weapon player1 1)
            (unit_lower_weapon player2 1)
            (unit_lower_weapon player3 1)
            (sleep 1)
        )
    )
    (player_control_unlock_gaze player0)
    (player_control_unlock_gaze player1)
    (player_control_unlock_gaze player2)
    (player_control_unlock_gaze player3)
    (sleep 1)
    (if (= fade_type "fade_from_black")
        (begin
            (if b_debug_cinematic_scripts
                (print "fading from black...")
            )
            (fade_in 0 0 0 30)
            (sleep 20)
        )
        (if (= fade_type "fade_from_white")
            (begin
                (if b_debug_cinematic_scripts
                    (print "fading from white...")
                )
                (fade_in 1 1 1 30)
                (sleep 20)
            )
            (if (= fade_type "snap_from_black")
                (begin
                    (if b_debug_cinematic_scripts
                        (print "snapping from black...")
                    )
                    (fade_in 0 0 0 5)
                    (sleep 5)
                )
                (if (= fade_type "snap_from_white")
                    (begin
                        (if b_debug_cinematic_scripts
                            (print "snapping from white...")
                        )
                        (fade_in 1 1 1 5)
                        (sleep 5)
                    )
                    (if (= fade_type "no_fade")
                        (begin
                            (fade_in 1 1 1 0)
                            (sleep 5)
                        )
                    )
                )
            )
        )
    )
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (chud_cinematic_fade 1 1)
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void cinematic_snap_to_black
    (sleep 0)
)

(script static void cinematic_snap_to_white
    (sleep 0)
)

(script static void cinematic_snap_from_black
    (sleep 0)
)

(script static void cinematic_snap_from_white
    (sleep 0)
)

(script static void cinematic_fade_to_black
    (sleep 0)
)

(script static void cinematic_fade_to_white
    (sleep 0)
)

(script static void cinematic_fade_to_gameplay
    (designer_fade_in "fade_from_black" true)
)

(script static void cinematic_hud_on
    (chud_cinematic_fade 1 0)
    (chud_show_crosshair false)
)

(script static void cinematic_hud_off
    (chud_cinematic_fade 0 0)
    (chud_show_crosshair true)
)

(script static void performance_default_script
    (sleep_until 
        (begin
            (performance_play_line_by_id (+ (performance_get_last_played_line_index) 1))
            (>= (+ (performance_get_last_played_line_index) 1) (performance_get_line_count))
        )
        0
    )
)

(script static void end_mission
    (game_won)
)

(script static void (f_start_mission (string_id cinematic_name))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name true)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_cinematic_scripts
                (print "f_start_mission: cinematic_skip_start is true... starting cinematic...")
            )
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop cinematic_name)
)

(script static void (f_play_cinematic_advanced (string_id cinematic_name, zone_set cinematic_zone_set, zone_set zone_to_load_when_done))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (set b_cinematic_entered false)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "f_play_cinematic: playing cinematic...")
            )
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_load_zone cinematic_name zone_to_load_when_done)
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: done with cinematic. resetting audio levels...")
    )
)

(script static void (f_play_cinematic_unskippable (string_id cinematic_name, zone_set cinematic_zone_set))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (begin
        (if b_debug_globals
            (print "f_play_cinematic: playing cinematic...")
        )
        (cinematic_show_letterbox true)
        (sleep 30)
        (cinematic_show_letterbox_immediate true)
        (cinematic_run_script_by_name cinematic_name)
    )
)

(script static void (f_play_cinematic (string_id cinematic_name, zone_set cinematic_zone_set))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "f_play_cinematic: playing cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop cinematic_name)
)

(script static void (f_end_mission (string_id cinematic_name, zone_set cinematic_zone_set))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (ai_erase_all)
    (garbage_collect_now)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "play outro cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_internal)
    (fade_out 0 0 0 0)
    (sleep 1)
)

(script static void (f_end_mission_ai (string_id cinematic_name, zone_set cinematic_zone_set))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (ai_disregard player0 true)
    (ai_disregard player1 true)
    (ai_disregard player2 true)
    (ai_disregard player3 true)
    (garbage_collect_now)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "play outro cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_internal)
    (fade_out 0 0 0 0)
    (sleep 1)
)

(script startup void beginning_mission_segment
    (data_mine_set_mission_segment "mission_start")
)

(script static void (f_sfx_a_button (short player_short))
    (sound_impulse_start sfx_a_button (player_get player_short) 1)
)

(script static void (f_sfx_b_button (short player_short))
    (sound_impulse_start sfx_b_button (player_get player_short) 1)
)

(script static void (f_sfx_hud_in (short player_short))
    (sound_impulse_start sfx_hud_in (player_get player_short) 1)
)

(script static void (f_sfx_hud_out (short player_short))
    (sound_impulse_start sfx_hud_out (player_get player_short) 1)
)

(script static void (f_sfx_hud_tutorial_complete (player player_to_train))
    (sound_impulse_start sfx_tutorial_complete player_to_train 1)
)

(script static void (f_display_message (short player_short, cutscene_title display_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
)

(script static void (f_tutorial_begin (player player_to_train, string_id display_title))
    (f_hud_training_forever player_to_train display_title)
    (sleep 5)
    (unit_action_test_reset player_to_train)
    (sleep 5)
)

(script static void (f_tutorial_end (player player_to_train))
    (f_sfx_hud_tutorial_complete player_to_train)
    (f_hud_training_clear player_to_train)
    (sleep 30)
)

(script static void (f_tutorial_boost (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_grenade_trigger player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_rotate_weapons (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_rotate_weapons player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_fire_weapon (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_primary_trigger player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_turn (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep 20)
    (sleep_until (unit_action_test_look_relative_all_directions player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_throttle (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep 20)
    (sleep_until (unit_action_test_move_relative_all_directions player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_tricks (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_vehicle_trick_secondary player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_hud_training (player player_num, string_id string_hud))
    (chud_show_screen_training player_num string_hud)
    (sleep 120)
    (chud_show_screen_training player_num "")
)

(script static void (f_hud_training_forever (player player_num, string_id string_hud))
    (chud_show_screen_training player_num string_hud)
)

(script static void (f_hud_training_clear (player player_num))
    (chud_show_screen_training player_num "")
)

(script static void f_hud_training_new_weapon
    (chud_set_static_hs_variable player0 0 1)
    (chud_set_static_hs_variable player1 0 1)
    (chud_set_static_hs_variable player2 0 1)
    (chud_set_static_hs_variable player3 0 1)
    (sleep 200)
    (chud_clear_hs_variable player0 0)
    (chud_clear_hs_variable player1 0)
    (chud_clear_hs_variable player2 0)
    (chud_clear_hs_variable player3 0)
)

(script static void (f_hud_training_new_weapon_player (player p))
    (chud_set_static_hs_variable p 0 1)
    (sleep 200)
    (chud_clear_hs_variable p 0)
)

(script static void (f_hud_training_new_weapon_player_clear (player p))
    (chud_clear_hs_variable p 0)
)

(script static void (f_hud_training_confirm (player player_num, string_id string_hud, string button_press))
    (if (= (player_is_in_game player_num) false)
        (sleep_forever)
    )
    (chud_show_screen_training player_num string_hud)
    (sleep 10)
    (player_action_test_reset)
    (sleep_until (if (= button_press "primary_trigger")
        (sleep_until (unit_action_test_primary_trigger player_num))
        (if (= button_press "grenade_trigger")
            (sleep_until (unit_action_test_grenade_trigger player_num))
            (if (= button_press "equipment")
                (sleep_until (unit_action_test_equipment player_num))
                (if (= button_press "melee")
                    (sleep_until (unit_action_test_melee player_num))
                    (if (= button_press "jump")
                        (sleep_until (unit_action_test_jump player_num))
                        (if (= button_press "rotate_grenades")
                            (sleep_until (unit_action_test_rotate_grenades player_num))
                            (if (= button_press "rotate_weapons")
                                (sleep_until (unit_action_test_rotate_weapons player_num))
                                (if (= button_press "context_primary")
                                    (sleep_until (unit_action_test_context_primary player_num))
                                    (if (= button_press "vision_trigger")
                                        (sleep_until (or (unit_action_test_vision_trigger player_num) (player_night_vision_on)))
                                        (if (= button_press "back")
                                            (sleep_until (unit_action_test_back player_num))
                                            (if (= button_press "vehicle_trick")
                                                (sleep_until (unit_action_test_vehicle_trick_primary player_num))
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
    ) 1 (* 30 10))
    (chud_show_screen_training player_num "")
)

(script static void (f_hud_obj_new (string_id string_hud, string_id string_start))
    (f_hud_start_menu_obj string_start)
    (chud_show_screen_objective string_hud)
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static void (f_hud_obj_repeat (string_id string_hud))
    (chud_show_screen_objective string_hud)
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static void (f_hud_start_menu_obj (string_id reference))
    (objectives_clear)
    (objectives_set_string 0 reference)
    (objectives_show_string reference)
)

(script static void (f_hud_chapter (string_id string_hud))
    (chud_cinematic_fade 0 30)
    (sleep 10)
    (chud_show_screen_chapter_title string_hud)
    (chud_fade_chapter_title_for_player player0 1 30)
    (chud_fade_chapter_title_for_player player1 1 30)
    (chud_fade_chapter_title_for_player player2 1 30)
    (chud_fade_chapter_title_for_player player3 1 30)
    (sleep 120)
    (chud_fade_chapter_title_for_player player0 0 30)
    (chud_fade_chapter_title_for_player player1 0 30)
    (chud_fade_chapter_title_for_player player2 0 30)
    (chud_fade_chapter_title_for_player player3 0 30)
    (chud_show_screen_chapter_title "")
    (sleep 10)
    (chud_cinematic_fade 1 30)
)

(script static void (f_hud_flash_object_fov (object_name hud_object_highlight))
    (sleep_until (or (objects_can_see_object player0 hud_object_highlight 25) (objects_can_see_object player1 hud_object_highlight 25) (objects_can_see_object player2 hud_object_highlight 25) (objects_can_see_object player3 hud_object_highlight 25)) 1)
    (object_create hud_object_highlight)
    (set chud_debug_highlight_object_color_red 1)
    (set chud_debug_highlight_object_color_green 1)
    (set chud_debug_highlight_object_color_blue 0)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (object_destroy hud_object_highlight)
)

(script static void (f_hud_flash_object (object_name hud_object_highlight))
    (object_create hud_object_highlight)
    (set chud_debug_highlight_object_color_red 1)
    (set chud_debug_highlight_object_color_green 1)
    (set chud_debug_highlight_object_color_blue 0)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (object_destroy hud_object_highlight)
)

(script static void (f_hud_flash_single (object_name hud_object_highlight))
    (object_hide hud_object_highlight false)
    (set chud_debug_highlight_object hud_object_highlight)
    (sleep 4)
    (object_hide hud_object_highlight true)
    (sleep 5)
)

(script static void (f_hud_flash_single_nodestroy (object_name hud_object_highlight))
    (set chud_debug_highlight_object hud_object_highlight)
    (sleep 4)
    (set chud_debug_highlight_object none)
    (sleep 5)
)

(script static void (f_blip_internal (object obj, short icon_disappear_time, short final_delay))
    (chud_track_object obj true)
    (sound_impulse_start sfx_blip none 1)
    (sleep icon_disappear_time)
    (chud_track_object obj false)
    (sleep final_delay)
)

(script static void (f_blip_flag_internal (cutscene_flag f, short icon_disappear_time, short final_delay))
    (chud_track_flag f true)
    (sound_impulse_start sfx_blip none 1)
    (sleep icon_disappear_time)
    (chud_track_flag f false)
    (sleep final_delay)
)

(script static void (f_blip_flag (cutscene_flag f, short type))
    (chud_track_flag_with_priority f type)
)

(script static void (f_blip_flag_forever (cutscene_flag f))
    (print "f_blip_flag_forever is going away. please use f_blip_flag")
    (f_blip_flag f blip_neutralize)
)

(script static void (f_unblip_flag (cutscene_flag f))
    (chud_track_flag f false)
)

(script static void (f_blip_object (object obj, short type))
    (chud_track_object_with_priority obj type)
)

(script static void (f_blip_object_offset (object obj, short type, short offset))
    (chud_track_object_with_priority obj type)
    (chud_track_object_set_vertical_offset obj offset)
)

(script static void (f_blip_object_forever (object obj))
    (print "f_blip_object_forever is going away. please use f_blip_object")
    (chud_track_object obj true)
)

(script static void (f_unblip_object (object obj))
    (chud_track_object obj false)
)

(script static void (f_blip_object_until_dead (object obj))
    (chud_track_object obj true)
    (sleep_until (<= (object_get_health obj) 0))
    (chud_track_object obj false)
)

(script static void (f_blip_ai (ai group, short blip_type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_blip_object (list_get l_blip_list s_blip_list_index) blip_type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_ai_offset (ai group, short blip_type, short offset))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_blip_object_offset (list_get l_blip_list s_blip_list_index) blip_type offset)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_ai_forever (ai group))
    (print "f_blip_ai_forever is going away. please use f_blip_ai")
    (f_blip_ai group 0)
)

(script static void (f_blip_ai_until_dead (ai char))
    (print "f_blip_ai_until_dead will be rolled into the new f_blip_ai command. consider using that instead.")
    (f_blip_ai_forever char)
    (sleep_until (<= (object_get_health (ai_get_object char)) 0))
    (f_unblip_ai char)
)

(script static void (f_unblip_ai (ai group))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_unblip_object (list_get l_blip_list s_blip_list_index))
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_title (object obj, string_id title))
    (chud_track_object_with_priority obj 6 title)
    (sleep 120)
    (chud_track_object obj false)
)

(script static void (f_blip_weapon (object gun, short dist, short dist2))
    (sleep_until (or (and (<= (objects_distance_to_object player0 gun) dist) (>= (objects_distance_to_object player0 gun) 0.1)) (and (<= (objects_distance_to_object player1 gun) dist) (>= (objects_distance_to_object player1 gun) 0.1)) (and (<= (objects_distance_to_object player2 gun) dist) (>= (objects_distance_to_object player2 gun) 0.1)) (and (<= (objects_distance_to_object player3 gun) dist) (>= (objects_distance_to_object player3 gun) 0.1))) 1)
    (print "blip on")
    (f_blip_object gun blip_ordnance)
    (sleep_until (or (not (object_get_at_rest gun)) (and (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2))) 1)
    (print "blip off")
    (f_unblip_object gun)
)

(script static void (f_hud_spartan_waypoint (ai spartan, string_id spartan_hud, short max_dist))
    (sleep_until 
        (begin
            (if (< (objects_distance_to_object (ai_get_object spartan) player0) 0.95)
                (begin
                    (chud_track_object spartan false)
                    (sleep 60)
                )
                (if (> (objects_distance_to_object (ai_get_object spartan) player0) max_dist)
                    (begin
                        (chud_track_object spartan false)
                        (sleep 60)
                    )
                    (if (< (objects_distance_to_object (ai_get_object spartan) player0) 3)
                        (begin
                            (chud_track_object_with_priority spartan 22 spartan_hud)
                            (sleep 60)
                        )
                        (if (objects_can_see_object player0 (ai_get_object spartan) 10)
                            (begin
                                (chud_track_object_with_priority spartan 22 spartan_hud)
                                (sleep 60)
                            )
                            (if true
                                (begin
                                    (chud_track_object_with_priority spartan 5 "")
                                )
                            )
                        )
                    )
                )
            )
            false
        )
        30
    )
)

(script static void (f_callout_atom (object obj, short type, short time, short postdelay))
    (chud_track_object_with_priority obj type)
    (sound_impulse_start sfx_blip none 1)
    (sleep time)
    (chud_track_object obj false)
    (sleep postdelay)
)

(script static void (f_callout_flag_atom (cutscene_flag f, short type, short time, short postdelay))
    (chud_track_flag_with_priority f type)
    (sound_impulse_start sfx_blip none 1)
    (sleep time)
    (chud_track_flag f false)
    (sleep postdelay)
)

(script static void (f_callout_object (object obj, short type))
    (f_callout_atom obj type 120 2)
)

(script static void (f_callout_object_fast (object obj, short type))
    (f_callout_atom obj type 20 5)
)

(script static void (f_callout_ai (ai actors, short type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set l_blip_list (ai_actors actors))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_callout_object (list_get l_blip_list s_blip_list_index) type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set s_blip_list_index 0)
    (set b_blip_list_locked false)
)

(script static void (f_callout_ai_fast (ai actors, short type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set l_blip_list (ai_actors actors))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_callout_object_fast (list_get l_blip_list s_blip_list_index) type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set s_blip_list_index 0)
    (set b_blip_list_locked false)
)

(script static void (f_callout_and_hold_flag (cutscene_flag f, short type))
    (chud_track_flag_with_priority f type)
    (sound_impulse_start sfx_blip none 1)
    (sleep 10)
)

(script static void (f_md_ai_play (short delay, ai character, ai_line line))
    (set b_is_dialogue_playing true)
    (if (>= (ai_living_count character) 1)
        (begin
            (set s_md_play_time (ai_play_line character line))
            (sleep s_md_play_time)
            (sleep delay)
        )
        (print "this actor does not exist to play f_md_ai_play")
    )
    (set b_is_dialogue_playing false)
)

(script static void (f_md_object_play (short delay, object obj, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (ai_play_line_on_object obj line))
    (sleep s_md_play_time)
    (sleep delay)
    (set b_is_dialogue_playing false)
)

(script static void (f_md_ai_play_cutoff (short cutoff_time, ai character, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (- (ai_play_line character line) cutoff_time))
    (sleep s_md_play_time)
    (set b_is_dialogue_playing false)
)

(script static void (f_md_object_play_cutoff (short cutoff_time, object obj, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (- (ai_play_line_on_object obj line) cutoff_time))
    (sleep s_md_play_time)
    (set b_is_dialogue_playing false)
)

(script static void f_md_abort
    (sleep s_md_play_time)
    (print "dialog script aborted!")
    (set b_is_dialogue_playing false)
    (ai_dialogue_enable true)
)

(script static void f_md_abort_no_combat_dialog
    (f_md_abort)
    (sleep 1)
    (ai_dialogue_enable false)
)

(script static void (f_md_play (short delay, sound line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (sound_impulse_language_time line))
    (sound_impulse_start line none 1)
    (sleep (sound_impulse_language_time line))
    (sleep delay)
    (set s_md_play_time 0)
    (set b_is_dialogue_playing false)
)

(script static boolean f_is_dialogue_playing
    b_is_dialogue_playing
)

(script static boolean (f_ai_has_spawned (ai actors))
    (> (ai_spawn_count actors) 0)
)

(script static boolean (f_ai_is_defeated (ai actors))
    (and (> (ai_spawn_count actors) 0) (<= (ai_living_count actors) 0))
)

(script static boolean (f_ai_is_partially_defeated (ai actors, short count))
    (and (>= (ai_spawn_count actors) count) (<= (ai_living_count actors) count))
)

(script static boolean (f_task_is_empty (ai task))
    (<= (ai_task_count task) 0)
)

(script static boolean (f_task_has_actors (ai task))
    (> (ai_task_count task) 0)
)

(script static ai (f_object_get_squad (object ai_obj))
    (ai_get_squad (object_get_ai ai_obj))
)

(script static void debug_toggle_cookie_cutters
    (if (= debug_instanced_geometry false)
        (begin
            (set debug_objects_collision_models false)
            (set debug_objects_physics_models false)
            (set debug_objects_bounding_spheres false)
            (set debug_objects_cookie_cutters true)
            (set debug_objects true)
            (set debug_instanced_geometry_collision_geometry false)
            (set debug_instanced_geometry_cookie_cutters true)
            (set debug_instanced_geometry true)
        )
        (begin
            (set debug_objects_cookie_cutters false)
            (set debug_objects false)
            (set debug_instanced_geometry_cookie_cutters false)
            (set debug_instanced_geometry false)
        )
    )
)

(script static void debug_toggle_pathfinding_collisions
    (if (= collision_debug false)
        (begin
            (set collision_debug true)
            (set collision_debug_flag_ignore_invisible_surfaces false)
        )
        (begin
            (set collision_debug false)
            (set collision_debug_flag_ignore_invisible_surfaces true)
        )
    )
)

(script static void f_branch_empty01
    (print "branch exit")
)

(script static void f_branch_empty02
    (print "branch exit")
)

(script static void f_branch_empty03
    (print "branch exit")
)

(script dormant void m52_music_01
    (sleep_until (= g_music_m52_01 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_01" none 1)
    (sleep_until (= g_music_m52_01 2))
    (sound_looping_stop "levels\solo\m52\music\m52_music_01")
)

(script dormant void m52_music_02
    (sleep_until (= g_music_m52_02 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_02" none 1)
    (sleep_until (= g_music_m52_02 2))
    (sound_looping_stop "levels\solo\m52\music\m52_music_02")
)

(script dormant void m52_music_03
    (sleep_until 
        (begin
            (sleep_until (!= g_music_m52_03 65535) 5)
            (if (= g_music_m52_03 1)
                (begin
                    (print "starting elevator music")
                    (sound_looping_start "levels\solo\m52\music\m52_music_03" none 1)
                    (set g_music_m52_03 65535)
                )
            )
            (if (= g_music_m52_03 2)
                (begin
                    (print "stopping elevator music")
                    (sound_looping_stop "levels\solo\m52\music\m52_music_03")
                    (set g_music_m52_03 65535)
                )
            )
            (= g_music_m52_03 3)
        )
        5
    )
)

(script static void m52_really_stop
    (sound_looping_stop "levels\solo\m52\music\m52_music_03")
    (set g_music_m52_03 3)
)

(script dormant void m52_music_04
    (sleep_until (= g_music_m52_04 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_04" none 1)
    (sleep_until (= g_music_m52_04 2))
    (sound_looping_stop "levels\solo\m52\music\m52_music_04")
)

(script dormant void m52_music_05
    (sleep_until (= g_music_m52_05 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_05" none 1)
    (sleep_until (= g_music_m52_05 2))
    (sound_looping_stop "levels\solo\m52\music\m52_music_05")
)

(script dormant void m52_music_06
    (sleep_until (= g_music_m52_06 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_06" none 1)
    (sleep_until (= g_music_m52_06 2))
    (sound_looping_activate_layer "levels\solo\m52\music\m52_music_06" 1)
    (sleep_until (= g_music_m52_06 3))
    (sound_looping_stop "levels\solo\m52\music\m52_music_06")
    (sound_looping_deactivate_layer "levels\solo\m52\music\m52_music_06" 1)
)

(script dormant void m52_music_07
    (sleep_until (= g_music_m52_07 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_07" none 1)
    (sleep_until (= g_music_m52_07 2))
    (sound_looping_stop "levels\solo\m52\music\m52_music_07")
)

(script dormant void m52_music_08
    (sleep_until (= g_music_m52_08 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_08" none 1)
    (sleep_until (= g_music_m52_08 2))
    (sound_looping_stop "levels\solo\m52\music\m52_music_08")
)

(script dormant void m52_music_09
    (sleep_until (= g_music_m52_09 1))
    (sound_looping_start "levels\solo\m52\music\m52_music_09" none 1)
    (sleep_until (= g_music_m52_09 2))
    (sound_looping_stop "levels\solo\m52\music\m52_music_09")
)

(script static void kill_music
    (sound_looping_stop "levels\solo\m52\music\m52_music_01")
    (sound_looping_stop "levels\solo\m52\music\m52_music_02")
    (sound_looping_stop "levels\solo\m52\music\m52_music_03")
    (sound_looping_stop "levels\solo\m52\music\m52_music_04")
    (sound_looping_stop "levels\solo\m52\music\m52_music_05")
    (sound_looping_stop "levels\solo\m52\music\m52_music_06")
    (sound_looping_stop "levels\solo\m52\music\m52_music_07")
    (sound_looping_stop "levels\solo\m52\music\m52_music_08")
    (sound_looping_stop "levels\solo\m52\music\m52_music_09")
)

(script static void m52_cin_intro
    (weather_animate_force "cine_rain" 1 0)
    (f_start_mission "052la_airlift")
)

(script dormant void m52_cin_end
    (cinematic_enter "052lb_reflection" false)
    (sleep_forever weather_lightning)
    (zone_set_trigger_volume_enable "zone_set:m52_040_oni" false)
    (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
    (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
    (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
    (sleep_forever banshee_spawn)
    (sleep_forever f_ground_fx_ambient)
    (sleep_forever f_ground_fx_ambient_2)
    (sleep_forever player0_evac_nanny)
    (sleep_forever player1_evac_nanny)
    (sleep_forever player2_evac_nanny)
    (sleep_forever player3_evac_nanny)
    (sleep_forever low_flying_volume_player0)
    (sleep_forever low_flying_volume_player1)
    (sleep_forever low_flying_volume_player2)
    (sleep_forever low_flying_volume_player3)
    (sleep_forever m52_building_fall)
    (sleep_forever level_checkpoint)
    (sleep_forever m52_covenant_cruiser_vignette)
    (sleep_forever player0_evac_reminder)
    (sleep_forever player1_evac_reminder)
    (sleep_forever player2_evac_reminder)
    (sleep_forever player3_evac_reminder)
    (sleep_forever falcon_patrol)
    (sleep_forever pelican_patrol)
    (sleep_forever phantom_patrol)
    (sleep_forever sec_obj_alpha)
    (sleep_forever sec_obj_beta)
    (sleep_forever sec_obj_gamma)
    (sleep_forever sec_obj_delta)
    (sleep_forever building_c_elev01)
    (sleep_forever building_c_elev02)
    (sleep_forever disco_fever)
    (sleep_forever aj_mode)
    (sleep_forever vehicle_reserve00)
    (sleep_forever vehicle_reserve01)
    (sleep_forever vehicle_reserve02)
    (sleep_forever vehicle_reserve03)
    (sleep_forever hud_object_bldg_oni_pad)
    (sleep_forever banshee_cleanup)
    (sleep_forever player_training00)
    (sleep_forever player_training01)
    (sleep_forever player_training02)
    (sleep_forever player_training03)
    (sleep_forever falcon_start1_nanny)
    (sleep_forever falcon_start2_nanny)
    (sleep_forever falcon_a1_nanny)
    (sleep_forever falcon_a2_nanny)
    (sleep_forever falcon_b1_nanny)
    (sleep_forever falcon_b2_nanny)
    (sleep_forever falcon_c1_nanny)
    (sleep_forever falcon_c2_nanny)
    (sleep_forever f_player0_flying)
    (sleep_forever f_player1_flying)
    (sleep_forever f_player2_flying)
    (sleep_forever f_player3_flying)
    (sleep_forever building_c_horrible_kill01)
    (wake teleport_players)
    (weather_animate_force "off" 1 0)
    (flock_stop "banshees_1")
    (flock_stop "banshees_2")
    (flock_stop "banshees_3")
    (flock_stop "falcons_1")
    (flock_stop "falcons_2")
    (flock_stop "falcons_3")
    (flock_destroy "banshees_1")
    (flock_destroy "banshees_2")
    (flock_destroy "banshees_3")
    (flock_destroy "falcons_1")
    (flock_destroy "falcons_2")
    (flock_destroy "falcons_3")
    (set g_prev_mission 10)
    (object_removal)
    (f_end_mission "052lb_reflection" "m52_end_cinematic")
    (game_won)
)

(script dormant void teleport_players
    (sleep 90)
    (f_player_teleport player0 "ins_start_player_00" false)
    (f_player_teleport player1 "ins_start_player_01" false)
    (f_player_teleport player2 "ins_start_player_02" false)
    (f_player_teleport player3 "ins_start_player_03" false)
)

(script dormant void md_000_initial
    (if (!= m_progression 0)
        (begin
            (sleep 120)
            (f_md_object_play 5 none m52_0010)
            (set g_music_m52_01 1)
            (sleep 120)
            (if (= (f_players_flying) false)
                (begin
                    (f_md_object_play 5 none m52_0020)
                    (f_md_object_play 5 none m52_0030)
                    (f_md_object_play 5 none m52_0040)
                    (f_md_object_play 5 none m52_0050)
                )
                (begin
                    (f_md_object_play 5 none m52_0060)
                )
            )
            (sleep 90)
            (set g_intro_dialog_played true)
            (branch (= (f_players_flying) true) (f_md_abort))
            (sleep 600)
            (f_md_object_play 5 none m52_0070)
            (sleep 900)
            (f_md_object_play 5 none m52_0080)
        )
    )
)

(script static void (f_falcon_flight_training (player player_num))
    (if (and (or (unit_action_test_grenade_trigger player_num) (unit_action_test_melee player_num)) (= (unit_in_vehicle_type player_num g_falcon_type) true) (f_vehicle_pilot_seat player_num))
        (begin
            (if (= player_num player0)
                (set s_player0_training_progress 1)
            )
            (if (= player_num player1)
                (set s_player1_training_progress 1)
            )
            (if (= player_num player2)
                (set s_player2_training_progress 1)
            )
            (if (= player_num player3)
                (set s_player3_training_progress 1)
            )
            (f_hud_training_clear player_num)
        )
        (if (f_vehicle_pilot_seat player_num)
            (begin
                (unit_action_test_reset player_num)
                (f_hud_training_forever player_num "ct_falcon_training_fly")
            )
            (f_hud_training_clear player_num)
        )
    )
)

(script static void (f_falcon_flight_attack (player player_num))
    (if (and (unit_action_test_primary_trigger player_num) (= (unit_in_vehicle_type player_num g_falcon_type) true) (f_vehicle_pilot_seat player_num))
        (begin
            (if (= player_num player0)
                (set s_player0_training_progress 2)
            )
            (if (= player_num player1)
                (set s_player1_training_progress 2)
            )
            (if (= player_num player2)
                (set s_player2_training_progress 2)
            )
            (if (= player_num player3)
                (set s_player3_training_progress 2)
            )
            (f_hud_training_clear player_num)
        )
        (if (f_vehicle_pilot_seat player_num)
            (begin
                (unit_action_test_reset player_num)
                (f_hud_training_forever player_num "ct_falcon_training_attack")
            )
            (f_hud_training_clear player_num)
        )
    )
)

(script static void (f_falcon_flight_hold (player player_num))
    (if (and (unit_action_test_vehicle_trick_primary player_num) (f_vehicle_pilot_seat player_num) (= (unit_in_vehicle_type player_num g_falcon_type) true))
        (begin
            (if (= player_num player0)
                (set s_player0_training_progress 3)
            )
            (if (= player_num player1)
                (set s_player1_training_progress 3)
            )
            (if (= player_num player2)
                (set s_player2_training_progress 3)
            )
            (if (= player_num player3)
                (set s_player3_training_progress 3)
            )
            (f_hud_training_clear player_num)
        )
        (if (f_vehicle_pilot_seat player_num)
            (begin
                (unit_action_test_reset player_num)
                (f_hud_training_forever player_num "ct_falcon_training_lock")
            )
            (f_hud_training_clear player_num)
        )
    )
)

(script dormant void player_training00
    (sleep_until 
        (begin
            (if (= (f_vehicle_pilot_seat player0) false)
                (f_hud_training_clear player0)
                (begin
                    (if (= s_player0_training_progress 0)
                        (begin
                            (f_falcon_flight_training player0)
                        )
                        (if (= s_player0_training_progress 1)
                            (begin
                                (sleep 30)
                                (f_falcon_flight_attack player0)
                            )
                            (if (= s_player0_training_progress 2)
                                (begin
                                    (sleep 30)
                                    (f_falcon_flight_hold player0)
                                )
                                (if (= (f_vehicle_pilot_seat player0) false)
                                    (f_hud_training_clear player0)
                                )
                            )
                        )
                    )
                )
            )
            (= s_player0_training_progress 3)
        )
        5
    )
)

(script dormant void player_training01
    (sleep_until 
        (begin
            (if (= (f_vehicle_pilot_seat player1) false)
                (f_hud_training_clear player1)
                (begin
                    (if (= s_player1_training_progress 0)
                        (begin
                            (sleep 30)
                            (f_falcon_flight_training player1)
                        )
                        (if (= s_player1_training_progress 1)
                            (begin
                                (sleep 30)
                                (f_falcon_flight_attack player1)
                            )
                            (if (= s_player1_training_progress 2)
                                (begin
                                    (sleep 30)
                                    (f_falcon_flight_hold player1)
                                )
                                (if (= (f_vehicle_pilot_seat player1) false)
                                    (f_hud_training_clear player1)
                                )
                            )
                        )
                    )
                )
            )
            (= s_player1_training_progress 3)
        )
        5
    )
)

(script dormant void player_training02
    (sleep_until 
        (begin
            (if (= (f_vehicle_pilot_seat player2) false)
                (f_hud_training_clear player2)
                (begin
                    (if (= s_player2_training_progress 0)
                        (begin
                            (sleep 30)
                            (f_falcon_flight_training player2)
                        )
                        (if (= s_player2_training_progress 1)
                            (begin
                                (sleep 30)
                                (f_falcon_flight_attack player2)
                            )
                            (if (= s_player2_training_progress 2)
                                (begin
                                    (sleep 30)
                                    (f_falcon_flight_hold player2)
                                )
                                (if (= (f_vehicle_pilot_seat player2) false)
                                    (f_hud_training_clear player2)
                                )
                            )
                        )
                    )
                )
            )
            (= s_player2_training_progress 3)
        )
        5
    )
)

(script dormant void player_training03
    (sleep_until 
        (begin
            (if (= (f_vehicle_pilot_seat player3) false)
                (f_hud_training_clear player3)
                (begin
                    (if (= s_player3_training_progress 0)
                        (begin
                            (sleep 30)
                            (f_falcon_flight_training player3)
                        )
                        (if (= s_player3_training_progress 1)
                            (begin
                                (sleep 30)
                                (f_falcon_flight_attack player3)
                            )
                            (if (= s_player3_training_progress 2)
                                (begin
                                    (sleep 30)
                                    (f_falcon_flight_hold player3)
                                )
                                (if (= (f_vehicle_pilot_seat player3) false)
                                    (f_hud_training_clear player3)
                                )
                            )
                        )
                    )
                )
            )
            (= s_player3_training_progress 3)
        )
        5
    )
)

(script dormant void hud_object_bldg_a
    (f_blip_flag "cf_pri_bldg_a_reminder" 21)
    (f_hud_obj_new "ct_objective_bldg_a" "primary_objective_1")
    (sleep_until (or (objects_can_see_flag player0 "cf_pri_bldg_a_reminder" 20) (objects_can_see_flag player1 "cf_pri_bldg_a_reminder" 20) (objects_can_see_flag player2 "cf_pri_bldg_a_reminder" 20) (objects_can_see_flag player3 "cf_pri_bldg_a_reminder" 20)) 5)
    (if (and (or (> (objects_distance_to_flag player0 "cf_pri_bldg_a_reminder") 50) (= (objects_distance_to_flag player0 "cf_pri_bldg_a_reminder") -1)) (or (> (objects_distance_to_flag player1 "cf_pri_bldg_a_reminder") 50) (= (objects_distance_to_flag player1 "cf_pri_bldg_a_reminder") -1)) (or (> (objects_distance_to_flag player2 "cf_pri_bldg_a_reminder") 50) (= (objects_distance_to_flag player2 "cf_pri_bldg_a_reminder") -1)) (or (> (objects_distance_to_flag player3 "cf_pri_bldg_a_reminder") 50) (= (objects_distance_to_flag player3 "cf_pri_bldg_a_reminder") -1)))
        (begin
            (f_hud_flash_object "sc_bldg_a_highlight")
            (f_blip_title "sc_bldg_a_box" "wp_callout_m52_hospital")
        )
    )
)

(script dormant void md_010_bldg_a
    (sleep_until (and (= g_intro_dialog_played true) (= b_is_dialogue_playing false)) 5)
    (f_md_object_play 5 none m52_0440)
    (f_md_object_play 5 none m52_0450)
    (if (= m_progression 1)
        (begin
            (f_md_object_play 5 none m52_0790)
        )
    )
    (wake hud_object_bldg_a)
    (set g_mission_unlock 1)
    (wake md_010_bldg_a_land)
)

(script dormant void md_010_bldg_a_land
    (sleep_until (and (= b_is_dialogue_playing false) (>= obj_control_bldg_a 13)) 5)
    (f_md_object_play 5 none m52_0460)
    (f_md_object_play 5 none m52_0470)
    (sleep_until (>= obj_control_bldg_a 20) 5)
    (f_md_object_play 5 none m52_0480)
    (set g_music_m52_02 1)
)

(script dormant void md_010_bldg_a_troopers
    (sleep_until (and (>= obj_control_bldg_a 50) (= b_is_dialogue_playing false)) 5)
    (f_md_ai_play 5 ai_bldga_fem02 m52_0500)
    (f_md_ai_play 5 "sq_bldg_a_actor02" m52_0510)
    (f_md_ai_play 5 ai_bldga_trooper01 m52_0520)
    (sleep_until (and (<= (ai_living_count "sq_bldg_a_07") 0) (<= (ai_living_count "sq_bldg_a_08") 0) (<= (ai_living_count "sq_bldg_a_actor01") 0) (= b_is_dialogue_playing false) (volume_test_players "tv_bldg_a_troopers")) 5)
    (if (> (ai_living_count ai_bldga_fem02) 0)
        (begin
            (f_md_ai_play 5 ai_bldga_fem02 m52_0530)
        )
        (begin
            (f_md_ai_play 5 ai_bldga_trooper01 m52_0540)
        )
    )
)

(script dormant void hud_object_bldg_a_obj
    (sleep 30)
    (sleep_until (or (objects_can_see_object player0 "sc_bldg_a_high_obj" 20) (objects_can_see_object player1 "sc_bldg_a_high_obj" 20) (objects_can_see_object player2 "sc_bldg_a_high_obj" 20) (objects_can_see_object player3 "sc_bldg_a_high_obj" 20)) 5)
    (if (and (> (objects_distance_to_object player0 "sc_bldg_a_high_obj") 5) (> (objects_distance_to_object player1 "sc_bldg_a_high_obj") 5) (> (objects_distance_to_object player2 "sc_bldg_a_high_obj") 5) (> (objects_distance_to_object player3 "sc_bldg_a_high_obj") 5))
        (f_hud_flash_object "sc_bldg_a_high_obj")
    )
)

(script dormant void md_010_bldg_a_end
    (branch (= (f_objective_complete "dm_building_a_objective" "dc_objective_a_switch") true) (f_md_abort))
    (sleep_until (and (>= obj_control_bldg_a 60) (<= (ai_living_count "sq_bldg_a_actor01") 0) (= b_is_dialogue_playing false) (volume_test_players "tv_bldg_a_troopers")) 5)
    (sleep 150)
    (if (> (ai_living_count ai_bldga_fem02) 0)
        (begin
            (f_md_ai_play 5 ai_bldga_fem02 m52_0550)
        )
        (if (> (ai_living_count ai_bldga_trooper01) 0)
            (begin
                (f_md_ai_play 5 ai_bldga_trooper01 m52_0560)
            )
            (if (and (<= (ai_living_count ai_bldga_trooper01) 0) (<= (ai_living_count ai_bldga_fem02) 0))
                (begin
                    (f_md_object_play 5 none m52_0570)
                )
            )
        )
    )
)

(script dormant void md_010_bldg_a_complete
    (sleep_until (= (f_objective_complete "dm_building_a_objective" "dc_objective_a_switch") true))
    (sleep 90)
    (f_md_object_play 5 none m52_0700)
    (branch (= (f_bsp_all_player 2) false) (f_md_abort))
    (sleep_until (> (ai_living_count "gr_bldg_a_jetpack") 0) 5)
    (sleep 15)
    (f_md_object_play 5 none m52_0710)
    (sleep_until (and (objects_can_see_object (player0) (ai_get_object "gr_bldg_a_jetpack") 15) (<= (objects_distance_to_object (player0) (ai_get_object "gr_bldg_a_jetpack")) 40)) 5 300)
    (if (> (ai_living_count "gr_bldg_a_jetpack") 0)
        (begin
            (f_md_ai_play 5 ai_bldga_fem02 m52_0720)
            (sleep 150)
        )
    )
    (sleep_until (and (objects_can_see_object (player0) (ai_get_object "gr_bldg_a_jetpack") 15) (<= (objects_distance_to_object (player0) (ai_get_object "gr_bldg_a_jetpack")) 40)) 5 300)
    (if (> (ai_living_count "gr_bldg_a_jetpack") 0)
        (begin
            (f_md_ai_play 5 ai_bldga_trooper01 m52_0730)
        )
    )
    (sleep_until (< (ai_living_count "gr_bldg_a_return") 1) 5)
    (sleep 150)
    (if (> (ai_living_count ai_bldga_fem02) 0)
        (if (not (player_has_female_voice player0))
            (begin
                (f_md_ai_play 5 ai_bldga_fem02 m52_0660)
            )
            (begin
                (f_md_ai_play 5 ai_bldga_fem02 m52_0670)
            )
        )
        (if (not (player_has_female_voice player0))
            (begin
                (f_md_ai_play 5 ai_bldga_trooper01 m52_0680)
            )
            (begin
                (f_md_ai_play 5 ai_bldga_trooper01 m52_0690)
            )
        )
    )
)

(script dormant void md_020_bldg_b
    (sleep_until (and (= g_intro_dialog_played true) (= b_is_dialogue_playing false)) 5)
    (f_md_object_play 5 none m52_0130)
    (f_md_object_play 5 none m52_0140)
    (f_md_object_play 5 none m52_0150)
    (f_md_object_play 5 none m52_0160)
    (if (and (= m_progression 3) (= (f_bsp_any_player 3) false))
        (begin
            (sleep 60)
            (f_md_object_play 5 none m52_0170)
        )
    )
    (if (= m_progression 1)
        (begin
            (f_md_object_play 5 none m52_0790)
        )
    )
    (wake hud_object_bldg_b)
    (set g_mission_unlock 2)
    (wake md_020_bldg_b_land)
)

(script dormant void hud_object_bldg_b
    (f_blip_flag "cf_pri_bldg_b_reminder" 21)
    (f_hud_obj_new "ct_objective_bldg_b" "primary_objective_2")
    (sleep_until (or (objects_can_see_flag player0 "cf_pri_bldg_b_reminder" 20) (objects_can_see_flag player1 "cf_pri_bldg_b_reminder" 20) (objects_can_see_flag player2 "cf_pri_bldg_b_reminder" 20) (objects_can_see_flag player3 "cf_pri_bldg_b_reminder" 20)))
    (if (and (or (> (objects_distance_to_flag player0 "cf_pri_bldg_b_reminder") 50) (= (objects_distance_to_flag player0 "cf_pri_bldg_b_reminder") -1)) (or (> (objects_distance_to_flag player1 "cf_pri_bldg_b_reminder") 50) (= (objects_distance_to_flag player1 "cf_pri_bldg_b_reminder") -1)) (or (> (objects_distance_to_flag player2 "cf_pri_bldg_b_reminder") 50) (= (objects_distance_to_flag player2 "cf_pri_bldg_b_reminder") -1)) (or (> (objects_distance_to_flag player3 "cf_pri_bldg_b_reminder") 50) (= (objects_distance_to_flag player3 "cf_pri_bldg_b_reminder") -1)))
        (begin
            (f_hud_flash_object "sc_bldg_b_highlight")
            (f_blip_title "sc_bldg_b_box" "wp_callout_m52_night_club")
        )
    )
)

(script dormant void md_020_bldg_b_land
    (sleep_until (volume_test_players "tv_bldg_b_interior_start") 5)
    (sleep_until (= b_is_dialogue_playing false) 5)
    (f_md_ai_play 5 ai_bldgb_trooper02 m52_0180)
    (f_md_ai_play 5 ai_bldgb_trooper04 m52_0190)
    (set g_music_m52_06 2)
    (sleep (random_range 120 240))
    (f_md_ai_play 5 ai_bldgb_trooper04 m52_0200)
)

(script dormant void hud_object_bldg_b_obj
    (sleep_until (or (objects_can_see_object player0 "sc_bldg_b_high_obj" 20) (objects_can_see_object player1 "sc_bldg_b_high_obj" 20) (objects_can_see_object player2 "sc_bldg_b_high_obj" 20) (objects_can_see_object player3 "sc_bldg_b_high_obj" 20)) 5)
    (if (and (> (objects_distance_to_object player0 "sc_bldg_b_high_obj") 5) (> (objects_distance_to_object player1 "sc_bldg_b_high_obj") 5) (> (objects_distance_to_object player2 "sc_bldg_b_high_obj") 5) (> (objects_distance_to_object player3 "sc_bldg_b_high_obj") 5))
        (f_hud_flash_object "sc_bldg_b_high_obj")
    )
)

(script dormant void md_020_bldg_b_troopers
    (branch (f_objective_complete "dm_building_b_objective" "dc_objective_b_switch") (f_md_abort))
    (sleep_until (< (ai_living_count "gr_bldg_b") 1) 5)
    (sleep_until (and (= b_is_dialogue_playing false) (= (f_bsp_any_player 3) true)) 5)
    (sleep 30)
    (if (> (ai_living_count ai_bldgb_trooper02) 0)
        (begin
            (f_md_ai_play 5 ai_bldgb_trooper02 m52_0210)
        )
        (if (> (ai_living_count ai_bldgb_trooper04) 0)
            (begin
                (f_md_ai_play 5 ai_bldgb_trooper04 m52_0220)
            )
            (if (and (<= (ai_living_count ai_bldgb_trooper02) 0) (<= (ai_living_count ai_bldgb_trooper04) 0))
                (begin
                    (f_md_object_play 5 none m52_0230)
                )
            )
        )
    )
    (if (= (f_objective_complete "dm_building_b_objective" "dc_objective_b_switch") false)
        (begin
            (sleep_until (and (= b_is_dialogue_playing false) (= (f_bsp_any_player 3) true)) 5)
            (if (> (ai_living_count ai_bldgb_trooper02) 0)
                (begin
                    (f_md_ai_play 5 ai_bldgb_trooper02 m52_0240)
                )
                (if (> (ai_living_count ai_bldgb_trooper04) 0)
                    (begin
                        (f_md_ai_play 5 ai_bldgb_trooper04 m52_0250)
                    )
                )
            )
            (sleep 300)
            (f_md_ai_play 5 ai_bldgb_trooper02 m52_0260)
            (sleep 300)
            (f_md_ai_play 5 ai_bldgb_trooper04 m52_0270)
        )
    )
    (sleep 150)
    (if (= (f_objective_complete "dm_building_b_objective" "dc_objective_b_switch") false)
        (begin
            (if (> (ai_living_count ai_bldgb_trooper02) 0)
                (if (not (player_has_female_voice player0))
                    (begin
                        (f_md_ai_play 5 ai_bldgb_trooper02 m52_0280)
                    )
                    (begin
                        (f_md_ai_play 5 ai_bldgb_trooper02 m52_0290)
                    )
                )
                (if (> (ai_living_count ai_bldgb_trooper04) 0)
                    (if (not (player_has_female_voice player0))
                        (begin
                            (f_md_ai_play 5 ai_bldgb_trooper04 m52_0300)
                        )
                        (begin
                            (f_md_ai_play 5 ai_bldgb_trooper04 m52_0310)
                        )
                    )
                    (if (and (<= (ai_living_count ai_bldgb_trooper02) 0) (<= (ai_living_count ai_bldgb_trooper04) 0))
                        (begin
                            (f_md_object_play 5 none m52_0330)
                        )
                    )
                )
            )
        )
    )
)

(script dormant void md_020_bldg_b_end
    (sleep_until (and (<= (object_get_health "dm_building_b_objective") 0) (= b_is_dialogue_playing false)) 5)
    (sleep 90)
    (f_md_object_play 5 none m52_0370)
    (sleep 150)
    (if (> (ai_living_count ai_bldgb_trooper02) 0)
        (begin
            (f_md_ai_play 5 ai_bldgb_trooper02 m52_0420)
        )
        (if (> (ai_living_count ai_bldgb_trooper02) 0)
            (begin
                (f_md_ai_play 5 ai_bldgb_trooper04 m52_0430)
            )
        )
    )
)

(script dormant void hud_object_bldg_c
    (f_blip_flag "cf_pri_bldg_c_reminder" 21)
    (f_hud_obj_new "ct_objective_bldg_c" "primary_objective_3")
    (sleep_until (or (objects_can_see_flag player0 "cf_pri_bldg_c_reminder" 20) (objects_can_see_flag player1 "cf_pri_bldg_c_reminder" 20) (objects_can_see_flag player2 "cf_pri_bldg_c_reminder" 20) (objects_can_see_flag player3 "cf_pri_bldg_c_reminder" 20)) 5)
    (if (and (or (> (objects_distance_to_flag player0 "cf_pri_bldg_c_reminder") 50) (= (objects_distance_to_flag player0 "cf_pri_bldg_c_reminder") -1)) (or (> (objects_distance_to_flag player1 "cf_pri_bldg_c_reminder") 50) (= (objects_distance_to_flag player1 "cf_pri_bldg_c_reminder") -1)) (or (> (objects_distance_to_flag player2 "cf_pri_bldg_c_reminder") 50) (= (objects_distance_to_flag player2 "cf_pri_bldg_c_reminder") -1)) (or (> (objects_distance_to_flag player3 "cf_pri_bldg_c_reminder") 50) (= (objects_distance_to_flag player3 "cf_pri_bldg_c_reminder") -1)))
        (begin
            (f_hud_flash_object "sc_bldg_c_highlight")
            (f_blip_title "sc_bldg_c_box" "wp_callout_m52_sinoviet")
        )
    )
)

(script dormant void md_030_bldg_c
    (sleep_until (= g_intro_dialog_played true) 5)
    (f_md_object_play 5 none m52_0740)
    (f_md_object_play 5 none m52_0750)
    (f_md_object_play 5 none m52_0760)
    (sleep 60)
    (f_md_object_play 5 none m52_0770)
    (if (= m_progression 3)
        (begin
            (f_md_object_play 5 none m52_0800)
        )
        (begin
            (f_md_object_play 5 none m52_0780)
        )
    )
    (if (= m_progression 1)
        (begin
            (f_md_object_play 5 none m52_0790)
        )
    )
    (sleep 60)
    (wake hud_object_bldg_c)
    (set g_mission_unlock 3)
    (wake md_030_bldg_c_near)
    (wake md_030_bldg_c_land)
    (wake md_030_bldg_c_interior)
    (wake md_030_bldg_c_lost)
)

(script dormant void md_030_bldg_c_near
    (if (or (not (volume_test_players "tv_near_bldg_c")) (not (volume_test_players "tv_loc_building_c")))
        (begin
            (sleep_until (volume_test_players "tv_near_bldg_c") 5)
            (begin
                (f_md_object_play 5 none m52_0810)
            )
        )
    )
)

(script dormant void md_030_bldg_c_land
    (sleep_until (and (= b_is_dialogue_playing false) (>= obj_control_bldg_c 30)) 5)
    (if (= g_bldg_c_elev_active false)
        (begin
            (f_md_object_play 5 none m52_0820)
        )
    )
    (sleep_until (or (>= (device_get_position "dc_bldg_c_switch02a") 1) (>= (device_get_position "dc_bldg_c_switch01a") 1) (>= obj_control_bldg_c 60)) 30 900)
    (if (or (>= (device_get_position "dc_bldg_c_switch02a") 0) (>= (device_get_position "dc_bldg_c_switch01a") 0) (>= obj_control_bldg_c 60))
        (begin
            (f_md_object_play 5 none m52_0830)
        )
    )
)

(script dormant void hud_object_bldg_c_obj
    (f_hud_flash_object "sc_bldg_c_high_obj")
)

(script dormant void md_030_bldg_c_interior
    (sleep_until (f_bsp_and_volume_check 4 "tv_bldg_c_int_start") 1)
    (branch (= (f_objective_complete "dm_building_c_objective" "dc_objective_c_switch") true) (f_md_abort))
    (sleep_until (and (= b_is_dialogue_playing false) (volume_test_players "tv_bldg_c_int_end")) 5)
    (if (= (f_objective_complete "dm_building_c_objective" "dc_objective_c_switch") false)
        (begin
            (f_md_object_play 5 none m52_0850)
        )
    )
)

(script dormant void md_030_bldg_c_lost
    (sleep_until (f_bsp_and_volume_check 4 "tv_bldg_c_int_start") 1)
    (branch (= (f_objective_complete "dm_building_c_objective" "dc_objective_c_switch") true) (f_md_abort))
    (sleep_until (and (= b_is_dialogue_playing false) (volume_test_players "tv_bldg_c_int_lost")) 5)
    (f_md_object_play 5 none m52_0840)
)

(script dormant void md_030_bldg_c_end
    (branch (= (f_bsp_all_player 4) false) (f_md_abort))
    (f_md_object_play 5 none m52_0890)
)

(script dormant void md_030_bldg_c_exit
    (sleep_until (or (volume_test_players "tv_bldg_c_elevator") (volume_test_players "tv_bldg_c_elevator_all") (= (f_bsp_any_player 4) false)) 5)
    (sleep 90)
    (if (or (volume_test_players "tv_bldg_c_elevator") (volume_test_players "tv_bldg_c_elevator_all"))
        (begin
            (sleep_until (= b_is_dialogue_playing false) 5)
            (f_md_object_play 5 none m52_0900)
        )
    )
)

(script dormant void hud_object_bldg_oni
    (sleep_until (= (f_players_flying) true) 5)
    (sleep_until (script_finished "title_final") 5 300)
    (f_blip_flag "cf_bldg_oni" 21)
    (sleep 30)
    (f_hud_obj_new "ct_objective_oni" "primary_objective_4")
    (sleep_until (or (objects_can_see_flag player0 "cf_bldg_oni" 20) (objects_can_see_flag player1 "cf_bldg_oni" 20) (objects_can_see_flag player2 "cf_bldg_oni" 20) (objects_can_see_flag player3 "cf_bldg_oni" 20)) 5)
    (if (and (or (> (objects_distance_to_flag player0 "cf_bldg_oni") 50) (= (objects_distance_to_flag player0 "cf_bldg_oni") -1)) (or (> (objects_distance_to_flag player1 "cf_bldg_oni") 50) (= (objects_distance_to_flag player1 "cf_bldg_oni") -1)) (or (> (objects_distance_to_flag player2 "cf_bldg_oni") 50) (= (objects_distance_to_flag player2 "cf_bldg_oni") -1)) (or (> (objects_distance_to_flag player3 "cf_bldg_oni") 50) (= (objects_distance_to_flag player3 "cf_bldg_oni") -1)))
        (begin
            (f_hud_flash_object "sc_bldg_oni_highlight")
            (f_blip_title "sc_bldg_oni_box" "wp_callout_m52_oni")
        )
    )
)

(script dormant void md_040_bldg_oni
    (branch (b_oni_end) (f_md_abort))
    (sleep_until (= b_is_dialogue_playing false) 5)
    (f_md_object_play 5 none m52_0910)
    (f_md_object_play 5 none m52_0920)
    (f_md_object_play 5 none m52_0930)
    (f_md_object_play 5 none m52_0940)
    (f_md_object_play 5 none m52_0950)
    (f_md_object_play 5 none m52_0960)
    (f_md_object_play 5 none m52_0970)
    (f_hud_obj_new "ct_objective_oni_aa" "primary_objective_5")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (sleep_until (volume_test_players "tv_oni_start") 5)
    (sleep_until (= b_is_dialogue_playing false) 5)
    (f_md_object_play 5 none m52_0980)
    (f_md_object_play 5 none m52_0990)
    (sleep 1200)
    (sleep_until (= b_is_dialogue_playing false) 5)
    (f_md_object_play 5 none m52_1000)
    (f_md_object_play 5 none m52_1010)
    (sleep 1200)
    (sleep_until (= b_is_dialogue_playing false) 5)
    (f_md_object_play 5 none m52_1020)
    (f_md_object_play 5 none m52_1030)
)

(script static void md_040_oni_pelican_progress
    (if (= pelican_status 1)
        (begin
            (f_md_object_play 5 none m52_1100)
        )
    )
    (if (= pelican_status 2)
        (begin
            (f_md_object_play 5 none m52_1110)
        )
    )
)

(script dormant void md_040_oni_pelican01
    (sleep_until (and (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_01/gunner")) 0) (<= (ai_living_count "sq_oni_s_01") 0)) (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_02/gunner")) 0) (<= (ai_living_count "sq_oni_s_02") 0)) (= b_is_dialogue_playing false)))
    (sleep_until (= b_is_dialogue_playing false) 5)
    (sleep 60)
    (f_md_object_play 5 none m52_1120)
    (f_md_object_play 5 none m52_1130)
    (md_040_oni_pelican_progress)
)

(script dormant void md_040_oni_pelican02
    (sleep_until (and (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_04/gunner")) 0) (<= (ai_living_count "sq_oni_s_04") 0)) (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_05/gunner")) 0) (<= (ai_living_count "sq_oni_s_05") 0)) (= b_is_dialogue_playing false)))
    (sleep_until (= b_is_dialogue_playing false) 5)
    (sleep 60)
    (f_md_object_play 5 none m52_1140)
    (f_md_object_play 5 none m52_1150)
    (md_040_oni_pelican_progress)
)

(script dormant void md_040_oni_pelican03
    (sleep_until (and (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_03/gunner")) 0) (<= (ai_living_count "sq_oni_s_03") 0)) (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_06/gunner")) 0) (<= (ai_living_count "sq_oni_s_06") 0)) (= b_is_dialogue_playing false)))
    (sleep_until (= b_is_dialogue_playing false) 5)
    (sleep 60)
    (f_md_object_play 5 none m52_1160)
    (f_md_object_play 5 none m52_1170)
    (md_040_oni_pelican_progress)
)

(script dormant void hud_object_bldg_oni_pad
    (sleep_until (= (f_players_flying) true) 5)
    (f_blip_flag "cf_bldg_oni_end" 21)
    (f_hud_obj_new "ct_objective_oni_end" "primary_objective_6")
    (sleep_until (or (objects_can_see_flag player0 "cf_bldg_oni_end" 20) (objects_can_see_flag player1 "cf_bldg_oni_end" 20) (objects_can_see_flag player2 "cf_bldg_oni_end" 20) (objects_can_see_flag player3 "cf_bldg_oni_end" 20)) 5)
    (if (and (or (> (objects_distance_to_flag player0 "cf_bldg_oni_end") 50) (= (objects_distance_to_flag player0 "cf_bldg_oni_end") -1)) (or (> (objects_distance_to_flag player1 "cf_bldg_oni_end") 50) (= (objects_distance_to_flag player1 "cf_bldg_oni_end") -1)) (or (> (objects_distance_to_flag player2 "cf_bldg_oni_end") 50) (= (objects_distance_to_flag player2 "cf_bldg_oni_end") -1)) (or (> (objects_distance_to_flag player3 "cf_bldg_oni_end") 50) (= (objects_distance_to_flag player3 "cf_bldg_oni_end") -1)))
        (begin
            (f_hud_flash_object "sc_oni_obj_high")
            (f_blip_title "sc_bldg_oni_pad_box" "wp_callout_m52_oni_pad")
        )
    )
)

(script dormant void md_040_oni_end
    (sleep 60)
    (sleep_until (and (script_finished "md_040_oni_pelican01") (script_finished "md_040_oni_pelican02") (script_finished "md_040_oni_pelican03")) 5)
    (sleep_until (= b_is_dialogue_playing false) 5)
    (sleep 120)
    (f_md_object_play 5 none m52_1430)
    (wake hud_object_bldg_oni_pad)
)

(script dormant void md_040_oni_aa01
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_01/gunner")) 0) (<= (ai_living_count "sq_oni_s_01") 0)) 5)
    (if (= (b_oni_end) false)
        (aa_counter)
    )
)

(script dormant void md_040_oni_aa02
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_02/gunner")) 0) (<= (ai_living_count "sq_oni_s_02") 0)) 5)
    (if (= (b_oni_end) false)
        (aa_counter)
    )
)

(script dormant void md_040_oni_aa03
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_03/gunner")) 0) (<= (ai_living_count "sq_oni_s_03") 0)) 5)
    (if (= (b_oni_end) false)
        (aa_counter)
    )
)

(script dormant void md_040_oni_aa04
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_04/gunner")) 0) (<= (ai_living_count "sq_oni_s_04") 0)) 5)
    (if (= (b_oni_end) false)
        (aa_counter)
    )
)

(script dormant void md_040_oni_aa05
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_05/gunner")) 0) (<= (ai_living_count "sq_oni_s_05") 0)) 5)
    (if (= (b_oni_end) false)
        (aa_counter)
    )
)

(script dormant void md_040_oni_aa06
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_starting_location "sq_oni_s_06/gunner")) 0) (<= (ai_living_count "sq_oni_s_06") 0)) 5)
    (if (= (b_oni_end) false)
        (aa_counter)
    )
)

(script static void aa_counter
    (set g_music_m52_08 1)
    (if (and (= b_is_dialogue_playing false) (= (ai_living_count "gr_oni_01_turrets") 5))
        (begin
            (sleep 15)
            (f_md_object_play 5 none m52_1040)
        )
        (if (and (= b_is_dialogue_playing false) (= (ai_living_count "gr_oni_01_turrets") 4))
            (begin
                (sleep 15)
                (f_md_object_play 5 none m52_1050)
            )
            (if (and (= b_is_dialogue_playing false) (= (ai_living_count "gr_oni_01_turrets") 3))
                (begin
                    (sleep 15)
                    (f_md_object_play 5 none m52_1060)
                )
                (if (and (= b_is_dialogue_playing false) (= (ai_living_count "gr_oni_01_turrets") 2))
                    (begin
                        (sleep 15)
                        (f_md_object_play 5 none m52_1070)
                    )
                    (if (and (= b_is_dialogue_playing false) (= (ai_living_count "gr_oni_01_turrets") 1))
                        (begin
                            (sleep 15)
                            (f_md_object_play 5 none m52_1080)
                        )
                        (if (= (ai_living_count "gr_oni_01_turrets") 0)
                            (begin
                                (sleep_until (and (script_finished "md_040_oni_pelican01") (script_finished "md_040_oni_pelican02") (script_finished "md_040_oni_pelican03") (= b_is_dialogue_playing false)) 5)
                                (sleep 60)
                                (f_md_object_play 5 none m52_1090)
                            )
                        )
                    )
                )
            )
        )
    )
)

(script static void coop_objective_start_check
    (if (g_3coop_mode)
        (if (= m_coop_1st_dialog true)
            (begin
                (set m_coop_1st_dialog false)
                (set m_coop_1st_dialog_done false)
            )
            (begin
                (sleep_until (= m_coop_1st_dialog_done true) 5)
                (sleep (* 30 (random_range 5 7)))
            )
        )
    )
)

(script dormant void md_050_sec_alpha1
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1440)
    (f_md_object_play 5 none m52_1450)
    (f_blip_flag "cf_sec_alpha_1" 1)
    (f_hud_obj_new "ct_objective_alpha_1" "primary_objective_7")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_alpha1
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1460)
)

(script static void md_050_sec_fail_alpha1
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1470)
)

(script dormant void md_050_sec_alpha2
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1480)
    (f_md_object_play 5 none m52_1490)
    (f_blip_flag "cf_sec_alpha_2" 1)
    (f_hud_obj_new "ct_objective_alpha_2" "primary_objective_8")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_alpha2
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1500)
)

(script static void md_050_sec_fail_alpha2
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1510)
)

(script dormant void md_050_sec_alpha3
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1520)
    (f_md_object_play 5 none m52_1530)
    (f_md_object_play 5 none m52_1540)
    (f_md_object_play 5 none m52_1550)
    (f_blip_flag "cf_sec_alpha_3" 1)
    (f_hud_obj_new "ct_objective_alpha_3" "primary_objective_9")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_alpha3
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1560)
)

(script static void md_050_sec_fail_alpha3
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1570)
)

(script dormant void md_050_sec_beta1
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1580)
    (f_md_object_play 5 none m52_1590)
    (f_blip_flag "cf_sec_beta_1" 1)
    (f_hud_obj_new "ct_objective_beta_1" "primary_objective_10")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_beta1
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1600)
)

(script static void md_050_sec_fail_beta1
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1610)
)

(script dormant void md_050_sec_beta2
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1620)
    (f_md_object_play 5 none m52_1630)
    (f_md_object_play 5 none m52_1640)
    (f_md_object_play 5 none m52_1650)
    (f_blip_ai "sq_sec_beta_p02/pilot" 1)
    (f_hud_obj_new "ct_objective_beta_2" "primary_objective_11")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_beta2
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1660)
)

(script static void md_050_sec_fail_beta2
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1670)
)

(script dormant void md_050_sec_beta3
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1680)
    (f_md_object_play 5 none m52_1690)
    (f_blip_flag "cf_sec_beta_3" 1)
    (f_hud_obj_new "ct_objective_beta_3" "primary_objective_12")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_beta3
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1700)
)

(script static void md_050_sec_fail_beta3
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1710)
)

(script dormant void md_050_sec_delta1
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (if (or (> (ai_living_count "gr_delta_cov") 0) (> (object_get_health "delta_comm_01") 0))
        (begin
            (f_md_object_play 5 none m52_1720)
            (f_blip_flag "cf_sec_delta_1" 0)
            (f_hud_obj_new "ct_objective_delta_1" "primary_objective_16")
            (if (= g_music_m52_05 1)
                (set g_music_m52_05 2)
            )
            (if (= g_music_m52_07 1)
                (set g_music_m52_07 2)
            )
        )
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_delta1
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1730)
    (f_unblip_flag "cf_sec_delta_1")
)

(script dormant void md_050_sec_delta2
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1740)
    (f_hud_obj_new "ct_objective_delta_2" "primary_objective_17")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (f_blip_flag "cf_sec_delta_2" 0)
    (sleep_until (<= (ai_living_count "gr_delta_cov") 3) 5)
    (f_blip_ai "sq_sec_delta_c02a" 15)
    (f_blip_ai "sq_sec_delta_c02b" 15)
    (f_blip_ai "sq_sec_delta_c02c" 15)
    (f_blip_ai "sq_sec_delta_c02d" 15)
    (f_blip_ai "sq_sec_delta_c02e" 15)
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_delta2
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1750)
)

(script dormant void md_050_sec_delta3
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (f_md_object_play 5 none m52_1760)
    (f_blip_flag "cf_sec_delta_3" 0)
    (f_hud_obj_new "ct_objective_delta_3" "primary_objective_18")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
)

(script static void md_050_sec_success_delta3
    (sleep_until (= b_is_dialogue_playing false))
    (f_md_object_play 5 none m52_1770)
)

(script dormant void md_050_sec_gamma1
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1780)
        (f_md_object_play 5 none m52_1780)
    )
    (f_md_object_play 5 none m52_1790)
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1800)
        (f_md_object_play 5 none m52_1800)
    )
    (f_blip_flag "cf_sec_gamma_1a" 1)
    (f_hud_obj_new "ct_objective_gamma_1" "primary_objective_13")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
    (set g_music_m52_09 1)
)

(script static void md_050_sec_success_gamma1
    (sleep_until (= b_is_dialogue_playing false))
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1810)
        (f_md_object_play 5 none m52_1810)
    )
    (set g_music_m52_09 2)
)

(script dormant void md_050_sec_gamma2
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1780)
        (f_md_object_play 5 none m52_1780)
    )
    (f_md_object_play 5 none m52_1840)
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1850)
        (f_md_object_play 5 none m52_1850)
    )
    (f_md_object_play 5 none m52_1860)
    (f_blip_flag "cf_sec_gamma_2a" 1)
    (f_hud_obj_new "ct_objective_gamma_2" "primary_objective_14")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
    (set g_music_m52_09 1)
)

(script static void md_050_sec_success_gamma2
    (sleep_until (= b_is_dialogue_playing false))
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1810)
        (f_md_object_play 5 none m52_1810)
    )
    (set g_music_m52_09 2)
)

(script dormant void md_050_sec_gamma3
    (coop_objective_start_check)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1780)
        (f_md_object_play 5 none m52_1780)
    )
    (f_md_object_play 5 none m52_1900)
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1910)
        (f_md_object_play 5 none m52_1910)
    )
    (f_blip_ai "sq_sec_gamma_m03a/pilot" 1)
    (f_hud_obj_new "ct_objective_gamma_3" "primary_objective_15")
    (if (= g_music_m52_05 1)
        (set g_music_m52_05 2)
    )
    (if (= g_music_m52_07 1)
        (set g_music_m52_07 2)
    )
    (if (g_3coop_mode)
        (set m_coop_1st_dialog_done true)
    )
    (set g_music_m52_09 1)
)

(script static void md_050_sec_success_gamma3
    (sleep_until (= b_is_dialogue_playing false))
    (if (> (ai_living_count ai_buck) 0)
        (f_md_ai_play 5 ai_buck m52_1810)
        (f_md_object_play 5 none m52_1810)
    )
    (set g_music_m52_09 2)
)

(script dormant void md_001_falcon_evac
    (sleep_until (= b_falcon_evac_dialog true) 1)
    (set b_falcon_evac_dialog false)
    (sleep_until (and (= g_main_dialog_playing false) (= b_is_dialogue_playing false)))
    (begin_random_count
        1
        (begin
            (f_md_object_play 5 none m52_1970)
        )
        (begin
            (f_md_object_play 5 none m52_1980)
        )
        (begin
            (f_md_object_play 5 none m52_1950)
        )
        (begin
            (f_md_object_play 5 none m52_1960)
        )
    )
)

(script static boolean (branch_m52 (ai my_actor))
    (or (> (object_get_recent_shield_damage (ai_get_object my_actor)) 0) (> (object_get_recent_body_damage (ai_get_object my_actor)) 0) (<= (object_get_health (ai_get_object my_actor)) 0) (>= (ai_combat_status my_actor) 3))
)

(script static void m52_a_marine01_vignette_kill
    (set b_marine01_vignette_end true)
)

(script static void m52_a_marine02_vignette_kill
    (set b_marine02_vignette_end true)
)

(script static void m52_a_marine03_vignette_kill
    (set b_marine03_vignette_end true)
)

(script static void m52_a_vignette01
    (ai_place "sq_bldg_a_trooper_01")
    (ai_place "sq_bldg_a_actor01")
    (ai_disregard (ai_actors "sq_bldg_a_trooper_01") true)
    (ai_disregard (ai_actors "sq_bldg_a_actor01") true)
    (sleep 1)
    (unit_set_stance (ai_get_unit "sq_bldg_a_trooper_01/01") "m52_vig_marine01")
    (set bldg_a_vig01 (performance_new "thsp_marine01" false))
    (cast_squad_in_performance bldg_a_vig01 "sq_bldg_a_actor01")
    (cast_squad_in_performance bldg_a_vig01 "sq_bldg_a_trooper_01")
    (performance_begin bldg_a_vig01)
    (wake m52_a_vignette_end01)
)

(script static void m52_a_vignette02
    (ai_place "sq_bldg_a_trooper_02")
    (ai_place "sq_bldg_a_actor02")
    (set ai_bldga_trooper01 "sq_bldg_a_trooper_02")
    (ai_disregard (ai_actors "sq_bldg_a_trooper_02") true)
    (ai_disregard (ai_actors "sq_bldg_a_actor02") true)
    (sleep 1)
    (unit_set_stance (ai_get_unit "sq_bldg_a_trooper_02/02") "m52_vig_marine02")
    (set bldg_a_vig02 (performance_new "thsp_marine02" false))
    (cast_squad_in_performance bldg_a_vig02 "sq_bldg_a_actor02")
    (cast_squad_in_performance bldg_a_vig02 "sq_bldg_a_trooper_02")
    (performance_begin bldg_a_vig02)
    (wake m52_a_vignette_end02)
)

(script static void m52_a_vignette03
    (ai_place "sq_bldg_a_trooper_03")
    (ai_place "sq_bldg_a_actor03")
    (ai_disregard (ai_actors "sq_bldg_a_trooper_03") true)
    (ai_disregard (ai_actors "sq_bldg_a_actor03") true)
    (sleep 1)
    (unit_set_stance (ai_get_unit "sq_bldg_a_trooper_03/03") "m52_vig_marine01")
    (set bldg_a_vig03 (performance_new "thsp_marine03" false))
    (cast_squad_in_performance bldg_a_vig03 "sq_bldg_a_actor03")
    (cast_squad_in_performance bldg_a_vig03 "sq_bldg_a_trooper_03")
    (performance_begin bldg_a_vig03)
    (wake m52_a_vignette_end03)
)

(script dormant void m52_a_vignette_end01
    (sleep_until b_marine01_vignette_end 1)
    (set bldg_a_vig01_exit (performance_new "thsp_marine01_exit" false))
    (cast_squad_in_performance bldg_a_vig01_exit "sq_bldg_a_trooper_01")
    (performance_begin bldg_a_vig01_exit)
)

(script dormant void m52_a_vignette_end02
    (sleep_until b_marine02_vignette_end 1)
    (set bldg_a_vig02_exit (performance_new "thsp_marine02_exit" false))
    (cast_squad_in_performance bldg_a_vig02_exit "sq_bldg_a_trooper_02")
    (performance_begin bldg_a_vig02_exit)
)

(script dormant void m52_a_vignette_end03
    (sleep_until b_marine03_vignette_end 1)
    (set bldg_a_vig03_exit (performance_new "thsp_marine03_exit" false))
    (cast_squad_in_performance bldg_a_vig03_exit "sq_bldg_a_trooper_03")
    (performance_begin bldg_a_vig03_exit)
)

(script static void m52_a_vignette_finish01
    (ai_disregard (ai_get_object "sq_bldg_a_trooper_01") false)
    (ai_set_objective "sq_bldg_a_trooper_01" "obj_bldg_a")
)

(script static void m52_a_vignette_finish02
    (ai_disregard (ai_get_object "sq_bldg_a_trooper_02") false)
    (ai_set_objective "sq_bldg_a_trooper_02" "obj_bldg_a")
)

(script static void m52_a_vignette_finish03
    (ai_disregard (ai_get_object "sq_bldg_a_trooper_03") false)
    (ai_set_objective "sq_bldg_a_trooper_03" "obj_bldg_a")
)

(script dormant void m52_a_vignette_cancel
    (sleep_until (or (= b_marine01_vignette_end true) (= b_marine02_vignette_end true) (= b_marine03_vignette_end true)) 5)
    (thespian_performance_kill_by_name "thsp_marine01")
    (sleep 1)
    (thespian_performance_kill_by_name "thsp_marine02")
    (sleep 1)
    (thespian_performance_kill_by_name "thsp_marine03")
    (sleep 1)
    (ai_set_objective "sq_bldg_a_actor01" "obj_bldg_a")
    (ai_set_objective "sq_bldg_a_actor02" "obj_bldg_a")
    (ai_set_objective "sq_bldg_a_actor03" "obj_bldg_a")
)

(script dormant void m52_a_vignette04
    (ai_place "sq_bldg_a_trooper_04")
    (ai_disregard (ai_actors "sq_bldg_a_trooper_04") true)
    (set ai_bldga_fem02 "sq_bldg_a_trooper_04")
    (sleep 1)
    (thespian_performance_setup_and_begin "thsp_marine04" "" 0)
    (sleep_until (and (< (ai_living_count "sq_bldg_a_actor01") 1) (< (ai_living_count "sq_bldg_a_actor02") 1) (< (ai_living_count "sq_bldg_a_actor03") 1)) 5)
    (thespian_performance_kill_by_name "thsp_marine04")
    (ai_disregard (ai_actors "sq_bldg_a_trooper_04") false)
    (ai_set_objective "sq_bldg_a_trooper_04" "obj_bldg_a")
)

(script command_script void cs_crazy_marine
    (wake crazy_marine_dialog)
    (unit_set_current_vitality (ai_get_unit "sq_bldg_c_scared_marine/actor") 10 10)
    (ai_vitality_pinned "sq_bldg_c_scared_marine/actor")
    (begin_random_count
        1
        (begin
            (cs_custom_animation_loop "objects\characters\marine\marine" "m52:gun_crazy" true)
            (sleep_forever)
        )
        (begin
            (cs_custom_animation_loop "objects\characters\marine\marine" "m52:suicidal" true)
            (sleep_forever)
        )
    )
)

(script dormant void crazy_marine_dialog
    (branch (< (ai_living_count "sq_bldg_c_scared_marine") 1) (f_md_abort))
    (sleep_until (volume_test_players "tv_scaredy_marine") 5)
    (f_md_ai_play 5 ai_crazy m50_1570)
    (f_md_ai_play 5 ai_crazy m50_1580)
    (f_md_ai_play 5 ai_crazy m50_1590)
    (f_md_ai_play 5 ai_crazy m50_1600)
    (f_md_ai_play 5 ai_crazy m50_1610)
    (f_md_ai_play 5 ai_crazy m50_1620)
    (f_md_ai_play 5 ai_crazy m50_1630)
    (sleep_until 
        (begin
            (f_md_ai_play 5 ai_crazy m50_1640)
            (= g_prev_mission 3)
        )
        60
    )
)

(script dormant void m52_bldg_a_dead_marines
    (scenery_animation_start "sc_bldg_a_marine01" "objects\characters\marine\marine" "deadbody_01")
    (scenery_animation_start "sc_bldg_a_marine02" "objects\characters\marine\marine" "deadbody_03")
    (scenery_animation_start "sc_bldg_a_marine03" "objects\characters\marine\marine" "deadbody_05")
)

(script dormant void m52_bldg_c_dead_marines
    (scenery_animation_start "sc_bldg_c_marine01" "objects\characters\marine\marine" "deadbody_01")
    (scenery_animation_start "sc_bldg_c_marine02" "objects\characters\marine\marine" "deadbody_06")
)

(script dormant void m52_covenant_cruiser_vignette
    (sleep_until (and (f_any_hub_check) (= m_progression 2) (f_players_flying)) 5)
    (wake m52_vig_cruiser01_progress)
    (object_create "vig_cruiser01")
    (device_set_position_track "vig_cruiser01" "m52_initial_start" 0)
    (device_animate_position "vig_cruiser01" 0 -1 0 0 false)
    (device_animate_position "vig_cruiser01" 0.81 30 5 5 false)
    (sleep_until (>= (device_get_position "vig_cruiser01") 0.81) 5)
    (interpolator_start "glassing_glow_01")
    (sleep_until (and (f_any_hub_check) (= m_progression 1) (f_players_flying)) 5)
    (object_create "vig_cruiser02")
    (device_set_position_track "vig_cruiser02" "m52_mid" 0)
    (wake m52_vig_cruiser02_progress)
    (device_animate_position "vig_cruiser02" 0.81 30 5 5 true)
    (sleep_until (>= (device_get_position "vig_cruiser02") 0.81) 5)
    (interpolator_start "glassing_glow_02")
    (sleep_until (and (f_any_hub_check) (= m_progression 0) (f_players_flying)) 5)
    (device_animate_position "vig_cruiser01" 1 30 0 0 true)
    (device_animate_position "vig_cruiser02" 1 30 0 0 true)
    (cam_shake 5 0.05 7 10)
)

(script dormant void m52_vig_cruiser01_progress
    (sleep_until (>= (device_get_position "vig_cruiser01") 0.25) 1)
    (cam_shake 3 0.2 7 4)
)

(script dormant void m52_vig_cruiser02_progress
    (sleep_until (>= (device_get_position "vig_cruiser02") 0.25) 1)
    (cam_shake 3 0.2 7 4)
)

(script static void (cam_shake_player (player actor, real attack, real intensity, short duration, real decay))
    (player_effect_set_max_rotation_for_player actor 3 3 3)
    (player_effect_set_max_rumble_for_player actor 1 1)
    (player_effect_start_for_player actor intensity attack)
    (sleep (* duration 30))
    (player_effect_stop_for_player actor decay)
)

(script static void (cam_shake (real attack, real intensity, short duration, real decay))
    (player_effect_set_max_rotation 2 2 2)
    (player_effect_set_max_rumble 1 1)
    (player_effect_start intensity attack)
    (sleep (* duration 30))
    (player_effect_stop decay)
)

(script dormant void m52_building_fall
    (sleep_until (or (f_vehicle_pilot_seat player0) (f_vehicle_pilot_seat player1) (f_vehicle_pilot_seat player2) (f_vehicle_pilot_seat player3)) 5)
    (sleep 60)
    (sleep_until (or (= m_progression 2) (volume_test_players "tv_building_fall") (objects_can_see_flag player0 "cf_building_fall" 10) (objects_can_see_flag player1 "cf_building_fall" 10) (objects_can_see_flag player2 "cf_building_fall" 10) (objects_can_see_flag player3 "cf_building_fall" 10)) 5)
    (if (and (not (volume_test_players "tv_building_fall")) (or (objects_can_see_flag player0 "cf_building_fall" 10) (objects_can_see_flag player1 "cf_building_fall" 10) (objects_can_see_flag player2 "cf_building_fall" 10) (objects_can_see_flag player3 "cf_building_fall" 10)))
        (sleep (* 30 (random_range 0 4)))
    )
    (device_set_position "dm_building_fall" 1)
    (sleep_until (>= (device_get_position "dm_building_fall") 1))
    (object_destroy "dm_building_fall")
)

(script dormant void m52_building_shake_player0
    (if (<= (objects_distance_to_object player0 "dm_building_fall") 100)
        (cam_shake_player player0 1 0.2 5 7)
    )
)

(script dormant void m52_building_shake_player1
    (if (<= (objects_distance_to_object player1 "dm_building_fall") 100)
        (cam_shake_player player1 1 0.2 5 7)
    )
)

(script dormant void m52_building_shake_player2
    (if (<= (objects_distance_to_object player2 "dm_building_fall") 100)
        (cam_shake_player player2 1 0.2 5 7)
    )
)

(script dormant void m52_building_shake_player3
    (if (<= (objects_distance_to_object player3 "dm_building_fall") 100)
        (cam_shake_player player3 1 0.2 5 7)
    )
)

(script dormant void f_ground_fx_ambient
    (sleep_until 
        (begin
            (set l_point (ai_random_smart_point "sd_fx_master" 0 2000 90))
            (if (= l_point "sd_fx_master/p0")
                (begin
                    (set n_point "sd_fx_0")
                    (begin_random_count
                        1
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                    )
                )
                (if (= l_point "sd_fx_master/p1")
                    (begin
                        (set n_point "sd_fx_1")
                        (begin_random_count
                            1
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                        )
                    )
                    (if (= l_point "sd_fx_master/p2")
                        (begin
                            (set n_point "sd_fx_2")
                            (begin_random_count
                                1
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                            )
                        )
                        (if (= l_point "sd_fx_master/p3")
                            (begin
                                (set n_point "sd_fx_3")
                                (begin_random_count
                                    1
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                )
                            )
                            (if (= l_point "sd_fx_master/p4")
                                (begin
                                    (set n_point "sd_fx_4")
                                    (begin_random_count
                                        1
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                    )
                                )
                                (if (= l_point "sd_fx_master/p5")
                                    (begin
                                        (set n_point "sd_fx_5")
                                        (begin_random_count
                                            1
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                        )
                                    )
                                    (if (= l_point "sd_fx_master/p6")
                                        (begin
                                            (set n_point "sd_fx_6")
                                            (begin_random_count
                                                1
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                            )
                                        )
                                        (if (= l_point "sd_fx_master/p7")
                                            (begin
                                                (set n_point "sd_fx_7")
                                                (begin_random_count
                                                    1
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                )
                                            )
                                            (if (= l_point "sd_fx_master/p8")
                                                (begin
                                                    (set n_point "sd_fx_8")
                                                    (begin_random_count
                                                        1
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                    )
                                                )
                                                (if (= l_point "sd_fx_master/p9")
                                                    (begin
                                                        (set n_point "sd_fx_9")
                                                        (begin_random_count
                                                            1
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                        )
                                                    )
                                                    (if (= l_point "sd_fx_master/p10")
                                                        (begin
                                                            (set n_point "sd_fx_10")
                                                            (begin_random_count
                                                                1
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                            )
                                                        )
                                                        (if (= l_point "sd_fx_master/p11")
                                                            (begin
                                                                (set n_point "sd_fx_11")
                                                                (begin_random_count
                                                                    1
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                )
                                                            )
                                                            (if (= l_point "sd_fx_master/p12")
                                                                (begin
                                                                    (set n_point "sd_fx_12")
                                                                    (begin_random_count
                                                                        1
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                    )
                                                                )
                                                                (if (= l_point "sd_fx_master/p13")
                                                                    (begin
                                                                        (set n_point "sd_fx_13")
                                                                        (begin_random_count
                                                                            1
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                        )
                                                                    )
                                                                    (if (= l_point "sd_fx_master/p14")
                                                                        (begin
                                                                            (set n_point "sd_fx_14")
                                                                            (begin_random_count
                                                                                1
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            false
        )
        (random_range 15 30)
    )
)

(script dormant void f_ground_fx_ambient_2
    (sleep_until 
        (begin
            (set l_point (ai_random_smart_point "sd_fx_master" 0 2000 90))
            (if (= l_point "sd_fx_master/p0")
                (begin
                    (set n_point "sd_fx_0")
                    (begin_random_count
                        1
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                    )
                )
                (if (= l_point "sd_fx_master/p1")
                    (begin
                        (set n_point "sd_fx_1")
                        (begin_random_count
                            1
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                        )
                    )
                    (if (= l_point "sd_fx_master/p2")
                        (begin
                            (set n_point "sd_fx_2")
                            (begin_random_count
                                1
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                            )
                        )
                        (if (= l_point "sd_fx_master/p3")
                            (begin
                                (set n_point "sd_fx_3")
                                (begin_random_count
                                    1
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                )
                            )
                            (if (= l_point "sd_fx_master/p4")
                                (begin
                                    (set n_point "sd_fx_4")
                                    (begin_random_count
                                        1
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                    )
                                )
                                (if (= l_point "sd_fx_master/p5")
                                    (begin
                                        (set n_point "sd_fx_5")
                                        (begin_random_count
                                            1
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                        )
                                    )
                                    (if (= l_point "sd_fx_master/p6")
                                        (begin
                                            (set n_point "sd_fx_6")
                                            (begin_random_count
                                                1
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                            )
                                        )
                                        (if (= l_point "sd_fx_master/p7")
                                            (begin
                                                (set n_point "sd_fx_7")
                                                (begin_random_count
                                                    1
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                )
                                            )
                                            (if (= l_point "sd_fx_master/p8")
                                                (begin
                                                    (set n_point "sd_fx_8")
                                                    (begin_random_count
                                                        1
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                    )
                                                )
                                                (if (= l_point "sd_fx_master/p9")
                                                    (begin
                                                        (set n_point "sd_fx_9")
                                                        (begin_random_count
                                                            1
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                        )
                                                    )
                                                    (if (= l_point "sd_fx_master/p10")
                                                        (begin
                                                            (set n_point "sd_fx_10")
                                                            (begin_random_count
                                                                1
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                            )
                                                        )
                                                        (if (= l_point "sd_fx_master/p11")
                                                            (begin
                                                                (set n_point "sd_fx_11")
                                                                (begin_random_count
                                                                    1
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                )
                                                            )
                                                            (if (= l_point "sd_fx_master/p12")
                                                                (begin
                                                                    (set n_point "sd_fx_12")
                                                                    (begin_random_count
                                                                        1
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                    )
                                                                )
                                                                (if (= l_point "sd_fx_master/p13")
                                                                    (begin
                                                                        (set n_point "sd_fx_13")
                                                                        (begin_random_count
                                                                            1
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                        )
                                                                    )
                                                                    (if (= l_point "sd_fx_master/p14")
                                                                        (begin
                                                                            (set n_point "sd_fx_14")
                                                                            (begin_random_count
                                                                                1
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            false
        )
        (random_range 15 30)
    )
)

(script static void (f_ground_fx_ambient_test (short l_point))
    (sleep_until 
        (begin
            (if (= l_point 0)
                (begin
                    (set n_point "sd_fx_0")
                    (begin_random_count
                        1
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                    )
                )
                (if (= l_point 1)
                    (begin
                        (set n_point "sd_fx_1")
                        (begin_random_count
                            1
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                        )
                    )
                    (if (= l_point 2)
                        (begin
                            (set n_point "sd_fx_2")
                            (begin_random_count
                                1
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                            )
                        )
                        (if (= l_point 3)
                            (begin
                                (set n_point "sd_fx_3")
                                (begin_random_count
                                    1
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                )
                            )
                            (if (= l_point 4)
                                (begin
                                    (set n_point "sd_fx_4")
                                    (begin_random_count
                                        1
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                    )
                                )
                                (if (= l_point 5)
                                    (begin
                                        (set n_point "sd_fx_5")
                                        (begin_random_count
                                            1
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                        )
                                    )
                                    (if (= l_point 6)
                                        (begin
                                            (set n_point "sd_fx_6")
                                            (begin_random_count
                                                1
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                            )
                                        )
                                        (if (= l_point 7)
                                            (begin
                                                (set n_point "sd_fx_7")
                                                (begin_random_count
                                                    1
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                )
                                            )
                                            (if (= l_point 8)
                                                (begin
                                                    (set n_point "sd_fx_8")
                                                    (begin_random_count
                                                        1
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                    )
                                                )
                                                (if (= l_point 9)
                                                    (begin
                                                        (set n_point "sd_fx_9")
                                                        (begin_random_count
                                                            1
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                        )
                                                    )
                                                    (if (= l_point 10)
                                                        (begin
                                                            (set n_point "sd_fx_10")
                                                            (begin_random_count
                                                                1
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                            )
                                                        )
                                                        (if (= l_point 11)
                                                            (begin
                                                                (set n_point "sd_fx_11")
                                                                (begin_random_count
                                                                    1
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                    (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                )
                                                            )
                                                            (if (= l_point 12)
                                                                (begin
                                                                    (set n_point "sd_fx_12")
                                                                    (begin_random_count
                                                                        1
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                        (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                    )
                                                                )
                                                                (if (= l_point 13)
                                                                    (begin
                                                                        (set n_point "sd_fx_13")
                                                                        (begin_random_count
                                                                            1
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                            (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                        )
                                                                    )
                                                                    (if (= l_point 14)
                                                                        (begin
                                                                            (set n_point "sd_fx_14")
                                                                            (begin_random_count
                                                                                1
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_1.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_2.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_3.effect" n_point)
                                                                                (effect_new_random "levels\solo\m52\fx\street_battle_fx\street_battle_4.effect" n_point)
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            false
        )
        30
    )
)

(script dormant void title_start
    (f_hud_chapter "ct_start")
)

(script dormant void title_final
    (sleep_until (and (= (f_all_hub_check) true) (= (f_players_flying) true)) 5)
    (f_hud_chapter "ct_final")
)

(script dormant void weather_lightning
    (weather_animate_force "light_rain" 1 0)
    (sleep_until 
        (begin
            (sleep_range_seconds s_rain_min_lightning_delay s_rain_max_lightning_delay)
            (weather_lightning_flash)
            (if b_rain_is_active
                (sleep_range_seconds s_rain_min_thunder_delay s_rain_max_thunder_delay)
                (sleep_range_seconds (* 3 s_rain_min_thunder_delay) (* 3 s_rain_max_thunder_delay))
            )
            (weather_thunder_clap)
            false
        )
        60
    )
)

(script static void weather_lightning_flash
    (interpolator_start "lightning")
)

(script static void cinematic_lightning_flash
    (weather_lightning_flash)
    (sleep_range_seconds s_rain_min_thunder_delay s_rain_max_thunder_delay)
    (sleep_range_seconds (* 3 s_rain_min_thunder_delay) (* 3 s_rain_max_thunder_delay))
    (weather_thunder_clap)
)

(script static void weather_thunder_clap
    (if (and (not (f_any_hub_check)) b_rain_is_active b_rain_always_thunderclap)
        (begin
            (sound_impulse_start "sound\levels\solo\weather\thunder_claps.sound" none 1)
            (sleep (* 30 2.5))
        )
        (begin
            (sound_impulse_start "sound\levels\solo\weather\rain\details\thunder.sound" none 1)
        )
    )
)

(script static void (sleep_range_seconds (short minsleep, short maxsleep))
    (sleep (random_range (* 30 minsleep) (* 30 maxsleep)))
)

(script static boolean obj_asecto_0_0
    (= b_start_hub true)
)

(script static boolean obj_asecto_0_1
    (= b_start_hub true)
)

(script static boolean obj_asecto_0_4
    (< (ai_task_count "obj_air/sector_c") 4)
)

(script static boolean obj_afollo_0_5
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon01"))
)

(script static boolean obj_asecto_0_7
    (and (= b_start_hub true) (< (ai_task_count "obj_air/sector_a") 4))
)

(script static boolean obj_asecto_0_8
    (and (= b_start_hub true) (< (ai_task_count "obj_air/sector_b") 4))
)

(script static boolean obj_asecto_0_9
    (< (ai_task_count "obj_air/sector_d") 4)
)

(script static boolean obj_asecto_0_10
    (< (ai_task_count "obj_air/sector_e") 4)
)

(script static boolean obj_amissi_0_14
    (= mission_obj_gamma_1 true)
)

(script static boolean obj_amissi_0_15
    (= mission_obj_gamma_2 true)
)

(script static boolean obj_amissi_0_16
    (= mission_obj_gamma_3 true)
)

(script static boolean obj_abansh_0_17
    (f_player0_in_banshee)
)

(script static boolean obj_afollo_0_18
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon02"))
)

(script static boolean obj_afollo_0_19
    (= b_start_hub true)
)

(script static boolean obj_abansh_0_20
    (f_player1_in_banshee)
)

(script static boolean obj_abansh_0_21
    (f_player2_in_banshee)
)

(script static boolean obj_abansh_0_22
    (f_player3_in_banshee)
)

(script static boolean obj_afollo_0_23
    (> (ai_living_count "sq_sec_gamma_p01") 1)
)

(script static boolean obj_afollo_0_24
    (> (ai_living_count "sq_sec_gamma_p02") 1)
)

(script static boolean obj_afollo_0_25
    (> (ai_living_count "sq_sec_gamma_m03a") 1)
)

(script static boolean obj_amissi_0_26
    (= g_delta_enc 3)
)

(script static boolean obj_amissi_0_27
    (= g_delta_enc 2)
)

(script static boolean obj_amissi_0_28
    (= g_delta_enc 1)
)

(script static boolean obj_afollo_0_29
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon01"))
)

(script static boolean obj_afollo_0_30
    (= s_random_banshee_num0 3)
)

(script static boolean obj_afollo_0_31
    (= s_random_banshee_num0 2)
)

(script static boolean obj_afollo_0_32
    (= s_random_banshee_num0 1)
)

(script static boolean obj_afollo_0_33
    (= s_random_banshee_num1 1)
)

(script static boolean obj_afollo_0_34
    (= s_random_banshee_num1 3)
)

(script static boolean obj_afollo_0_35
    (= s_random_banshee_num1 2)
)

(script static boolean obj_afollo_0_36
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon02"))
)

(script static boolean obj_afollo_0_37
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon01_reinf"))
)

(script static boolean obj_afollo_0_38
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon02_reinf"))
)

(script static boolean obj_afollo_0_39
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon01_reinf"))
)

(script static boolean obj_afollo_0_40
    (= s_random_banshee_num2 1)
)

(script static boolean obj_afollo_0_41
    (= s_random_banshee_num2 3)
)

(script static boolean obj_afollo_0_42
    (= s_random_banshee_num2 2)
)

(script static boolean obj_afollo_0_43
    (and (>= m_progression 0) (f_players_driving_falcon "sq_v_falcon02_reinf"))
)

(script static boolean obj_afollo_0_44
    (= s_random_banshee_num3 1)
)

(script static boolean obj_afollo_0_45
    (= s_random_banshee_num3 3)
)

(script static boolean obj_afollo_0_46
    (= s_random_banshee_num3 2)
)

(script static boolean obj_abldg__0_48
    (and (f_any_hub_check) (= g_mission_unlock 1))
)

(script static boolean obj_abldg__0_49
    (and (f_any_hub_check) (= g_mission_unlock 2))
)

(script static boolean obj_abldg__0_50
    (and (f_any_hub_check) (= g_mission_unlock 3))
)

(script static boolean obj_asecto_0_51
    (< (ai_task_count "obj_air/sector_f") 4)
)

(script static boolean obj_bbridg_1_1
    (not (f_objective_complete "dm_building_a_objective" "dc_objective_a_switch"))
)

(script static boolean obj_bfirst_1_2
    (< obj_control_bldg_a 40)
)

(script static boolean obj_bsecon_1_3
    (< obj_control_bldg_a 50)
)

(script static boolean obj_bbridg_1_5
    (< obj_control_bldg_a 20)
)

(script static boolean obj_bgrunt_1_9
    (<= obj_control_bldg_a 10)
)

(script static boolean obj_bbridg_1_13
    (f_objective_complete "dm_building_a_objective" "dc_objective_a_switch")
)

(script static boolean obj_blobby_1_14
    (>= obj_control_bldg_a 80)
)

(script static boolean obj_bfirst_1_15
    (< obj_control_bldg_a 45)
)

(script static boolean obj_bsecon_1_16
    (< obj_control_bldg_a 55)
)

(script static boolean obj_bretur_1_17
    (< obj_control_bldg_a 75)
)

(script static boolean obj_bjetpa_1_20
    (< obj_control_bldg_a 80)
)

(script static boolean obj_bmarin_1_25
    (and (ai_living_count "sq_bldg_a_02_return") (>= obj_control_bldg_a 80))
)

(script static boolean obj_bunder_1_26
    (volume_test_players "tv_bldg_a_under_bridge")
)

(script static boolean obj_blobby_1_27
    (b_engineer_hide)
)

(script static boolean obj_btop_e_1_29
    (b_engineer_escape)
)

(script static boolean obj_blobby_1_31
    (< obj_control_bldg_a 30)
)

(script static boolean obj_bfollo_2_2
    (or (g_3coop_mode) (= (game_difficulty_get) legendary))
)

(script static boolean obj_blead__2_3
    (= (ai_living_count "gr_bldg_b") 0)
)

(script static boolean obj_bfollo_2_11
    (<= (ai_living_count "gr_bldg_b") 1)
)

(script static boolean obj_bplaye_4_0
    (= (object_get_bsp player0) 4)
)

(script static boolean obj_bplaye_4_7
    (= (object_get_bsp player1) 4)
)

(script static boolean obj_bplaye_4_8
    (= (object_get_bsp player2) 4)
)

(script static boolean obj_bplaye_4_9
    (= (object_get_bsp player3) 4)
)

(script static boolean obj_bbrute_5_7
    (or (= (ai_living_count "sq_bldg_c_01") 0) (>= obj_control_bldg_c 50))
)

(script static boolean obj_aalpha_6_2
    (= g_alpha_enc 1)
)

(script static boolean obj_aalpha_6_3
    (= g_alpha_enc 2)
)

(script static boolean obj_aalpha_6_7
    (= g_alpha_enc 3)
)

(script static boolean obj_am01_p_6_10
    (= g_alpha_1_marine_safe true)
)

(script static boolean obj_am02_p_6_13
    (= g_alpha_2_marine_safe true)
)

(script static boolean obj_am03_p_6_14
    (= g_alpha_3_marine_safe true)
)

(script static boolean obj_bbeta__7_4
    (= g_beta_enc 1)
)

(script static boolean obj_bbeta__7_5
    (= g_beta_enc 3)
)

(script static boolean obj_bbeta__7_9
    (= g_beta_enc 2)
)

(script static boolean obj_bm02_p_7_11
    (= g_beta_2_marine_safe true)
)

(script static boolean obj_bm03_p_7_12
    (= g_beta_3_marine_safe true)
)

(script static boolean obj_bm01_p_7_13
    (= g_beta_1_marine_safe true)
)

(script static boolean obj_gm02_g_8_1
    (= g_gamma_enc 2)
)

(script static boolean obj_gm03_g_8_2
    (= g_gamma_enc 3)
)

(script static boolean obj_gbansh_8_4
    (> (ai_living_count "sq_sec_gamma_cd03a") 0)
)

(script static boolean obj_gm01_g_8_5
    (= g_gamma_enc 1)
)

(script static boolean obj_gm01_i_8_7
    (= g_gamma_1_marine_safe true)
)

(script static boolean obj_gm02_i_8_8
    (= g_gamma_2_marine_safe true)
)

(script static boolean obj_gm03_i_8_11
    (= g_gamma_3_marine_safe true)
)

(script static boolean obj_otasks_9_6
    (b_oni_end)
)

(script static boolean obj_ofollo_9_8
    (= (player_is_in_game player0) true)
)

(script static boolean obj_ofollo_9_10
    (= (player_is_in_game player1) true)
)

(script static boolean obj_ofollo_9_11
    (= (player_is_in_game player2) true)
)

(script static boolean obj_ofollo_9_12
    (= (player_is_in_game player3) true)
)

(script static boolean obj_ddelta_11_3
    (= g_delta_enc 1)
)

(script static boolean obj_ddelta_11_4
    (= g_delta_enc 2)
)

(script static boolean obj_dtasks_11_5
    (= g_delta_enc 3)
)

(script dormant void m52_insertion_stub
    (if debug
        (print "m52 insertion stub")
    )
)

(script static void ins_secondary_objectives
    (set g_insertion_index 1)
    (set g_secondary_test 1)
    (wake m52_mission)
    (fade_in 0 0 0 0)
)

(script static void ins_building_a
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if debug
                (print "switching zone sets...")
            )
            (switch_zone_set "m52_010_a")
            (sleep 1)
        )
    )
    (set g_insertion_index 2)
    (set g_secondary_test 2)
    (wake m52_mission)
)

(script static void ins_building_b
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if debug
                (print "switching zone sets...")
            )
            (sleep 1)
        )
    )
    (set g_insertion_index 2)
    (set g_secondary_test 3)
    (wake m52_mission)
)

(script static void ins_building_c
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if debug
                (print "switching zone sets...")
            )
            (sleep 1)
        )
    )
    (set g_insertion_index 2)
    (set g_secondary_test 4)
    (wake m52_mission)
)

(script static void ins_oni
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if debug
                (print "switching zone sets...")
            )
            (sleep 1)
        )
    )
    (set g_insertion_index 2)
    (set g_secondary_test 5)
    (set m_progression 0)
    (wake m52_mission)
)

(script static void fx_m52_mission
    (fade_in 0 0 0 0)
)

(script static void m52_covenant_cruiser_test
    (wake m52_vig_cruiser01_progress)
    (object_create "vig_cruiser01")
    (device_set_position_track "vig_cruiser01" "m52_initial_start" 0)
    (device_animate_position "vig_cruiser01" 0 -1 0 0 false)
    (device_animate_position "vig_cruiser01" 0.81 30 5 5 false)
    (sleep_until (>= (device_get_position "vig_cruiser01") 0.81) 5)
    (interpolator_start "glassing_glow_01")
    (sleep 150)
    (object_create "vig_cruiser02")
    (device_set_position_track "vig_cruiser02" "m52_mid" 0)
    (wake m52_vig_cruiser02_progress)
    (device_animate_position "vig_cruiser02" 0.81 30 5 5 true)
    (sleep_until (>= (device_get_position "vig_cruiser02") 0.81) 5)
    (interpolator_start "glassing_glow_02")
    (sleep 150)
    (device_animate_position "vig_cruiser01" 1 30 0 0 true)
    (device_animate_position "vig_cruiser02" 1 30 0 0 true)
    (cam_shake 5 0.05 7 10)
    (sleep 150)
    (object_destroy "vig_cruiser01")
    (object_destroy "vig_cruiser02")
)

(script startup void mission_startup
    (if (editor_mode)
        (fade_in 0 0 0 0)
        (start)
    )
)

(script static void start
    (print "starting")
    (set respawn_players_into_friendly_vehicle true)
    (if (game_is_cooperative)
        (begin
            (unit_add_equipment player0 "player_coop_profile" true false)
            (unit_add_equipment player1 "player_coop_profile" true false)
            (unit_add_equipment player2 "player_coop_profile" true false)
            (unit_add_equipment player3 "player_coop_profile" true false)
        )
    )
    (player_set_profile "player_respawn_profile")
    (if (editor_mode)
        (fade_in 0 0 0 0)
        (m52_cin_intro)
    )
    (wake m52_mission)
    (if (!= (current_zone_set) g_set_all)
        (begin
            (if debug
                (print "switching zone sets...")
            )
            (sleep 1)
        )
    )
    (set g_insertion_index 1)
)

(script static boolean g_coop_mode
    (if (or (>= g_coop_simulation 2) (>= (game_coop_player_count) 2))
        true
    )
)

(script static boolean g_3coop_mode
    (if (or (>= g_coop_simulation 3) (>= (game_coop_player_count) 3))
        true
    )
)

(script dormant void m52_mission
    (switch_zone_set "m52_000_secondary")
    (ai_allegiance human player)
    (ai_allegiance player human)
    (flock_create "banshees_1")
    (flock_create "banshees_2")
    (flock_create "banshees_3")
    (flock_create "falcons_1")
    (flock_create "falcons_2")
    (flock_create "falcons_3")
    (ai_designer_clump_perception_range 900)
    (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
    (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
    (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
    (zone_set_trigger_volume_enable "zone_set:m52_040_oni" false)
    (object_set_persistent "dm_building_a_objective" true)
    (object_set_persistent "dm_building_b_objective" true)
    (object_set_persistent "dm_building_c_objective" true)
    (wake f_ground_fx_ambient)
    (wake f_ground_fx_ambient_2)
    (if (or (= (game_difficulty_get) heroic) (= (game_difficulty_get) normal) (= (game_difficulty_get) legendary))
        (object_create "easy_terminal")
    )
    (if (= (game_difficulty_get) legendary)
        (object_create "legendary_terminal")
    )
    (sleep_until (>= g_insertion_index 1) 1)
    (if (= g_insertion_index 1)
        (begin
            (wake banshee_spawn)
            (wake enc_mission)
        )
        (if (= g_insertion_index 2)
            (begin
                (wake enc_mission)
            )
        )
    )
    (object_destroy_folder "building_a_control")
    (object_destroy_folder "building_a_equipment")
    (object_destroy_folder "building_a_weapons")
    (object_destroy_folder "building_a_crates")
    (object_destroy_folder "building_a_scenery")
    (object_destroy_folder "bldg_a_interior_bodies")
    (object_destroy_folder "building_b_weapons")
    (object_destroy_folder "building_b_equipment")
    (object_destroy_folder "building_b_controls")
    (object_destroy_folder "building_b_crates")
    (object_destroy_folder "building_b_scenery")
    (object_destroy_folder "bldg_b_interior_bodies")
    (object_destroy_folder "building_b_dm")
    (object_destroy_folder "bldg_c_interior_bodies")
    (object_destroy_folder "building_c_controls")
    (object_destroy_folder "building_c_equipment")
    (object_destroy_folder "building_c_weapons")
    (object_destroy_folder "building_c_crates")
    (object_destroy_folder "building_c_scenery")
    (object_destroy_folder "building_c_vehicles")
)

(script dormant void enc_mission
    (wake special_elite)
    (wake md_000_initial)
    (wake m52_covenant_cruiser_vignette)
    (wake m52_music_01)
    (wake m52_building_fall)
    (wake level_checkpoint)
    (f_player_loadout)
    (wake player0_evac_nanny)
    (wake md_001_falcon_evac)
    (wake low_flying_volume_player0)
    (wake vehicle_reserve00)
    (wake falcon_a1_nanny)
    (wake falcon_b1_nanny)
    (wake falcon_c1_nanny)
    (wake falcon_a2_nanny)
    (wake falcon_b2_nanny)
    (wake falcon_c2_nanny)
    (wake falcon_start1_nanny)
    (wake falcon_start2_nanny)
    (wake player1_evac_nanny)
    (wake vehicle_reserve01)
    (wake low_flying_volume_player1)
    (wake vehicle_reserve02)
    (wake player2_evac_nanny)
    (wake low_flying_volume_player2)
    (wake vehicle_reserve03)
    (wake player3_evac_nanny)
    (wake low_flying_volume_player3)
    (wake global_mission_nav)
    (wake building_c_horrible_kill01)
    (ai_place "sq_turret_00")
    (ai_set_clump "sq_turret_00" 12)
    (ai_place "sq_turret_01")
    (ai_set_clump "sq_turret_01" 13)
    (ai_place "sq_turret_02")
    (ai_set_clump "sq_turret_02" 13)
    (ai_place "sq_turret_03")
    (ai_set_clump "sq_turret_03" 14)
    (ai_place "sq_turret_04")
    (ai_set_clump "sq_turret_04" 10)
    (ai_place "sq_turret_05")
    (ai_set_clump "sq_turret_05" 10)
    (ai_place "sq_turret_06")
    (ai_set_clump "sq_turret_06" 10)
    (ai_place "sq_turret_07")
    (ai_set_clump "sq_turret_07" 12)
    (ai_place "sq_turret_08")
    (ai_set_clump "sq_turret_08" 11)
    (wake bldg_b_turret)
    (wake bldg_c_turret)
    (if (= (g_3coop_mode) false)
        (begin
            (wake phantom_patrol)
            (wake pelican_patrol)
            (wake falcon_patrol)
        )
        (wake cheap_patrol)
    )
    (wake banshee_patrol_refresh)
    (weather_animate_force "off" 1 0)
    (wake weather_lightning)
    (cinematic_exit "052la_airlift" true)
    (if (= g_insertion_index 1)
        (sleep_until (and (or (f_vehicle_pilot_seat player0) (f_vehicle_pilot_seat player1) (f_vehicle_pilot_seat player2) (f_vehicle_pilot_seat player3)) (volume_test_players "tv_falcon_start")) 5)
    )
    (sleep 90)
    (wake title_start)
    (set b_start_hub true)
    (sleep 1)
    (if (!= (game_difficulty_get) legendary)
        (begin
            (sleep 300)
            (wake player_training00)
            (wake player_training01)
            (wake player_training02)
            (wake player_training03)
        )
    )
    (if (< g_secondary_test 5)
        (begin
            (wake sec_obj_alpha)
            (wake sec_obj_beta)
            (wake sec_obj_gamma)
            (wake sec_obj_delta)
        )
    )
    (sleep 90)
    (if (= (g_all_lost) false)
        (game_save)
    )
    (if (= g_secondary_test 0)
        (primary_objectives)
        (if (= g_secondary_test 1)
            (test_secondary_objectives)
            (if (= g_secondary_test 2)
                (enc_building_a)
                (if (= g_secondary_test 3)
                    (enc_building_b)
                    (if (= g_secondary_test 4)
                        (enc_building_c)
                        (if (= g_secondary_test 5)
                            (wake enc_oni)
                        )
                    )
                )
            )
        )
    )
)

(script static void primary_objectives
    (if (or (= (game_difficulty_get) heroic) (= (game_difficulty_get) legendary) (= (g_coop_mode) true))
        (begin
            (begin_random
                (enc_building_b)
                (enc_building_c)
                (enc_building_a)
            )
            (wake enc_oni)
        )
        (begin
            (enc_building_a)
            (begin_random
                (enc_building_b)
                (enc_building_c)
            )
            (wake enc_oni)
        )
    )
)

(script dormant void level_checkpoint
    (sleep_until 
        (begin
            (sleep 1600)
            (if (or (= (b_player_lost player0) false) (= (b_player_lost player1) false) (= (b_player_lost player2) false) (= (b_player_lost player3) false))
                (begin
                    (game_save_no_timeout)
                )
            )
            false
        )
    )
)

(script dormant void global_mission_nav
    (sleep_until 
        (begin
            (if (and (!= (current_zone_set_fully_active) 5) (f_all_hub_check) (= b_player_in_mission true) (not (volume_test_players "tv_falcon_building_a")) (not (volume_test_players "tv_falcon_building_b")) (not (volume_test_players "tv_loc_building_c")))
                (if (= g_mission_unlock 1)
                    (begin
                        (set g_mission_nav_loop false)
                        (f_unblip_flag "cf_pri_bldg_b_reminder")
                        (f_unblip_flag "cf_pri_bldg_c_reminder")
                        (f_blip_flag "cf_pri_bldg_a_reminder" 21)
                    )
                    (if (= g_mission_unlock 2)
                        (begin
                            (set g_mission_nav_loop false)
                            (f_unblip_flag "cf_pri_bldg_a_reminder")
                            (f_unblip_flag "cf_pri_bldg_c_reminder")
                            (f_blip_flag "cf_pri_bldg_b_reminder" 21)
                        )
                        (if (= g_mission_unlock 3)
                            (begin
                                (set g_mission_nav_loop false)
                                (f_unblip_flag "cf_pri_bldg_a_reminder")
                                (f_unblip_flag "cf_pri_bldg_b_reminder")
                                (f_blip_flag "cf_pri_bldg_c_reminder" 21)
                            )
                        )
                    )
                )
                (begin
                    (set g_mission_nav_loop true)
                    (f_unblip_flag "cf_pri_bldg_a_reminder")
                    (f_unblip_flag "cf_pri_bldg_b_reminder")
                    (f_unblip_flag "cf_pri_bldg_c_reminder")
                )
            )
            false
        )
        30
    )
)

(script static void enc_building_a
    (sleep_until (= g_main_dialog_playing false))
    (if (!= m_progression 0)
        (begin
            (wake m52_music_02)
            (sleep (* 30 (random_range 4 7)))
            (wake md_010_bldg_a)
            (sleep 10)
            (prepare_to_switch_to_zone_set "m52_010_a")
            (if (editor_mode)
                (switch_zone_set "m52_010_a")
            )
            (data_mine_set_mission_segment "m52_route_to_building_a")
            (set b_player_in_mission true)
            (wake bldg_a_nav_point)
            (sleep_until (and (= (current_zone_set_fully_active) 1) (= g_mission_unlock 1)) 5)
            (sleep 5)
            (device_set_power "dm_bldg_a_door01" 1)
            (object_create_folder "building_a_control")
            (object_create_folder "building_a_equipment")
            (object_create_folder "building_a_weapons")
            (object_create_folder "building_a_crates")
            (object_create_folder "building_a_scenery")
            (object_create_folder "bldg_a_interior_bodies")
            (sleep 1)
            (wake m52_bldg_a_dead_marines)
            (wake enc_bldg_a_enemies)
            (wake md_010_bldg_a_end)
            (wake md_010_bldg_a_troopers)
            (wake md_010_bldg_a_complete)
            (wake enc_bldg_a_obj_control)
            (sleep_until (volume_test_players "tv_bldg_a_start") 1)
            (set g_music_m52_01 2)
            (data_mine_set_mission_segment "m52_building_a")
            (game_save)
            (f_bldg_objective "dm_building_a_objective" "dc_objective_a_switch")
            (if (> (ai_living_count "gr_bldg_a") 15)
                (ai_erase "gr_bldg_a_initial")
            )
            (f_hud_obj_complete)
            (game_save)
            (sleep_until (= (f_any_hub_check) true) 5)
            (set b_player_in_mission false)
            (set g_mission_unlock 0)
            (sleep_until (= (f_all_hub_check) true) 5 5400)
            (f_zone_teleport_player0)
            (f_zone_teleport_player1)
            (f_zone_teleport_player2)
            (f_zone_teleport_player3)
            (set g_prev_mission 1)
            (set m_progression (- m_progression 1))
            (set s_banshee_max 7)
            (start_ambient_patrol)
            (device_set_power "dm_bldg_a_door01" 0)
            (sleep 5)
            (object_removal)
            (if (= m_progression 0)
                (wake falcon_friendly_final_battle)
            )
            (sleep 90)
            (game_save)
            (sleep 90)
            (if (and (!= g_secondary_test 6) (> m_progression 0))
                (begin
                    (if (= (g_3coop_mode) false)
                        (sec_objective 1)
                        (sec_objective 2)
                    )
                )
            )
        )
    )
)

(script dormant void bldg_a_nav_point
    (sleep_until (>= obj_control_bldg_a 10) 5)
    (f_unblip_flag "cf_bldg_a_ext")
    (sleep_until (>= obj_control_bldg_a 20) 5 3200)
    (if (< obj_control_bldg_a 20)
        (f_blip_flag "cf_bldg_a_bridge" 21)
    )
    (sleep_until (>= obj_control_bldg_a 20) 5)
    (f_unblip_flag "cf_bldg_a_bridge")
    (sleep_until (>= obj_control_bldg_a 60) 5 3200)
    (f_blip_object "dc_objective_a_switch" blip_interface)
    (sleep_until (<= (object_get_health "dm_building_a_objective") 0) 5)
    (wake bldg_a_navpoint_exit)
    (sleep_until (= (f_bsp_any_player 2) false) 1)
    (sleep 1)
    (f_unblip_flag "cf_bldg_a_ext")
    (f_unblip_flag "cf_bldg_a_objective")
    (f_unblip_flag "cf_bldg_a_bridge")
)

(script dormant void bldg_a_navpoint_exit
    (branch (= (f_bsp_any_player 2) false) (branch_abort))
    (sleep 1200)
    (f_blip_flag "cf_bldg_a_ext" 21)
)

(script static void vignette_test
    (ai_allegiance human player)
    (ai_allegiance player human)
    (set obj_control_bldg_a 100)
    (wake md_010_bldg_a_troopers)
    (wake m52_a_vignette_cancel)
    (m52_a_vignette01)
    (m52_a_vignette02)
    (m52_a_vignette03)
    (wake m52_a_vignette04)
)

(script dormant void enc_bldg_a_enemies
    (sleep_until (volume_test_players "tv_bldg_a_start") 1)
    (sleep 1)
    (ai_place "sq_bldg_a_10")
    (ai_place "sq_bldg_a_01")
    (ai_place "sq_bldg_a_02")
    (ai_place "sq_bldg_a_03")
    (ai_place "sq_bldg_a_06")
    (sleep_until (>= obj_control_bldg_a 13) 5)
    (wake m52_bldg_a_outside_cleanup)
    (ai_place "sq_bldg_a_04")
    (ai_place "sq_bldg_a_05")
    (sleep_until (>= obj_control_bldg_a 20) 5)
    (ai_disposable "sq_bldg_a_01" true)
    (ai_disposable "sq_bldg_a_02" true)
    (ai_disposable "sq_bldg_a_03" true)
    (wake m52_a_vignette_cancel)
    (m52_a_vignette01)
    (m52_a_vignette02)
    (m52_a_vignette03)
    (wake m52_a_vignette04)
    (sleep 1)
    (ai_place "sq_bldg_a_07")
    (ai_place "sq_bldg_a_08")
    (ai_place "sq_bldg_a_11")
    (sleep_until (>= obj_control_bldg_a 30) 5)
    (sleep_until (<= (object_get_health "dm_building_a_objective") 0) 5)
    (sleep 30)
    (device_set_power "dm_bldg_a_door02" 1)
    (ai_place "sq_bldg_a_01_return")
    (ai_place "sq_bldg_a_02_return")
    (ai_place "sq_bldg_a_03_return")
    (wake m52_bldg_a_boss_kill)
    (if (or (g_3coop_mode) (= (game_difficulty_get) legendary))
        (ai_place "sq_bldg_a_04_return")
    )
    (ai_place "sq_bldg_a_05_return")
    (if (or (g_3coop_mode) (= (game_difficulty_get) legendary))
        (begin
            (ai_place "sq_bldg_a_06_return")
            (ai_place "sq_bldg_a_07_return")
        )
    )
    (sleep_until (< (ai_living_count "gr_bldg_a_jetpack") 1) 5)
    (game_save_no_timeout)
)

(script dormant void m52_bldg_a_outside_cleanup
    (ai_erase "gr_banshee")
    (if (= (g_3coop_mode) true)
        (begin
            (ai_erase "gr_banshee")
            (set s_banshee_max 0)
            (f_banshee_force_max 0)
        )
        (begin
            (set s_banshee_max 4)
            (f_banshee_force_max 4)
        )
    )
    (erase_ambient_patrol)
)

(script dormant void m52_bldg_a_boss_kill
    (sleep_until (or (= (f_all_hub_check) true) (< (ai_living_count "sq_bldg_a_02_return") 1)) 5)
    (set g_music_m52_02 2)
)

(script static boolean b_engineer_escape
    (if (and (= (unit_get_health "sq_bldg_a_10") 1) (<= obj_control_bldg_a 10) (<= (ai_task_status "obj_bldg_a/top") 1))
        true
    )
)

(script static boolean b_engineer_hide
    (if (and (>= (unit_get_health "sq_bldg_a_10") 0.5) (<= obj_control_bldg_a 13) (>= (ai_task_count "obj_bldg_a/lobby_mid") 3))
        true
    )
)

(script dormant void enc_bldg_a_obj_control
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_10") 1)
    (set obj_control_bldg_a 10)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_13") 1)
    (set obj_control_bldg_a 13)
    (game_save)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_17") 1)
    (set obj_control_bldg_a 17)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_20") 1)
    (set obj_control_bldg_a 20)
    (game_save)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_30") 1)
    (set obj_control_bldg_a 30)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_40") 1)
    (set obj_control_bldg_a 40)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_45") 1)
    (set obj_control_bldg_a 45)
    (game_save)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_50") 1)
    (set obj_control_bldg_a 50)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_55") 1)
    (set obj_control_bldg_a 55)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_60") 1)
    (set obj_control_bldg_a 60)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_70") 1)
    (set obj_control_bldg_a 70)
    (game_save)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_75") 1)
    (set obj_control_bldg_a 75)
    (game_save)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_80") 1)
    (set obj_control_bldg_a 80)
    (game_save)
    (sleep_until (f_bsp_and_volume_check 2 "tv_bldg_a_obj_control_100") 1)
    (set obj_control_bldg_a 100)
    (game_save)
)

(script static void enc_building_b
    (sleep_until (= g_main_dialog_playing false))
    (if (!= m_progression 0)
        (begin
            (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
            (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
            (prepare_to_switch_to_zone_set "m52_020_b")
            (wake m52_music_06)
            (wake m52_music_07)
            (sleep (* 30 (random_range 4 7)))
            (wake md_020_bldg_b)
            (data_mine_set_mission_segment "m52_route_to_building_b")
            (wake enc_bldg_b_obj_control)
            (sleep 10)
            (set b_player_in_mission true)
            (if (editor_mode)
                (switch_zone_set "m52_020_b")
            )
            (wake bldg_b_nav_point)
            (wake disco_fever)
            (wake start_disco)
            (wake enc_bldg_b_enemies)
            (sleep_until (and (= (current_zone_set_fully_active) 2) (= g_mission_unlock 2)) 5)
            (sleep 90)
            (game_save)
            (sleep 90)
            (device_set_power "dm_bldg_b_door01" 1)
            (device_set_power "dm_bldg_b_door02" 1)
            (object_create_folder "building_b_weapons")
            (object_create_folder "building_b_equipment")
            (object_create_folder "building_b_controls")
            (object_create_folder "building_b_crates")
            (object_create_folder "building_b_scenery")
            (object_create_folder "building_b_dm")
            (object_create_folder "bldg_b_interior_bodies")
            (if (or (g_3coop_mode) (= (game_difficulty_get) heroic) (= (game_difficulty_get) legendary))
                (object_destroy "bldg_b_rl_ammo")
            )
            (wake md_020_bldg_b_end)
            (sleep_until (volume_test_players "tv_bldg_b_start") 1)
            (set g_music_m52_01 2)
            (set g_music_m52_06 1)
            (game_save)
            (data_mine_set_mission_segment "m52_building_b")
            (sleep 5)
            (erase_ambient_patrol)
            (f_bldg_objective "dm_building_b_objective" "dc_objective_b_switch")
            (wake bldg_b_music_script)
            (set g_music_m52_07 1)
            (f_hud_obj_complete)
            (sleep_until (= (f_any_hub_check) true) 5)
            (start_ambient_patrol)
            (set b_player_in_mission false)
            (set g_mission_unlock 0)
            (sleep_until (= (f_all_hub_check) true) 5 3600)
            (f_zone_teleport_player0)
            (f_zone_teleport_player1)
            (f_zone_teleport_player2)
            (f_zone_teleport_player3)
            (set g_prev_mission 2)
            (set m_progression (- m_progression 1))
            (device_set_power "dm_bldg_b_door01" 0)
            (device_set_power "dm_bldg_b_door02" 0)
            (sleep 5)
            (object_removal)
            (if (= m_progression 0)
                (wake falcon_friendly_final_battle)
            )
            (sleep 90)
            (game_save)
            (if (and (!= g_secondary_test 6) (> m_progression 0))
                (begin
                    (if (= (g_3coop_mode) false)
                        (sec_objective 1)
                        (sec_objective 2)
                    )
                )
            )
        )
    )
)

(script dormant void bldg_b_turret
    (sleep_until (or (= (current_zone_set_fully_active) 2) (= g_mission_unlock 2) (f_hub_and_radius_check "cf_bldg_b_ext01" 100)) 5)
    (ai_place "sq_bldg_b_turret01")
    (ai_place "sq_bldg_b_turret02")
    (ai_set_clump "sq_bldg_b_turret01" g_clumps_turret)
    (ai_set_clump "sq_bldg_b_turret02" g_clumps_turret)
)

(script dormant void bldg_b_music_script
    (sleep_until (or (< (ai_living_count "gr_bldg_b") 1) (= (f_all_hub_check) true)) 5)
    (set g_music_m52_06 3)
)

(script dormant void bldg_b_nav_point
    (sleep_until (or (volume_test_players "tv_bldg_b_interior_start") (>= obj_control_bldg_b 10)) 1)
    (sleep_until (<= (ai_living_count "gr_bldg_b") 0) 5 2400)
    (sleep 60)
    (f_blip_object "dc_objective_b_switch" blip_interface)
    (sleep_until (<= (object_get_health "dm_building_b_objective") 0) 5)
    (wake bldg_b_navpoint_exit)
    (sleep_until (= (f_bsp_any_player 3) false) 1)
    (sleep 1)
    (f_unblip_flag "cf_bldg_b_ext")
)

(script dormant void bldg_b_navpoint_exit
    (branch (= (f_bsp_any_player 3) false) (branch_abort))
    (sleep 1200)
    (f_blip_flag "cf_bldg_b_ext" 21)
)

(script dormant void enc_bldg_b_enemies
    (device_set_power "dm_bldg_b_enemy_door" 1)
    (ai_place "sq_bldg_b_03")
    (ai_force_active "sq_bldg_b_03" true)
    (ai_place "sq_bldg_b_04")
    (ai_force_active "sq_bldg_b_04" true)
    (ai_place "sq_bldg_b_05")
    (ai_force_active "sq_bldg_b_05" true)
    (ai_place "sq_bldg_b_06")
    (ai_force_active "sq_bldg_b_06" true)
    (sleep_until (volume_test_players "tv_bldg_b_interior_start") 5)
    (object_destroy "disco_switch01")
    (if (= b_disco false)
        (begin
            (ai_place "sq_bldg_b_01")
            (ai_place "sq_bldg_b_02")
            (ai_place "sq_bldg_b_07")
            (ai_place "sq_bldg_b_08")
            (ai_place "sq_bldg_b_trooper_01")
            (ai_place "sq_bldg_b_trooper_02")
            (ai_place "sq_bldg_b_trooper_03")
            (if (or (not (g_3coop_mode)) (!= (game_difficulty_get) legendary))
                (ai_place "sq_bldg_b_trooper_04")
            )
            (ai_cannot_die "sq_bldg_b_trooper_01" true)
            (set ai_bldgb_trooper02 "sq_bldg_b_trooper_01/02")
            (set ai_bldgb_trooper04 "sq_bldg_b_trooper_01/04")
            (wake enc_bldg_b_troopers_damage)
            (wake md_020_bldg_b_troopers)
        )
    )
    (sleep_until (<= (object_get_health "dm_building_b_objective") 0) 5)
    (ai_erase "gr_bldg_b_outside")
    (sleep_until (= (f_bsp_any_player 3) false) 1)
    (device_one_sided_set "dm_bldg_b_enemy_door" true)
    (ai_disposable "sq_bldg_b_trooper_01" true)
)

(script dormant void start_disco
    (sleep_until (= b_disco true) 5)
    (prepare_to_switch_to_zone_set "m52_020_b")
    (sleep 210)
    (switch_zone_set "m52_020_b")
    (sleep_until (= (current_zone_set_fully_active) 2))
    (sleep 30)
    (ai_erase "gr_bldg_b_outside")
    (sleep_forever m52_music_06)
    (sleep_forever m52_music_07)
    (kill_music)
    (sleep 5)
    (object_destroy "bldg_b_rocket")
    (object_create "disco_music_loop")
    (ai_place "gr_bldg_b_disco")
    (wake shake01)
    (sleep_until (volume_test_players "tv_bldg_b_start") 1)
    (sleep_until (volume_test_players "tv_bldg_b_interior_start") 5)
    (wake stop01)
)

(script dormant void disco_fever
    (object_create "disco_switch01")
    (sleep_until (= (device_get_position "disco_switch01") 1) 5)
    (object_create "disco_switch02")
    (set b_disco true)
    (sleep_until (= (device_get_position "disco_switch02") 1) 5)
    (sleep_forever shake01)
    (object_destroy "disco_music_loop")
    (sleep 30)
    (set b_disco_disco true)
    (object_create "disco_music_alt")
    (wake shake02)
)

(script static void dance
    (object_create "disco_music_loop")
    (ai_place "gr_bldg_b_disco")
    (wake shake01)
    (wake stop01)
)

(script static void dancin
    (object_create "disco_music_alt")
    (ai_place "gr_bldg_b_disco")
    (wake shake01)
    (wake stop01)
)

(script dormant void shake01
    (set shake_var (ai_actors "gr_bldg_b_disco"))
    (sleep_until 
        (begin
            (begin_random
                (unit_play_random_ping (unit (list_get shake_var 0)))
                (unit_play_random_ping (unit (list_get shake_var 1)))
                (unit_play_random_ping (unit (list_get shake_var 2)))
                (unit_play_random_ping (unit (list_get shake_var 3)))
                (unit_play_random_ping (unit (list_get shake_var 4)))
                (unit_play_random_ping (unit (list_get shake_var 5)))
                (unit_play_random_ping (unit (list_get shake_var 6)))
                (unit_play_random_ping (unit (list_get shake_var 7)))
                (unit_play_random_ping (unit (list_get shake_var 8)))
                (unit_play_random_ping (unit (list_get shake_var 9)))
                (unit_play_random_ping (unit (list_get shake_var 10)))
                (unit_play_random_ping (unit (list_get shake_var 11)))
                (unit_play_random_ping (unit (list_get shake_var 12)))
                (unit_play_random_ping (unit (list_get shake_var 13)))
                (unit_play_random_ping (unit (list_get shake_var 14)))
                (unit_play_random_ping (unit (list_get shake_var 15)))
                (unit_play_random_ping (unit (list_get shake_var 16)))
                (unit_play_random_ping (unit (list_get shake_var 17)))
            )
            false
        )
        g_beat
    )
)

(script dormant void shake02
    (set shake_var (ai_actors "gr_bldg_b_disco"))
    (sleep_until 
        (begin
            (begin_random
                (unit_play_random_ping (unit (list_get shake_var 0)))
                (unit_play_random_ping (unit (list_get shake_var 1)))
                (unit_play_random_ping (unit (list_get shake_var 2)))
                (unit_play_random_ping (unit (list_get shake_var 3)))
                (unit_play_random_ping (unit (list_get shake_var 4)))
                (unit_play_random_ping (unit (list_get shake_var 5)))
                (unit_play_random_ping (unit (list_get shake_var 6)))
                (unit_play_random_ping (unit (list_get shake_var 7)))
                (unit_play_random_ping (unit (list_get shake_var 8)))
                (unit_play_random_ping (unit (list_get shake_var 9)))
                (unit_play_random_ping (unit (list_get shake_var 10)))
                (unit_play_random_ping (unit (list_get shake_var 11)))
                (unit_play_random_ping (unit (list_get shake_var 12)))
                (unit_play_random_ping (unit (list_get shake_var 13)))
                (unit_play_random_ping (unit (list_get shake_var 14)))
                (unit_play_random_ping (unit (list_get shake_var 15)))
                (unit_play_random_ping (unit (list_get shake_var 16)))
                (unit_play_random_ping (unit (list_get shake_var 17)))
            )
            false
        )
        g_beat
    )
)

(script dormant void stop01
    (sleep_until (or (< (ai_strength "gr_bldg_b_disco") 1) (<= (object_get_health "dm_building_b_objective") 0)) 5)
    (object_destroy "disco_music_alt")
    (object_destroy "disco_music_loop")
    (sleep 15)
    (sound_impulse_start "sound\levels\solo\m52\sound_scenery\disco_scratch_oneshot" "scratch" 1)
    (sleep_forever shake01)
    (sleep 90)
    (set dance_stop true)
    (ai_magically_see_object "gr_bldg_b_disco" player0)
    (ai_magically_see_object "gr_bldg_b_disco" player1)
    (ai_magically_see_object "gr_bldg_b_disco" player2)
    (ai_magically_see_object "gr_bldg_b_disco" player3)
)

(script command_script void cs_dancing01
    (cs_enable_looking false)
    (cs_enable_moving false)
    (cs_enable_targeting false)
    (sleep_until (or (= dance_stop true) (<= (object_get_health "dm_building_b_objective") 0)) 5)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_targeting true)
)

(script command_script void cs_working01
    (cs_enable_looking false)
    (cs_enable_moving false)
    (cs_enable_targeting false)
    (cs_stow true)
    (begin_random_count
        1
        (cs_custom_animation_loop "objects\characters\brute\brute" "m52_brute_bar:clean" true)
        (cs_custom_animation_loop "objects\characters\brute\brute" "m52_brute_bar:idle" true)
    )
    (sleep_until (or (= dance_stop true) (<= (object_get_health "dm_building_b_objective") 0)) 5)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_targeting true)
)

(script command_script void cs_dj01
    (cs_enable_looking false)
    (cs_enable_moving false)
    (cs_enable_targeting false)
    (cs_stow true)
    (sleep_until 
        (begin
            (begin_random_count
                1
                (cs_custom_animation "objects\characters\brute\brute" "m52_brute_dj:idle" true)
                (cs_custom_animation "objects\characters\brute\brute" "m52_brute_dj:idle:var1" true)
            )
            (or (= dance_stop true) (<= (object_get_health "dm_building_b_objective") 0))
        )
        1
    )
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_targeting true)
)

(script dormant void enc_bldg_b_troopers_damage
    (sleep_until (volume_test_players "tv_bldg_b_troopers_damage") 5 600)
    (ai_cannot_die "sq_bldg_b_trooper_01" false)
    (ai_cannot_die "sq_bldg_b_trooper_02" false)
    (ai_cannot_die "sq_bldg_b_trooper_03" false)
    (ai_cannot_die "sq_bldg_b_trooper_04" false)
)

(script dormant void enc_bldg_b_obj_control
    (sleep_until (f_bsp_and_volume_check 3 "tv_bldg_b_obj_control_10") 1)
    (set obj_control_bldg_b 10)
    (sleep_until (f_bsp_and_volume_check 3 "tv_bldg_b_obj_control_20") 1)
    (set obj_control_bldg_b 20)
    (game_save)
    (sleep_until (f_bsp_and_volume_check 3 "tv_bldg_b_obj_control_30") 1)
    (set obj_control_bldg_b 30)
    (sleep_until (f_bsp_and_volume_check 3 "tv_bldg_b_obj_control_40") 1)
    (set obj_control_bldg_b 40)
    (game_save)
)

(script static void enc_building_c
    (sleep_until (= g_main_dialog_playing false))
    (if (!= m_progression 0)
        (begin
            (wake m52_music_03)
            (wake m52_music_04)
            (wake m52_music_05)
            (sleep (* 30 (random_range 4 7)))
            (wake md_030_bldg_c)
            (wake enc_bldg_c_enemies)
            (wake enc_bldg_c_obj_control)
            (sleep 10)
            (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
            (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
            (prepare_to_switch_to_zone_set "m52_030_c")
            (set b_player_in_mission true)
            (if (editor_mode)
                (switch_zone_set "m52_030_c")
            )
            (data_mine_set_mission_segment "m52_route_to_building_c")
            (wake bldg_c_nav_point)
            (sleep_until (and (= (current_zone_set_fully_active) 3) (= g_mission_unlock 3)) 5)
            (sleep 90)
            (game_save)
            (sleep 5)
            (wake building_c_elev01)
            (wake building_c_elev02)
            (wake elevator_no_spawn00)
            (wake elevator_no_spawn01)
            (wake elevator_no_spawn02)
            (wake elevator_no_spawn03)
            (sleep_until (volume_test_players "tv_bldg_c_start") 1)
            (set g_music_m52_01 2)
            (set g_music_m52_03 1)
            (data_mine_set_mission_segment "m52_building_c")
            (game_save)
            (sleep_until (volume_test_players "tv_bldg_c_int_mission_start") 1)
            (wake m52_bldg_c_outside_cleanup)
            (object_create_folder "building_c_controls")
            (object_create_folder "building_c_equipment")
            (object_create_folder "building_c_weapons")
            (object_create_folder "building_c_crates")
            (object_create_folder "building_c_scenery")
            (object_create_folder "bldg_c_interior_bodies")
            (object_create_folder "building_c_vehicles")
            (sleep 1)
            (wake m52_bldg_c_dead_marines)
            (f_bldg_objective "dm_building_c_objective" "dc_objective_c_switch")
            (sleep_forever m52_music_03)
            (set g_music_m52_04 1)
            (game_save)
            (f_hud_obj_complete)
            (wake md_030_bldg_c_end)
            (wake md_030_bldg_c_exit)
            (sleep_until (= (f_any_hub_check) true) 5)
            (set b_player_in_mission false)
            (set g_mission_unlock 0)
            (sleep_until (= (f_all_hub_check) true) 5 3600)
            (if (!= g_music_m52_04 0)
                (begin
                    (m52_really_stop)
                    (set g_music_m52_04 2)
                )
            )
            (f_zone_teleport_player0)
            (f_zone_teleport_player1)
            (f_zone_teleport_player2)
            (f_zone_teleport_player3)
            (set g_prev_mission 3)
            (game_save)
            (device_set_power "dc_bldg_c_switch01a" 0)
            (device_set_power "dc_bldg_c_switch02a" 0)
            (set m_progression (- m_progression 1))
            (set s_banshee_max 7)
            (start_ambient_patrol)
            (device_set_position "dm_bldg_c_door01a" 0)
            (device_set_position "dm_bldg_c_door02a" 0)
            (sleep 5)
            (sleep_forever elevator_no_spawn00)
            (sleep_forever elevator_no_spawn01)
            (sleep_forever elevator_no_spawn02)
            (sleep_forever elevator_no_spawn03)
            (sleep 10)
            (game_safe_to_respawn true)
            (set g_music_m52_05 1)
            (object_removal)
            (if (= m_progression 0)
                (begin
                    (wake falcon_friendly_final_battle)
                    (ai_erase "gr_bldg_c_buggers")
                    (ai_erase "sq_bldg_c_scared_marine")
                )
            )
            (sleep 90)
            (if (and (!= g_secondary_test 6) (> m_progression 0))
                (begin
                    (if (= (g_3coop_mode) false)
                        (sec_objective 1)
                        (sec_objective 2)
                    )
                )
            )
        )
    )
)

(script dormant void bldg_c_turret
    (sleep_until (or (= (current_zone_set_fully_active) 3) (= g_mission_unlock 3) (f_hub_and_radius_check "cf_bldg_c_ext" 100)) 5)
    (ai_place "sq_bldg_c_turret01")
    (ai_place "sq_bldg_c_turret02")
    (ai_set_clump "sq_bldg_c_turret01" g_clumps_turret)
    (ai_set_clump "sq_bldg_c_turret02" g_clumps_turret)
)

(script dormant void enc_bldg_c_obj_control
    (sleep_until (volume_test_players "tv_bldg_c_obj_control_10") 1)
    (if (< obj_control_bldg_c 10)
        (set obj_control_bldg_c 10)
    )
    (sleep_until (volume_test_players "tv_bldg_c_obj_control_20") 1)
    (if (< obj_control_bldg_c 20)
        (set obj_control_bldg_c 20)
    )
    (game_save)
    (sleep_until (volume_test_players "tv_bldg_c_obj_control_30") 1)
    (if (< obj_control_bldg_c 30)
        (set obj_control_bldg_c 30)
    )
    (sleep_until (volume_test_players "tv_bldg_c_obj_control_40") 1)
    (if (< obj_control_bldg_c 40)
        (set obj_control_bldg_c 40)
    )
    (game_save)
    (sleep_until (or (volume_test_players "tv_bldg_c_obj_control_50") (volume_test_players "tv_bldg_c_obj_control_50a")) 1)
    (if (< obj_control_bldg_c 50)
        (set obj_control_bldg_c 50)
    )
    (sleep_until (volume_test_players "tv_bldg_c_obj_control_60") 1)
    (if (< obj_control_bldg_c 60)
        (set obj_control_bldg_c 60)
    )
    (game_save)
)

(script dormant void bldg_c_nav_point
    (sleep_until (volume_test_players "tv_bldg_c_start") 1)
    (sleep 5)
    (f_unblip_flag "cf_bldg_c_ext")
    (sleep 90)
    (f_blip_flag "cf_bldg_c_entrance" 21)
    (sleep_until (volume_test_players "tv_bldg_c_elevator") 1)
    (sleep 90)
    (f_unblip_flag "cf_bldg_c_ext")
    (f_unblip_flag "cf_bldg_c_entrance")
    (sleep_until (or (volume_test_players "tv_bldg_c_help_vol01") (volume_test_players "tv_bldg_c_help_vol02")) 1)
    (game_save)
    (f_blip_object "dc_objective_c_switch" blip_interface)
    (sleep_until (<= (object_get_health "dm_building_c_objective") 0) 5)
    (if (= (device_get_position "dm_bldg_c_elev01") 1)
        (f_blip_object "dc_bldg_c_switch01c" blip_interface)
    )
    (if (= (device_get_position "dm_bldg_c_elev02") 1)
        (f_blip_object "dc_bldg_c_switch02c" blip_interface)
    )
    (f_unblip_flag "cf_bldg_c_ext")
    (sleep_until (or (and (< (device_get_position "dm_bldg_c_elev01") 1) (> (device_get_position "dm_bldg_c_elev01") 0)) (and (< (device_get_position "dm_bldg_c_elev02") 1) (> (device_get_position "dm_bldg_c_elev02") 0)) (= (f_bsp_any_player 4) false)) 5)
    (f_unblip_object "dc_bldg_c_switch01c")
    (f_unblip_object "dc_bldg_c_switch02c")
    (f_unblip_flag "cf_bldg_c_elev")
    (f_unblip_flag "cf_bldg_c_entrance")
    (f_unblip_flag "cf_bldg_c_ext")
    (f_unblip_flag "cf_bldg_c_obj")
)

(script dormant void enc_bldg_c_enemies
    (sleep_until (volume_test_players "tv_near_bldg_c") 1)
    (kill_volume_disable "kill_bldg_c_door_ext02")
    (sleep 1)
    (ai_place "sq_bldg_c_01")
    (ai_force_active "sq_bldg_c_01" true)
    (ai_place "sq_bldg_c_02")
    (ai_force_active "sq_bldg_c_02" true)
    (ai_place "sq_bldg_c_03")
    (ai_force_active "sq_bldg_c_03" true)
    (ai_place "sq_bldg_c_04")
    (ai_force_active "sq_bldg_c_04" true)
    (ai_place "sq_bldg_c_05")
    (ai_force_active "sq_bldg_c_05" true)
    (ai_place "sq_bldg_c_06")
    (ai_force_active "sq_bldg_c_06" true)
    (wake bldg_c_ext_door02)
    (sleep_until (= (current_zone_set_fully_active) 3) 1)
    (wake bldg_c_scary_vig)
    (wake bldg_c_scary_enc01)
    (wake bldg_c_scary_enc02)
    (wake bldg_c_scary_enc03)
    (ai_force_active "sq_bldg_c_01" false)
    (ai_force_active "sq_bldg_c_02" false)
    (ai_force_active "sq_bldg_c_03" false)
    (ai_force_active "sq_bldg_c_04" false)
    (ai_force_active "sq_bldg_c_05" false)
    (ai_force_active "sq_bldg_c_06" false)
    (sleep_until (<= (object_get_health "dm_building_c_objective") 0) 5)
    (ai_erase "gr_bldg_c_outside")
    (ai_disregard (ai_actors "sq_bldg_c_scared_marine") false)
    (ai_erase "sq_bldg_c_bugger_scary_01")
    (ai_erase "sq_bldg_c_bugger_scary_02")
    (ai_erase "sq_bldg_c_bugger_scary_03")
    (ai_erase "sq_bldg_c_bugger_scary_04")
    (wake bldg_c_bugger_clump00)
    (wake bldg_c_bugger_clump01)
    (wake bldg_c_bugger_clump02)
    (wake bldg_c_bugger_clump03)
    (wake bldg_c_bugger_clump04)
    (wake bldg_c_bugger_clump05)
    (wake bldg_c_bugger_clump06)
    (wake bldg_c_bugger_clump07)
    (wake bldg_c_bugger_clump08)
    (wake bldg_c_bugger_clump09)
    (sleep 1)
    (sleep_until (and (script_finished "bldg_c_bugger_clump01") (script_finished "bldg_c_bugger_clump03") (script_finished "bldg_c_bugger_clump05") (script_finished "bldg_c_bugger_clump07") (script_finished "bldg_c_bugger_clump09")) 5 150)
    (wake bugger_respawner)
    (sleep_until (= (f_bsp_any_player 4) false) 1)
    (sleep_forever bugger_respawner)
)

(script dormant void m52_bldg_c_outside_cleanup
    (set s_banshee_max 4)
    (f_banshee_force_max 4)
    (erase_ambient_patrol)
)

(script dormant void bldg_c_ext_door02
    (sleep 120)
    (device_set_power "dm_bldg_c_ext02" 0)
    (device_set_position "dm_bldg_c_ext02" 0)
    (kill_volume_enable "kill_bldg_c_door_ext02")
)

(script dormant void bldg_c_scary_vig
    (sleep_until (volume_test_players "tv_bldg_c_scary_start01") 5)
    (ai_place "sq_bldg_c_scared_marine")
    (set ai_crazy "sq_bldg_c_scared_marine")
    (ai_disregard (ai_actors "sq_bldg_c_scared_marine") true)
)

(script dormant void bldg_c_scary_enc01
    (branch (or (volume_test_players "tv_bldg_c_scary_start02") (volume_test_players "tv_bldg_c_scary_start03") (volume_test_players "tv_bldg_c_scary_start04")) (branch_abort))
    (sleep_until (volume_test_players "tv_bldg_c_scary_start01") 5)
    (ai_place "sq_bldg_c_bugger_scary_01")
    (ai_place "sq_bldg_c_bugger_scary_02")
    (ai_force_full_lod "sq_bldg_c_bugger_scary_01")
    (ai_force_full_lod "sq_bldg_c_bugger_scary_02")
)

(script dormant void bldg_c_scary_enc02
    (branch (volume_test_players "tv_bldg_c_scary_start04") (branch_abort))
    (sleep_until (volume_test_players "tv_bldg_c_scary_start02") 5)
    (ai_place "sq_bldg_c_bugger_scary_03")
    (ai_force_full_lod "sq_bldg_c_bugger_scary_03")
)

(script dormant void bldg_c_scary_enc03
    (branch (volume_test_players "tv_bldg_c_scary_start04") (branch_abort))
    (sleep_until (volume_test_players "tv_bldg_c_scary_start03") 5)
    (ai_place "sq_bldg_c_bugger_scary_04")
    (ai_force_full_lod "sq_bldg_c_bugger_scary_04")
)

(script command_script void cs_bldg_c_bugger_scary01
    (cs_enable_moving false)
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_dialogue false)
    (ai_cannot_die ai_current_actor true)
    (sleep_until (or (volume_test_players "tv_bldg_c_scary01") (objects_can_see_object (players) (ai_get_object "sq_bldg_c_bugger_scary_01") 40)) 1)
    (cs_go_to "sd_bldg_c_bugger_scary/p0")
    (ai_erase ai_current_actor)
)

(script command_script void cs_bldg_c_bugger_scary02
    (cs_enable_moving false)
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_dialogue false)
    (ai_cannot_die ai_current_actor true)
    (sleep_until (or (volume_test_players "tv_bldg_c_scary02") (objects_can_see_object (players) (ai_get_object "sq_bldg_c_bugger_scary_02") 40)) 1)
    (cs_go_to "sd_bldg_c_bugger_scary/p1")
    (ai_erase ai_current_actor)
)

(script command_script void cs_bldg_c_bugger_scary03
    (cs_enable_moving false)
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_dialogue false)
    (ai_cannot_die ai_current_actor true)
    (sleep_until (or (volume_test_players "tv_bldg_c_scary03") (objects_can_see_object (players) (ai_get_object "sq_bldg_c_bugger_scary_03") 40)) 1)
    (cs_go_to "sd_bldg_c_bugger_scary/p2")
    (ai_erase ai_current_actor)
)

(script command_script void cs_bldg_c_bugger_scary04
    (cs_enable_moving false)
    (cs_enable_looking false)
    (cs_enable_targeting false)
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_dialogue false)
    (ai_cannot_die ai_current_actor true)
    (sleep_until (or (volume_test_players "tv_bldg_c_scary04") (objects_can_see_object (players) (ai_get_object "sq_bldg_c_bugger_scary_04") 40)) 1)
    (cs_enable_moving true)
    (cs_go_to "sd_bldg_c_bugger_scary/p3")
    (ai_erase ai_current_actor)
)

(script dormant void bldg_c_bugger_clump00
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_00" "v_bugger_vent_00")
)

(script dormant void bldg_c_bugger_clump01
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_01" "v_bugger_vent_01")
)

(script dormant void bldg_c_bugger_clump02
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_02" "v_bugger_vent_02")
)

(script dormant void bldg_c_bugger_clump03
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_03" "v_bugger_vent_03")
)

(script dormant void bldg_c_bugger_clump04
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_04" "v_bugger_vent_04")
)

(script dormant void bldg_c_bugger_clump05
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_05" "v_bugger_vent_05")
)

(script dormant void bldg_c_bugger_clump06
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_06" "v_bugger_vent_06")
)

(script dormant void bldg_c_bugger_clump07
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_07" "v_bugger_vent_07")
)

(script dormant void bldg_c_bugger_clump08
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_08" "v_bugger_vent_08")
)

(script dormant void bldg_c_bugger_clump09
    (sleep (random_range 5 15))
    (f_bugger_vent_exit "sq_bldg_c_bugger_09" "v_bugger_vent_09")
)

(script command_script void cs_bugger_swoop
    (cs_custom_animation "objects\characters\bugger\bugger" "flight:pistol:vent_exit" true)
)

(script static void (f_bugger_vent_exit (ai bugger, vehicle emitter))
    (ai_place bugger)
    (unit_enter_vehicle_immediate bugger emitter "vent")
    (sleep (random_range 5 15))
    (unit_open emitter)
    (ai_vehicle_exit bugger)
    (sleep 30)
    (unit_close emitter)
)

(script command_script void cs_bugger_kill_marine
    (if (> (ai_living_count "sq_bldg_c_scared_marine") 0)
        (begin
            (cs_fly_by "sd_bldg_c_bugger_scary/p9")
            (cs_fly_by "sd_bldg_c_bugger_scary/p6")
            (cs_fly_by "sd_bldg_c_bugger_scary/p7")
            (cs_fly_by "sd_bldg_c_bugger_scary/p8")
            (cs_enable_targeting true)
            (sleep_until (< (ai_living_count "sq_bldg_c_scared_marine") 1))
            (cs_enable_moving true)
            (cs_enable_looking true)
            (cs_enable_targeting true)
        )
    )
)

(script dormant void building_c_elev01
    (device_set_position_immediate "dm_bldg_c_elev01" 0)
    (device_set_power "dc_bldg_c_switch01c" 0)
    (kill_volume_disable "kill_elev01")
    (sleep_until 
        (begin
            (if (= (device_get_position "dm_bldg_c_elev01") 0)
                (begin
                    (device_set_position "dm_bldg_c_door01a" 1)
                    (device_set_power "dc_bldg_c_switch01b" 1)
                    (device_set_power "dc_bldg_c_switch01c" 1)
                    (device_set_power "dc_bldg_c_switch01a" 0)
                    (kill_volume_disable "kill_elev01")
                    false
                )
                (if (= (device_get_position "dm_bldg_c_elev01") 1)
                    (begin
                        (device_set_position "dm_bldg_c_door01b" 1)
                        (device_set_power "dc_bldg_c_switch01a" 1)
                        (device_set_power "dc_bldg_c_switch01c" 1)
                        (device_set_power "dc_bldg_c_switch01b" 0)
                        (kill_volume_enable "kill_elev01")
                        false
                    )
                    (if (and (< (device_get_position "dm_bldg_c_elev01") 1) (> (device_get_position "dm_bldg_c_elev01") 0))
                        (begin
                            (device_set_position "dm_bldg_c_door01a" 0)
                            (device_set_position "dm_bldg_c_door01b" 0)
                            (device_set_power "dc_bldg_c_switch01a" 0)
                            (device_set_power "dc_bldg_c_switch01b" 0)
                            (device_set_power "dc_bldg_c_switch01c" 0)
                            (set g_bldg_c_elev_active true)
                            (kill_volume_disable "kill_elev01")
                            false
                        )
                    )
                )
            )
        )
        1
    )
)

(script dormant void building_c_elev02
    (device_set_position_immediate "dm_bldg_c_elev02" 0)
    (device_set_power "dc_bldg_c_switch02c" 0)
    (kill_volume_disable "kill_elev02")
    (sleep_until 
        (begin
            (if (= (device_get_position "dm_bldg_c_elev02") 0)
                (begin
                    (device_set_position "dm_bldg_c_door02a" 1)
                    (device_set_power "dc_bldg_c_switch02b" 1)
                    (device_set_power "dc_bldg_c_switch02c" 1)
                    (device_set_power "dc_bldg_c_switch02a" 0)
                    (kill_volume_disable "kill_elev02")
                    false
                )
                (if (= (device_get_position "dm_bldg_c_elev02") 1)
                    (begin
                        (device_set_position "dm_bldg_c_door02b" 1)
                        (device_set_power "dc_bldg_c_switch02a" 1)
                        (device_set_power "dc_bldg_c_switch02c" 1)
                        (device_set_power "dc_bldg_c_switch02b" 0)
                        (kill_volume_enable "kill_elev02")
                        false
                    )
                    (if (and (< (device_get_position "dm_bldg_c_elev02") 1) (> (device_get_position "dm_bldg_c_elev02") 0))
                        (begin
                            (device_set_position "dm_bldg_c_door02a" 0)
                            (device_set_position "dm_bldg_c_door02b" 0)
                            (device_set_power "dc_bldg_c_switch02a" 0)
                            (device_set_power "dc_bldg_c_switch02b" 0)
                            (device_set_power "dc_bldg_c_switch02c" 0)
                            (set g_bldg_c_elev_active true)
                            (kill_volume_disable "kill_elev02")
                            false
                        )
                    )
                )
            )
        )
        1
    )
)

(script dormant void elevator_no_spawn00
    (sleep_until 
        (begin
            (if (and (> (object_get_health player0) 0) (volume_test_object "tv_bldg_c_elevator_shaft" player0))
                (begin
                    (game_save_cancel)
                    (game_safe_to_respawn false)
                    (if (and (= elevator_music_bool 1) (= (game_is_cooperative) false))
                        (begin
                            (set g_music_m52_03 2)
                            (set elevator_music_bool 0)
                        )
                    )
                    (if (>= g_music_m52_04 1)
                        (begin
                            (m52_really_stop)
                            (set g_music_m52_04 2)
                        )
                    )
                )
                (begin
                    (game_safe_to_respawn true)
                    (if (= (game_is_cooperative) false)
                        (if (= elevator_music_bool 0)
                            (begin
                                (set g_music_m52_03 1)
                                (set elevator_music_bool 1)
                            )
                        )
                    )
                )
            )
            false
        )
        1
    )
)

(script dormant void elevator_no_spawn01
    (sleep_until 
        (begin
            (if (and (> (object_get_health player1) 0) (volume_test_object "tv_bldg_c_elevator_shaft" player1))
                (begin
                    (game_save_cancel)
                    (game_safe_to_respawn false)
                    (if (>= g_music_m52_04 1)
                        (begin
                            (m52_really_stop)
                            (set g_music_m52_04 2)
                        )
                    )
                )
                (game_safe_to_respawn true)
            )
            false
        )
        1
    )
)

(script dormant void elevator_no_spawn02
    (sleep_until 
        (begin
            (if (and (> (object_get_health player2) 0) (volume_test_object "tv_bldg_c_elevator_shaft" player2))
                (begin
                    (game_save_cancel)
                    (game_safe_to_respawn false)
                    (if (>= g_music_m52_04 1)
                        (begin
                            (m52_really_stop)
                            (set g_music_m52_04 2)
                        )
                    )
                )
                (game_safe_to_respawn true)
            )
            false
        )
        1
    )
)

(script dormant void elevator_no_spawn03
    (sleep_until 
        (begin
            (if (and (> (object_get_health player3) 0) (volume_test_object "tv_bldg_c_elevator_shaft" player3))
                (begin
                    (game_save_cancel)
                    (game_safe_to_respawn false)
                    (if (>= g_music_m52_04 1)
                        (begin
                            (m52_really_stop)
                            (set g_music_m52_04 2)
                        )
                    )
                )
                (game_safe_to_respawn true)
            )
            false
        )
        1
    )
)

(script dormant void bugger_respawner
    (if (or (g_3coop_mode) (= (game_difficulty_get) legendary))
        (set s_bldg_c_bugger_max 30)
    )
    (if (or (g_3coop_mode) (= (game_difficulty_get) legendary))
        (set s_bldg_c_bugger_per_vent 2)
    )
    (if (or (g_3coop_mode) (= (game_difficulty_get) legendary))
        (set s_bldg_c_bugger_num 15)
    )
    (sleep_until 
        (begin
            (sleep_until (and (<= (ai_spawn_count "gr_bldg_c_buggers") 40) (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max)) 5)
            (begin_random
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_00") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_00" "v_bugger_vent_00")
                    )
                    (sleep 5)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_01") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_01" "v_bugger_vent_01")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_02") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_02" "v_bugger_vent_02")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_03") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_03" "v_bugger_vent_03")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_04") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_04" "v_bugger_vent_04")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_05") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_05" "v_bugger_vent_05")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_06") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_06" "v_bugger_vent_06")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_07") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_07" "v_bugger_vent_07")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_08") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep s_bldg_c_bugger_num)
                        (f_bugger_vent_exit "sq_bldg_c_bugger_08" "v_bugger_vent_08")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
                (if (and (< (ai_living_count "gr_bldg_c_buggers") s_bldg_c_bugger_max) (< (ai_living_count "sq_bldg_c_bugger_09") s_bldg_c_bugger_per_vent))
                    (begin
                        (sleep (random_range 5 15))
                        (f_bugger_vent_exit "sq_bldg_c_bugger_09" "v_bugger_vent_09")
                    )
                    (sleep s_bldg_c_bugger_num)
                )
            )
            false
        )
    )
)

(script dormant void building_c_horrible_kill01
    (sleep_until 
        (begin
            (sleep_until (volume_test_players "tv_building_c_kill_vol") 5)
            (if (and (volume_test_object "tv_building_c_kill_vol" player0) (not (f_player_flying player0)))
                (unit_kill (unit (player0)))
                (if (and (volume_test_object "tv_building_c_kill_vol" player1) (not (f_player_flying player1)))
                    (unit_kill (unit (player1)))
                    (if (and (volume_test_object "tv_building_c_kill_vol" player2) (not (f_player_flying player2)))
                        (unit_kill (unit (player2)))
                        (if (and (volume_test_object "tv_building_c_kill_vol" player3) (not (f_player_flying player3)))
                            (unit_kill (unit (player3)))
                        )
                    )
                )
            )
            false
        )
    )
)

(script static void (f_bldg_objective (device_name objective, device switch))
    (if (= (object_get_health objective) -1)
        (object_create_anew objective)
    )
    (object_cannot_take_damage objective)
    (sleep_until (>= (device_get_position switch) 1) 5)
    (f_unblip_object switch)
    (device_set_power switch 0)
    (device_set_position objective 1)
    (sleep 1)
    (sleep_until (>= (device_get_position objective) 1) 5 80)
    (object_can_take_damage objective)
    (object_set_shield objective 0)
    (sleep 10)
    (object_damage_damage_section objective "body" 1000)
    (object_destroy switch)
)

(script static boolean (f_objective_complete (device_name sc_objective, device switch))
    (if (and (<= (object_get_health sc_objective) 0) (>= (device_get_position switch) 0) (= (object_get_health switch) -1))
        true
    )
)

(script dormant void enc_oni
    (sleep_until (= m_progression 0) 5)
    (wake title_final)
    (wake m52_music_08)
    (erase_ambient_patrol)
    (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
    (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
    (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
    (data_mine_set_mission_segment "m52_route_to_building_oni")
    (sleep 10)
    (ai_erase "gr_turrets")
    (ai_place "sq_oni_cd_01")
    (ai_place "sq_oni_cd_02")
    (ai_place "sq_oni_cd_03")
    (sleep (* 30 (random_range 4 7)))
    (wake md_040_bldg_oni)
    (ai_set_objective "gr_banshee" "obj_oni")
    (wake oni_banshee_spawn)
    (wake hud_object_bldg_oni)
    (wake aj_mode)
    (sleep_until (volume_test_players "tv_oni_start") 5)
    (f_unblip_flag "cf_bldg_oni")
    (set b_oni_start true)
    (data_mine_set_mission_segment "m52_building_oni")
    (wake pelican01_hangar_load)
    (wake pelican02_hangar_load)
    (wake pelican03_hangar_load)
    (sleep 10)
    (sleep_until (= b_oni_begin true) 5 2400)
    (sleep_until (= (b_oni_end) true) 5)
    (set g_music_m52_08 2)
    (prepare_to_switch_to_zone_set "m52_040_oni")
    (wake md_040_oni_end)
    (data_mine_set_mission_segment "m52_building_oni_end")
    (sleep_until (script_finished "md_040_oni_end") 5)
    (switch_zone_set "m52_040_oni")
    (object_create "dm_end_oni_platform")
    (device_set_position "dm_end_oni_platform" 1)
    (sleep 60)
    (sleep_until (volume_test_players "tv_landing_pad_end") 5)
    (wake m52_cin_end)
)

(script static boolean b_oni_end
    (if (and (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_01/gunner")) 0) (< (ai_living_count "sq_oni_s_01") 1)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_02/gunner")) 0) (< (ai_living_count "sq_oni_s_02") 1)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_03/gunner")) 0) (< (ai_living_count "sq_oni_s_03") 1)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_04/gunner")) 0) (< (ai_living_count "sq_oni_s_04") 1)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_05/gunner")) 0) (< (ai_living_count "sq_oni_s_05") 1)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_06/gunner")) 0) (< (ai_living_count "sq_oni_s_06") 1)) (or (= oni_dropship01_exit true) (< (ai_living_count "sq_oni_cd_01") 1)) (or (= oni_dropship02_exit true) (< (ai_living_count "sq_oni_cd_02") 1)) (or (= oni_dropship03_exit true) (< (ai_living_count "sq_oni_cd_03") 1)))
        true
    )
)

(script dormant void falcon_friendly_final_battle
    (sleep_forever falcon_patrol)
    (sleep_forever phantom_patrol)
    (sleep_forever pelican_patrol)
    (ai_erase "gr_hub_falcons")
    (ai_erase "gr_hub_phantoms")
    (ai_erase "gr_hub_pelicans")
    (if (= g_prev_mission 1)
        (begin
            (ai_place "sq_falcon_final01")
            (set obj_final_falcon01 (ai_get_object "sq_falcon_final01/driver"))
            (cs_run_command_script "sq_falcon_final01/driver" cs_falcon_final_a1)
        )
        (if (= g_prev_mission 2)
            (begin
                (ai_place "sq_falcon_final01")
                (set obj_final_falcon01 (ai_get_object "sq_falcon_final01/driver"))
                (cs_run_command_script "sq_falcon_final01/driver" cs_falcon_final_b1)
            )
            (if (= g_prev_mission 3)
                (begin
                    (ai_place "sq_falcon_final01")
                    (set obj_final_falcon01 (ai_get_object "sq_falcon_final01/driver"))
                    (cs_run_command_script "sq_falcon_final01/driver" cs_falcon_final_c1)
                )
            )
        )
    )
)

(script command_script void cs_falcon_final_a1
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_squad "sd_final_falcon_a/p0")
    (cs_fly_by "sd_final_falcon_a/p3" 3)
    (ai_cannot_die ai_current_squad false)
    (f_blip_ai ai_current_actor 5)
    (sleep_until (and (= (f_players_flying) true) (or (< (objects_distance_to_object (players) obj_final_falcon01) 10) (volume_test_players "tv_oni_start"))))
    (ai_set_objective ai_current_squad "obj_oni")
)

(script command_script void cs_falcon_final_b1
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_squad "sd_final_falcon_b/p0")
    (cs_fly_by "sd_final_falcon_b/p3" 3)
    (ai_cannot_die ai_current_squad false)
    (f_blip_ai ai_current_actor 5)
    (sleep_until (and (= (f_players_flying) true) (or (< (objects_distance_to_object (players) obj_final_falcon01) 10) (volume_test_players "tv_oni_start"))))
    (ai_set_objective ai_current_squad "obj_oni")
)

(script command_script void cs_falcon_final_c1
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_squad "sd_final_falcon_c/p0")
    (cs_fly_by "sd_final_falcon_c/p3" 3)
    (ai_cannot_die ai_current_squad false)
    (f_blip_ai ai_current_actor 5)
    (sleep_until (and (= (f_players_flying) true) (or (< (objects_distance_to_object (players) obj_final_falcon01) 10) (volume_test_players "tv_oni_start"))))
    (ai_set_objective ai_current_squad "obj_oni")
)

(script dormant void pelican01_hangar_load
    (sleep (random_range 120 240))
    (ai_place "sq_oni_pelican01")
    (ai_disregard (ai_actors "sq_oni_pelican01") true)
    (object_cannot_take_damage (ai_vehicle_get_from_spawn_point "sq_oni_pelican01/pilot"))
    (objects_attach "oni_hangar_door_a" "marker_pelican" (ai_vehicle_get_from_spawn_point "sq_oni_pelican01/pilot") "pelican_attach")
    (sleep 30)
    (device_set_position "oni_hangar_door_a" 1)
    (sleep_until (>= (device_get_position "oni_hangar_door_a") 0.5) 5)
    (sleep 30)
    (objects_detach "oni_hangar_door_a" (ai_vehicle_get_from_spawn_point "sq_oni_pelican01/pilot"))
    (wake md_040_oni_pelican01)
    (sleep_until (and (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_01/gunner")) 0) (<= (ai_living_count "sq_oni_s_01") 0)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_02/gunner")) 0) (<= (ai_living_count "sq_oni_s_02") 0))) 5)
    (objects_detach "oni_hangar_door_a" (ai_vehicle_get_from_spawn_point "sq_oni_pelican01/pilot"))
    (ai_force_active "sq_oni_pelican01" true)
    (cs_run_command_script "sq_oni_pelican01/pilot" cs_pelican01_escape)
    (set pelican_status (+ pelican_status 1))
)

(script dormant void pelican02_hangar_load
    (sleep (random_range 120 240))
    (ai_place "sq_oni_pelican02")
    (ai_disregard (ai_actors "sq_oni_pelican02") true)
    (object_cannot_take_damage (ai_vehicle_get_from_spawn_point "sq_oni_pelican02/pilot"))
    (cs_run_command_script "sq_oni_pelican02/pilot" peaceful_flyer)
    (sleep 1)
    (objects_attach "oni_hangar_door_b" "marker_pelican" (ai_vehicle_get_from_spawn_point "sq_oni_pelican02/pilot") "pelican_attach")
    (device_set_position "oni_hangar_door_b" 1)
    (sleep_until (>= (device_get_position "oni_hangar_door_b") 0.5) 5)
    (sleep 30)
    (objects_detach "oni_hangar_door_b" (ai_vehicle_get_from_spawn_point "sq_oni_pelican02/pilot"))
    (wake md_040_oni_pelican02)
    (sleep_until (and (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_04/gunner")) 0) (<= (ai_living_count "sq_oni_s_04") 0)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_05/gunner")) 0) (<= (ai_living_count "sq_oni_s_05") 0))) 5)
    (sleep 30)
    (ai_force_active "sq_oni_pelican02" true)
    (cs_run_command_script "sq_oni_pelican02/pilot" cs_pelican02_escape)
    (set pelican_status (+ pelican_status 1))
)

(script dormant void pelican03_hangar_load
    (sleep (random_range 120 240))
    (ai_place "sq_oni_pelican03")
    (ai_disregard (ai_actors "sq_oni_pelican03") true)
    (object_cannot_take_damage (ai_vehicle_get_from_spawn_point "sq_oni_pelican03/pilot"))
    (cs_run_command_script "sq_oni_pelican03/pilot" peaceful_flyer)
    (sleep 1)
    (objects_attach "oni_hangar_door_c" "marker_pelican" (ai_vehicle_get_from_spawn_point "sq_oni_pelican03/pilot") "pelican_attach")
    (device_set_position "oni_hangar_door_c" 1)
    (sleep_until (>= (device_get_position "oni_hangar_door_c") 0.5) 5)
    (sleep 30)
    (objects_detach "oni_hangar_door_c" (ai_vehicle_get_from_spawn_point "sq_oni_pelican03/pilot"))
    (wake md_040_oni_pelican03)
    (sleep_until (and (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_03/gunner")) 0) (<= (ai_living_count "sq_oni_s_03") 0)) (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_06/gunner")) 0) (<= (ai_living_count "sq_oni_s_06") 0))) 5)
    (sleep 30)
    (ai_force_active "sq_oni_pelican03" true)
    (cs_run_command_script "sq_oni_pelican03/pilot" cs_pelican03_escape)
    (set pelican_status (+ pelican_status 1))
)

(script command_script void cs_pelican01_escape
    (cs_enable_pathfinding_failsafe true)
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_oni_pelican01/p0" 1)
    (device_set_position "oni_hangar_door_a" 0)
    (cs_fly_by "sd_oni_pelican01/p1" 3)
    (cs_fly_by "sd_oni_pelican01/p2" 3)
    (cs_fly_by "sd_oni_pelican01/p3" 3)
    (cs_fly_by "sd_oni_pelican01/p4" 3)
    (cs_fly_to "sd_oni_pelican01/p5" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_pelican02_escape
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "sd_oni_pelican02/p0" 1)
    (device_set_position "oni_hangar_door_b" 0)
    (cs_fly_by "sd_oni_pelican02/p1" 3)
    (cs_fly_by "sd_oni_pelican02/p2" 3)
    (cs_fly_by "sd_oni_pelican02/p3" 3)
    (cs_fly_by "sd_oni_pelican02/p4" 3)
    (cs_fly_to "sd_oni_pelican02/p5" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_pelican03_escape
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 0.5)
    (cs_fly_by "sd_oni_pelican03/p0" 3)
    (cs_vehicle_speed 1)
    (device_set_position "oni_hangar_door_c" 0)
    (cs_fly_by "sd_oni_pelican03/p1" 3)
    (cs_fly_by "sd_oni_pelican03/p2" 1)
    (cs_fly_by "sd_oni_pelican03/p3" 1)
    (cs_fly_by "sd_oni_pelican03/p4" 1)
    (cs_fly_to "sd_oni_pelican03/p5" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_cov_dropship_wave01
    (ai_cannot_die "sq_oni_cd_01" true)
    (cs_fly_by "sd_oni_dropship_wave01/p0")
    (ai_cannot_die "sq_oni_cd_01" false)
    (f_load_phantom_cargo (ai_vehicle_get_from_spawn_point "sq_oni_cd_01/pilot") "double" "sq_oni_s_01" "sq_oni_s_02")
    (wake md_040_oni_aa01)
    (wake md_040_oni_aa02)
    (cs_ignore_obstacles true)
    (cs_fly_to "sd_oni_dropship_wave01/p1" 3)
    (cs_fly_to "sd_oni_dropship_wave01/p2" 1)
    (cs_vehicle_speed 0.5)
    (cs_fly_to "sd_oni_dropship_wave01/p3" 1)
    (wake oni_shade_1)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_oni_cd_01/pilot") 14)
    (cs_fly_to "sd_oni_dropship_wave01/p2" 1)
    (cs_fly_to "sd_oni_dropship_wave01/p4" 1)
    (cs_fly_to "sd_oni_dropship_wave01/p5" 1)
    (sleep 30)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_oni_cd_01/pilot") 15)
    (wake oni_shade_2)
    (set oni_dropship01_exit true)
    (cs_fly_to "sd_oni_dropship_wave01/p4" 1)
    (cs_fly_by "sd_oni_dropship_wave01/p6")
    (if (or (g_3coop_mode) (= (game_difficulty_get) legendary) true)
        (begin
            (cs_fly_to_and_face "sd_oni_dropship_wave01/p9" "sd_oni_dropship_wave01/p10")
            (sleep_until (= (b_oni_end) true) 5)
        )
    )
    (cs_fly_by "sd_oni_dropship_wave01/p7")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_oni_dropship_wave01/p8")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void oni_shade_1
    (sleep 15)
    (objects_attach "sc_oni_01" "marker01" (ai_vehicle_get_from_spawn_point "sq_oni_s_01/gunner") "")
    (cs_run_command_script "sq_oni_s_01" cs_shade_fire_oni)
    (sleep 15)
    (objects_detach "sc_oni_01" (ai_vehicle_get_from_spawn_point "sq_oni_s_01/gunner"))
    (sleep_until (= b_oni_start true) 5)
    (sleep 60)
    (f_blip_ai "sq_oni_s_01" 15)
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_01/gunner")) 0) (<= (ai_living_count "sq_oni_s_01") 0)) 5)
    (f_unblip_ai "sq_oni_s_01")
)

(script dormant void oni_shade_2
    (sleep 15)
    (objects_attach "sc_oni_02" "marker01" (ai_vehicle_get_from_spawn_point "sq_oni_s_02/gunner") "")
    (cs_run_command_script "sq_oni_s_02" cs_shade_fire_oni)
    (sleep 15)
    (objects_detach "sc_oni_02" (ai_vehicle_get_from_spawn_point "sq_oni_s_02/gunner"))
    (sleep_until (= b_oni_start true) 5)
    (sleep 60)
    (f_blip_ai "sq_oni_s_02" 15)
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_02/gunner")) 0) (<= (ai_living_count "sq_oni_s_02") 0)) 5)
    (f_unblip_ai "sq_oni_s_02")
)

(script command_script void cs_cov_dropship_wave02
    (ai_cannot_die "sq_oni_cd_02" true)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_oni_dropship_wave02/p0")
    (ai_cannot_die "sq_oni_cd_02" false)
    (f_load_phantom_cargo (ai_vehicle_get_from_spawn_point "sq_oni_cd_02/pilot") "double" "sq_oni_s_04" "sq_oni_s_05")
    (wake md_040_oni_aa04)
    (wake md_040_oni_aa05)
    (cs_fly_to "sd_oni_dropship_wave02/p1" 3)
    (cs_fly_to "sd_oni_dropship_wave02/p2" 1)
    (sleep 30)
    (cs_fly_to "sd_oni_dropship_wave02/p3" 0.5)
    (sleep 30)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_oni_cd_02/pilot") 14)
    (wake oni_shade_4)
    (cs_fly_to "sd_oni_dropship_wave02/p2" 1)
    (cs_fly_to "sd_oni_dropship_wave02/p4" 3)
    (cs_fly_to "sd_oni_dropship_wave02/p5" 1)
    (cs_fly_to "sd_oni_dropship_wave02/p6" 1)
    (sleep 30)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_oni_cd_02/pilot") 15)
    (wake oni_shade_5)
    (set oni_dropship02_exit true)
    (cs_fly_to "sd_oni_dropship_wave02/p5" 3)
    (if (or (g_3coop_mode) (= (game_difficulty_get) legendary) true)
        (begin
            (cs_fly_to_and_face "sd_oni_dropship_wave02/p9" "sd_oni_dropship_wave02/p10")
            (sleep_until (= (b_oni_end) true) 5)
            (cs_fly_to "sd_oni_dropship_wave02/p4")
        )
    )
    (cs_fly_to "sd_oni_dropship_wave02/p7")
    (cs_ignore_obstacles false)
    (cs_fly_to "sd_oni_dropship_wave02/p8")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void oni_shade_4
    (sleep 15)
    (objects_attach "sc_oni_04" "marker01" (ai_vehicle_get_from_spawn_point "sq_oni_s_04/gunner") "")
    (cs_run_command_script "sq_oni_s_04" cs_shade_fire_oni)
    (sleep 15)
    (objects_detach "sc_oni_04" (ai_vehicle_get_from_spawn_point "sq_oni_s_04/gunner"))
    (sleep_until (= b_oni_start true) 5)
    (sleep 60)
    (f_blip_ai "sq_oni_s_04" 15)
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_04/gunner")) 0) (<= (ai_living_count "sq_oni_s_04") 0)) 5)
    (f_unblip_ai "sq_oni_s_04")
)

(script dormant void oni_shade_5
    (sleep 15)
    (objects_attach "sc_oni_05" "marker01" (ai_vehicle_get_from_spawn_point "sq_oni_s_05/gunner") "")
    (cs_run_command_script "sq_oni_s_05" cs_shade_fire_oni)
    (sleep 15)
    (objects_detach "sc_oni_05" (ai_vehicle_get_from_spawn_point "sq_oni_s_05/gunner"))
    (sleep_until (= b_oni_start true) 5)
    (sleep 60)
    (f_blip_ai "sq_oni_s_05" 15)
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_05/gunner")) 0) (<= (ai_living_count "sq_oni_s_05") 0)) 5)
    (f_unblip_ai "sq_oni_s_05")
)

(script command_script void cs_cov_dropship_wave03
    (ai_cannot_die "sq_oni_cd_03" true)
    (cs_fly_by "sd_oni_dropship_wave03/p0" 3)
    (ai_cannot_die "sq_oni_cd_03" false)
    (cs_ignore_obstacles true)
    (f_load_phantom_cargo (ai_vehicle_get_from_spawn_point "sq_oni_cd_03/pilot") "double" "sq_oni_s_03" "sq_oni_s_06")
    (wake md_040_oni_aa03)
    (wake md_040_oni_aa06)
    (cs_fly_to "sd_oni_dropship_wave03/p1" 3)
    (cs_fly_to "sd_oni_dropship_wave03/p2" 2)
    (cs_vehicle_speed 0.7)
    (cs_fly_to "sd_oni_dropship_wave03/p3" 1)
    (sleep 45)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_oni_cd_03/pilot") 14)
    (wake oni_shade_3)
    (cs_vehicle_speed 1)
    (cs_fly_to "sd_oni_dropship_wave03/p2" 2)
    (cs_fly_by "sd_oni_dropship_wave03/p4" 3)
    (cs_fly_to "sd_oni_dropship_wave03/p5" 1)
    (cs_fly_to "sd_oni_dropship_wave03/p6" 1)
    (sleep 30)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_oni_cd_03/pilot") 15)
    (wake oni_shade_6)
    (set oni_dropship03_exit true)
    (cs_fly_to "sd_oni_dropship_wave03/p5" 3)
    (cs_fly_to_and_face "sd_oni_dropship_wave03/p9" "sd_oni_dropship_wave03/p10")
    (sleep_until (= (b_oni_end) true) 5)
    (cs_fly_to "sd_oni_dropship_wave03/p7")
    (cs_ignore_obstacles false)
    (cs_fly_to "sd_oni_dropship_wave03/p8")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void oni_shade_3
    (sleep 15)
    (objects_attach "sc_oni_03" "marker01" (ai_vehicle_get_from_spawn_point "sq_oni_s_03/gunner") "")
    (cs_run_command_script "sq_oni_s_03" cs_shade_fire_oni)
    (sleep 15)
    (objects_detach "sc_oni_03" (ai_vehicle_get_from_spawn_point "sq_oni_s_03/gunner"))
    (sleep_until (= b_oni_start true) 5)
    (sleep 60)
    (f_blip_ai "sq_oni_s_03" 15)
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_03/gunner")) 0) (<= (ai_living_count "sq_oni_s_03") 0)) 5)
    (f_unblip_ai "sq_oni_s_03")
)

(script dormant void oni_shade_6
    (sleep 15)
    (objects_attach "sc_oni_06" "marker01" (ai_vehicle_get_from_spawn_point "sq_oni_s_06/gunner") "")
    (cs_run_command_script "sq_oni_s_06" cs_shade_fire_oni)
    (sleep 15)
    (objects_detach "sc_oni_06" (ai_vehicle_get_from_spawn_point "sq_oni_s_06/gunner"))
    (sleep_until (= b_oni_start true) 5)
    (sleep 60)
    (f_blip_ai "sq_oni_s_06" 15)
    (sleep_until (or (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_s_06/gunner")) 0) (<= (ai_living_count "sq_oni_s_06") 0)) 5)
    (f_unblip_ai "sq_oni_s_06")
)

(script command_script void peaceful_flyer
    (sleep_forever)
)

(script command_script void cs_banshee_flee
    (cs_vehicle_boost true)
    (begin_random_count
        1
        (cs_fly_by "sd_banshee_flee/p0" 10)
        (cs_fly_by "sd_banshee_flee/p1" 10)
        (cs_fly_by "sd_banshee_flee/p2" 10)
        (cs_fly_by "sd_banshee_flee/p3" 10)
        (cs_fly_by "sd_banshee_flee/p4" 10)
    )
    (begin_random_count
        1
        (cs_fly_by "sd_banshee_flee/p5" 10)
        (cs_fly_by "sd_banshee_flee/p6" 10)
        (cs_fly_by "sd_banshee_flee/p7" 10)
        (cs_fly_by "sd_banshee_flee/p8" 10)
        (cs_fly_by "sd_banshee_flee/p9" 10)
    )
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_shade_fire_oni
    (set b_oni_begin true)
    (cs_abort_on_damage true)
    (sleep_until 
        (begin
            (begin_random_count
                1
                (begin
                    (cs_enable_targeting true)
                    (cs_enable_looking true)
                    (sleep 300)
                )
                (begin
                    (cs_enable_targeting false)
                    (cs_enable_looking false)
                    (begin_random_count
                        2
                        (cs_shoot_point true "sd_oni_shades/p0")
                        (cs_shoot_point true "sd_oni_shades/p1")
                        (cs_shoot_point true "sd_oni_shades/p2")
                        (cs_shoot_point true "sd_oni_shades/p3")
                        (cs_shoot_point true "sd_oni_shades/p4")
                        (cs_shoot_point true "sd_oni_shades/p5")
                        (cs_shoot_point true "sd_oni_shades/p6")
                        (cs_shoot_point true "sd_oni_shades/p7")
                        (cs_shoot_point true "sd_oni_shades/p8")
                        (cs_shoot_point true "sd_oni_shades/p9")
                        (cs_shoot_point true "sd_oni_shades/p10")
                        (cs_shoot_point true "sd_oni_shades/p11")
                        (cs_shoot_point true "sd_oni_shades/p12")
                        (cs_shoot_point true "sd_oni_shades/p13")
                        (cs_shoot_point true "sd_oni_shades/p14")
                        (cs_shoot_point true "sd_oni_shades/p15")
                        (cs_shoot_point true "sd_oni_shades/p16")
                        (cs_shoot_point true "sd_oni_shades/p17")
                        (cs_shoot_point true "sd_oni_shades/p18")
                        (cs_shoot_point true "sd_oni_shades/p19")
                        (cs_shoot_point true "sd_oni_shades/p20")
                        (cs_shoot_point true "sd_oni_shades/p21")
                        (cs_shoot_point true "sd_oni_shades/p22")
                        (cs_shoot_point true "sd_oni_shades/p23")
                        (cs_shoot_point true "sd_oni_shades/p24")
                        (cs_shoot_point true "sd_oni_shades/p25")
                        (cs_shoot_point true "sd_oni_shades/p26")
                        (cs_shoot_point true "sd_oni_shades/p27")
                        (cs_shoot_point true "sd_oni_shades/p28")
                        (cs_shoot_point true "sd_oni_shades/p29")
                        (cs_shoot_point true "sd_oni_shades/p30")
                    )
                )
            )
            false
        )
        30
    )
)

(script dormant void oni_banshee_spawn
    (if (or (= (game_difficulty_get) legendary) (= (g_3coop_mode) true))
        (set s_oni_banshee_num 10)
    )
    (sleep_forever banshee_spawn)
    (sleep_until 
        (begin
            (if (<= (ai_living_count "gr_banshee") s_oni_banshee_num)
                (begin_random
                    (if (and (<= (ai_living_count "gr_banshee") s_oni_banshee_num) (<= (ai_living_count "sq_oni_banshee_01") 1))
                        (begin
                            (ai_place "sq_oni_banshee_01")
                            (ai_set_clump "sq_oni_banshee_01" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (<= (ai_living_count "gr_banshee") s_oni_banshee_num) (<= (ai_living_count "sq_oni_banshee_02") 1))
                        (begin
                            (ai_place "sq_oni_banshee_02")
                            (ai_set_clump "sq_oni_banshee_02" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (<= (ai_living_count "gr_banshee") s_oni_banshee_num) (<= (ai_living_count "sq_oni_banshee_03") 1))
                        (begin
                            (ai_place "sq_oni_banshee_03")
                            (ai_set_clump "sq_oni_banshee_03" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (<= (ai_living_count "gr_banshee") s_oni_banshee_num) (<= (ai_living_count "sq_oni_banshee_04") 1))
                        (begin
                            (ai_place "sq_oni_banshee_04")
                            (ai_set_clump "sq_oni_banshee_04" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (<= (ai_living_count "gr_banshee") s_oni_banshee_num) (<= (ai_living_count "sq_oni_banshee_05") 1))
                        (begin
                            (ai_place "sq_oni_banshee_05")
                            (ai_set_clump "sq_oni_banshee_05" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (<= (ai_living_count "gr_banshee") s_oni_banshee_num) (<= (ai_living_count "sq_oni_banshee_06") 1))
                        (begin
                            (ai_place "sq_oni_banshee_06")
                            (ai_set_clump "sq_oni_banshee_06" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                )
            )
            (b_oni_end)
        )
    )
)

(script static void (sec_objective (short l_instances))
    (f_zone_teleport_player0)
    (f_zone_teleport_player1)
    (f_zone_teleport_player2)
    (f_zone_teleport_player3)
    (prepare_to_switch_to_zone_set "m52_000_secondary")
    (sleep 210)
    (switch_zone_set "m52_000_secondary")
    (sleep_until (= (current_zone_set_fully_active) 5) 1)
    (falcon_gunner_reserve false)
    (sleep 30)
    (sleep_until 
        (begin
            (begin_random_count
                l_instances
                (set m_sec_alpha true)
                (set m_sec_beta true)
                (set m_sec_gamma true)
                (set m_sec_delta true)
            )
            (sleep (* (random_range 5 10) 30))
            (= m_sec_started l_instances)
        )
        1
    )
    (sleep_until (= m_sec_complete l_instances) 5)
    (set m_sec_started 0)
    (set m_sec_complete 0)
    (if (g_3coop_mode)
        (set m_coop_1st_dialog true)
    )
    (falcon_gunner_reserve false)
    (sleep 90)
    (game_save)
    (sleep 90)
)

(script static void test_secondary_objectives
    (prepare_to_switch_to_zone_set "m52_000_secondary")
    (sleep 300)
    (switch_zone_set "m52_000_secondary")
    (sec_ai_alpha_1)
    (sec_ai_beta_1)
    (sec_ai_gamma_1)
    (sec_ai_delta_1)
    (sec_ai_alpha_2)
    (sec_ai_beta_2)
    (sec_ai_gamma_2)
    (sec_ai_delta_2)
    (sec_ai_alpha_3)
    (sec_ai_beta_3)
    (sec_ai_gamma_3)
    (sec_ai_delta_3)
)

(script dormant void sec_obj_alpha
    (sleep_until (and (= m_alpha_complete false) (= m_sec_alpha true)) 1)
    (set m_sec_started (+ m_sec_started 1))
    (begin_random_count
        1
        (sec_ai_alpha_1)
        (sec_ai_alpha_2)
        (sec_ai_alpha_3)
    )
    (set m_alpha_complete true)
    (set m_sec_complete (+ m_sec_complete 1))
)

(script static void sec_ai_alpha_1
    (data_mine_set_mission_segment "m52_sec_alpha_1")
    (set g_alpha_enc 1)
    (ai_place "sq_sec_alpha_cd01")
    (ai_force_active "sq_sec_alpha_cd01" true)
    (sleep_until (or (< (ai_living_count "sq_sec_alpha_cd01") 1) (= m_sec_alpha01_start true)) 5)
    (sleep_until (f_hub_and_radius_check "cf_sec_alpha_1" 50) 5)
    (ai_set_targeting_group "gr_marines" 2)
    (ai_set_targeting_group "gr_banshee" 2)
    (sleep_until (or (< (ai_living_count "gr_alpha_cov") 1) (< (ai_living_count "gr_alpha_marine") 1)) 5)
    (if (and (> (ai_living_count "gr_alpha_marine") 0) (< (ai_living_count "gr_alpha_cov") 1))
        (begin
            (ai_place "sq_sec_alpha_p01")
            (ai_force_active "sq_sec_alpha_p01" true)
        )
    )
    (sleep_until (< (ai_living_count "gr_alpha_marine") 1) 5)
    (if (> (ai_living_count "sq_sec_alpha_p01") 1)
        (md_050_sec_success_alpha1)
        (md_050_sec_fail_alpha1)
    )
    (ai_set_targeting_group "gr_marines" 65535)
    (ai_set_targeting_group "gr_banshee" 65535)
    (f_unblip_flag "cf_sec_alpha_1")
)

(script static void sec_ai_alpha_2
    (data_mine_set_mission_segment "m52_sec_alpha_2")
    (set g_alpha_enc 2)
    (ai_place "sq_sec_alpha_cd02")
    (ai_force_active "sq_sec_alpha_cd02" true)
    (sleep_until (= m_sec_alpha02_start true) 5)
    (sleep_until (f_hub_and_radius_check "cf_sec_alpha_2" 50) 5)
    (ai_set_targeting_group "gr_marines" 2)
    (ai_set_targeting_group "gr_banshee" 2)
    (sleep_until (or (< (ai_living_count "gr_alpha_cov") 1) (< (ai_living_count "gr_alpha_marine") 1)) 5)
    (if (and (> (ai_living_count "gr_alpha_marine") 0) (< (ai_living_count "gr_alpha_cov") 1))
        (begin
            (ai_place "sq_sec_alpha_p02")
            (ai_force_active "sq_sec_alpha_p02" true)
        )
    )
    (sleep_until (< (ai_living_count "gr_alpha_marine") 1) 5)
    (if (> (ai_living_count "sq_sec_alpha_p02") 1)
        (md_050_sec_success_alpha2)
        (md_050_sec_fail_alpha2)
    )
    (ai_set_targeting_group "gr_marines" 65535)
    (ai_set_targeting_group "gr_banshee" 65535)
    (f_unblip_flag "cf_sec_alpha_2")
    (f_unblip_ai "sq_sec_alpha_m02")
)

(script static void sec_ai_alpha_3
    (data_mine_set_mission_segment "m52_sec_alpha_3")
    (sleep_until (= (current_zone_set_fully_active) 5) 1 1200)
    (set g_alpha_enc 3)
    (ai_place "sq_sec_alpha_m03")
    (ai_force_active "sq_sec_alpha_m03" true)
    (ai_cannot_die "sq_sec_alpha_m03" true)
    (ai_force_full_lod "sq_sec_alpha_m03")
    (sleep 60)
    (ai_place "sq_sec_alpha_c03a")
    (ai_force_active "sq_sec_alpha_c03a" true)
    (ai_cannot_die "sq_sec_alpha_c03a" true)
    (ai_force_full_lod "sq_sec_alpha_c03a")
    (wake md_050_sec_alpha3)
    (sleep_until (f_hub_and_radius_check "cf_sec_alpha_3" 60) 5)
    (ai_cannot_die "sq_sec_alpha_c03a" false)
    (ai_set_targeting_group "gr_marines" 2)
    (ai_set_targeting_group "gr_banshee" 2)
    (f_blip_ai "sq_sec_alpha_m03" 5)
    (f_blip_ai "sq_sec_alpha_c03a" 15)
    (sleep_until (f_hub_and_radius_check "cf_sec_alpha_3" 40) 5 300)
    (ai_cannot_die "sq_sec_alpha_m03" false)
    (sleep_until (or (< (ai_living_count "gr_alpha_cov") 1) (< (ai_living_count "gr_alpha_marine") 1)) 5)
    (if (and (> (ai_living_count "gr_alpha_marine") 0) (< (ai_living_count "gr_alpha_cov") 1))
        (begin
            (ai_place "sq_sec_alpha_p03")
            (ai_force_active "sq_sec_alpha_p03" true)
        )
    )
    (sleep_until (< (ai_living_count "sq_sec_alpha_m03") 1))
    (if (> (ai_living_count "sq_sec_alpha_p03") 1)
        (md_050_sec_success_alpha3)
        (md_050_sec_fail_alpha3)
    )
    (ai_set_targeting_group "gr_marines" 65535)
    (ai_set_targeting_group "gr_banshee" 65535)
    (f_unblip_flag "cf_sec_alpha_3")
    (f_unblip_ai "sq_sec_alpha_m03")
)

(script command_script void cs_failsafe_alpha_1
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_alpha_1" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_failsafe_alpha_2
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_alpha_2" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_failsafe_alpha_3
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_alpha_3" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_failsafe_alpha_3a
    (cs_enable_dialogue true)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_alpha_3" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script dormant void alpha_1_dropoff
    (sleep_until (f_hub_and_radius_check "cf_sec_alpha_1" 50) 5)
    (sleep 5)
    (ai_cannot_die "sq_sec_alpha_c01a" false)
    (ai_cannot_die "sq_sec_alpha_c01b" false)
    (ai_cannot_die "sq_sec_alpha_m01" false)
    (f_blip_ai "sq_sec_alpha_m01" 5)
    (f_blip_ai "sq_sec_alpha_c01a" 15)
    (f_blip_ai "sq_sec_alpha_c01b" 15)
)

(script command_script void cs_dropship_alpha_1
    (object_cannot_die (ai_vehicle_get ai_current_actor) true)
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_vehicle_speed_instantaneous 1)
    (cs_vehicle_boost true)
    (cs_fly_to "sd_obj_alpha_1/phantom_start")
    (f_load_phantom (ai_vehicle_get_from_spawn_point "sq_sec_alpha_cd01/pilot") "right" "sq_sec_alpha_c01a" "sq_sec_alpha_c01b" none none)
    (ai_place "sq_sec_alpha_m01")
    (ai_cannot_die "sq_sec_alpha_m01" true)
    (ai_force_active "sq_sec_alpha_m01" true)
    (ai_force_full_lod "sq_sec_alpha_m01")
    (cs_fly_to "sd_obj_alpha_1/phantom_fly" 1)
    (cs_ignore_obstacles true)
    (cs_vehicle_boost false)
    (cs_face true "sd_obj_alpha_1/phantom_face")
    (cs_fly_to "sd_obj_alpha_1/phantom_land")
    (f_unload_phantom (ai_vehicle_get_from_spawn_point "sq_sec_alpha_cd01/pilot") "right")
    (wake md_050_sec_alpha1)
    (ai_cannot_die "sq_sec_alpha_c01a" true)
    (ai_cannot_die "sq_sec_alpha_c01b" true)
    (ai_force_active "sq_sec_alpha_c01a" true)
    (ai_force_active "sq_sec_alpha_c01b" true)
    (ai_force_full_lod "sq_sec_alpha_c01a")
    (ai_force_full_lod "sq_sec_alpha_c01b")
    (set m_sec_alpha01_start true)
    (cs_run_command_script "sq_sec_alpha_c01a" cs_failsafe_alpha_1)
    (cs_run_command_script "sq_sec_alpha_c01b" cs_failsafe_alpha_1)
    (ai_magically_see "sq_sec_alpha_c01a" "sq_sec_alpha_m01")
    (ai_magically_see "sq_sec_alpha_c01b" "sq_sec_alpha_m01")
    (ai_magically_see "sq_sec_alpha_m01" "sq_sec_alpha_c01a")
    (ai_magically_see "sq_sec_alpha_m01" "sq_sec_alpha_c01b")
    (wake alpha_1_dropoff)
    (object_cannot_die (ai_vehicle_get ai_current_actor) false)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_obj_alpha_1/phantom_fly_2")
    (cs_face false "sd_obj_alpha_1/phantom_face")
    (cs_vehicle_boost true)
    (cs_fly_to "sd_obj_alpha_1/phantom_exit" 10)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_pelican_alpha_1
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_vehicle_speed_instantaneous 1)
    (cs_vehicle_boost true)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_obj_alpha_1/pelican_start")
    (ai_cannot_die ai_current_squad false)
    (cs_fly_to "sd_obj_alpha_1/pelican_fly")
    (cs_face true "sd_obj_alpha_1/pelican_face")
    (cs_vehicle_boost false)
    (cs_vehicle_speed 0.5)
    (sleep 30)
    (cs_fly_to "sd_obj_alpha_1/pelican_land" 1)
    (set g_alpha_1_marine_safe true)
    (wake alpha_1_vehicle_enter)
    (cs_run_command_script "sq_sec_alpha_m01" cs_kill_script)
    (f_unblip_ai "sq_sec_alpha_m01")
    (f_load_troopers_sec "sq_sec_alpha_p01/pilot" "sq_sec_alpha_p01" 300 "sq_sec_alpha_m01")
    (sleep 30)
    (cs_face false "sd_obj_alpha_1/pelican_face")
    (cs_vehicle_speed 1)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_obj_alpha_1/pelican_exit" 10)
    (ai_erase "sq_sec_alpha_m01")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void alpha_1_vehicle_enter
    (sleep s_entry_timeout)
    (ai_vehicle_enter_immediate "sq_sec_alpha_m01" (ai_vehicle_get_from_spawn_point "sq_sec_alpha_p01/pilot") 16)
)

(script command_script void cs_pelican_alpha_2
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_vehicle_speed_instantaneous 1)
    (cs_vehicle_boost true)
    (cs_ignore_obstacles true)
    (cs_fly_to "sd_obj_alpha_2/pelican_start")
    (ai_cannot_die ai_current_squad false)
    (cs_fly_to "sd_obj_alpha_2/pelican_fly" 1)
    (cs_face true "sd_obj_alpha_2/pelican_face")
    (cs_vehicle_boost false)
    (cs_vehicle_speed 0.5)
    (sleep 30)
    (cs_fly_to "sd_obj_alpha_2/pelican_land" 0.5)
    (set g_alpha_2_marine_safe true)
    (wake alpha_2_vehicle_enter)
    (cs_run_command_script "sq_sec_alpha_m02" cs_kill_script)
    (f_unblip_ai "sq_sec_alpha_m02")
    (f_load_troopers_sec "sq_sec_alpha_p02/pilot" "sq_sec_alpha_p02" 300 "sq_sec_alpha_m02")
    (cs_face false "sd_obj_alpha_2/pelican_face")
    (cs_vehicle_speed 1)
    (cs_fly_to "sd_obj_alpha_2/pelican_fly" 1)
    (cs_vehicle_boost true)
    (cs_fly_to "sd_obj_alpha_2/pelican_exit" 5)
    (ai_erase "sq_sec_alpha_m02")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void alpha_2_vehicle_enter
    (sleep s_entry_timeout)
    (ai_vehicle_enter_immediate "sq_sec_alpha_m02" (ai_vehicle_get_from_spawn_point "sq_sec_alpha_p02/pilot") 16)
)

(script dormant void alpha_2_dropoff
    (sleep_until (f_hub_and_radius_check "cf_sec_alpha_2" 75) 5)
    (sleep 5)
    (ai_cannot_die "gr_alpha_cov" false)
    (ai_cannot_die "gr_alpha_marine" false)
    (f_blip_ai "sq_sec_alpha_m02" 5)
    (f_blip_ai "sq_sec_alpha_c02a" 15)
    (f_blip_ai "sq_sec_alpha_c02b" 15)
)

(script command_script void cs_dropship_alpha_2
    (object_cannot_die (ai_vehicle_get ai_current_actor) true)
    (ai_cannot_die ai_current_squad true)
    (cs_vehicle_speed_instantaneous 1)
    (cs_vehicle_boost true)
    (cs_fly_to "sd_obj_alpha_2/phantom_start")
    (f_load_phantom (ai_vehicle_get_from_spawn_point "sq_sec_alpha_cd02/pilot") "left" "sq_sec_alpha_c02a" "sq_sec_alpha_c02b" none none)
    (ai_place "sq_sec_alpha_m02")
    (ai_force_active "sq_sec_alpha_m02" true)
    (ai_force_full_lod "sq_sec_alpha_m02")
    (ai_cannot_die "sq_sec_alpha_m02" true)
    (cs_fly_to "sd_obj_alpha_2/phantom_fly")
    (cs_ignore_obstacles true)
    (cs_face true "sd_obj_alpha_2/phantom_face")
    (cs_vehicle_boost false)
    (cs_fly_to "sd_obj_alpha_2/phantom_land")
    (sleep 120)
    (vehicle_hover (ai_vehicle_get_from_spawn_point "sq_sec_alpha_cd02/pilot") true)
    (f_unload_phantom (ai_vehicle_get_from_spawn_point "sq_sec_alpha_cd02/pilot") "left")
    (object_cannot_die (ai_vehicle_get ai_current_actor) false)
    (ai_cannot_die ai_current_squad false)
    (wake md_050_sec_alpha2)
    (ai_cannot_die "sq_sec_alpha_c02a" true)
    (ai_force_active "sq_sec_alpha_c02a" true)
    (ai_cannot_die "sq_sec_alpha_c02b" true)
    (ai_force_active "sq_sec_alpha_c02b" true)
    (ai_force_full_lod "sq_sec_alpha_c02a")
    (ai_force_full_lod "sq_sec_alpha_c02b")
    (set m_sec_alpha02_start true)
    (cs_run_command_script "sq_sec_alpha_c02a" cs_failsafe_alpha_2)
    (cs_run_command_script "sq_sec_alpha_c02b" cs_failsafe_alpha_2)
    (ai_magically_see "sq_sec_alpha_c02a" "sq_sec_alpha_m02")
    (ai_magically_see "sq_sec_alpha_c02b" "sq_sec_alpha_m02")
    (ai_magically_see "sq_sec_alpha_m02" "sq_sec_alpha_c02a")
    (ai_magically_see "sq_sec_alpha_m02" "sq_sec_alpha_c02b")
    (wake alpha_2_dropoff)
    (vehicle_hover (ai_vehicle_get_from_spawn_point "sq_sec_alpha_cd02/pilot") false)
    (cs_face false "sd_obj_alpha_2/phantom_face")
    (cs_fly_to "sd_obj_alpha_2/phantom_fly_2")
    (cs_vehicle_boost true)
    (cs_fly_to "sd_obj_alpha_2/phantom_exit" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_pelican_alpha_3
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_obj_alpha_3/pelican_start")
    (ai_cannot_die ai_current_squad false)
    (cs_face true "sd_obj_alpha_3/pelican_face")
    (cs_fly_by "sd_obj_alpha_3/pelican_fly" 1)
    (sleep 30)
    (cs_fly_to "sd_obj_alpha_3/pelican_land" 1)
    (set g_alpha_3_marine_safe true)
    (wake alpha_3_vehicle_enter)
    (cs_run_command_script "sq_sec_alpha_m03" cs_kill_script)
    (f_unblip_ai "sq_sec_alpha_m03")
    (f_load_troopers_sec "sq_sec_alpha_p03/pilot" "sq_sec_alpha_p03" 240 "sq_sec_alpha_m03")
    (cs_face false "sd_obj_alpha_3/pelican_face")
    (cs_fly_by "sd_obj_alpha_3/pelican_fly" 2)
    (cs_fly_to "sd_obj_alpha_3/pelican_exit" 5)
    (ai_erase "sq_sec_alpha_m03")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void alpha_3_vehicle_enter
    (sleep s_entry_timeout)
    (ai_vehicle_enter_immediate "sq_sec_alpha_m03" (ai_vehicle_get_from_spawn_point "sq_sec_alpha_p03/pilot") 16)
)

(script dormant void sec_obj_beta
    (sleep_until (and (= m_beta_complete false) (= m_sec_beta true)) 1)
    (set m_sec_started (+ m_sec_started 1))
    (begin_random_count
        1
        (sec_ai_beta_1)
        (sec_ai_beta_2)
        (sec_ai_beta_3)
    )
    (set m_beta_complete true)
    (set m_sec_complete (+ m_sec_complete 1))
)

(script static void sec_ai_beta_1
    (data_mine_set_mission_segment "m52_sec_beta_1")
    (set g_beta_enc 1)
    (ai_place "sq_sec_beta_c01a")
    (ai_force_active "sq_sec_beta_c01a" true)
    (ai_force_full_lod "sq_sec_beta_c01a")
    (ai_place "sq_sec_beta_c01b")
    (ai_force_active "sq_sec_beta_c01b" true)
    (ai_force_full_lod "sq_sec_beta_c01b")
    (ai_place "sq_sec_beta_c01c")
    (ai_force_active "sq_sec_beta_c01c" true)
    (ai_force_full_lod "sq_sec_beta_c01c")
    (ai_place "sq_sec_beta_m01a")
    (ai_force_active "sq_sec_beta_m01a" true)
    (ai_force_full_lod "sq_sec_beta_m01a")
    (wake md_050_sec_beta1)
    (ai_cannot_die "gr_beta_marine" true)
    (ai_cannot_die "gr_beta_cov" true)
    (ai_magically_see "sq_sec_beta_c01a" "sq_sec_beta_m01a")
    (ai_magically_see "sq_sec_beta_c01b" "sq_sec_beta_m01a")
    (ai_magically_see "sq_sec_beta_c01c" "sq_sec_beta_m01a")
    (ai_magically_see "sq_sec_beta_m01a" "sq_sec_beta_c01a")
    (sleep_until (f_hub_and_radius_check "cf_sec_beta_1" 150))
    (f_blip_ai "sq_sec_beta_m01a" 5)
    (sleep 30)
    (f_blip_ai "sq_sec_beta_c01a" 15)
    (sleep 5)
    (f_blip_ai "sq_sec_beta_c01b" 15)
    (sleep 5)
    (f_blip_ai "sq_sec_beta_c01c" 15)
    (ai_cannot_die "gr_beta_cov" false)
    (ai_cannot_die "gr_beta_marine" false)
    (sleep_until (<= (ai_living_count "gr_beta_cov") 0))
    (if (> (ai_living_count "gr_beta_marine") 0)
        (begin
            (ai_place "sq_sec_beta_p01")
            (ai_force_active "sq_sec_beta_p01" true)
            (ai_vehicle_reserve_seat "sq_sec_beta_p01" 17 true)
        )
    )
    (f_unblip_ai "sq_sec_beta_m01a")
    (sleep_until (< (ai_living_count "gr_beta_marine") 1))
    (if (> (ai_living_count "sq_sec_beta_p01") 1)
        (md_050_sec_success_beta1)
        (md_050_sec_fail_beta1)
    )
    (f_unblip_flag "cf_sec_beta_1")
)

(script static void sec_ai_beta_2
    (data_mine_set_mission_segment "m52_sec_beta_2")
    (set g_beta_enc 2)
    (ai_place "sq_sec_beta_s02a")
    (ai_force_active "sq_sec_beta_s02a" true)
    (ai_place "sq_sec_beta_s02b")
    (ai_force_active "sq_sec_beta_s02b" true)
    (ai_place "sq_sec_beta_s02c")
    (ai_force_active "sq_sec_beta_s02c" true)
    (ai_place "sq_sec_beta_p02")
    (ai_force_active "sq_sec_beta_p02" true)
    (wake md_050_sec_beta2)
    (sleep_until (f_hub_and_radius_check "cf_sec_beta_2" 90))
    (f_blip_ai "sq_sec_beta_s02c" 15)
    (f_blip_ai "sq_sec_beta_s02b" 15)
    (f_blip_ai "sq_sec_beta_s02a" 15)
    (sleep_until (< (ai_living_count "gr_beta_cov") 1))
    (if (>= (ai_living_count "sq_sec_beta_p02") 1)
        (md_050_sec_success_beta2)
        (md_050_sec_fail_beta2)
    )
    (f_unblip_ai "sq_sec_beta_p02")
)

(script static void sec_ai_beta_3
    (data_mine_set_mission_segment "m52_sec_beta_3")
    (set g_beta_enc 3)
    (ai_place "sq_sec_beta_b03a")
    (ai_force_active "sq_sec_beta_b03a" true)
    (ai_cannot_die "sq_sec_beta_b03a" true)
    (ai_place "sq_sec_beta_m03")
    (ai_force_active "sq_sec_beta_m03" true)
    (ai_cannot_die "sq_sec_beta_m03" true)
    (ai_force_full_lod "sq_sec_beta_m03")
    (ai_magically_see "sq_sec_beta_m03" "sq_sec_beta_b03a")
    (ai_magically_see "sq_sec_beta_b03a" "sq_sec_beta_m03")
    (wake md_050_sec_beta3)
    (sleep_until (f_hub_and_radius_check "cf_sec_beta_3" 150))
    (f_blip_ai "sq_sec_beta_b03a" 15)
    (f_blip_ai "sq_sec_beta_m03" 5)
    (f_unblip_flag "cf_sec_beta_3")
    (ai_cannot_die "sq_sec_beta_m03" false)
    (ai_cannot_die "sq_sec_beta_b03a" false)
    (sleep_until (or (< (ai_living_count "gr_beta_cov") 3) (< (ai_living_count "sq_sec_beta_m03") 1)) 30 2400)
    (f_unblip_ai "sq_sec_beta_m03")
    (if (> (ai_living_count "sq_sec_beta_m03") 0)
        (begin
            (ai_place "sq_sec_beta_p03")
            (ai_force_active "sq_sec_beta_p03" true)
        )
    )
    (sleep_until (and (< (ai_living_count "gr_beta_cov") 1) (< (ai_living_count "gr_beta_marine") 1)) 5)
    (sleep 120)
    (if (> (ai_living_count "sq_sec_beta_p03") 1)
        (md_050_sec_success_beta3)
        (md_050_sec_fail_beta3)
    )
    (set s_banshee_max 7)
    (ai_force_active "sq_sec_beta_b03a" false)
    (ai_erase "sq_sec_beta_b03a")
)

(script command_script void cs_failsafe_beta_1a
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_beta_1a" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_failsafe_beta_1b
    (cs_enable_looking true)
    (cs_enable_moving false)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_beta_1b" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_failsafe_beta_1c
    (cs_enable_looking true)
    (cs_enable_moving false)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_beta_1c" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_failsafe_beta_1d
    (cs_enable_looking true)
    (cs_enable_moving false)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_beta_1d" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_pelican_beta_1
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_vehicle_speed_instantaneous 1)
    (cs_ignore_obstacles true)
    (cs_vehicle_boost true)
    (cs_fly_to "sd_obj_beta_1/pelican_start")
    (cs_fly_to "sd_obj_beta_1/pelican_fly")
    (set g_beta_1_marine_safe true)
    (cs_face true "sd_obj_beta_1/pelican_face")
    (cs_vehicle_boost false)
    (sleep 30)
    (cs_fly_to "sd_obj_beta_1/pelican_land" 1)
    (wake beta_1_vehicle_enter)
    (cs_run_command_script "sq_sec_beta_m01a" cs_kill_script)
    (f_load_troopers_sec "sq_sec_beta_p01/pilot" "sq_sec_beta_p01" 450 "sq_sec_beta_m01a")
    (cs_face false "sd_obj_beta_1/pelican_face")
    (cs_ignore_obstacles false)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_obj_beta_1/pelican_exit" 5)
    (ai_erase "gr_beta_marine")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void beta_1_vehicle_enter
    (sleep s_entry_timeout)
    (ai_vehicle_enter_immediate "sq_sec_beta_m01a" (ai_vehicle_get_from_spawn_point "sq_sec_beta_p01") 16)
)

(script command_script void cs_failsafe_beta_2a
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_beta_2a" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_pelican_beta_2
    (ai_cannot_die ai_current_squad true)
    (cs_ignore_obstacles true)
    (sleep 30)
    (vehicle_hover (ai_vehicle_get_from_spawn_point "sq_sec_beta_p02/pilot") true)
    (sleep_until (< (ai_living_count "gr_beta_cov") 1))
    (vehicle_hover (ai_vehicle_get_from_spawn_point "sq_sec_beta_p02/pilot") false)
    (cs_face false "sd_obj_beta_2/pelican_face")
    (cs_fly_to "sd_obj_beta_2/pelican_fly_2")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_obj_beta_2/pelican_exit" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_failsafe_beta_3a
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_beta_3a" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_pelican_beta_3
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_obj_beta_3/pelican_start")
    (ai_cannot_die ai_current_squad false)
    (cs_fly_to "sd_obj_beta_3/pelican_fly")
    (cs_fly_to "sd_obj_beta_3/pelican_fly_2")
    (cs_face true "sd_obj_beta_3/pelican_face")
    (cs_fly_to "sd_obj_beta_3/pelican_land" 0.5)
    (set g_beta_3_marine_safe true)
    (wake beta_3_vehicle_enter)
    (cs_run_command_script "sq_sec_beta_m03" cs_kill_script)
    (f_load_troopers_sec "sq_sec_beta_p03/pilot" "sq_sec_beta_p03" 300 "sq_sec_beta_m03")
    (sleep_until (< (ai_living_count "gr_beta_cov") 1) 30 600)
    (cs_face false "sd_obj_beta_3/pelican_face")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_obj_beta_3/pelican_exit" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void beta_3_vehicle_enter
    (sleep s_entry_timeout)
    (ai_vehicle_enter_immediate "sq_sec_beta_m03" (ai_vehicle_get_from_spawn_point "sq_sec_beta_p03/pilot") 16)
)

(script dormant void sec_obj_gamma
    (sleep_until (and (= m_gamma_complete false) (= m_sec_gamma true)) 1)
    (set m_sec_started (+ m_sec_started 1))
    (wake m52_music_09)
    (begin_random_count
        1
        (sec_ai_gamma_1)
        (sec_ai_gamma_2)
        (sec_ai_gamma_3)
    )
    (set m_gamma_complete true)
    (set m_sec_complete (+ m_sec_complete 1))
)

(script static void sec_ai_gamma_1
    (data_mine_set_mission_segment "m52_sec_gamma_1")
    (set g_gamma_enc 1)
    (set g_gamma_complete false)
    (ai_place "sq_sec_gamma_p01")
    (ai_force_active "sq_sec_gamma_p01" true)
    (ai_cannot_die "sq_sec_gamma_p01" true)
    (object_ignores_emp (ai_vehicle_get_from_starting_location "sq_sec_gamma_p01/pilot") true)
    (object_cannot_take_damage (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot"))
    (sleep 30)
    (ai_place "sq_sec_gamma_m01")
    (ai_force_active "sq_sec_gamma_m01" true)
    (ai_cannot_die "sq_sec_gamma_m01" true)
    (ai_force_full_lod "sq_sec_gamma_m01")
    (set ai_buck "sq_sec_gamma_m01/odst")
    (ai_vehicle_enter_immediate "sq_sec_gamma_m01/odst" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot") 18)
    (sleep 1)
    (objects_attach "gamma_1_box" "marker01" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot") "falcon_p_bench")
    (sleep_until (f_hub_and_radius_check "cf_sec_gamma_1a" 100))
    (sleep_until (or (and (< (ai_living_count "sq_sec_gamma_m01/odst") 1) (< (ai_living_count "sq_sec_gamma_p01") 1)) (= g_gamma_complete true)) 5)
    (sleep 150)
    (md_050_sec_success_gamma1)
)

(script static void sec_ai_gamma_2
    (data_mine_set_mission_segment "m52_sec_gamma_2")
    (set g_gamma_enc 2)
    (set g_gamma_complete false)
    (set s_banshee_max 7)
    (ai_force_active "sq_sec_gamma_b02" true)
    (sleep 240)
    (ai_place "sq_sec_gamma_p02")
    (ai_force_active "sq_sec_gamma_p02" true)
    (ai_place "sq_sec_gamma_m02")
    (ai_force_active "sq_sec_gamma_m02" true)
    (ai_cannot_die "sq_sec_gamma_m02" true)
    (set ai_buck "sq_sec_gamma_m02/odst")
    (ai_force_full_lod "sq_sec_gamma_m02")
    (sleep 1)
    (ai_vehicle_enter_immediate "sq_sec_gamma_m02/odst" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") 19)
    (sleep 1)
    (ai_cannot_die "sq_sec_gamma_p02" true)
    (object_cannot_take_damage (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot"))
    (object_ignores_emp (ai_vehicle_get_from_starting_location "sq_sec_gamma_p02/pilot") true)
    (objects_attach "gamma_2_box" "marker01" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") "falcon_p_bench")
    (wake md_050_sec_gamma2)
    (sleep_until (f_hub_and_radius_check "cf_sec_gamma_2a" 100))
    (sleep_until (or (and (< (ai_living_count "sq_sec_gamma_m02/odst") 1) (< (ai_living_count "sq_sec_gamma_p02") 1)) (= g_gamma_complete true)) 5)
    (sleep 150)
    (md_050_sec_success_gamma2)
    (ai_force_active "sq_sec_gamma_b02" false)
    (ai_erase "sq_sec_gamma_b02")
    (set s_banshee_max 7)
)

(script static void sec_ai_gamma_3
    (data_mine_set_mission_segment "m52_sec_gamma_3")
    (set g_gamma_enc 3)
    (ai_place "sq_sec_gamma_m03a")
    (ai_force_active "sq_sec_gamma_m03a" true)
    (ai_cannot_die "sq_sec_gamma_m03a" true)
    (set ai_buck "sq_sec_gamma_m03a/pilot")
    (object_cannot_take_damage (ai_vehicle_get_from_spawn_point "sq_sec_gamma_m03a/pilot"))
    (object_ignores_emp (ai_vehicle_get_from_starting_location "sq_sec_gamma_m03a/pilot") true)
    (ai_place "sq_sec_gamma_cd03a")
    (ai_force_active "sq_sec_gamma_cd03a" true)
    (sleep 5)
    (sleep_until (> (ai_living_count "sq_sec_gamma_m03a") 0))
    (sleep_until (or (< (ai_living_count "sq_sec_gamma_m03a") 1) (< (ai_living_count "sq_sec_gamma_cd03a") 1) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_cd03a/pilot")) 0)))
    (sleep 150)
    (sleep_until (or (< (ai_living_count "gr_gamma_marine") 1) (= g_gamma_3_complete true)))
    (f_unblip_ai "sq_sec_gamma_m03a/pilot")
    (sleep 60)
    (md_050_sec_success_gamma3)
)

(script command_script void cs_failsafe_gamma_1b
    (ai_cannot_die ai_current_actor true)
    (sleep 90)
    (cs_go_to "sd_obj_gamma_1/odst_exit")
)

(script dormant void gamma_1b_cleanup
    (sleep_until (not (cs_command_script_running "sq_sec_gamma_m01/odst" cs_failsafe_gamma_1b)) 5 600)
    (set g_gamma_1_marine_safe true)
    (set g_gamma_complete true)
    (sleep_until (not (volume_test_players "tv_gamma_1_end")) 5)
    (device_set_power "dm_gamma_1" 0)
    (device_set_position "dm_gamma_1" 0)
    (sleep 90)
    (ai_erase "sq_sec_gamma_m01/odst")
    (falcon_gunner_reserve false)
)

(script command_script void cs_falcon_gamma_1a
    (wake md_050_sec_gamma1)
    (sleep_until (f_hub_and_radius_check "cf_sec_gamma_1a" 30))
    (objects_detach "gamma_1_box" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot"))
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_face false "sd_obj_gamma_1/falcon_face_1")
    (f_unblip_flag "cf_sec_gamma_1a")
    (f_blip_ai_offset "sq_sec_gamma_p01/pilot" 1 5)
    (cs_face true "sd_obj_gamma_1/falcon_fly")
    (cs_fly_to "sd_obj_gamma_1/falcon_fly_2" 4)
    (cs_face false "sd_obj_gamma_1/falcon_fly")
    (cs_vehicle_speed 0.6)
    (set mission_obj_gamma_1 true)
    (cs_fly_by "sd_obj_gamma_1/falcon_fly_3" 3)
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_by "sd_obj_gamma_1/falcon_fly_4" 2)
    (cs_fly_by "sd_obj_gamma_1/falcon_fly_5" 2)
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_by "sd_obj_gamma_1/falcon_fly_6" 2)
    (cs_fly_by "sd_obj_gamma_1/falcon_fly_7" 2)
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_to "sd_obj_gamma_1/falcon_fly_8" 2)
    (cs_vehicle_speed 0.5)
    (cs_fly_to "sd_obj_gamma_1/falcon_fly_9" 2)
    (cs_face true "sd_obj_gamma_1/falcon_face_2")
    (cs_fly_to "sd_obj_gamma_1/falcon_land_2" 0.5)
    (set mission_obj_gamma_1 false)
    (f_unblip_ai "sq_sec_gamma_p01/pilot")
    (sleep 60)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot") 21)
    (falcon_gunner_reserve true)
    (set g_gamma_1_marine_safe true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p01/pilot") 24 true)
    (sleep_until (= (ai_in_vehicle_count "sq_sec_gamma_p01") 1))
    (cs_run_command_script "sq_sec_gamma_m01" cs_failsafe_gamma_1b)
    (wake gamma_1b_cleanup)
    (sleep 90)
    (cs_face false "sd_obj_gamma_1/falcon_face_2")
    (cs_fly_to "sd_obj_gamma_1/falcon_fly_9" 2)
    (cs_vehicle_speed 1)
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_obj_gamma_1/falcon_exit" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script static boolean (f_near_object (object o_object, short s_number))
    (if (<= (objects_distance_to_object (players) o_object) s_number)
        true
    )
)

(script command_script void cs_failsafe_gamma_2a
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_gamma_2a" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script command_script void cs_failsafe_gamma_2b
    (ai_cannot_die ai_current_actor true)
    (sleep 90)
    (cs_go_to "sd_obj_gamma_2/odst_exit")
)

(script dormant void gamma_2b_cleanup
    (sleep_until (not (cs_command_script_running "sq_sec_gamma_m02/odst" cs_failsafe_gamma_2b)) 5 600)
    (set g_gamma_2_success true)
    (set g_gamma_complete true)
    (sleep_until (not (volume_test_players "tv_gamma_2_end")) 5)
    (device_set_power "dm_gamma_2" 0)
    (device_set_position "dm_gamma_2" 0)
    (sleep 90)
    (ai_erase "sq_sec_gamma_m02/odst")
    (falcon_gunner_reserve false)
)

(script command_script void cs_falcon_gamma_2a
    (sleep_until (f_hub_and_radius_check "cf_sec_gamma_2a" 50))
    (f_unblip_flag "cf_sec_gamma_2a")
    (f_blip_ai_offset "sq_sec_gamma_p02/pilot" 1 5)
    (sleep 1)
    (sleep 60)
    (cs_vehicle_speed 0.6)
    (objects_detach "gamma_2_box" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot"))
    (set mission_obj_gamma_2 true)
    (ai_set_objective "sq_sec_gamma_b02" "obj_air")
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_2" 2)
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_3" 2)
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_4" 2)
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_5" 2)
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_6" 2)
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_7" 1)
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_8" 2)
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_9" 2)
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_10" 2)
    (cs_fly_by "sd_obj_gamma_2/falcon_fly_11" 2)
    (cs_face true "sd_obj_gamma_2/falcon_face_2")
    (cs_ignore_obstacles false)
    (cs_vehicle_speed 0.3)
    (cs_fly_to "sd_obj_gamma_2/falcon_land_2" 0.5)
    (vehicle_unload (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") 25)
    (falcon_gunner_reserve true)
    (set g_gamma_2_marine_safe true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") 24 true)
    (f_unblip_ai "sq_sec_gamma_p02/pilot")
    (f_unblip_ai "sq_sec_gamma_m02/odst")
    (sleep 60)
    (sleep_until (= (ai_in_vehicle_count "sq_sec_gamma_p02/pilot") 1))
    (cs_run_command_script "sq_sec_gamma_m02/odst" cs_failsafe_gamma_2b)
    (wake gamma_2b_cleanup)
    (sleep 90)
    (cs_vehicle_speed 1)
    (cs_face false "sd_obj_gamma_2/falcon_face_2")
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_obj_gamma_2/falcon_exit" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
    (set mission_obj_gamma_2 false)
)

(script dormant void gamma_2_vehicle_enter
    (cs_run_command_script "sq_sec_gamma_m02" cs_kill_script)
    (sleep s_entry_timeout)
    (ai_vehicle_enter_immediate "sq_sec_gamma_m02/odst" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_p02/pilot") 25)
)

(script command_script void cs_falcon_gamma_3a
    (sleep 1)
    (cs_fly_by "sd_obj_gamma_3/falcon_start" 2)
    (cs_ignore_obstacles true)
    (wake md_050_sec_gamma3)
    (sleep_until 
        (begin
            (cs_fly_by "sd_obj_gamma_3/falcon_hover_1" 1)
            (cs_fly_by "sd_obj_gamma_3/falcon_hover_2" 1)
            (cs_fly_by "sd_obj_gamma_3/falcon_hover_3" 1)
            (<= (objects_distance_to_object (players) (ai_vehicle_get_from_spawn_point "sq_sec_gamma_m03a/pilot")) 40)
        )
        5
    )
    (f_unblip_ai "sq_sec_gamma_m03a/pilot")
    (f_blip_ai_offset "sq_sec_gamma_m03a/pilot" 1 5)
    (cs_fly_by "sd_obj_gamma_3/falcon_fly_2")
    (set mission_obj_gamma_3 true)
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_by "sd_obj_gamma_3/falcon_fly_3")
    (cs_fly_by "sd_obj_gamma_3/falcon_fly_4")
    (sleep_until (f_near_object ai_current_squad 40))
    (cs_fly_by "sd_obj_gamma_3/falcon_fly_5")
    (cs_ignore_obstacles false)
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (ai_set_objective "sq_sec_gamma_m03a" "obj_gamma")
    (f_unblip_ai "sq_sec_gamma_m03a/pilot")
    (f_blip_ai "sq_sec_gamma_cd03a/pilot" 14)
    (ai_magically_see "sq_sec_gamma_m03a" "sq_sec_gamma_cd03a")
    (sleep_until (or (< (ai_living_count "sq_sec_gamma_cd03a") 1) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_cd03a/pilot")) 0)) 5)
    (set mission_obj_gamma_3 false)
    (cs_enable_moving false)
    (cs_enable_looking false)
    (cs_enable_targeting true)
    (cs_fly_to "sd_obj_gamma_3/falcon_fly_6" 1)
    (cs_vehicle_speed 0.3)
    (cs_ignore_obstacles true)
    (cs_fly_to "sd_obj_gamma_3/falcon_fly_7" 1)
    (cs_face true "sd_obj_gamma_3/falcon_face")
    (cs_fly_by "sd_obj_gamma_3/falcon_land" 0.5)
    (ai_place "sq_sec_gamma_m03b")
    (ai_force_active "sq_sec_gamma_m03b" true)
    (ai_force_full_lod "sq_sec_gamma_m03b")
    (ai_cannot_die "sq_sec_gamma_m03b" true)
    (ai_place "sq_sec_gamma_m03c")
    (ai_force_active "sq_sec_gamma_m03c" true)
    (ai_force_full_lod "sq_sec_gamma_m03c")
    (ai_cannot_die "sq_sec_gamma_m03c" true)
    (falcon_gunner_reserve true)
    (wake gamma_3_vehicle_enter)
    (ai_vehicle_enter "sq_sec_gamma_m03b" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_m03a/pilot") 25)
    (ai_vehicle_enter "sq_sec_gamma_m03c" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_m03a/pilot") 25)
    (sleep_until (> (ai_in_vehicle_count "sq_sec_gamma_m03a") 1))
    (sleep_until (> (ai_in_vehicle_count "sq_sec_gamma_m03a") 2) 30 300)
    (falcon_gunner_reserve false)
    (set g_gamma_3_complete true)
    (cs_vehicle_speed 1)
    (cs_face false "sd_obj_gamma_3/falcon_face")
    (cs_fly_to "sd_obj_gamma_3/falcon_fly_8" 2)
    (cs_face true "sd_obj_gamma_3/falcon_exit")
    (cs_fly_by "sd_obj_gamma_3/falcon_exit" 5)
    (cs_ignore_obstacles false)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void gamma_3_vehicle_enter
    (set g_gamma_3_marine_safe true)
    (sleep s_entry_timeout)
    (ai_vehicle_enter_immediate "sq_sec_gamma_m03b/gunner" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_m03a/pilot") 29)
    (ai_vehicle_enter_immediate "sq_sec_gamma_m03c/gunner" (ai_vehicle_get_from_spawn_point "sq_sec_gamma_m03a/pilot") 19)
)

(script command_script void cs_dropship_gamma_3
    (ai_cannot_die "sq_sec_gamma_cd03a" true)
    (sleep 1)
    (sleep_until (= mission_obj_gamma_3 true))
    (sleep 300)
    (cs_fly_to "sd_obj_gamma_3/phantom_start")
    (cs_face true "sd_obj_gamma_3/phantom_face")
    (ai_cannot_die "sq_sec_gamma_cd03a" false)
    (cs_fly_to "sd_obj_gamma_3/phantom_fly")
    (cs_face false "sd_obj_gamma_3/phantom_face")
)

(script dormant void sec_obj_delta
    (sleep_until (and (= m_delta_complete false) (= m_sec_delta true)) 1)
    (set m_sec_started (+ m_sec_started 1))
    (begin_random_count
        1
        (sec_ai_delta_1)
        (sec_ai_delta_2)
        (sec_ai_delta_3)
    )
    (set m_delta_complete true)
    (f_unblip_flag "cf_sec_delta_1")
    (f_unblip_flag "cf_sec_delta_2")
    (f_unblip_flag "cf_sec_delta_3")
    (set m_sec_complete (+ m_sec_complete 1))
)

(script static void sec_ai_delta_1
    (data_mine_set_mission_segment "m52_sec_delta_1")
    (set g_delta_enc 1)
    (ai_place "sq_sec_delta_cd01a")
    (ai_force_active "sq_sec_delta_cd01a" true)
    (sleep 5)
    (sleep_until (or (> (ai_living_count "gr_delta_cov") 0) (> (object_get_health "delta_comm_01") 0) (< (ai_living_count "sq_sec_delta_cd01a") 3)) 5)
    (wake md_050_sec_delta1)
    (sleep_until (f_hub_and_radius_check "cf_sec_delta_1" 70))
    (sleep_until (and (< (ai_living_count "gr_delta_cov") 1) (<= (object_get_health "delta_comm_01") 0)) 5)
    (md_050_sec_success_delta1)
)

(script static void sec_ai_delta_2
    (data_mine_set_mission_segment "m52_sec_delta_2")
    (set g_delta_enc 2)
    (ai_place "sq_sec_delta_cd02a")
    (ai_force_active "sq_sec_delta_cd02a" true)
    (sleep 5)
    (sleep_until (or (< (ai_living_count "sq_sec_delta_cd02a") 1) (= m_sec_delta02_start true)) 5)
    (sleep 60)
    (wake md_050_sec_delta2)
    (sleep_until (f_hub_and_radius_check "cf_sec_delta_2" 70))
    (sleep_until (< (ai_living_count "gr_delta_cov") 1))
    (f_unblip_flag "cf_sec_delta_2")
    (md_050_sec_success_delta2)
)

(script static void sec_ai_delta_3
    (data_mine_set_mission_segment "m52_sec_delta_3")
    (sleep 240)
    (set g_delta_enc 3)
    (ai_place "sq_sec_delta_s03a")
    (ai_force_active "sq_sec_delta_s03a" true)
    (ai_place "sq_sec_delta_s03b")
    (ai_force_active "sq_sec_delta_s03b" true)
    (ai_place "sq_sec_delta_c03a")
    (ai_force_active "sq_sec_delta_c03a" true)
    (ai_force_full_lod "sq_sec_delta_c03a")
    (ai_cannot_die "sq_sec_delta_s03a" true)
    (ai_cannot_die "sq_sec_delta_s03b" true)
    (ai_cannot_die "sq_sec_delta_c03a" true)
    (sleep 5)
    (sleep_until (> (ai_living_count "gr_delta_cov") 0))
    (wake md_050_sec_delta3)
    (sleep_until (f_hub_and_radius_check "cf_sec_delta_3" 70))
    (f_blip_ai "sq_sec_delta_s03a" 15)
    (f_blip_ai "sq_sec_delta_s03b" 15)
    (f_blip_ai "sq_sec_delta_c03a" 15)
    (ai_cannot_die "sq_sec_delta_s03a" false)
    (ai_cannot_die "sq_sec_delta_s03b" false)
    (ai_cannot_die "sq_sec_delta_c03a" false)
    (sleep_until (< (ai_living_count "gr_delta_cov") 1))
    (f_unblip_flag "cf_sec_delta_3")
    (md_050_sec_success_delta3)
)

(script command_script void cs_failsafe_delta_1
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (ai_cannot_die ai_current_actor true)
    (sleep_until (not (volume_test_object "tv_sec_delta_1a" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script dormant void delta_1_dropoff
    (sleep_until (f_hub_and_radius_check "cf_sec_delta_1" 70))
    (if (> (object_get_health "delta_comm_01") 0)
        (f_blip_object "delta_comm_switch01" blip_interface)
    )
    (sleep 5)
    (ai_cannot_die "sq_sec_delta_c01a" false)
    (ai_cannot_die "sq_sec_delta_c01b" false)
    (ai_cannot_die "sq_sec_delta_c01c" false)
)

(script dormant void delta_1_objective
    (object_create "delta_comm_switch01")
    (object_create "delta_comm_01")
    (sleep 1)
    (f_bldg_objective "delta_comm_01" "delta_comm_switch01")
)

(script command_script void cs_dropship_delta_1
    (object_cannot_die (ai_vehicle_get ai_current_actor) true)
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_vehicle_speed_instantaneous 1)
    (cs_vehicle_boost true)
    (cs_ignore_obstacles true)
    (cs_fly_to "sd_obj_delta_1/phantom_start")
    (f_load_phantom (ai_vehicle_get_from_spawn_point "sq_sec_delta_cd01a/pilot") "left" "sq_sec_delta_c01a" "sq_sec_delta_c01b" none "sq_sec_delta_c01c")
    (cs_fly_to "sd_obj_delta_1/phantom_fly")
    (cs_vehicle_boost false)
    (cs_face true "sd_obj_delta_1/phantom_face")
    (cs_fly_to "sd_obj_delta_1/phantom_drop" 2)
    (f_unload_phantom (ai_vehicle_get_from_spawn_point "sq_sec_delta_cd01a/pilot") "left")
    (wake delta_1_objective)
    (sleep 30)
    (object_cannot_die (ai_vehicle_get ai_current_actor) false)
    (ai_cannot_die ai_current_squad false)
    (ai_force_active "sq_sec_delta_c01a" true)
    (ai_force_active "sq_sec_delta_c01b" true)
    (ai_force_active "sq_sec_delta_c01c" true)
    (ai_force_full_lod "sq_sec_delta_c01a")
    (ai_force_full_lod "sq_sec_delta_c01b")
    (ai_force_full_lod "sq_sec_delta_c01c")
    (cs_run_command_script "sq_sec_delta_c01a" cs_failsafe_delta_1)
    (cs_run_command_script "sq_sec_delta_c01b" cs_failsafe_delta_1)
    (cs_run_command_script "sq_sec_delta_c01c" cs_failsafe_delta_1)
    (wake delta_1_dropoff)
    (set m_sec_delta01_start true)
    (cs_face false "sd_obj_delta_1/phantom_face")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_obj_delta_1/phantom_exit" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_failsafe_delta_2
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (ai_cannot_die ai_current_actor true)
    (sleep_until (not (volume_test_object "tv_sec_delta_2a" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script dormant void delta_2_dropoff
    (sleep_until (f_hub_and_radius_check "cf_sec_delta_2" 70))
    (sleep 5)
    (ai_cannot_die "sq_sec_delta_c02a" false)
    (ai_cannot_die "sq_sec_delta_c02b" false)
    (ai_cannot_die "sq_sec_delta_c02c" false)
    (ai_cannot_die "sq_sec_delta_c02d" false)
    (ai_cannot_die "sq_sec_delta_c02e" false)
)

(script command_script void cs_dropship_delta_2
    (object_cannot_die (ai_vehicle_get ai_current_actor) true)
    (ai_cannot_die ai_current_squad true)
    (sleep 1)
    (cs_vehicle_speed_instantaneous 1)
    (cs_vehicle_boost true)
    (cs_ignore_obstacles true)
    (cs_fly_to "sd_obj_delta_2/phantom_start")
    (f_load_phantom (ai_vehicle_get_from_spawn_point "sq_sec_delta_cd02a/pilot") "left" "sq_sec_delta_c02a" "sq_sec_delta_c02b" none none)
    (cs_fly_to "sd_obj_delta_2/phantom_fly")
    (cs_vehicle_boost false)
    (cs_face true "sd_obj_delta_2/phantom_face")
    (cs_fly_to "sd_obj_delta_2/phantom_drop")
    (f_unload_phantom (ai_vehicle_get_from_spawn_point "sq_sec_delta_cd02a/pilot") "left")
    (ai_force_active "sq_sec_delta_c02a" true)
    (ai_force_active "sq_sec_delta_c02b" true)
    (ai_force_full_lod "sq_sec_delta_c02a")
    (ai_force_full_lod "sq_sec_delta_c02b")
    (cs_run_command_script "sq_sec_delta_c02a" cs_failsafe_delta_2)
    (cs_run_command_script "sq_sec_delta_c02b" cs_failsafe_delta_2)
    (cs_face false "sd_obj_delta_2/phantom_face")
    (sleep 30)
    (ai_place "sq_sec_delta_c02c")
    (ai_force_active "sq_sec_delta_c02c" true)
    (ai_force_full_lod "sq_sec_delta_c02c")
    (ai_place "sq_sec_delta_c02d")
    (ai_force_active "sq_sec_delta_c02d" true)
    (ai_force_full_lod "sq_sec_delta_c02d")
    (ai_place "sq_sec_delta_c02e")
    (ai_force_active "sq_sec_delta_c02e" true)
    (ai_force_full_lod "sq_sec_delta_c02e")
    (set m_sec_delta02_start true)
    (wake delta_2_dropoff)
    (sleep 1)
    (object_cannot_die (ai_vehicle_get ai_current_actor) false)
    (ai_cannot_die ai_current_squad false)
    (sleep 120)
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_obj_delta_2/phantom_exit" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_failsafe_delta_3
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (cs_enable_targeting true)
    (sleep_until (not (volume_test_object "tv_sec_delta_3a" ai_current_actor)))
    (ai_cannot_die ai_current_actor false)
    (sleep 5)
    (ai_kill_silent ai_current_actor)
)

(script dormant void banshee_spawn
    (f_random_banshee_num)
    (begin_random_count
        4
        (begin
            (ai_place "sq_banshee01")
            (ai_set_clump "sq_banshee01" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee02")
            (ai_set_clump "sq_banshee02" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee03")
            (ai_set_clump "sq_banshee03" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee04")
            (ai_set_clump "sq_banshee04" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee05")
            (ai_set_clump "sq_banshee05" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee06")
            (ai_set_clump "sq_banshee06" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee07")
            (ai_set_clump "sq_banshee07" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee08")
            (ai_set_clump "sq_banshee08" g_clumps_banshee)
        )
        (begin
            (ai_place "sq_banshee09")
            (ai_set_clump "sq_banshee09" g_clumps_banshee)
        )
    )
    (sleep_until 
        (begin
            (if (<= (ai_living_count "gr_banshee") s_banshee_max)
                (begin_random
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee01") 1))
                        (begin
                            (ai_place "sq_banshee01")
                            (ai_set_clump "sq_banshee01" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee02") 1))
                        (begin
                            (ai_place "sq_banshee02")
                            (ai_set_clump "sq_banshee02" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee03") 1))
                        (begin
                            (ai_place "sq_banshee03")
                            (ai_set_clump "sq_banshee03" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee04") 1))
                        (begin
                            (ai_place "sq_banshee04")
                            (ai_set_clump "sq_banshee04" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee05") 1))
                        (begin
                            (ai_place "sq_banshee05")
                            (ai_set_clump "sq_banshee05" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee06") 1))
                        (begin
                            (ai_place "sq_banshee06")
                            (ai_set_clump "sq_banshee06" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee07") 1))
                        (begin
                            (ai_place "sq_banshee07")
                            (ai_set_clump "sq_banshee07" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee08") 1))
                        (begin
                            (ai_place "sq_banshee08")
                            (ai_set_clump "sq_banshee08" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                    (if (and (= b_banshee_spawn true) (<= (ai_living_count "gr_banshee") s_banshee_max) (<= (ai_living_count "sq_banshee09") 1))
                        (begin
                            (ai_place "sq_banshee09")
                            (ai_set_clump "sq_banshee09" g_clumps_banshee)
                        )
                        (sleep 5)
                    )
                )
            )
            false
        )
    )
)

(script static void (f_banshee_force_max (short kill_total))
    (sleep_until 
        (begin
            (if (>= (ai_living_count "gr_banshee") kill_total)
                (begin_random_count
                    1
                    (ai_erase "sq_banshee01")
                    (ai_erase "sq_banshee02")
                    (ai_erase "sq_banshee03")
                    (ai_erase "sq_banshee04")
                    (ai_erase "sq_banshee05")
                    (ai_erase "sq_banshee06")
                    (ai_erase "sq_banshee07")
                    (ai_erase "sq_banshee08")
                    (ai_erase "sq_banshee09")
                )
            )
            (<= (ai_living_count "gr_banshee") kill_total)
        )
        5
    )
)

(script dormant void banshee_patrol_refresh
    (sleep_until 
        (begin
            (if (and (>= (ai_task_status "obj_air/sector_a_patrol") 3) (>= (ai_task_status "obj_air/sector_b_patrol") 3) (>= (ai_task_status "obj_air/sector_c_patrol") 3) (>= (ai_task_status "obj_air/sector_d_patrol") 3) (>= (ai_task_status "obj_air/sector_e_patrol") 3))
                (begin
                    (ai_reset_objective "obj_air/sector_a_patrol")
                    (ai_reset_objective "obj_air/sector_b_patrol")
                    (ai_reset_objective "obj_air/sector_c_patrol")
                    (ai_reset_objective "obj_air/sector_d_patrol")
                    (ai_reset_objective "obj_air/sector_e_patrol")
                )
            )
            false
        )
    )
)

(script static void f_random_banshee_num
    (set s_random_banshee_num0 (random_range 1 4))
    (set s_random_banshee_num1 (random_range 1 4))
    (set s_random_banshee_num2 (random_range 1 4))
    (set s_random_banshee_num3 (random_range 1 4))
)

(script static void follow_falcon_refresh01
    (sleep (random_range (* 30 3) (* 30 9)))
    (ai_reset_objective "obj_air/follow_falcon01")
    (set s_random_banshee_num0 (random_range 1 4))
)

(script static void follow_falcon_refresh02
    (sleep (random_range (* 30 3) (* 30 9)))
    (ai_reset_objective "obj_air/follow_falcon02")
    (set s_random_banshee_num1 (random_range 1 4))
)

(script static void follow_falcon_refresh01_reinf
    (sleep (random_range (* 30 3) (* 30 9)))
    (ai_reset_objective "obj_air/follow_falcon01_reinf")
    (set s_random_banshee_num2 (random_range 1 4))
)

(script static void follow_falcon_refresh02_reinf
    (sleep (random_range (* 30 3) (* 30 9)))
    (ai_reset_objective "obj_air/follow_falcon02_reinf")
    (set s_random_banshee_num3 (random_range 1 4))
)

(script static void test_ambients
    (wake phantom_patrol)
    (wake pelican_patrol)
    (wake falcon_patrol)
)

(script dormant void phantom_patrol
    (sleep_until 
        (begin
            (if (and (> (ai_living_count "gr_hub_phantoms") 1) (= b_safe_for_ambient false) (= b_start_hub true))
                (begin
                    (sleep 150)
                    (object_destroy "gr_hub_phantoms")
                )
            )
            (if (and (= b_banshee_spawn true) (< (ai_living_count "gr_hub_phantoms") 1) (= b_safe_for_ambient true))
                (begin_random_count
                    1
                    (ai_place "sq_phantom01_ambient")
                    (ai_place "sq_phantom02_ambient")
                    (ai_place "sq_phantom03_ambient")
                    (ai_place "sq_phantom04_ambient")
                )
            )
            false
        )
    )
)

(script dormant void pelican_patrol
    (sleep_until 
        (begin
            (if (and (> (ai_living_count "gr_hub_pelicans") 1) (= b_safe_for_ambient false) (= b_start_hub true))
                (begin
                    (sleep 150)
                    (object_destroy "gr_hub_pelicans")
                )
            )
            (if (and (= b_banshee_spawn true) (< (ai_living_count "gr_hub_pelicans") 1) (= b_safe_for_ambient true))
                (begin_random_count
                    1
                    (ai_place "sq_pelican01_ambient")
                    (ai_place "sq_pelican02_ambient")
                    (ai_place "sq_pelican03_ambient")
                    (ai_place "sq_pelican04_ambient")
                )
            )
            false
        )
    )
)

(script static void initial_falcon
    (begin_random_count
        1
        (begin
            (ai_place "sq_falcon00_ambient")
            (sleep 60)
            (ai_place "sq_falcon_banshees00")
            (ai_prefer_target_ai "sq_falcon_banshees00" "sq_falcon00_ambient" true)
        )
        (print "null")
        (print "null")
    )
)

(script dormant void falcon_patrol
    (initial_falcon)
    (sleep_until 
        (begin
            (if (and (> (ai_living_count "gr_hub_falcons") 1) (= b_safe_for_ambient false) (= b_start_hub true))
                (begin
                    (sleep 150)
                    (object_destroy "gr_hub_falcons")
                )
            )
            (if (and (= b_banshee_spawn true) (< (ai_living_count "gr_hub_falcons") 1) (= b_safe_for_ambient true))
                (begin_random_count
                    1
                    (ai_place "sq_falcon01_ambient")
                    (ai_place "sq_falcon02_ambient")
                    (ai_place "sq_falcon03_ambient")
                    (ai_place "sq_falcon04_ambient")
                )
            )
            false
        )
    )
)

(script dormant void cheap_patrol
    (sleep_until 
        (begin
            (if (and (> (ai_living_count "gr_hub_falcons") 1) (> (ai_living_count "gr_hub_phantoms") 1) (> (ai_living_count "gr_hub_pelicans") 1) (= b_safe_for_ambient false) (= b_start_hub true))
                (begin
                    (sleep 150)
                    (object_destroy "gr_hub_falcons")
                    (object_destroy "gr_hub_phantoms")
                    (object_destroy "gr_hub_pelicans")
                )
            )
            (if (and (= b_banshee_spawn true) (< (ai_living_count "gr_hub_falcons") 1) (< (ai_living_count "gr_hub_phantoms") 1) (< (ai_living_count "gr_hub_pelicans") 1) (= b_safe_for_ambient true))
                (begin_random_count
                    1
                    (ai_place "sq_falcon01_ambient")
                    (ai_place "sq_falcon02_ambient")
                    (ai_place "sq_falcon03_ambient")
                    (ai_place "sq_falcon04_ambient")
                    (ai_place "sq_pelican01_ambient")
                    (ai_place "sq_pelican02_ambient")
                    (ai_place "sq_pelican03_ambient")
                    (ai_place "sq_pelican04_ambient")
                    (ai_place "sq_phantom01_ambient")
                    (ai_place "sq_phantom02_ambient")
                    (ai_place "sq_phantom03_ambient")
                    (ai_place "sq_phantom04_ambient")
                )
            )
            false
        )
    )
)

(script static void erase_ambient_patrol
    (set b_safe_for_ambient false)
    (ai_erase "gr_hub_phantoms")
    (ai_erase "gr_hub_pelicans")
    (ai_erase "gr_hub_falcons")
)

(script static void start_ambient_patrol
    (set b_safe_for_ambient true)
)

(script command_script void hub_phantom01_patrol
    (cs_fly_by "sd_hub_phantom01/p0" 5)
    (cs_fly_by "sd_hub_phantom01/p1" 5)
    (cs_fly_by "sd_hub_phantom01/p2" 5)
    (cs_fly_by "sd_hub_phantom01/p3" 5)
    (cs_fly_by "sd_hub_phantom01/p4" 5)
    (cs_fly_by "sd_hub_phantom01/p5" 5)
    (cs_fly_by "sd_hub_phantom01/p6" 5)
    (cs_fly_by "sd_hub_phantom01/p7" 5)
    (cs_fly_by "sd_hub_phantom01/p8" 5)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_phantom01/p0" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_phantom02_patrol
    (cs_fly_by "sd_hub_phantom02/p7" 5)
    (cs_fly_by "sd_hub_phantom02/p8" 5)
    (cs_fly_by "sd_hub_phantom02/p0" 5)
    (cs_fly_by "sd_hub_phantom02/p1" 5)
    (cs_fly_by "sd_hub_phantom02/p2" 5)
    (cs_fly_by "sd_hub_phantom02/p3" 5)
    (cs_fly_by "sd_hub_phantom02/p4" 5)
    (cs_fly_by "sd_hub_phantom02/p5" 5)
    (cs_fly_by "sd_hub_phantom02/p6" 5)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_phantom02/p9" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_phantom03_patrol
    (cs_fly_by "sd_hub_phantom03/p6" 5)
    (cs_fly_by "sd_hub_phantom03/p7" 5)
    (cs_fly_by "sd_hub_phantom03/p8" 5)
    (cs_fly_by "sd_hub_phantom03/p0" 5)
    (cs_fly_by "sd_hub_phantom03/p1" 5)
    (cs_fly_by "sd_hub_phantom03/p2" 5)
    (cs_fly_by "sd_hub_phantom03/p3" 5)
    (cs_fly_by "sd_hub_phantom03/p4" 5)
    (cs_fly_by "sd_hub_phantom03/p5" 5)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_phantom03/p9" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_phantom04_patrol
    (cs_fly_by "sd_hub_phantom04/p3" 5)
    (cs_fly_by "sd_hub_phantom04/p4" 5)
    (cs_fly_by "sd_hub_phantom04/p5" 5)
    (cs_fly_by "sd_hub_phantom04/p6" 5)
    (cs_fly_by "sd_hub_phantom04/p7" 5)
    (cs_fly_by "sd_hub_phantom04/p8" 5)
    (cs_fly_by "sd_hub_phantom04/p0" 5)
    (cs_fly_by "sd_hub_phantom04/p1" 5)
    (cs_fly_by "sd_hub_phantom04/p2" 5)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_phantom04/p9" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_falcon00_patrol
    (cs_vehicle_boost true)
    (cs_vehicle_speed 0.5)
    (cs_fly_by "sd_hub_falcon00/p0" 4)
    (ai_vitality_pinned "sq_falcon00_ambient")
    (cs_fly_by "sd_hub_falcon00/p1" 4)
    (unit_set_current_vitality "sq_falcon00_ambient" 1 1)
    (cs_fly_by "sd_hub_falcon00/p2" 4)
    (cs_fly_by "sd_hub_falcon00/p3" 4)
    (cs_fly_by "sd_hub_falcon00/p4" 4)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_banshee00_patrol
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "sd_hub_falcon00/p0" 10)
    (if (< (ai_living_count "sq_falcon00_ambient") 1)
        (begin
            (cs_vehicle_speed 1)
            (cs_vehicle_boost true)
        )
    )
    (cs_fly_by "sd_hub_falcon00/p1" 10)
    (if (< (ai_living_count "sq_falcon00_ambient") 1)
        (begin
            (cs_vehicle_speed 1)
            (cs_vehicle_boost true)
        )
    )
    (cs_fly_by "sd_hub_falcon00/p2" 10)
    (if (< (ai_living_count "sq_falcon00_ambient") 1)
        (begin
            (cs_vehicle_speed 1)
            (cs_vehicle_boost true)
        )
    )
    (cs_fly_by "sd_hub_falcon00/p3" 10)
    (if (< (ai_living_count "sq_falcon00_ambient") 1)
        (begin
            (cs_vehicle_speed 1)
            (cs_vehicle_boost true)
        )
    )
    (cs_fly_by "sd_hub_falcon00/p4" 10)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_falcon01_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_falcon01/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_falcon01/p1" 2)
    (cs_fly_by "sd_hub_falcon01/p2" 2)
    (cs_fly_by "sd_hub_falcon01/p3" 2)
    (cs_fly_by "sd_hub_falcon01/p4" 2)
    (cs_fly_by "sd_hub_falcon01/p5" 2)
    (cs_fly_by "sd_hub_falcon01/p6" 2)
    (cs_fly_by "sd_hub_falcon01/p7" 2)
    (cs_fly_by "sd_hub_falcon01/p8" 2)
    (cs_fly_by "sd_hub_falcon01/p9" 2)
    (cs_fly_by "sd_hub_falcon01/p10" 2)
    (cs_fly_by "sd_hub_falcon01/p11" 2)
    (cs_fly_by "sd_hub_falcon01/p12" 2)
    (cs_fly_by "sd_hub_falcon01/p13" 2)
    (cs_fly_by "sd_hub_falcon01/p14" 2)
    (cs_fly_by "sd_hub_falcon01/p15" 2)
    (cs_fly_by "sd_hub_falcon01/p16" 2)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_falcon01/p17" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_falcon02_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_falcon02/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_falcon02/p1" 2)
    (cs_fly_by "sd_hub_falcon02/p2" 2)
    (cs_fly_by "sd_hub_falcon02/p3" 2)
    (cs_fly_by "sd_hub_falcon02/p4" 2)
    (cs_fly_by "sd_hub_falcon02/p5" 2)
    (cs_fly_by "sd_hub_falcon02/p6" 2)
    (cs_fly_by "sd_hub_falcon02/p7" 2)
    (cs_fly_by "sd_hub_falcon02/p8" 2)
    (cs_fly_by "sd_hub_falcon02/p9" 2)
    (cs_fly_by "sd_hub_falcon02/p10" 2)
    (cs_fly_by "sd_hub_falcon02/p11" 2)
    (cs_fly_by "sd_hub_falcon02/p12" 2)
    (cs_fly_by "sd_hub_falcon02/p13" 2)
    (cs_fly_by "sd_hub_falcon02/p14" 5)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_falcon02/p15" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_falcon03_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_falcon03/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_falcon03/p1" 2)
    (cs_fly_by "sd_hub_falcon03/p2" 2)
    (cs_fly_by "sd_hub_falcon03/p3" 2)
    (cs_fly_by "sd_hub_falcon03/p4" 2)
    (cs_fly_by "sd_hub_falcon03/p5" 2)
    (cs_fly_by "sd_hub_falcon03/p6" 2)
    (cs_fly_by "sd_hub_falcon03/p7" 2)
    (cs_fly_by "sd_hub_falcon03/p8" 2)
    (cs_fly_by "sd_hub_falcon03/p9" 2)
    (cs_fly_by "sd_hub_falcon03/p10" 2)
    (cs_fly_by "sd_hub_falcon03/p11" 2)
    (cs_fly_by "sd_hub_falcon03/p12" 2)
    (cs_fly_by "sd_hub_falcon03/p13" 2)
    (cs_fly_by "sd_hub_falcon03/p14" 2)
    (cs_fly_by "sd_hub_falcon03/p15" 2)
    (cs_fly_by "sd_hub_falcon03/p16" 2)
    (cs_fly_by "sd_hub_falcon03/p17" 2)
    (cs_fly_by "sd_hub_falcon03/p18" 2)
    (cs_fly_by "sd_hub_falcon03/p19" 2)
    (cs_fly_by "sd_hub_falcon03/p20" 2)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_falcon03/p21" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_falcon04_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_falcon04/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_falcon04/p1" 2)
    (cs_fly_by "sd_hub_falcon04/p2" 2)
    (cs_fly_by "sd_hub_falcon04/p3" 2)
    (cs_fly_by "sd_hub_falcon04/p4" 2)
    (cs_fly_by "sd_hub_falcon04/p5" 2)
    (cs_fly_by "sd_hub_falcon04/p6" 2)
    (cs_fly_by "sd_hub_falcon04/p7" 2)
    (cs_fly_by "sd_hub_falcon04/p8" 2)
    (cs_fly_by "sd_hub_falcon04/p9" 2)
    (cs_fly_by "sd_hub_falcon04/p10" 2)
    (cs_fly_by "sd_hub_falcon04/p11" 2)
    (cs_fly_by "sd_hub_falcon04/p12" 2)
    (cs_fly_by "sd_hub_falcon04/p13" 2)
    (cs_fly_by "sd_hub_falcon04/p14" 2)
    (cs_fly_by "sd_hub_falcon04/p15" 2)
    (cs_fly_by "sd_hub_falcon04/p16" 2)
    (cs_fly_by "sd_hub_falcon04/p17" 2)
    (cs_fly_by "sd_hub_falcon04/p18" 2)
    (cs_fly_by "sd_hub_falcon04/p19" 2)
    (cs_fly_by "sd_hub_falcon04/p20" 2)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_falcon04/p21" 5)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_pelican01_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_pelican01/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_pelican01/p1" 2)
    (cs_fly_by "sd_hub_pelican01/p2" 2)
    (cs_fly_by "sd_hub_pelican01/p3" 2)
    (cs_fly_by "sd_hub_pelican01/p4" 2)
    (cs_ignore_obstacles true)
    (cs_face true "sd_hub_pelican01/p6")
    (cs_fly_to "sd_hub_pelican01/p5" 1)
    (sleep 300)
    (cs_fly_by "sd_hub_pelican01/p7" 2)
    (cs_face false "sd_hub_pelican01/p6")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_hub_pelican01/p8" 2)
    (cs_fly_by "sd_hub_pelican01/p9" 2)
    (cs_fly_by "sd_hub_pelican01/p10" 2)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_pelican01/p11" 2)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_pelican02_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_pelican02/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_pelican02/p1" 2)
    (cs_fly_by "sd_hub_pelican02/p2" 2)
    (cs_fly_by "sd_hub_pelican02/p3" 2)
    (cs_fly_by "sd_hub_pelican02/p4" 2)
    (cs_ignore_obstacles true)
    (cs_face true "sd_hub_pelican02/p6")
    (cs_fly_to "sd_hub_pelican02/p5" 1)
    (sleep 300)
    (cs_fly_by "sd_hub_pelican02/p7" 2)
    (cs_face false "sd_hub_pelican02/p6")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_hub_pelican02/p8" 2)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_pelican02/p9" 2)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_pelican03_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_pelican03/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_pelican03/p1" 2)
    (cs_fly_by "sd_hub_pelican03/p2" 2)
    (cs_fly_by "sd_hub_pelican03/p3" 2)
    (cs_fly_by "sd_hub_pelican03/p4" 2)
    (cs_ignore_obstacles true)
    (cs_face true "sd_hub_pelican03/p6")
    (cs_fly_to "sd_hub_pelican03/p5" 1)
    (sleep 300)
    (cs_fly_by "sd_hub_pelican03/p7" 2)
    (cs_face false "sd_hub_pelican03/p6")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_hub_pelican03/p8" 2)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_pelican03/p9" 2)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void hub_pelican04_patrol
    (ai_cannot_die ai_current_squad true)
    (cs_fly_by "sd_hub_pelican04/p0" 2)
    (ai_cannot_die ai_current_squad false)
    (cs_fly_by "sd_hub_pelican04/p1" 2)
    (cs_fly_by "sd_hub_pelican04/p2" 2)
    (cs_fly_by "sd_hub_pelican04/p3" 2)
    (cs_fly_by "sd_hub_pelican04/p4" 2)
    (cs_ignore_obstacles true)
    (cs_face true "sd_hub_pelican04/p6")
    (cs_fly_to "sd_hub_pelican04/p5" 1)
    (sleep 300)
    (cs_fly_by "sd_hub_pelican04/p7" 2)
    (cs_face false "sd_hub_pelican04/p6")
    (cs_ignore_obstacles false)
    (cs_fly_by "sd_hub_pelican04/p8" 2)
    (cs_vehicle_boost true)
    (cs_fly_by "sd_hub_pelican04/p9" 2)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script static boolean f_players_flying
    (if (or (= (unit_in_vehicle_type player0 g_falcon_type) true) (= (unit_in_vehicle_type player0 g_banshee_type) true) (= (unit_in_vehicle_type player1 g_falcon_type) true) (= (unit_in_vehicle_type player1 g_banshee_type) true) (= (unit_in_vehicle_type player2 g_falcon_type) true) (= (unit_in_vehicle_type player2 g_banshee_type) true) (= (unit_in_vehicle_type player3 g_falcon_type) true) (= (unit_in_vehicle_type player3 g_banshee_type) true))
        true
    )
)

(script static boolean (f_player_flying (player actor))
    (if (or (= (unit_in_vehicle_type actor g_falcon_type) true) (= (unit_in_vehicle_type actor g_banshee_type) true))
        true
    )
)

(script static boolean (b_falcon_available01 (ai falcon, ai falcon_squad))
    (if (or (and (or (and (= (f_bsp_any_player 2) true) (volume_test_objects "tv_loc_building_a" (ai_vehicle_get_from_spawn_point falcon))) (and (volume_test_players "tv_loc_building_a") (volume_test_objects "tv_loc_building_a" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched01 false)) (and (or (and (= (f_bsp_any_player 3) true) (volume_test_objects "tv_loc_building_b" (ai_vehicle_get_from_spawn_point falcon))) (and (volume_test_players "tv_loc_building_b") (volume_test_objects "tv_loc_building_b" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched01 false)) (and (or (and (= (f_bsp_any_player 4) true) (volume_test_objects "tv_loc_building_c" (ai_vehicle_get_from_spawn_point falcon))) (and (volume_test_players "tv_loc_building_c") (volume_test_objects "tv_loc_building_c" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched01 false)) (and (or (and (volume_test_players "tv_loc_building_start") (volume_test_objects "tv_loc_building_start" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched01 false)))
        true
    )
)

(script static boolean (b_falcon_available02 (ai falcon, ai falcon_squad))
    (if (or (and (or (and (= (f_bsp_any_player 2) true) (volume_test_objects "tv_loc_building_a" (ai_vehicle_get_from_spawn_point falcon))) (and (volume_test_players "tv_loc_building_a") (volume_test_objects "tv_loc_building_a" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched02 false)) (and (or (and (= (f_bsp_any_player 3) true) (volume_test_objects "tv_loc_building_b" (ai_vehicle_get_from_spawn_point falcon))) (and (volume_test_players "tv_loc_building_b") (volume_test_objects "tv_loc_building_b" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched02 false)) (and (or (and (= (f_bsp_any_player 4) true) (volume_test_object "tv_loc_building_c" (ai_vehicle_get_from_spawn_point falcon))) (and (volume_test_players "tv_loc_building_c") (volume_test_objects "tv_loc_building_c" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched02 false)) (and (or (and (volume_test_players "tv_loc_building_start") (volume_test_objects "tv_loc_building_start" (ai_vehicle_get_from_spawn_point falcon))) (f_players_in_falcon falcon_squad)) (> (object_get_health (ai_vehicle_get_from_spawn_point falcon)) 0) (= b_falcon_dispatched02 false)))
        true
    )
)

(script static void f_falcons_available
    (set s_falcons_active 0)
    (if (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") true)
        (set s_falcons_active (+ s_falcons_active 1))
    )
    (if (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") true)
        (set s_falcons_active (+ s_falcons_active 1))
    )
    (if (= (b_falcon_available02 "sq_v_falcon02/vehicle" "sq_v_falcon02") true)
        (set s_falcons_active (+ s_falcons_active 1))
    )
    (if (= (b_falcon_available02 "sq_v_falcon02_reinf/vehicle" "sq_v_falcon02_reinf") true)
        (set s_falcons_active (+ s_falcons_active 1))
    )
    (if (= s_falcons_active 0)
        (print "0")
    )
    (if (= s_falcons_active 1)
        (print "1")
    )
    (if (= s_falcons_active 2)
        (print "2")
    )
)

(script static void f_falcon_nanny
    (f_falcons_available)
    (if (= (g_coop_mode) true)
        (set s_falcons_allowed 2)
    )
    (sleep 1)
    (if (= (g_coop_mode) false)
        (begin
            (if (and (volume_test_players "tv_loc_building_a") (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                (begin
                    (marine_clean)
                    (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                        (f_falcon_reinf01_bldg_a)
                    )
                )
                (if (and (volume_test_players "tv_loc_building_b") (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                    (begin
                        (marine_clean)
                        (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                            (f_falcon_reinf01_bldg_b)
                        )
                    )
                    (if (and (volume_test_players "tv_loc_building_c") (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                        (begin
                            (marine_clean)
                            (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                                (f_falcon_reinf01_bldg_c)
                            )
                        )
                        (if (and (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                            (begin
                                (marine_clean)
                                (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                                    (f_falcon_reinf01_bldg_start)
                                )
                            )
                        )
                    )
                )
            )
        )
        (begin
            (if (and (volume_test_players "tv_loc_building_a") (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                (begin
                    (marine_clean)
                    (sleep 10)
                    (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                        (f_falcon_reinf01_bldg_a)
                    )
                )
                (if (and (volume_test_players "tv_loc_building_b") (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                    (begin
                        (marine_clean)
                        (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                            (f_falcon_reinf01_bldg_b)
                        )
                    )
                    (if (and (volume_test_players "tv_loc_building_c") (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                        (begin
                            (marine_clean)
                            (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                                (f_falcon_reinf01_bldg_c)
                            )
                        )
                        (if (and (= b_falcon_dispatched01 false) (< s_falcons_active s_falcons_allowed))
                            (begin
                                (marine_clean)
                                (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
                                    (f_falcon_reinf01_bldg_start)
                                )
                            )
                        )
                    )
                )
            )
            (sleep 30)
            (f_falcons_available)
            (if (and (volume_test_players "tv_loc_building_a") (= b_falcon_dispatched02 false) (< s_falcons_active s_falcons_allowed))
                (begin
                    (marine_clean)
                    (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle")) 0) (= (b_falcon_available02 "sq_v_falcon02/vehicle" "sq_v_falcon02") false) (= (b_falcon_available02 "sq_v_falcon02_reinf/vehicle" "sq_v_falcon02_reinf") false))
                        (f_falcon_reinf02_bldg_a)
                    )
                )
                (if (and (volume_test_players "tv_loc_building_b") (= b_falcon_dispatched02 false) (< s_falcons_active s_falcons_allowed))
                    (begin
                        (marine_clean)
                        (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle")) 0) (= (b_falcon_available02 "sq_v_falcon02/vehicle" "sq_v_falcon02") false) (= (b_falcon_available02 "sq_v_falcon02_reinf/vehicle" "sq_v_falcon02_reinf") false))
                            (f_falcon_reinf02_bldg_b)
                        )
                    )
                    (if (and (volume_test_players "tv_loc_building_c") (= b_falcon_dispatched02 false) (< s_falcons_active s_falcons_allowed))
                        (begin
                            (marine_clean)
                            (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle")) 0) (= (b_falcon_available02 "sq_v_falcon02/vehicle" "sq_v_falcon02") false) (= (b_falcon_available02 "sq_v_falcon02_reinf/vehicle" "sq_v_falcon02_reinf") false))
                                (f_falcon_reinf02_bldg_c)
                            )
                        )
                        (if (and (= b_falcon_dispatched02 false) (< s_falcons_active s_falcons_allowed))
                            (begin
                                (marine_clean)
                                (if (and (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle")) 0) (<= (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle")) 0) (= (b_falcon_available02 "sq_v_falcon02/vehicle" "sq_v_falcon02") false) (= (b_falcon_available02 "sq_v_falcon02_reinf/vehicle" "sq_v_falcon02_reinf") false))
                                    (f_falcon_reinf02_bldg_start)
                                )
                            )
                        )
                    )
                )
            )
        )
    )
)

(script static void f_falcon_reinf01_bldg_start
    (set b_falcon_dispatched01 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon01_start_nanny true)
    (ai_place "sq_v_falcon01_reinf")
    (ai_force_active "sq_v_falcon01_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_reinforcement_falcon01_start)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon01_reinf" cs_marine_script)
)

(script static void f_falcon_reinf02_bldg_start
    (set b_falcon_dispatched02 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon02_start_nanny true)
    (ai_place "sq_v_falcon02_reinf")
    (ai_force_active "sq_v_falcon02_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_reinforcement_falcon02_start)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon02_reinf" cs_marine_script)
)

(script static void f_falcon_reinf01_bldg_a
    (set b_falcon_dispatched01 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon01a_nanny true)
    (ai_place "sq_v_falcon01_reinf")
    (ai_force_active "sq_v_falcon01_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_reinforcement_falcon_a1)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon01_reinf" cs_marine_script)
)

(script static void f_falcon_reinf02_bldg_a
    (set b_falcon_dispatched02 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon02a_nanny true)
    (ai_place "sq_v_falcon02_reinf")
    (ai_force_active "sq_v_falcon02_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_reinforcement_falcon_a2)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon02_reinf" cs_marine_script)
)

(script static void f_falcon_reinf01_bldg_b
    (set b_falcon_dispatched01 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon01b_nanny true)
    (ai_place "sq_v_falcon01_reinf")
    (ai_force_active "sq_v_falcon01_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_reinforcement_falcon_b1)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon01_reinf" cs_marine_script)
)

(script static void f_falcon_reinf02_bldg_b
    (set b_falcon_dispatched02 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon02b_nanny true)
    (ai_place "sq_v_falcon02_reinf")
    (ai_force_active "sq_v_falcon02_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_reinforcement_falcon_b2)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon02_reinf" cs_marine_script)
)

(script static void f_falcon_reinf01_bldg_c
    (set b_falcon_dispatched01 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon01c_nanny true)
    (ai_place "sq_v_falcon01_reinf")
    (ai_force_active "sq_v_falcon01_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_reinforcement_falcon_c1)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon01_reinf" cs_marine_script)
)

(script static void f_falcon_reinf02_bldg_c
    (set b_falcon_dispatched02 true)
    (set b_falcon_evac_dialog true)
    (sleep 1)
    (set b_falcon02c_nanny true)
    (ai_place "sq_v_falcon02_reinf")
    (ai_force_active "sq_v_falcon02_reinf" true)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (sleep 1)
    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_reinforcement_falcon_c2)
    (sleep 30)
    (cs_queue_command_script "sq_v_falcon02_reinf" cs_marine_script)
)

(script static void marine_clean
    (garbage_collect_unsafe)
    (set straggler_no 0)
    (sleep_until 
        (begin
            (if (not (unit_in_vehicle (unit (list_get (ai_actors "gr_marines") straggler_no))))
                (ai_erase (object_get_ai (list_get (ai_actors "gr_marines") straggler_no)))
                (set straggler_no (+ straggler_no 1))
            )
            (>= straggler_no (ai_living_count "gr_marines"))
        )
        5
    )
    (sleep 30)
    (if (and (= b_falcon_dispatched01 false) (= (b_falcon_available01 "sq_v_falcon01/vehicle" "sq_v_falcon01") false))
        (begin
            (ai_erase "sq_v_falcon01")
        )
    )
    (if (and (= b_falcon_dispatched01 false) (= (b_falcon_available01 "sq_v_falcon01_reinf/vehicle" "sq_v_falcon01_reinf") false))
        (begin
            (ai_erase "sq_v_falcon01_reinf")
        )
    )
    (if (and (= b_falcon_dispatched02 false) (= (b_falcon_available02 "sq_v_falcon02/vehicle" "sq_v_falcon02") false))
        (begin
            (ai_erase "sq_v_falcon02")
        )
    )
    (if (and (= b_falcon_dispatched02 false) (= (b_falcon_available02 "sq_v_falcon02_reinf/vehicle" "sq_v_falcon02_reinf") false))
        (begin
            (ai_erase "sq_v_falcon02_reinf")
        )
    )
    (sleep 30)
)

(script command_script void cs_reinforcement_falcon_a1
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_actor "sd_final_falcon_a/p10")
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_final_falcon_a/p8" 2)
    (f_blip_ai ai_current_actor blip_ordnance)
    (cs_fly_by "sd_final_falcon_a/p6" 1)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "sd_final_falcon_a/p15" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_final_falcon_a/p7" "sd_final_falcon_a/p9" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
    (ai_vehicle_exit "sq_v_falcon01_reinf/vehicle")
    (set b_falcon_dispatched01 false)
    (sleep 30)
)

(script dormant void falcon_a1_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon01a_nanny true) 1)
            (set b_falcon01a_nanny false)
            (sleep_until (= b_falcon_dispatched01 true) 5)
            (sleep_until (= b_falcon_dispatched01 false) 5 1600)
            (if (= b_falcon_dispatched01 true)
                (begin
                    (ai_teleport "sq_v_falcon01_reinf/vehicle" "sd_final_falcon_a/p7")
                    (ai_cannot_die "sq_v_falcon01_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon01_reinf/vehicle")
                    (set b_falcon_dispatched01 false)
                    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon01_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script command_script void cs_reinforcement_falcon_b1
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_actor "sd_final_falcon_b/p8")
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_ignore_obstacles true)
    (f_blip_ai ai_current_actor blip_ordnance)
    (cs_fly_by "sd_final_falcon_b/p10" 1)
    (cs_fly_by "sd_final_falcon_b/p6" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_final_falcon_b/p7" "sd_final_falcon_b/p9" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
    (ai_vehicle_exit "sq_v_falcon01_reinf/vehicle")
    (set b_falcon_dispatched01 false)
    (sleep 30)
)

(script dormant void falcon_b1_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon01b_nanny true) 1)
            (set b_falcon01b_nanny false)
            (sleep_until (= b_falcon_dispatched01 true) 5)
            (sleep_until (= b_falcon_dispatched01 false) 5 1600)
            (if (= b_falcon_dispatched01 true)
                (begin
                    (ai_teleport "sq_v_falcon01_reinf/vehicle" "sd_final_falcon_b/p7")
                    (ai_cannot_die "sq_v_falcon01_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon01_reinf/vehicle")
                    (set b_falcon_dispatched01 false)
                    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon01_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script command_script void cs_reinforcement_falcon_c1
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_actor "sd_final_falcon_c/p8")
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_ignore_obstacles true)
    (f_blip_ai ai_current_actor blip_ordnance)
    (cs_fly_by "sd_final_falcon_c/p10" 1)
    (cs_vehicle_speed 0.5)
    (cs_fly_by "sd_final_falcon_c/p6" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_final_falcon_c/p7" "sd_final_falcon_c/p9" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
    (ai_vehicle_exit ai_current_actor)
    (set b_falcon_dispatched01 false)
    (sleep 30)
)

(script dormant void falcon_c1_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon01c_nanny true) 1)
            (set b_falcon01c_nanny false)
            (sleep_until (= b_falcon_dispatched01 true) 5)
            (sleep_until (= b_falcon_dispatched01 false) 5 2400)
            (if (= b_falcon_dispatched01 true)
                (begin
                    (ai_teleport "sq_v_falcon01_reinf/vehicle" "sd_final_falcon_c/p7")
                    (ai_cannot_die "sq_v_falcon01_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon01_reinf/vehicle")
                    (set b_falcon_dispatched01 false)
                    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon01_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script command_script void cs_reinforcement_falcon01_start
    (ai_cannot_die ai_current_squad true)
    (cs_vehicle_speed_instantaneous 1)
    (cs_fly_by "sd_start_falcon/p0" 1)
    (f_blip_ai ai_current_actor blip_ordnance)
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_start_falcon/p1" 2)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "sd_start_falcon/p2" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_start_falcon/p3" "sd_start_falcon/p4" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
    (ai_vehicle_exit ai_current_actor)
    (set b_falcon_dispatched01 false)
    (sleep 30)
)

(script dormant void falcon_start1_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon01_start_nanny true) 1)
            (set b_falcon01_start_nanny false)
            (sleep_until (= b_falcon_dispatched01 true) 5)
            (sleep_until (= b_falcon_dispatched01 false) 5 1600)
            (if (= b_falcon_dispatched01 true)
                (begin
                    (ai_teleport "sq_v_falcon01_reinf/vehicle" "sd_start_falcon/p13")
                    (ai_cannot_die "sq_v_falcon01_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon01_reinf/vehicle")
                    (set b_falcon_dispatched01 false)
                    (cs_run_command_script "sq_v_falcon01_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon01_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script command_script void cs_reinforcement_falcon_a2
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_actor "sd_final_falcon_a/p11")
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_final_falcon_a/p12" 2)
    (f_blip_ai ai_current_actor blip_ordnance)
    (cs_fly_by "sd_final_falcon_a/p13" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_final_falcon_a/p14" "sd_final_falcon_a/p16" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
    (set b_falcon_dispatched02 false)
    (sleep 30)
)

(script dormant void falcon_a2_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon02a_nanny true) 1)
            (set b_falcon02a_nanny false)
            (sleep_until (= b_falcon_dispatched02 true) 5)
            (sleep_until (= b_falcon_dispatched02 false) 5 1600)
            (if (= b_falcon_dispatched02 true)
                (begin
                    (ai_teleport "sq_v_falcon02_reinf/vehicle" "sd_final_falcon_a/p14")
                    (ai_cannot_die "sq_v_falcon02_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon02_reinf/vehicle")
                    (set b_falcon_dispatched02 false)
                    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script command_script void cs_reinforcement_falcon_b2
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_actor "sd_final_falcon_b/p11")
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_ignore_obstacles true)
    (f_blip_ai ai_current_actor blip_ordnance)
    (cs_fly_by "sd_final_falcon_b/p12" 2)
    (cs_fly_by "sd_final_falcon_b/p3" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_final_falcon_b/p14" "sd_final_falcon_b/p15" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
    (set b_falcon_dispatched02 false)
    (sleep 30)
)

(script dormant void falcon_b2_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon02b_nanny true) 1)
            (set b_falcon02b_nanny false)
            (sleep_until (= b_falcon_dispatched02 true) 5)
            (sleep_until (= b_falcon_dispatched02 false) 5 1600)
            (if (= b_falcon_dispatched02 true)
                (begin
                    (ai_teleport "sq_v_falcon02_reinf/vehicle" "sd_final_falcon_b/p14")
                    (ai_cannot_die "sq_v_falcon02_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon02_reinf/vehicle")
                    (set b_falcon_dispatched02 false)
                    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script command_script void cs_reinforcement_falcon_c2
    (ai_cannot_die ai_current_squad true)
    (ai_teleport ai_current_actor "sd_final_falcon_c/p11")
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_ignore_obstacles true)
    (f_blip_ai ai_current_actor blip_ordnance)
    (cs_fly_by "sd_final_falcon_c/p12" 1)
    (cs_vehicle_speed 0.5)
    (cs_fly_by "sd_final_falcon_c/p13" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_final_falcon_c/p14" "sd_final_falcon_c/p15" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
    (set b_falcon_dispatched02 false)
    (sleep 30)
)

(script dormant void falcon_c2_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon02c_nanny true) 1)
            (set b_falcon02c_nanny false)
            (sleep_until (= b_falcon_dispatched02 true) 5)
            (sleep_until (= b_falcon_dispatched02 false) 5 2400)
            (if (= b_falcon_dispatched02 true)
                (begin
                    (ai_teleport "sq_v_falcon02_reinf/vehicle" "sd_final_falcon_c/p14")
                    (ai_cannot_die "sq_v_falcon02_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon02_reinf/vehicle")
                    (set b_falcon_dispatched02 false)
                    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script command_script void cs_reinforcement_falcon02_start
    (ai_cannot_die ai_current_squad true)
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_fly_to "sd_start_falcon/p10" 1)
    (f_blip_ai ai_current_actor blip_ordnance)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_start_falcon/p11" 2)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "sd_start_falcon/p12" 1)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_start_falcon/p13" "sd_start_falcon/p14" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
    (set b_falcon_dispatched02 false)
    (sleep 30)
)

(script dormant void falcon_start2_nanny
    (sleep_until 
        (begin
            (sleep_until (= b_falcon02_start_nanny true) 1)
            (set b_falcon02_start_nanny false)
            (sleep_until (= b_falcon_dispatched02 true) 5)
            (sleep_until (= b_falcon_dispatched02 false) 5 1600)
            (if (= b_falcon_dispatched02 true)
                (begin
                    (ai_teleport "sq_v_falcon02_reinf/vehicle" "sd_start_falcon/p3")
                    (ai_cannot_die "sq_v_falcon02_reinf/vehicle" false)
                    (f_unblip_ai "sq_v_falcon02_reinf/vehicle")
                    (set b_falcon_dispatched02 false)
                    (cs_run_command_script "sq_v_falcon02_reinf/vehicle" cs_marine_script)
                    (sleep 30)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 24 true)
                    (ai_vehicle_exit "sq_v_falcon02_reinf/vehicle")
                )
            )
            false
        )
    )
)

(script static void (f_player_teleport (player actor, cutscene_flag flag_name, boolean fade))
    (if (= fade true)
        (begin
            (sleep 60)
            (fade_out_for_player actor)
            (sleep 30)
        )
    )
    (effect_new_on_ground "objects\characters\spartans\fx\coop_teleport\coop_teleport.effect" actor)
    (object_teleport actor flag_name)
    (if (= fade true)
        (begin
            (sleep 30)
            (fade_in_for_player actor)
        )
    )
)

(script static boolean (f_action_test_evac (player actor))
    (if (and (> (object_get_health actor) 0) (unit_action_test_dpad_down actor) (not (and (unit_action_test_dpad_down actor) (unit_action_test_back actor))) (not (and (unit_action_test_dpad_down actor) (unit_action_test_start actor))))
        true
    )
)

(script dormant void player0_evac_nanny
    (wake player0_evac_reminder)
    (wake f_player0_flying)
    (sleep_until 
        (begin
            (unit_action_test_reset player0)
            (sleep_until (= (f_action_test_evac player0) true) 1)
            (if (and (b_player_lost player0) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (chud_clear_hs_variable player0 2)
                    (chud_set_static_hs_variable player0 3 1)
                    (if (or (and (not (volume_test_object "tv_loc_building_a" player0)) (or (volume_test_object "tv_loc_building_a" player1) (volume_test_object "tv_loc_building_a" player2) (volume_test_object "tv_loc_building_a" player3))) (= (f_bsp_any_player 2) true))
                        (f_player_teleport player0 "ins_building_a_player_00" true)
                        (if (or (and (not (volume_test_object "tv_loc_building_b" player0)) (or (volume_test_object "tv_loc_building_b" player1) (volume_test_object "tv_loc_building_b" player2) (volume_test_object "tv_loc_building_b" player3))) (= (f_bsp_any_player 3) true))
                            (f_player_teleport player0 "ins_building_b_player_00" true)
                            (if (or (and (not (volume_test_object "tv_loc_building_c" player0)) (or (volume_test_object "tv_loc_building_c" player1) (volume_test_object "tv_loc_building_c" player2) (volume_test_object "tv_loc_building_c" player3))) (= (f_bsp_any_player 4) true))
                                (f_player_teleport player0 "ins_building_c_player_00" true)
                                (if (and (not (volume_test_players "tv_loc_building_a")) (not (volume_test_players "tv_loc_building_b")) (not (volume_test_players "tv_loc_building_c")) (not (volume_test_object "tv_loc_building_start" player0)) (= (f_bsp_any_player 2) false) (= (f_bsp_any_player 3) false) (= (f_bsp_any_player 4) false))
                                    (f_player_teleport player0 "ins_start_player_00" true)
                                )
                            )
                        )
                    )
                )
            )
            (f_falcon_nanny)
            (chud_clear_hs_variable player0 3)
            (sleep 90)
            false
        )
        1
    )
)

(script dormant void player1_evac_nanny
    (wake player1_evac_reminder)
    (wake f_player1_flying)
    (sleep_until 
        (begin
            (unit_action_test_reset player1)
            (sleep_until (= (f_action_test_evac player1) true) 1)
            (if (and (b_player_lost player1) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (chud_clear_hs_variable player1 2)
                    (chud_set_static_hs_variable player1 3 1)
                    (if (or (and (not (volume_test_object "tv_loc_building_a" player1)) (or (volume_test_object "tv_loc_building_a" player0) (volume_test_object "tv_loc_building_a" player2) (volume_test_object "tv_loc_building_a" player3))) (= (f_bsp_any_player 2) true))
                        (f_player_teleport player1 "ins_building_a_player_01" true)
                        (if (or (and (not (volume_test_object "tv_loc_building_b" player1)) (or (volume_test_object "tv_loc_building_b" player0) (volume_test_object "tv_loc_building_b" player2) (volume_test_object "tv_loc_building_b" player3))) (= (f_bsp_any_player 3) true))
                            (f_player_teleport player1 "ins_building_b_player_01" true)
                            (if (or (and (not (volume_test_object "tv_loc_building_c" player1)) (or (volume_test_object "tv_loc_building_c" player0) (volume_test_object "tv_loc_building_c" player2) (volume_test_object "tv_loc_building_c" player3))) (= (f_bsp_any_player 4) true))
                                (f_player_teleport player1 "ins_building_c_player_01" true)
                                (if (and (not (volume_test_players "tv_loc_building_a")) (not (volume_test_players "tv_loc_building_b")) (not (volume_test_players "tv_loc_building_c")) (not (volume_test_object "tv_loc_building_start" player1)) (= (f_bsp_any_player 2) false) (= (f_bsp_any_player 3) false) (= (f_bsp_any_player 4) false))
                                    (f_player_teleport player1 "ins_start_player_01" true)
                                )
                            )
                        )
                    )
                )
            )
            (f_falcon_nanny)
            (chud_clear_hs_variable player1 3)
            (sleep 90)
            false
        )
        1
    )
)

(script dormant void player2_evac_nanny
    (wake player2_evac_reminder)
    (wake f_player2_flying)
    (sleep_until 
        (begin
            (unit_action_test_reset player2)
            (sleep_until (= (f_action_test_evac player2) true) 1)
            (if (and (b_player_lost player2) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (chud_clear_hs_variable player2 2)
                    (chud_set_static_hs_variable player2 3 1)
                    (if (or (and (not (volume_test_object "tv_loc_building_a" player2)) (or (volume_test_object "tv_loc_building_a" player0) (volume_test_object "tv_loc_building_a" player1) (volume_test_object "tv_loc_building_a" player3))) (= (f_bsp_any_player 2) true))
                        (f_player_teleport player2 "ins_building_a_player_02" true)
                        (if (or (and (not (volume_test_object "tv_loc_building_b" player2)) (or (volume_test_object "tv_loc_building_b" player0) (volume_test_object "tv_loc_building_b" player1) (volume_test_object "tv_loc_building_b" player3))) (= (f_bsp_any_player 3) true))
                            (f_player_teleport player2 "ins_building_b_player_02" true)
                            (if (or (and (not (volume_test_object "tv_loc_building_c" player2)) (or (volume_test_object "tv_loc_building_c" player0) (volume_test_object "tv_loc_building_c" player1) (volume_test_object "tv_loc_building_c" player3))) (= (f_bsp_any_player 4) true))
                                (f_player_teleport player2 "ins_building_c_player_02" true)
                                (if (and (not (volume_test_players "tv_loc_building_a")) (not (volume_test_players "tv_loc_building_b")) (not (volume_test_players "tv_loc_building_c")) (not (volume_test_object "tv_loc_building_start" player2)) (= (f_bsp_any_player 2) false) (= (f_bsp_any_player 3) false) (= (f_bsp_any_player 4) false))
                                    (f_player_teleport player2 "ins_start_player_02" true)
                                )
                            )
                        )
                    )
                )
            )
            (f_falcon_nanny)
            (chud_clear_hs_variable player2 3)
            (sleep 90)
            false
        )
    )
)

(script dormant void player3_evac_nanny
    (wake player3_evac_reminder)
    (wake f_player3_flying)
    (sleep_until 
        (begin
            (unit_action_test_reset player3)
            (sleep_until (= (f_action_test_evac player3) true) 1)
            (if (and (b_player_lost player3) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (chud_clear_hs_variable player3 2)
                    (chud_set_static_hs_variable player3 3 1)
                    (if (or (and (not (volume_test_object "tv_loc_building_a" player3)) (or (volume_test_object "tv_loc_building_a" player0) (volume_test_object "tv_loc_building_a" player1) (volume_test_object "tv_loc_building_a" player2))) (= (f_bsp_any_player 2) true))
                        (f_player_teleport player3 "ins_building_a_player_03" true)
                        (if (or (and (not (volume_test_object "tv_loc_building_b" player3)) (or (volume_test_object "tv_loc_building_b" player0) (volume_test_object "tv_loc_building_b" player1) (volume_test_object "tv_loc_building_b" player2))) (= (f_bsp_any_player 3) true))
                            (f_player_teleport player3 "ins_building_b_player_03" true)
                            (if (or (and (not (volume_test_object "tv_loc_building_c" player3)) (or (volume_test_object "tv_loc_building_c" player0) (volume_test_object "tv_loc_building_c" player1) (volume_test_object "tv_loc_building_c" player2))) (= (f_bsp_any_player 4) true))
                                (f_player_teleport player3 "ins_building_c_player_03" true)
                                (if (and (not (volume_test_players "tv_loc_building_a")) (not (volume_test_players "tv_loc_building_b")) (not (volume_test_players "tv_loc_building_c")) (not (volume_test_object "tv_loc_building_start" player3)) (= (f_bsp_any_player 2) false) (= (f_bsp_any_player 3) false) (= (f_bsp_any_player 4) false))
                                    (f_player_teleport player3 "ins_start_player_03" true)
                                )
                            )
                        )
                    )
                )
            )
            (f_falcon_nanny)
            (chud_clear_hs_variable player3 3)
            (sleep 90)
            false
        )
    )
)

(script dormant void player0_evac_reminder
    (sleep_until 
        (begin
            (sleep 90)
            (if (and (> (object_get_health player0) 0) (b_player_lost player0) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (f_sleep_player0 5)
                    (if (and (> (object_get_health player0) 0) (b_player_lost player0) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                        (begin
                            (unit_action_test_reset player0)
                            (chud_set_static_hs_variable player0 2 1)
                        )
                    )
                )
                (chud_clear_hs_variable player0 2)
            )
            false
        )
    )
)

(script dormant void player1_evac_reminder
    (sleep_until 
        (begin
            (sleep 90)
            (if (and (> (object_get_health player1) 0) (b_player_lost player1) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (f_sleep_player1 5)
                    (if (and (> (object_get_health player1) 0) (b_player_lost player1) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                        (begin
                            (unit_action_test_reset player1)
                            (chud_set_static_hs_variable player1 2 1)
                        )
                    )
                )
                (chud_clear_hs_variable player1 2)
            )
            false
        )
    )
)

(script dormant void player2_evac_reminder
    (sleep_until 
        (begin
            (sleep 90)
            (if (and (> (object_get_health player2) 0) (b_player_lost player2) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (f_sleep_player2 5)
                    (if (and (> (object_get_health player2) 0) (b_player_lost player2) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                        (begin
                            (unit_action_test_reset player2)
                            (chud_set_static_hs_variable player2 2 1)
                        )
                    )
                )
                (chud_clear_hs_variable player2 2)
            )
            false
        )
    )
)

(script dormant void player3_evac_reminder
    (sleep_until 
        (begin
            (sleep 90)
            (if (and (> (object_get_health player3) 0) (b_player_lost player3) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (f_sleep_player3 5)
                    (if (and (> (object_get_health player3) 0) (b_player_lost player3) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                        (begin
                            (unit_action_test_reset player3)
                            (chud_set_static_hs_variable player3 2 1)
                        )
                    )
                )
                (chud_clear_hs_variable player3 2)
            )
            false
        )
    )
)

(script static boolean g_all_lost
    (if (and (= (b_player_lost player0) true) (= (b_player_lost player1) true) (= (b_player_lost player2) true) (= (b_player_lost player3) true))
        true
    )
)

(script static void (f_sleep_player0 (short l_timer))
    (set g_count0 0)
    (sleep_until 
        (begin
            (if (and (> (object_get_health player0) 0) (b_player_lost player0) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (set g_count0 (+ g_count0 1))
                )
                (begin
                    (set g_count0 65535)
                )
            )
            (or (>= g_count0 l_timer) (= g_count0 65535))
        )
        30
    )
)

(script static void (f_sleep_player1 (short l_timer))
    (set g_count1 0)
    (sleep_until 
        (begin
            (if (and (> (object_get_health player1) 0) (b_player_lost player1) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (set g_count1 (+ g_count1 1))
                )
                (begin
                    (set g_count1 65535)
                )
            )
            (or (>= g_count1 l_timer) (= g_count1 65535))
        )
        30
    )
)

(script static void (f_sleep_player2 (short l_timer))
    (set g_count2 0)
    (sleep_until 
        (begin
            (if (and (> (object_get_health player2) 0) (b_player_lost player2) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (set g_count2 (+ g_count2 1))
                )
                (begin
                    (set g_count2 65535)
                )
            )
            (or (>= g_count2 l_timer) (= g_count2 65535))
        )
        30
    )
)

(script static void (f_sleep_player3 (short l_timer))
    (set g_count3 0)
    (sleep_until 
        (begin
            (if (and (> (object_get_health player3) 0) (b_player_lost player3) (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false))
                (begin
                    (set g_count3 (+ g_count3 1))
                )
                (begin
                    (set g_count3 65535)
                )
            )
            (or (>= g_count3 l_timer) (= g_count3 65535))
        )
        30
    )
)

(script static boolean (b_player_lost (player actor))
    (if (and (= (unit_in_vehicle_type actor g_banshee_type) false) (= (unit_in_vehicle_type actor g_falcon_type) false) (!= (object_get_bsp actor) 2) (!= (object_get_bsp actor) 3) (!= (object_get_bsp actor) 4) (not (b_player_on_building_with_vehicle actor "tv_falcon_building_a" "tv_falcon_building_a2" "tv_falcon_building_a2")) (not (b_player_on_building_with_vehicle actor "tv_falcon_building_b" "tv_falcon_building_b" "tv_falcon_building_b")) (not (b_player_on_building_with_vehicle actor "tv_falcon_building_c1" "tv_falcon_building_c2" "tv_falcon_building_c3")) (not (b_player_on_building_with_vehicle actor "tv_loc_building_start" "tv_loc_building_start" "tv_loc_building_start")))
        true
    )
)

(script static boolean (b_player_on_building_with_vehicle (player actor, trigger_volume tv1, trigger_volume tv2, trigger_volume tv3))
    (or (and (or (volume_test_object tv1 actor) (volume_test_object tv2 actor) (volume_test_object tv3 actor)) (or (f_falcon_in_volume tv1) (f_falcon_in_volume tv2) (f_falcon_in_volume tv3))) (and (or (volume_test_object tv1 actor) (volume_test_object tv2 actor) (volume_test_object tv3 actor)) (or (f_banshee_in_volume tv1) (f_banshee_in_volume tv2) (f_banshee_in_volume tv3))))
)

(script static void f_player0_pilotless
    (if (and (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player0) 0) 31 player0)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player0) 0) 31 player1)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player0) 0) 31 player2)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player0) 0) 31 player3)) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player0) 0) none player0))
        (if (and (not (volume_test_object "tv_loc_building_a" player0)) (not (volume_test_object "tv_loc_building_b" player0)) (not (volume_test_object "tv_loc_building_c" player0)) (not (volume_test_object "tv_loc_building_start" player0)))
            (f_player_teleport player0 "ins_start_player_00" false)
        )
    )
)

(script static void f_player1_pilotless
    (if (and (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player1) 0) 31 player0)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player1) 0) 31 player1)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player1) 0) 31 player2)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player1) 0) 31 player3)) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player1) 0) none player1))
        (if (and (not (volume_test_object "tv_loc_building_a" player1)) (not (volume_test_object "tv_loc_building_b" player1)) (not (volume_test_object "tv_loc_building_c" player1)) (not (volume_test_object "tv_loc_building_start" player1)))
            (f_player_teleport player1 "ins_start_player_01" false)
        )
    )
)

(script static void f_player2_pilotless
    (if (and (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player2) 0) 31 player0)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player2) 0) 31 player1)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player2) 0) 31 player2)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player2) 0) 31 player3)) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player2) 0) none player2))
        (if (and (not (volume_test_object "tv_loc_building_a" player2)) (not (volume_test_object "tv_loc_building_b" player2)) (not (volume_test_object "tv_loc_building_c" player2)) (not (volume_test_object "tv_loc_building_start" player2)))
            (f_player_teleport player2 "ins_start_player_02" false)
        )
    )
)

(script static void f_player3_pilotless
    (if (and (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player3) 0) 31 player0)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player3) 0) 31 player1)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player3) 0) 31 player2)) (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player3) 0) 31 player3)) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad player3) 0) none player3))
        (if (and (not (volume_test_object "tv_loc_building_a" player3)) (not (volume_test_object "tv_loc_building_b" player3)) (not (volume_test_object "tv_loc_building_c" player3)) (not (volume_test_object "tv_loc_building_start" player3)))
            (f_player_teleport player3 "ins_start_player_03" false)
        )
    )
)

(script dormant void f_player0_flying
    (sleep_until (= (player_is_in_game player0) true) 1)
    (sleep_until (= (player_is_in_game player0) false) 1)
    (f_player1_pilotless)
    (f_player2_pilotless)
    (f_player3_pilotless)
)

(script dormant void f_player1_flying
    (sleep_until (= (player_is_in_game player1) true) 1)
    (sleep_until (= (player_is_in_game player1) false) 1)
    (f_player0_pilotless)
    (f_player2_pilotless)
    (f_player3_pilotless)
)

(script dormant void f_player2_flying
    (sleep_until (= (player_is_in_game player2) true) 1)
    (sleep_until (= (player_is_in_game player2) false) 1)
    (f_player0_pilotless)
    (f_player1_pilotless)
    (f_player3_pilotless)
)

(script dormant void f_player3_flying
    (sleep_until (= (player_is_in_game player3) true) 1)
    (sleep_until (= (player_is_in_game player3) false) 1)
    (f_player1_pilotless)
    (f_player2_pilotless)
    (f_player0_pilotless)
)

(script static void (falcon_gunner_reserve (boolean reserve))
    (if (and (= b_falcon_dispatched01 false) (= b_falcon_dispatched02 false) (= reserve true))
        (begin
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 29 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 19 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 29 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 19 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 29 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 19 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 29 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 19 true)
        )
        (begin
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 29 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 19 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 29 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") 19 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 29 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 19 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 29 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") 19 false)
        )
    )
)

(script command_script void cs_marine_script
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_enable_dialogue true)
    (ai_prefer_target_ai "gr_marines" "gr_banshee" true)
    (sleep_until 
        (begin
            (if (and (or (volume_test_objects "tv_loc_building_start" (ai_actors ai_current_actor)) (volume_test_objects "tv_loc_building_a" (ai_actors ai_current_actor)) (volume_test_objects "tv_loc_building_b" (ai_actors ai_current_actor)) (volume_test_objects "tv_loc_building_c" (ai_actors ai_current_actor))) (not (= (ai_carrying_player ai_current_actor) true)))
                (begin
                    (ai_disregard (ai_get_object ai_current_actor) true)
                    (cs_enable_targeting false)
                )
                (begin
                    (ai_disregard (ai_get_object ai_current_actor) false)
                    (cs_enable_targeting true)
                )
            )
            false
        )
        30
    )
)

(script static void (f_load_troopers_sec (ai driver, ai driver_squad, short delay, ai troopers))
    (if (> (ai_living_count troopers) 0)
        (begin
            (falcon_gunner_reserve true)
            (ai_set_blind troopers true)
            (ai_set_deaf troopers true)
            (sleep 120)
            (unit_open (ai_vehicle_get driver))
            (vehicle_hover (ai_vehicle_get_from_spawn_point driver) true)
            (sleep 90)
            (ai_vehicle_enter troopers (ai_vehicle_get_from_spawn_point driver) 16)
            (sleep_until (= (f_all_squad_in_vehicle troopers driver_squad) true) 5 delay)
            (falcon_gunner_reserve false)
            (vehicle_hover (ai_vehicle_get_from_spawn_point driver) false)
            (unit_close (ai_vehicle_get driver))
        )
    )
)

(script command_script void cs_stay_in_turret
    (cs_shoot true)
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_abort_on_damage false)
    (cs_abort_on_alert false)
)

(script static boolean f_player0_in_banshee
    (if (= (unit_in_vehicle_type player0 g_banshee_type) true)
        true
    )
)

(script static boolean f_player1_in_banshee
    (if (= (unit_in_vehicle_type player1 g_banshee_type) true)
        true
    )
)

(script static boolean f_player2_in_banshee
    (if (= (unit_in_vehicle_type player2 g_banshee_type) true)
        true
    )
)

(script static boolean f_player3_in_banshee
    (if (= (unit_in_vehicle_type player3 g_banshee_type) true)
        true
    )
)

(script static boolean (f_players_driving_falcon (ai falcon))
    (if (or (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) 31 player0) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) 31 player1) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) 31 player2) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) 31 player3))
        true
    )
)

(script static boolean (f_players_in_falcon (ai falcon))
    (if (or (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) none player0) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) none player1) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) none player2) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon 0) none player3))
        true
    )
)

(script continuous void zone_loader
    (if (and (!= prev_zone 1) (= (current_zone_set) 1))
        (begin
            (set prev_zone 1)
            (zone_set_trigger_volume_enable "zone_set:m52_010_a" true)
            (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
            (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
        )
    )
    (if (and (!= prev_zone 2) (= (current_zone_set) 2))
        (begin
            (set prev_zone 2)
            (zone_set_trigger_volume_enable "zone_set:m52_020_b" true)
            (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
            (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
        )
    )
    (if (and (!= prev_zone 3) (= (current_zone_set) 3))
        (begin
            (set prev_zone 3)
            (zone_set_trigger_volume_enable "zone_set:m52_030_c" true)
            (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
            (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
        )
    )
    (if (and (!= prev_zone 4) (= (current_zone_set) 4))
        (begin
            (set prev_zone 4)
            (zone_set_trigger_volume_enable "zone_set:m52_040_oni" true)
            (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
            (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
            (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
        )
    )
    (if (and (!= prev_zone 5) (= (current_zone_set) 5))
        (begin
            (set prev_zone 5)
            (zone_set_trigger_volume_enable "zone_set:m52_040_oni" false)
            (zone_set_trigger_volume_enable "zone_set:m52_010_a" false)
            (zone_set_trigger_volume_enable "zone_set:m52_020_b" false)
            (zone_set_trigger_volume_enable "zone_set:m52_030_c" false)
        )
    )
)

(script command_script void cs_kill_script
    (sleep 1)
)

(script command_script void boost_5seconds
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (sleep 150)
)

(script command_script void boost_10seconds
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (sleep 300)
)

(script command_script void boost_20seconds
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (sleep 600)
)

(script command_script void boost_infinite
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (sleep_forever)
)

(script static void object_removal
    (if (= g_prev_mission 1)
        (begin
            (device_set_position "dm_bldg_a_door01" 0)
            (object_destroy_folder "building_a_control")
            (object_destroy_folder "building_a_equipment")
            (object_destroy_folder "building_a_weapons")
            (object_destroy_folder "building_a_crates")
            (object_destroy_folder "building_a_scenery")
            (object_destroy_folder "bldg_a_interior_bodies")
            (ai_erase "sq_bldg_a_trooper_01")
            (ai_erase "gr_bldg_a")
        )
        (if (= g_prev_mission 2)
            (begin
                (device_set_position "dm_bldg_b_door01" 0)
                (device_set_position "dm_bldg_b_door02" 0)
                (ai_erase "gr_bldg_b_disco")
                (ai_erase "gr_bldg_b")
                (object_destroy_folder "bldg_b_interior_bodies")
                (object_destroy_folder "building_b_weapons")
                (object_destroy_folder "building_b_equipment")
                (object_destroy_folder "building_b_controls")
                (object_destroy_folder "building_b_crates")
                (object_destroy_folder "building_b_scenery")
                (object_destroy_folder "building_b_dm")
                (ai_erase "sq_bldg_b_trooper_01")
                (ai_erase "sq_bldg_b_trooper_02")
                (ai_erase "sq_bldg_b_trooper_03")
                (ai_erase "sq_bldg_b_trooper_04")
            )
            (if (= g_prev_mission 3)
                (begin
                    (device_set_power "dm_bldg_c_door02a" 0)
                    (device_set_power "dm_bldg_c_door01a" 0)
                    (device_set_position "dm_bldg_c_door02a" 0)
                    (device_set_position "dm_bldg_c_door01a" 0)
                    (device_set_power "dc_bldg_c_switch01a" 0)
                    (device_set_power "dc_bldg_c_switch02a" 0)
                    (ai_erase "gr_bldg_c")
                    (object_destroy_folder "bldg_c_interior_bodies")
                    (object_destroy_folder "building_c_controls")
                    (object_destroy_folder "building_c_equipment")
                    (object_destroy_folder "building_c_weapons")
                    (object_destroy_folder "building_c_crates")
                    (object_destroy_folder "building_c_scenery")
                    (object_destroy_folder "building_c_vehicles")
                )
                (if (= g_prev_mission 10)
                    (begin
                        (device_set_power "dm_bldg_c_door01a" 0)
                        (device_set_position "dm_bldg_c_door01a" 0)
                        (device_set_power "dm_bldg_c_door02a" 0)
                        (device_set_position "dm_bldg_c_door02a" 0)
                        (device_set_power "dc_bldg_c_switch01a" 0)
                        (device_set_power "dc_bldg_c_switch02a" 0)
                        (object_destroy_folder "bldg_c_interior_bodies")
                        (object_destroy_folder "building_c_controls")
                        (object_destroy_folder "building_c_equipment")
                        (object_destroy_folder "building_c_weapons")
                        (object_destroy_folder "building_c_crates")
                        (object_destroy_folder "building_c_scenery")
                        (object_destroy_folder "building_c_vehicles")
                        (device_set_power "dm_bldg_b_door01" 0)
                        (device_set_position "dm_bldg_b_door01" 0)
                        (device_set_power "dm_bldg_b_door02" 0)
                        (device_set_position "dm_bldg_b_door02" 0)
                        (object_destroy_folder "bldg_b_interior_bodies")
                        (object_destroy_folder "building_b_weapons")
                        (object_destroy_folder "building_b_equipment")
                        (object_destroy_folder "building_b_controls")
                        (object_destroy_folder "building_b_crates")
                        (object_destroy_folder "building_b_scenery")
                        (object_destroy_folder "building_b_dm")
                        (device_set_power "dm_bldg_a_door01" 0)
                        (device_set_position "dm_bldg_a_door01" 0)
                        (object_destroy_folder "building_a_control")
                        (object_destroy_folder "building_a_equipment")
                        (object_destroy_folder "building_a_weapons")
                        (object_destroy_folder "building_a_crates")
                        (object_destroy_folder "building_a_scenery")
                        (object_destroy_folder "bldg_a_interior_bodies")
                    )
                )
            )
        )
    )
)

(script static boolean (f_falcon_in_volume (trigger_volume tv))
    (if (or (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle"))))
        true
    )
)

(script static boolean (f_banshee_in_volume (trigger_volume tv))
    (if (or (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_falcon_banshees00/pilot01")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_falcon_banshees00/pilot01"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_falcon_banshees00/pilot02")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_falcon_banshees00/pilot02"))) (and (> (object_get_health (ai_vehicle_get_from_spawn_point "sq_empty_banshee01/pilot")) 0) (volume_test_object tv (ai_vehicle_get_from_spawn_point "sq_empty_banshee01/pilot"))))
        true
    )
)

(script continuous void banshee_cleanup
    (sleep 600)
    (banshee_vehicle_cleanup "sq_banshee01/pilot01")
    (banshee_vehicle_cleanup "sq_banshee01/pilot02")
    (banshee_vehicle_cleanup "sq_banshee02/pilot01")
    (banshee_vehicle_cleanup "sq_banshee02/pilot02")
    (banshee_vehicle_cleanup "sq_banshee03/pilot01")
    (banshee_vehicle_cleanup "sq_banshee03/pilot02")
    (banshee_vehicle_cleanup "sq_banshee04/pilot01")
    (banshee_vehicle_cleanup "sq_banshee04/pilot02")
    (banshee_vehicle_cleanup "sq_banshee05/pilot01")
    (banshee_vehicle_cleanup "sq_banshee05/pilot02")
    (banshee_vehicle_cleanup "sq_banshee06/pilot01")
    (banshee_vehicle_cleanup "sq_banshee06/pilot02")
    (banshee_vehicle_cleanup "sq_banshee07/pilot01")
    (banshee_vehicle_cleanup "sq_banshee07/pilot02")
    (banshee_vehicle_cleanup "sq_banshee08/pilot01")
    (banshee_vehicle_cleanup "sq_banshee08/pilot02")
    (banshee_vehicle_cleanup "sq_banshee09/pilot01")
    (banshee_vehicle_cleanup "sq_banshee09/pilot02")
    (banshee_vehicle_cleanup "sq_oni_banshee_01/pilot01")
    (banshee_vehicle_cleanup "sq_oni_banshee_01/pilot02")
    (banshee_vehicle_cleanup "sq_oni_banshee_01/pilot03")
    (banshee_vehicle_cleanup "sq_oni_banshee_02/pilot01")
    (banshee_vehicle_cleanup "sq_oni_banshee_02/pilot02")
    (banshee_vehicle_cleanup "sq_oni_banshee_02/pilot03")
    (banshee_vehicle_cleanup "sq_oni_banshee_03/pilot01")
    (banshee_vehicle_cleanup "sq_oni_banshee_03/pilot02")
    (banshee_vehicle_cleanup "sq_oni_banshee_03/pilot03")
    (banshee_vehicle_cleanup "sq_oni_banshee_04/pilot01")
    (banshee_vehicle_cleanup "sq_oni_banshee_04/pilot02")
    (banshee_vehicle_cleanup "sq_oni_banshee_04/pilot03")
    (banshee_vehicle_cleanup "sq_oni_banshee_05/pilot01")
    (banshee_vehicle_cleanup "sq_oni_banshee_05/pilot02")
    (banshee_vehicle_cleanup "sq_oni_banshee_05/pilot03")
    (banshee_vehicle_cleanup "sq_oni_banshee_06/pilot01")
    (banshee_vehicle_cleanup "sq_oni_banshee_06/pilot02")
    (banshee_vehicle_cleanup "sq_oni_banshee_06/pilot03")
    (banshee_vehicle_cleanup "sq_sec_beta_b03a/pilot01")
    (banshee_vehicle_cleanup "sq_sec_beta_b03a/pilot02")
    (banshee_vehicle_cleanup "sq_sec_beta_b03a/pilot03")
    (banshee_vehicle_cleanup "sq_sec_gamma_b02/pilot01")
    (banshee_vehicle_cleanup "sq_sec_gamma_b02/pilot02")
    (banshee_vehicle_cleanup "sq_sec_gamma_b02/pilot03")
    (banshee_vehicle_cleanup "sq_sec_gamma_b03a/pilot01")
    (banshee_vehicle_cleanup "sq_sec_gamma_b03a/pilot02")
    (banshee_vehicle_cleanup "sq_sec_gamma_b03b/pilot01")
    (banshee_vehicle_cleanup "sq_sec_gamma_b03b/pilot02")
    (banshee_vehicle_cleanup "sq_falcon_banshees00/pilot01")
    (banshee_vehicle_cleanup "sq_falcon_banshees00/pilot02")
)

(script dormant void vehicle_reserve00
    (sleep_until 
        (begin
            (sleep_until (= (unit_in_vehicle (player0)) true) 5)
            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") none player0)
                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle"))
                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") none player0)
                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle"))
                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") none player0)
                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle"))
                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") none player0)
                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle"))
                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01") none player0)
                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01"))
                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02") none player0)
                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02"))
                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01") none player0)
                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01"))
                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02") none player0)
                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02"))
                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01") none player0)
                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01"))
                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02") none player0)
                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02"))
                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01") none player0)
                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01"))
                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02") none player0)
                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02"))
                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01") none player0)
                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01"))
                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02") none player0)
                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02"))
                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01") none player0)
                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01"))
                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02") none player0)
                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02"))
                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01") none player0)
                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01"))
                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02") none player0)
                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02"))
                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01") none player0)
                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01"))
                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02") none player0)
                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02"))
                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01") none player0)
                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01"))
                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02") none player0)
                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02"))
                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01") none player0)
                                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01"))
                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02") none player0)
                                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02"))
                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03") none player0)
                                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03"))
                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01") none player0)
                                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01"))
                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02") none player0)
                                                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02"))
                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03") none player0)
                                                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03"))
                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01") none player0)
                                                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01"))
                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02") none player0)
                                                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02"))
                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03") none player0)
                                                                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03"))
                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01") none player0)
                                                                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01"))
                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02") none player0)
                                                                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02"))
                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03") none player0)
                                                                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03"))
                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01") none player0)
                                                                                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01"))
                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02") none player0)
                                                                                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02"))
                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03") none player0)
                                                                                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03"))
                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01") none player0)
                                                                                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01"))
                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02") none player0)
                                                                                                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02"))
                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03") none player0)
                                                                                                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03"))
                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01") none player0)
                                                                                                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01"))
                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02") none player0)
                                                                                                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02"))
                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03") none player0)
                                                                                                                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03"))
                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01") none player0)
                                                                                                                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01"))
                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02") none player0)
                                                                                                                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02"))
                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03") none player0)
                                                                                                                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03"))
                                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01") none player0)
                                                                                                                                                                                                        (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01"))
                                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02") none player0)
                                                                                                                                                                                                            (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02"))
                                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01") none player0)
                                                                                                                                                                                                                (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01"))
                                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02") none player0)
                                                                                                                                                                                                                    (set reserve_vehicle00 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02"))
                                                                                                                                                                                                                )
                                                                                                                                                                                                            )
                                                                                                                                                                                                        )
                                                                                                                                                                                                    )
                                                                                                                                                                                                )
                                                                                                                                                                                            )
                                                                                                                                                                                        )
                                                                                                                                                                                    )
                                                                                                                                                                                )
                                                                                                                                                                            )
                                                                                                                                                                        )
                                                                                                                                                                    )
                                                                                                                                                                )
                                                                                                                                                            )
                                                                                                                                                        )
                                                                                                                                                    )
                                                                                                                                                )
                                                                                                                                            )
                                                                                                                                        )
                                                                                                                                    )
                                                                                                                                )
                                                                                                                            )
                                                                                                                        )
                                                                                                                    )
                                                                                                                )
                                                                                                            )
                                                                                                        )
                                                                                                    )
                                                                                                )
                                                                                            )
                                                                                        )
                                                                                    )
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            false
        )
    )
)

(script dormant void vehicle_reserve01
    (sleep_until 
        (begin
            (sleep_until (= (unit_in_vehicle (player1)) true) 5)
            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") none player1)
                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle"))
                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") none player1)
                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle"))
                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") none player1)
                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle"))
                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") none player1)
                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle"))
                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01") none player1)
                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01"))
                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02") none player1)
                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02"))
                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01") none player1)
                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01"))
                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02") none player1)
                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02"))
                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01") none player1)
                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01"))
                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02") none player1)
                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02"))
                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01") none player1)
                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01"))
                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02") none player1)
                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02"))
                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01") none player1)
                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01"))
                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02") none player1)
                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02"))
                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01") none player1)
                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01"))
                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02") none player1)
                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02"))
                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01") none player1)
                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01"))
                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02") none player1)
                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02"))
                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01") none player1)
                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01"))
                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02") none player1)
                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02"))
                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01") none player1)
                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01"))
                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02") none player1)
                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02"))
                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01") none player1)
                                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01"))
                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02") none player1)
                                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02"))
                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03") none player1)
                                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03"))
                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01") none player1)
                                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01"))
                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02") none player1)
                                                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02"))
                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03") none player1)
                                                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03"))
                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01") none player1)
                                                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01"))
                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02") none player1)
                                                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02"))
                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03") none player1)
                                                                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03"))
                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01") none player1)
                                                                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01"))
                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02") none player1)
                                                                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02"))
                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03") none player1)
                                                                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03"))
                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01") none player1)
                                                                                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01"))
                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02") none player1)
                                                                                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02"))
                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03") none player1)
                                                                                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03"))
                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01") none player1)
                                                                                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01"))
                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02") none player1)
                                                                                                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02"))
                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03") none player1)
                                                                                                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03"))
                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01") none player0)
                                                                                                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01"))
                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02") none player0)
                                                                                                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02"))
                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03") none player0)
                                                                                                                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03"))
                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01") none player0)
                                                                                                                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01"))
                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02") none player0)
                                                                                                                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02"))
                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03") none player0)
                                                                                                                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03"))
                                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01") none player0)
                                                                                                                                                                                                        (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01"))
                                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02") none player0)
                                                                                                                                                                                                            (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02"))
                                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01") none player0)
                                                                                                                                                                                                                (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01"))
                                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02") none player0)
                                                                                                                                                                                                                    (set reserve_vehicle01 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02"))
                                                                                                                                                                                                                )
                                                                                                                                                                                                            )
                                                                                                                                                                                                        )
                                                                                                                                                                                                    )
                                                                                                                                                                                                )
                                                                                                                                                                                            )
                                                                                                                                                                                        )
                                                                                                                                                                                    )
                                                                                                                                                                                )
                                                                                                                                                                            )
                                                                                                                                                                        )
                                                                                                                                                                    )
                                                                                                                                                                )
                                                                                                                                                            )
                                                                                                                                                        )
                                                                                                                                                    )
                                                                                                                                                )
                                                                                                                                            )
                                                                                                                                        )
                                                                                                                                    )
                                                                                                                                )
                                                                                                                            )
                                                                                                                        )
                                                                                                                    )
                                                                                                                )
                                                                                                            )
                                                                                                        )
                                                                                                    )
                                                                                                )
                                                                                            )
                                                                                        )
                                                                                    )
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            false
        )
    )
)

(script dormant void vehicle_reserve02
    (sleep_until 
        (begin
            (sleep_until (= (unit_in_vehicle (player2)) true) 5)
            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") none player2)
                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle"))
                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") none player2)
                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle"))
                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") none player2)
                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle"))
                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") none player2)
                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle"))
                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01") none player2)
                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01"))
                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02") none player2)
                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02"))
                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01") none player2)
                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01"))
                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02") none player2)
                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02"))
                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01") none player2)
                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01"))
                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02") none player2)
                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02"))
                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01") none player2)
                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01"))
                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02") none player2)
                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02"))
                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01") none player2)
                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01"))
                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02") none player2)
                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02"))
                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01") none player2)
                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01"))
                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02") none player2)
                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02"))
                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01") none player2)
                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01"))
                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02") none player2)
                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02"))
                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01") none player2)
                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01"))
                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02") none player2)
                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02"))
                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01") none player2)
                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01"))
                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02") none player2)
                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02"))
                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01") none player2)
                                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01"))
                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02") none player2)
                                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02"))
                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03") none player2)
                                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03"))
                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01") none player2)
                                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01"))
                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02") none player2)
                                                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02"))
                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03") none player2)
                                                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03"))
                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01") none player2)
                                                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01"))
                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02") none player2)
                                                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02"))
                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03") none player2)
                                                                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03"))
                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01") none player2)
                                                                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01"))
                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02") none player2)
                                                                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02"))
                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03") none player2)
                                                                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03"))
                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01") none player2)
                                                                                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01"))
                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02") none player2)
                                                                                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02"))
                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03") none player2)
                                                                                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03"))
                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01") none player2)
                                                                                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01"))
                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02") none player2)
                                                                                                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02"))
                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03") none player2)
                                                                                                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03"))
                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01") none player0)
                                                                                                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01"))
                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02") none player0)
                                                                                                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02"))
                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03") none player0)
                                                                                                                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03"))
                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01") none player0)
                                                                                                                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01"))
                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02") none player0)
                                                                                                                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02"))
                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03") none player0)
                                                                                                                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03"))
                                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01") none player0)
                                                                                                                                                                                                        (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01"))
                                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02") none player0)
                                                                                                                                                                                                            (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02"))
                                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01") none player0)
                                                                                                                                                                                                                (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01"))
                                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02") none player0)
                                                                                                                                                                                                                    (set reserve_vehicle02 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02"))
                                                                                                                                                                                                                )
                                                                                                                                                                                                            )
                                                                                                                                                                                                        )
                                                                                                                                                                                                    )
                                                                                                                                                                                                )
                                                                                                                                                                                            )
                                                                                                                                                                                        )
                                                                                                                                                                                    )
                                                                                                                                                                                )
                                                                                                                                                                            )
                                                                                                                                                                        )
                                                                                                                                                                    )
                                                                                                                                                                )
                                                                                                                                                            )
                                                                                                                                                        )
                                                                                                                                                    )
                                                                                                                                                )
                                                                                                                                            )
                                                                                                                                        )
                                                                                                                                    )
                                                                                                                                )
                                                                                                                            )
                                                                                                                        )
                                                                                                                    )
                                                                                                                )
                                                                                                            )
                                                                                                        )
                                                                                                    )
                                                                                                )
                                                                                            )
                                                                                        )
                                                                                    )
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            false
        )
    )
)

(script dormant void vehicle_reserve03
    (sleep_until 
        (begin
            (sleep_until (= (unit_in_vehicle (player3)) true) 5)
            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") none player3)
                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle"))
                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") none player3)
                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle"))
                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle") none player3)
                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_v_falcon01_reinf/vehicle"))
                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle") none player3)
                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_v_falcon02_reinf/vehicle"))
                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01") none player3)
                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot01"))
                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02") none player3)
                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee01/pilot02"))
                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01") none player3)
                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot01"))
                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02") none player3)
                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee02/pilot02"))
                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01") none player3)
                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot01"))
                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02") none player3)
                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee03/pilot02"))
                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01") none player3)
                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot01"))
                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02") none player3)
                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee04/pilot02"))
                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01") none player3)
                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot01"))
                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02") none player3)
                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee05/pilot02"))
                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01") none player3)
                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot01"))
                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02") none player3)
                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee06/pilot02"))
                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01") none player3)
                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot01"))
                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02") none player3)
                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee07/pilot02"))
                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01") none player3)
                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot01"))
                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02") none player3)
                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee08/pilot02"))
                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01") none player3)
                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot01"))
                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02") none player3)
                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_banshee09/pilot02"))
                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01") none player3)
                                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot01"))
                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02") none player3)
                                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot02"))
                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03") none player3)
                                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_01/pilot03"))
                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01") none player3)
                                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot01"))
                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02") none player3)
                                                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot02"))
                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03") none player3)
                                                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_02/pilot03"))
                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01") none player3)
                                                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot01"))
                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02") none player3)
                                                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot02"))
                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03") none player3)
                                                                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_03/pilot03"))
                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01") none player3)
                                                                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot01"))
                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02") none player3)
                                                                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot02"))
                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03") none player3)
                                                                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_04/pilot03"))
                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01") none player3)
                                                                                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot01"))
                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02") none player3)
                                                                                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot02"))
                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03") none player3)
                                                                                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_05/pilot03"))
                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01") none player3)
                                                                                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot01"))
                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02") none player3)
                                                                                                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot02"))
                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03") none player3)
                                                                                                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_oni_banshee_06/pilot03"))
                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01") none player0)
                                                                                                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot01"))
                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02") none player0)
                                                                                                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot02"))
                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03") none player0)
                                                                                                                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_beta_b03a/pilot03"))
                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01") none player0)
                                                                                                                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot01"))
                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02") none player0)
                                                                                                                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot02"))
                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03") none player0)
                                                                                                                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b02/pilot03"))
                                                                                                                                                                                                    (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01") none player0)
                                                                                                                                                                                                        (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot01"))
                                                                                                                                                                                                        (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02") none player0)
                                                                                                                                                                                                            (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03a/pilot02"))
                                                                                                                                                                                                            (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01") none player0)
                                                                                                                                                                                                                (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot01"))
                                                                                                                                                                                                                (if (vehicle_test_seat_unit (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02") none player0)
                                                                                                                                                                                                                    (set reserve_vehicle03 (ai_vehicle_get_from_spawn_point "sq_sec_gamma_b03b/pilot02"))
                                                                                                                                                                                                                )
                                                                                                                                                                                                            )
                                                                                                                                                                                                        )
                                                                                                                                                                                                    )
                                                                                                                                                                                                )
                                                                                                                                                                                            )
                                                                                                                                                                                        )
                                                                                                                                                                                    )
                                                                                                                                                                                )
                                                                                                                                                                            )
                                                                                                                                                                        )
                                                                                                                                                                    )
                                                                                                                                                                )
                                                                                                                                                            )
                                                                                                                                                        )
                                                                                                                                                    )
                                                                                                                                                )
                                                                                                                                            )
                                                                                                                                        )
                                                                                                                                    )
                                                                                                                                )
                                                                                                                            )
                                                                                                                        )
                                                                                                                    )
                                                                                                                )
                                                                                                            )
                                                                                                        )
                                                                                                    )
                                                                                                )
                                                                                            )
                                                                                        )
                                                                                    )
                                                                                )
                                                                            )
                                                                        )
                                                                    )
                                                                )
                                                            )
                                                        )
                                                    )
                                                )
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
            false
        )
    )
)

(script static void (banshee_vehicle_cleanup (ai l_banshee))
    (if (or (volume_test_object "tv_garbage_floor" (ai_vehicle_get_from_spawn_point l_banshee)) (and (not (vehicle_test_seat (ai_vehicle_get_from_spawn_point l_banshee) none)) (not (= reserve_vehicle00 (ai_vehicle_get_from_spawn_point l_banshee))) (not (= reserve_vehicle01 (ai_vehicle_get_from_spawn_point l_banshee))) (not (= reserve_vehicle02 (ai_vehicle_get_from_spawn_point l_banshee))) (not (= reserve_vehicle03 (ai_vehicle_get_from_spawn_point l_banshee)))))
        (begin
            (if (volume_test_object "tv_garbage_floor" (ai_vehicle_get_from_spawn_point l_banshee))
                (print "destroying banshee by volume")
                (print "destroying banshee by clean-up- rare")
            )
            (object_destroy (ai_vehicle_get_from_spawn_point l_banshee))
        )
    )
)

(script continuous void floor_garbage
    (add_recycling_volume "tv_garbage_floor" 0 0)
    (sleep 1)
    (add_recycling_volume "tv_garbage_start" 1 0)
    (sleep 1)
    (if (= (current_zone_set) 1)
        (begin
            (add_recycling_volume_by_type "tv_garbage_bldg_a1" 15 5 12)
            (sleep 150)
            (add_recycling_volume_by_type "tv_garbage_bldg_a2" 15 5 12)
            (sleep 150)
            (add_recycling_volume "tv_garbage_bldg_b" 0 0)
            (sleep 1)
            (add_recycling_volume "tv_garbage_bldg_c" 0 1)
            (sleep 1)
        )
        (if (= (current_zone_set) 2)
            (begin
                (add_recycling_volume "tv_garbage_bldg_a1" 0 1)
                (sleep 1)
                (add_recycling_volume "tv_garbage_bldg_a2" 0 1)
                (sleep 1)
                (add_recycling_volume_by_type "tv_garbage_bldg_b" 30 10 12)
                (sleep 300)
                (add_recycling_volume "tv_garbage_bldg_c" 0 1)
                (sleep 1)
            )
            (if (= (current_zone_set) 3)
                (begin
                    (add_recycling_volume "tv_garbage_bldg_a1" 0 1)
                    (sleep 1)
                    (add_recycling_volume "tv_garbage_bldg_a2" 0 1)
                    (sleep 1)
                    (add_recycling_volume "tv_garbage_bldg_b" 0 1)
                    (sleep 1)
                    (add_recycling_volume_by_type "tv_garbage_bldg_c" 30 10 12)
                    (sleep 300)
                )
                (if (or (= (current_zone_set) 4) (> (current_zone_set) 5))
                    (begin
                        (add_recycling_volume "tv_garbage_bldg_a1" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_bldg_a2" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_bldg_b" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_bldg_c" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_alpha_1" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_alpha_2" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_alpha_3" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_beta_1" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_beta_2" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_beta_3" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_gamma_1" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_gamma_2" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_gamma_3" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_delta_1" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_delta_2" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_delta_3" 0 1)
                    )
                )
            )
        )
    )
    (if (= m_alpha_complete true)
        (begin
            (ai_erase "gr_alpha")
            (add_recycling_volume "tv_garbage_alpha_1" 0 1)
            (sleep 1)
            (add_recycling_volume "tv_garbage_alpha_2" 0 1)
            (sleep 1)
            (add_recycling_volume "tv_garbage_alpha_3" 0 1)
        )
        (if (= m_beta_complete true)
            (begin
                (ai_erase "gr_beta")
                (add_recycling_volume "tv_garbage_beta_1" 0 1)
                (sleep 1)
                (add_recycling_volume "tv_garbage_beta_2" 0 1)
                (sleep 1)
                (add_recycling_volume "tv_garbage_beta_3" 0 1)
            )
            (if (= m_gamma_complete true)
                (begin
                    (ai_erase "gr_gamma")
                    (add_recycling_volume "tv_garbage_gamma_1" 0 1)
                    (sleep 1)
                    (add_recycling_volume "tv_garbage_gamma_2" 0 1)
                    (sleep 1)
                    (add_recycling_volume "tv_garbage_gamma_3" 0 1)
                )
                (if (= m_delta_complete true)
                    (begin
                        (ai_erase "gr_delta")
                        (add_recycling_volume "tv_garbage_delta_1" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_delta_2" 0 1)
                        (sleep 1)
                        (add_recycling_volume "tv_garbage_delta_3" 0 1)
                    )
                )
            )
        )
    )
    (sleep 30)
)

(script static void f_zone_teleport_player0
    (if (and (= (current_zone_set) 1) (= (object_get_bsp player0) 2))
        (f_player_teleport player0 "cf_bldg_a_player_00" false)
        (if (and (= (current_zone_set) 2) (= (object_get_bsp player0) 3))
            (f_player_teleport player0 "cf_bldg_b_player_00" false)
            (if (and (= (current_zone_set) 3) (= (object_get_bsp player0) 4))
                (f_player_teleport player0 "cf_bldg_c_player_00" false)
            )
        )
    )
)

(script static void f_zone_teleport_player1
    (if (and (= (current_zone_set) 1) (= (object_get_bsp player1) 2))
        (f_player_teleport player1 "cf_bldg_a_player_01" false)
        (if (and (= (current_zone_set) 2) (= (object_get_bsp player1) 3))
            (f_player_teleport player1 "cf_bldg_b_player_01" false)
            (if (and (= (current_zone_set) 3) (= (object_get_bsp player1) 4))
                (f_player_teleport player1 "cf_bldg_c_player_01" false)
            )
        )
    )
)

(script static void f_zone_teleport_player2
    (if (and (= (current_zone_set) 1) (= (object_get_bsp player2) 2))
        (f_player_teleport player2 "cf_bldg_a_player_02" false)
        (if (and (= (current_zone_set) 2) (= (object_get_bsp player2) 3))
            (f_player_teleport player2 "cf_bldg_b_player_02" false)
            (if (and (= (current_zone_set) 3) (= (object_get_bsp player2) 4))
                (f_player_teleport player2 "cf_bldg_c_player_02" false)
            )
        )
    )
)

(script static void f_zone_teleport_player3
    (if (and (= (current_zone_set) 1) (= (object_get_bsp player3) 2))
        (f_player_teleport player3 "cf_bldg_a_player_03" false)
        (if (and (= (current_zone_set) 2) (= (object_get_bsp player3) 3))
            (f_player_teleport player3 "cf_bldg_b_player_03" false)
            (if (and (= (current_zone_set) 3) (= (object_get_bsp player3) 4))
                (f_player_teleport player3 "cf_bldg_c_player_03" false)
            )
        )
    )
)

(script static void f_player_loadout
    (if (= (game_coop_player_count) 1)
        (begin
            (ai_place "sq_solo_troopers")
            (sleep 1)
            (ai_place "sq_v_falcon01/vehicle")
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 31 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 22 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 18 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 23 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 24 true)
            (ai_vehicle_enter "sq_solo_troopers/01" (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 25)
            (ai_vehicle_enter "sq_solo_troopers/02" (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 25)
        )
        (if (or (= (game_coop_player_count) 2) (= g_coop_simulation 2))
            (begin
                (ai_place "sq_coop_troopers_2")
                (ai_place "sq_v_falcon01/vehicle")
                (ai_place "sq_v_falcon02/vehicle")
                (ai_place "sq_v_falcon02/gunner")
                (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_v_falcon02/vehicle") 29 (ai_get_object "sq_v_falcon02/gunner"))
                (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 31 true)
                (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 22 true)
                (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 18 true)
                (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 23 true)
                (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 24 true)
                (sleep 1)
                (ai_vehicle_enter "sq_coop_troopers_2/01" (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 25)
                (ai_vehicle_enter "sq_coop_troopers_2/02" (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 25)
            )
            (if (or (= (game_coop_player_count) 3) (= g_coop_simulation 3))
                (begin
                    (ai_place "sq_coop_troopers_1")
                    (ai_place "sq_v_falcon01/vehicle")
                    (ai_place "sq_v_falcon02/vehicle")
                    (ai_place "sq_v_falcon02/gunner")
                    (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_v_falcon02/vehicle") 29 (ai_get_object "sq_v_falcon02/gunner"))
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 31 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 22 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 18 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 23 true)
                    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 24 true)
                    (sleep 1)
                    (ai_vehicle_enter "sq_coop_troopers_1/01" (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 25)
                )
                (if (or (= (game_coop_player_count) 4) (= g_coop_simulation 4))
                    (begin
                        (ai_place "sq_v_falcon01/vehicle")
                        (ai_place "sq_v_falcon02/vehicle")
                        (ai_place "sq_v_falcon02/gunner")
                        (vehicle_load_magic (ai_vehicle_get_from_starting_location "sq_v_falcon02/vehicle") 29 (ai_get_object "sq_v_falcon02/gunner"))
                        (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 31 true)
                        (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 22 true)
                        (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 18 true)
                        (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 23 true)
                        (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon01/vehicle") 24 true)
                        (sleep 1)
                    )
                )
            )
        )
    )
)

(script command_script void cs_second_falcon_intro
    (ai_cannot_die ai_current_squad true)
    (cs_vehicle_speed_instantaneous 1)
    (sleep 1)
    (cs_ignore_obstacles true)
    (cs_fly_by "sd_start_falcon/p5" 3)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "sd_start_falcon/p6" 2)
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "sd_start_falcon/p13" "sd_start_falcon/p14" 0.5)
    (ai_cannot_die ai_current_squad false)
    (f_unblip_ai ai_current_actor)
    (set b_falcon_dispatched02 false)
    (sleep 30)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 22 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 18 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_spawn_point "sq_v_falcon02/vehicle") 24 true)
    (ai_vehicle_exit "sq_v_falcon02/vehicle")
    (cs_queue_command_script "sq_v_falcon02/vehicle" cs_marine_script)
    (cs_queue_command_script "sq_v_falcon02/gunner" cs_marine_script)
)

(script static void branch_abort
    (sleep 1)
)

(script static boolean (f_bsp_and_volume_check (short bsp_num, trigger_volume vol_name))
    (if (or (and (volume_test_object vol_name player0) (= (object_get_bsp player0) bsp_num)) (and (volume_test_object vol_name player1) (= (object_get_bsp player1) bsp_num)) (and (volume_test_object vol_name player2) (= (object_get_bsp player2) bsp_num)) (and (volume_test_object vol_name player3) (= (object_get_bsp player3) bsp_num)))
        true
    )
)

(script static boolean (f_bsp_and_ai_radius_check (short bsp_num, ai sq_name, real ai_distance))
    (if (or (and (>= (objects_distance_to_object player0 (ai_get_object sq_name)) ai_distance) (= (object_get_bsp player0) bsp_num)) (and (>= (objects_distance_to_object player1 (ai_get_object sq_name)) ai_distance) (= (object_get_bsp player1) bsp_num)) (and (>= (objects_distance_to_object player2 (ai_get_object sq_name)) ai_distance) (= (object_get_bsp player2) bsp_num)) (and (>= (objects_distance_to_object player3 (ai_get_object sq_name)) ai_distance) (= (object_get_bsp player3) bsp_num)))
        true
    )
)

(script static boolean (f_hub_and_ai_radius_check (ai sq_name, real ai_distance))
    (if (and (and (> (objects_distance_to_object player0 (ai_get_object sq_name)) ai_distance) (or (< (object_get_bsp player0) 2) (> (object_get_bsp player0) 4))) (and (> (objects_distance_to_object player1 (ai_get_object sq_name)) ai_distance) (or (< (object_get_bsp player1) 2) (> (object_get_bsp player1) 4))) (and (> (objects_distance_to_object player2 (ai_get_object sq_name)) ai_distance) (or (< (object_get_bsp player2) 2) (> (object_get_bsp player2) 4))) (and (> (objects_distance_to_object player3 (ai_get_object sq_name)) ai_distance) (or (< (object_get_bsp player3) 2) (> (object_get_bsp player3) 4))))
        true
    )
)

(script static boolean (f_hub_and_radius_check (cutscene_flag flag_name, short rad_num))
    (if (or (and (or (< (object_get_bsp player0) 2) (> (object_get_bsp player0) 4)) (= (player_is_in_game player0) true) (<= (objects_distance_to_flag player0 flag_name) rad_num)) (and (or (< (object_get_bsp player1) 2) (> (object_get_bsp player1) 4)) (= (player_is_in_game player1) true) (<= (objects_distance_to_flag player1 flag_name) rad_num)) (and (or (< (object_get_bsp player2) 2) (> (object_get_bsp player2) 4)) (= (player_is_in_game player2) true) (<= (objects_distance_to_flag player2 flag_name) rad_num)) (and (or (< (object_get_bsp player3) 2) (> (object_get_bsp player3) 4)) (= (player_is_in_game player3) true) (<= (objects_distance_to_flag player3 flag_name) rad_num)))
        true
    )
)

(script static boolean (f_hub_and_radius_greater (cutscene_flag flag_name, short rad_num))
    (if (or (and (or (< (object_get_bsp player0) 2) (> (object_get_bsp player0) 4)) (= (player_is_in_game player0) true) (> (objects_distance_to_flag player0 flag_name) rad_num)) (and (or (< (object_get_bsp player1) 2) (> (object_get_bsp player1) 4)) (= (player_is_in_game player1) true) (> (objects_distance_to_flag player1 flag_name) rad_num)) (and (or (< (object_get_bsp player2) 2) (> (object_get_bsp player2) 4)) (= (player_is_in_game player2) true) (> (objects_distance_to_flag player2 flag_name) rad_num)) (and (or (< (object_get_bsp player3) 2) (> (object_get_bsp player3) 4)) (= (player_is_in_game player3) true) (> (objects_distance_to_flag player3 flag_name) rad_num)))
        true
    )
)

(script static boolean (f_player_hub_check (player actor))
    (if (or (< (object_get_bsp actor) 2) (> (object_get_bsp actor) 4))
        true
    )
)

(script static boolean f_any_hub_check
    (if (or (and (= (player_is_in_game player0) true) (or (< (object_get_bsp player0) 2) (> (object_get_bsp player0) 4))) (and (= (player_is_in_game player1) true) (or (< (object_get_bsp player1) 2) (> (object_get_bsp player1) 4))) (and (= (player_is_in_game player2) true) (or (< (object_get_bsp player2) 2) (> (object_get_bsp player2) 4))) (and (= (player_is_in_game player3) true) (or (< (object_get_bsp player3) 2) (> (object_get_bsp player3) 4))))
        true
    )
)

(script static boolean f_all_hub_check
    (if (and (or (< (object_get_bsp player0) 2) (> (object_get_bsp player0) 4)) (or (< (object_get_bsp player1) 2) (> (object_get_bsp player1) 4)) (or (< (object_get_bsp player2) 2) (> (object_get_bsp player2) 4)) (or (< (object_get_bsp player3) 2) (> (object_get_bsp player3) 4)))
        true
    )
)

(script static boolean (f_bsp_any_player (short bsp_num))
    (if (or (= (object_get_bsp player0) bsp_num) (= (object_get_bsp player1) bsp_num) (= (object_get_bsp player2) bsp_num) (= (object_get_bsp player3) bsp_num))
        true
    )
)

(script static boolean (f_bsp_all_player (short bsp_num))
    (if (and (or (= (object_get_bsp player0) bsp_num) (= (object_get_bsp player0) 65535)) (or (= (object_get_bsp player1) bsp_num) (= (object_get_bsp player1) 65535)) (or (= (object_get_bsp player2) bsp_num) (= (object_get_bsp player2) 65535)) (or (= (object_get_bsp player3) bsp_num) (= (object_get_bsp player3) 65535)))
        true
    )
)

(script dormant void special_elite
    (sleep_until 
        (begin
            (sleep (* 30 60 (random_range 5 7)))
            (if (and (< (ai_living_count "sq_banshee_bob01") 1) (= b_safe_for_ambient true) (= b_special false))
                (begin
                    (ai_place "sq_banshee_bob01")
                    (sleep_until (< (ai_living_count "sq_banshee_bob01") 1) 5)
                    (if (= b_special_win true)
                        (begin
                            (set b_special true)
                            (submit_incident "kill_elite_bob")
                        )
                    )
                )
            )
            (= m_progression 0)
        )
        5
    )
)

(script command_script void cs_special_elite01
    (set b_special_win true)
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (ai_teleport "sq_banshee_bob01" "sd_elite_bob/p0")
    (cs_fly_by "sd_elite_bob/p1")
    (cs_fly_by "sd_elite_bob/p2")
    (cs_fly_by "sd_elite_bob/p3")
    (set b_special_win false)
    (sleep 1)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_special_elite02
    (set b_special_win true)
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (ai_teleport "sq_banshee_bob01" "sd_elite_bob/p4")
    (cs_fly_by "sd_elite_bob/p5")
    (cs_fly_by "sd_elite_bob/p6")
    (cs_fly_by "sd_elite_bob/p7")
    (set b_special_win false)
    (sleep 1)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_special_elite03
    (set b_special_win true)
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (ai_teleport "sq_banshee_bob01" "sd_elite_bob/p8")
    (cs_fly_by "sd_elite_bob/p9")
    (cs_fly_by "sd_elite_bob/p10")
    (cs_fly_by "sd_elite_bob/p11")
    (cs_fly_by "sd_elite_bob/p12")
    (set b_special_win false)
    (sleep 1)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_special_elite04
    (set b_special_win true)
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost true)
    (ai_teleport "sq_banshee_bob01" "sd_elite_bob/p13")
    (cs_fly_by "sd_elite_bob/p14")
    (cs_fly_by "sd_elite_bob/p15")
    (cs_fly_by "sd_elite_bob/p16")
    (cs_fly_by "sd_elite_bob/p17")
    (set b_special_win false)
    (sleep 1)
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script static boolean (f_vehicle_pilot_seat (player l_player))
    (if (or (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad l_player) 0) 31 l_player) (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad (ai_player_get_vehicle_squad l_player) 0) 32 l_player))
        true
    )
)

(script dormant void low_flying_volume_player0
    (sleep_until 
        (begin
            (if (volume_test_object "tv_low_warning" player0)
                (begin
                    (f_hud_training_clear player0)
                    (if (f_vehicle_pilot_seat player0)
                        (f_hud_training player0 "ct_too_low")
                        (effect_new_on_object_marker "objects\vehicles\covenant\turrets\shade\weapons\shade_anti_air_cannon\weapon\fx\shade_anti_air_cannon_explosion.effect" (object_get_parent player0) "")
                    )
                )
            )
            false
        )
        15
    )
)

(script dormant void low_flying_volume_player1
    (sleep_until 
        (begin
            (if (volume_test_object "tv_low_warning" player1)
                (begin
                    (f_hud_training_clear player1)
                    (if (f_vehicle_pilot_seat player1)
                        (f_hud_training player1 "ct_too_low")
                        (effect_new_on_object_marker "objects\vehicles\covenant\turrets\shade\weapons\shade_anti_air_cannon\weapon\fx\shade_anti_air_cannon_explosion.effect" (object_get_parent player1) "")
                    )
                )
            )
            false
        )
        15
    )
)

(script dormant void low_flying_volume_player2
    (sleep_until 
        (begin
            (if (volume_test_object "tv_low_warning" player2)
                (begin
                    (f_hud_training_clear player2)
                    (if (f_vehicle_pilot_seat player2)
                        (f_hud_training player2 "ct_too_low")
                        (effect_new_on_object_marker "objects\vehicles\covenant\turrets\shade\weapons\shade_anti_air_cannon\weapon\fx\shade_anti_air_cannon_explosion.effect" (object_get_parent player2) "")
                    )
                )
            )
            false
        )
        15
    )
)

(script dormant void low_flying_volume_player3
    (sleep_until 
        (begin
            (if (volume_test_object "tv_low_warning" player3)
                (begin
                    (f_hud_training_clear player3)
                    (if (f_vehicle_pilot_seat player3)
                        (f_hud_training_forever player3 "ct_too_low")
                        (effect_new_on_object_marker "objects\vehicles\covenant\turrets\shade\weapons\shade_anti_air_cannon\weapon\fx\shade_anti_air_cannon_explosion.effect" (object_get_parent player3) "")
                    )
                )
            )
            false
        )
        15
    )
)

(script dormant void aj_mode
    (object_create "aj_switch")
    (sleep_until (>= (device_get_position "aj_switch") 1))
    (sleep_forever level_checkpoint)
    (sleep_forever low_flying_volume_player0)
    (sleep_forever low_flying_volume_player1)
    (sleep_forever low_flying_volume_player2)
    (sleep_forever low_flying_volume_player3)
    (sleep_forever player0_evac_nanny)
    (sleep_forever player1_evac_nanny)
    (sleep_forever player2_evac_nanny)
    (sleep_forever player3_evac_nanny)
    (sleep_forever md_001_falcon_evac)
    (soft_ceiling_enable "default" false)
    (wake player_phantom)
    (wake player_pelican)
    (wake aj_clean_0)
    (wake aj_clean_1)
    (wake aj_clean_2)
    (wake aj_clean_3)
    (kill_volume_disable "kill_soft_00")
    (kill_volume_disable "kill_soft_01")
    (kill_volume_disable "kill_soft_02")
    (kill_volume_disable "kill_soft_03")
    (kill_volume_disable "kill_soft_04")
    (kill_volume_disable "kill_soft_05")
    (kill_volume_disable "kill_soft_06")
)

(script dormant void player_phantom
    (sleep_until 
        (begin
            (sleep_until (volume_test_players "tv_aj_pelican") 5)
            (if (and (volume_test_object "tv_aj_pelican" player0) (= (unit_in_vehicle_type player0 g_banshee_type) true) (<= (object_get_health "aj_phantom0") 0))
                (begin
                    (object_create "aj_phantom0")
                    (unit_enter_vehicle_immediate player0 "aj_phantom0" "phantom_d")
                    (object_hide (player0) true)
                )
                (if (and (volume_test_object "tv_aj_pelican" player1) (= (unit_in_vehicle_type player1 g_banshee_type) true) (<= (object_get_health "aj_phantom1") 0))
                    (begin
                        (object_create "aj_phantom1")
                        (unit_enter_vehicle_immediate player1 "aj_phantom1" "phantom_d")
                        (object_hide (player1) true)
                    )
                    (if (and (volume_test_object "tv_aj_pelican" player2) (= (unit_in_vehicle_type player2 g_banshee_type) true) (<= (object_get_health "aj_phantom2") 0))
                        (begin
                            (object_create "aj_phantom2")
                            (unit_enter_vehicle_immediate player2 "aj_phantom2" "phantom_d")
                            (object_hide (player2) true)
                        )
                        (if (and (volume_test_object "tv_aj_pelican" player3) (= (unit_in_vehicle_type player3 g_banshee_type) true) (<= (object_get_health "aj_phantom3") 0))
                            (begin
                                (object_create "aj_phantom3")
                                (unit_enter_vehicle_immediate player3 "aj_phantom3" "phantom_d")
                                (object_hide (player3) true)
                            )
                        )
                    )
                )
            )
            false
        )
        30
    )
)

(script dormant void player_pelican
    (sleep_until 
        (begin
            (sleep_until (volume_test_players "tv_aj_pelican") 5)
            (if (and (volume_test_object "tv_aj_pelican" player0) (= (unit_in_vehicle_type player0 g_falcon_type) true) (<= (object_get_health "aj_pelican0") 0))
                (begin
                    (object_create "aj_pelican0")
                    (unit_enter_vehicle_immediate player0 "aj_pelican0" "pelican_d")
                    (object_hide (player0) true)
                )
                (if (and (volume_test_object "tv_aj_pelican" player1) (= (unit_in_vehicle_type player1 g_falcon_type) true) (<= (object_get_health "aj_pelican1") 0))
                    (begin
                        (object_create "aj_pelican1")
                        (unit_enter_vehicle_immediate player1 "aj_pelican1" "pelican_d")
                        (object_hide (player1) true)
                    )
                    (if (and (volume_test_object "tv_aj_pelican" player2) (= (unit_in_vehicle_type player2 g_falcon_type) true) (<= (object_get_health "aj_pelican2") 0))
                        (begin
                            (object_create "aj_pelican2")
                            (unit_enter_vehicle_immediate player2 "aj_pelican2" "pelican_d")
                            (object_hide (player2) true)
                        )
                        (if (and (volume_test_object "tv_aj_pelican" player3) (= (unit_in_vehicle_type player3 g_falcon_type) true) (<= (object_get_health "aj_pelican3") 0))
                            (begin
                                (object_create "aj_pelican3")
                                (unit_enter_vehicle_immediate player3 "aj_pelican3" "pelican_d")
                                (object_hide (player3) true)
                            )
                        )
                    )
                )
            )
            false
        )
        30
    )
)

(script dormant void aj_clean_0
    (sleep_until 
        (begin
            (sleep_until (and (not (vehicle_test_seat_unit "aj_pelican0" none player0)) (not (vehicle_test_seat_unit "aj_phantom0" none player0))))
            (object_destroy "aj_pelican0")
            (object_destroy "aj_phantom0")
            (object_hide (player0) false)
            false
        )
    )
)

(script dormant void aj_clean_1
    (sleep_until 
        (begin
            (sleep_until (and (not (vehicle_test_seat_unit "aj_pelican1" none player1)) (not (vehicle_test_seat_unit "aj_phantom1" none player1))))
            (object_destroy "aj_pelican1")
            (object_destroy "aj_phantom1")
            (object_hide (player1) false)
            false
        )
    )
)

(script dormant void aj_clean_2
    (sleep_until 
        (begin
            (sleep_until (and (not (vehicle_test_seat_unit "aj_pelican2" none player2)) (not (vehicle_test_seat_unit "aj_phantom2" none player2))))
            (object_destroy "aj_pelican2")
            (object_destroy "aj_phantom2")
            (object_hide (player2) false)
            false
        )
    )
)

(script dormant void aj_clean_3
    (sleep_until 
        (begin
            (sleep_until (and (not (vehicle_test_seat_unit "aj_pelican3" none player3)) (not (vehicle_test_seat_unit "aj_phantom3" none player3))))
            (object_destroy "aj_pelican3")
            (object_destroy "aj_phantom3")
            (object_hide (player3) false)
            false
        )
    )
)

(script static void perf_thsp_marine01
    (branch (branch_m52 (performance_get_actor "brute")) (m52_a_marine01_vignette_kill))
    (performance_play_line "branch")
    (cs_stow (performance_get_actor "trooper01") true)
    (performance_play_line "stow")
    (performance_play_line "brute_clobber_sync_01")
    (performance_play_line "set_brute_stance_01")
    (performance_play_line "set_marine_stance_01")
    (sleep_until (>= obj_control_bldg_a 40) 5)
    (performance_play_line "sleep_until_obj_control_bldg_a_greater_than_40")
    (sleep 108)
    (performance_play_line "sleep01")
    (performance_play_line "brute_clobber_sync_02")
    (performance_play_line_by_id 8)
    (performance_play_line "set_marine_stance_02")
    (sleep_until (>= obj_control_bldg_a 50) 5)
    (performance_play_line "sleep_until_obj_control_bldg_a_greater_than_50")
    (sleep 108)
    (performance_play_line "sleep02")
    (performance_play_line "brute_clobber_sync_03")
    (performance_play_line "set_marine_stance_03")
    (ai_set_objective "sq_bldg_a_actor01" "obj_bldg_a")
    (performance_play_line "end")
)

(script static void perf_thsp_marine02
    (branch (branch_m52 (performance_get_actor "brute")) (m52_a_marine02_vignette_kill))
    (performance_play_line "branch")
    (cs_stow (performance_get_actor "trooper01") true)
    (performance_play_line "cs_stow")
    (performance_play_line "brute_scare_marine_sync_01")
    (performance_play_line "set_marine_stance_01")
    (performance_play_line "set_brute_stance_01")
    (sleep_until (>= obj_control_bldg_a 40) 5)
    (performance_play_line "sleep_until_obj_control_bldg_a_greater_than_40")
    (sleep 108)
    (performance_play_line "sleep01")
    (performance_play_line "brute_scare_marine_sync_02")
    (performance_play_line "set_marine_stance_02")
    (performance_play_line "set_brute_stance_02")
    (sleep_until (>= obj_control_bldg_a 50) 5)
    (performance_play_line "sleep_until_obj_control_bldg_a_greater_than_50")
    (sleep 108)
    (performance_play_line "sleep02")
    (performance_play_line "brute_scare_marine_sync_03")
    (performance_play_line "set_marine_stance_03")
    (ai_set_objective "sq_bldg_a_actor02" "obj_bldg_a")
    (performance_play_line "end")
)

(script static void perf_thsp_marine03
    (branch (branch_m52 (performance_get_actor "brute")) (m52_a_marine03_vignette_kill))
    (performance_play_line "branch")
    (cs_stow (performance_get_actor "trooper01") true)
    (performance_play_line "stow")
    (performance_play_line "set_marine_stance_00")
    (performance_play_line "brute_clobber_sync_01")
    (performance_play_line "set_brute_stance_01")
    (performance_play_line "set_marine_stance_01")
    (sleep_until (>= obj_control_bldg_a 40) 5)
    (performance_play_line "sleep_until_obj_control_bldg_a_greater_than_40")
    (sleep 108)
    (performance_play_line "sleep01")
    (performance_play_line "brute_clobber_sync_02")
    (performance_play_line "set_brute_stance_02")
    (performance_play_line "set_marine_stance_02")
    (sleep_until (>= obj_control_bldg_a 50) 5)
    (performance_play_line "sleep_until_obj_control_bldg_a_greater_than_50")
    (sleep 108)
    (performance_play_line "sleep02")
    (performance_play_line "brute_clobber_sync_03")
    (performance_play_line "set_marine_stance_03")
    (ai_set_objective "sq_bldg_a_actor03" "obj_bldg_a")
    (performance_play_line "end")
)

(script static void thsp_marine04
    (cs_stow (performance_get_actor "trooper01") true)
    (performance_play_line "stow")
    (performance_play_line "sleep")
    (performance_play_line "trooper01_teleport")
    (performance_play_line "animation")
)

(script static void thsp_marine01_exit
    (performance_play_line "idle_animation")
    (sleep_until (or (<= (object_get_health "dm_building_a_objective") 0) (< (ai_living_count "sq_bldg_a_actor01") 1)) 1)
    (performance_play_line "anim_exit_trooper01")
    (unit_set_stance (ai_get_unit (performance_get_actor "trooper01")) "")
    (performance_play_line "kill_stance")
    (cs_stow (performance_get_actor "trooper01") false)
    (performance_play_line "stow")
    (m52_a_vignette_finish01)
    (performance_play_line "finish_vignette")
)

(script static void thsp_marine02_exit
    (performance_play_line "idle_animation")
    (sleep_until (or (<= (object_get_health "dm_building_a_objective") 0) (< (ai_living_count "sq_bldg_a_actor02") 1)) 1)
    (performance_play_line "anim_exit_trooper01")
    (unit_set_stance (ai_get_unit (performance_get_actor "trooper01")) "")
    (performance_play_line "lines_1")
    (cs_stow (performance_get_actor "trooper01") false)
    (performance_play_line "stow")
    (m52_a_vignette_finish02)
    (performance_play_line "lines_2")
)

(script static void thsp_marine03_exit
    (performance_play_line "idle_animation")
    (sleep_until (or (<= (object_get_health "dm_building_a_objective") 0) (< (ai_living_count "sq_bldg_a_actor03") 1)) 1)
    (performance_play_line "anim_exit_trooper01")
    (unit_set_stance (ai_get_unit (performance_get_actor "trooper01")) "")
    (performance_play_line "clear_stance")
    (cs_stow (performance_get_actor "trooper01") false)
    (performance_play_line "stow")
    (m52_a_vignette_finish03)
    (performance_play_line "combat_setup")
)

(script static void thsp_marine04_exit
    (performance_play_line "anim_exit_trooper04")
    (cs_stow (performance_get_actor "trooper01") false)
    (performance_play_line "stow")
)

(script static void thsp_scared_marine01
    (performance_play_line "trooper01_teleport")
    (performance_play_line "animation")
)

(script static void thsp_scared_marine02
    (performance_play_line "trooper01_teleport")
    (performance_play_line "animation")
)

(script static void tn_sleep
    (ai_set_combat_status (performance_get_actor "grunt1") 0)
    (performance_play_line "start_sleeping")
    (performance_play_line "block")
    (performance_play_line "sleep_until")
    (sleep_until (> (ai_combat_status (performance_get_actor "grunt1")) 5))
)

(script static void 052la_airlift_010_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "052la_airlift_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "052la_airlift_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "pelican1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "pelicanbgrnd1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "fx_dyn_light_underglow_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "player_dmr_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "pelican1_pelican_interior1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "fx_dyn_light_floor_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (cinematic_scripting_start_music 0 0 0)
    (set shadow_apply_depth_bias -1E-05)
    (cinematic_scripting_start_music 0 0 1)
    (cinematic_print "custom script play")
    (sleep 35)
    (cinematic_print "custom script play")
    (cinematic_set_title "052la_cine_timestamp_01")
    (sleep 130)
    (cinematic_set_title "052la_cine_timestamp_02")
    (cinematic_print "custom script play")
    (sleep 85)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052la_airlift_010_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "052la_airlift_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "052la_airlift_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "pelican1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "pelicanbgrnd1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "fx_dyn_light_underglow_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "player_dmr_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "pelican1_pelican_interior1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "fx_dyn_light_floor_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (sleep 285)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052la_airlift_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "052la_airlift_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "052la_airlift_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "pelican1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "pelicanbgrnd1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 3 "fx_dyn_light_underglow_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "player_dmr_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "pelican1_pelican_interior1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "fx_dyn_light_floor_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (sleep 192)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052la_airlift_010_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 3 "052la_airlift_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 3)
    (cinematic_object_create_cinematic_anchor "052la_airlift_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 0 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 1 "pelican1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 2 "pelicanbgrnd1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 3 "fx_dyn_light_underglow_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 4 "player_dmr_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 5 "pelican1_pelican_interior1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 6 "fx_dyn_light_floor_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (sleep 326)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052la_airlift_010_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 4 "052la_airlift_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 4)
    (cinematic_object_create_cinematic_anchor "052la_airlift_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 0 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 1 "pelican1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 2 "pelicanbgrnd1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 3 "fx_dyn_light_underglow_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 4 "player_dmr_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 5 "pelican1_pelican_interior1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 6 "fx_dyn_light_floor_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1 0)
    (sleep 192)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052la_airlift_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (052la_airlift_010_sc_sh1)
    (052la_airlift_010_sc_sh2)
    (052la_airlift_010_sc_sh3)
    (052la_airlift_010_sc_sh4)
    (052la_airlift_010_sc_sh5)
    (set shadow_apply_depth_bias -1E-06)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 052la_airlift_020_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "052la_airlift_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "052la_airlift_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "falcon1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "falcon2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "player_dmr_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "fx_dyn_light_underglow_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "fx_dyn_light_player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "pelican_pelican_interior1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "fx_dyn_light_carter1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "fx_dyn_light_floor_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "fx_dyn_light_platform_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "falcon1_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "falcon1_falcon_side_gun_left1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 14 "falcon1_falcon_side_gun_right1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "falcon2_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 16 "falcon2_falcon_side_gun_left1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 17 "falcon2_falcon_side_gun_right1_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "driver_seat_power" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "jet_wash" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "bay_lights" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "blur" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "thrust" 0.05 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "engine_exhaust" 0.2 0)
    (sleep 844)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052la_airlift_020_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 1 "052la_airlift_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 1)
    (cinematic_object_create_cinematic_anchor "052la_airlift_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "falcon1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "falcon2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "pelican_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "player_dmr_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "fx_dyn_light_underglow_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "fx_dyn_light_player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "pelican_pelican_interior1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "fx_dyn_light_carter1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 10 "fx_dyn_light_floor_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "fx_dyn_light_platform_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "falcon1_falcon_chin_gun1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "falcon1_falcon_side_gun_left1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "falcon1_falcon_side_gun_right1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "falcon2_falcon_chin_gun1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 16 "falcon2_falcon_side_gun_left1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 17 "falcon2_falcon_side_gun_right1_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "driver_seat_power" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "blur" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "bay_lights" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "thrust" 0.05 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "engine_exhaust" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "jet_wash" 0 0)
    (sleep 24)
    (cinematic_scripting_start_dialogue 1 1 3 (cinematic_scripting_get_object 1 0))
    (sleep 26)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "blur" 1 50)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "engine_exhaust" 1 50)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 2) "jet_wash" 1 50)
    (sleep 25)
    (cinematic_print "custom script play")
    (object_set_model_state_property (cinematic_object_get "falcon2") 0 true)
    (sleep 22)
    (cinematic_scripting_start_dialogue 1 1 4 (cinematic_scripting_get_object 1 0))
    (sleep 253)
    (cinematic_scripting_start_dialogue 1 1 1 (cinematic_scripting_get_object 1 0))
    (sleep 64)
    (cinematic_scripting_start_dialogue 1 1 2 none)
    (sleep 70)
    (cinematic_scripting_start_dialogue 1 1 0 (cinematic_scripting_get_object 1 0))
    (sleep 157)
    (sleep (cinematic_tag_fade_out_from_cinematic "052la_airlift"))
    (sleep 4)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052la_airlift_020_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (052la_airlift_020_sc_sh1)
    (052la_airlift_020_sc_sh2)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 052la_airlift_cleanup
    (cinematic_scripting_clean_up 0)
)

(script static void begin_052la_airlift_debug
    (cinematic_zone_activate_for_debugging 0)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_052la_airlift_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 0)
    (fade_in 0 0 0 0)
)

(script static void 052la_airlift_debug
    (begin_052la_airlift_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "052la_airlift"))
    (render_ssao false)
    (!052la_airlift_010_sc)
    (!052la_airlift_020_sc)
    (render_ssao true)
    (end_052la_airlift_debug)
)

(script static void begin_052la_airlift
    (cinematic_zone_activate 0)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_052la_airlift
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052la_airlift
    (begin_052la_airlift)
    (sleep (cinematic_tag_fade_in_to_cinematic "052la_airlift"))
    (render_ssao false)
    (!052la_airlift_010_sc)
    (!052la_airlift_020_sc)
    (render_ssao true)
    (end_052la_airlift)
)

(script static void 052lb_reflection_010_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "binoculars_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "carter_head_1" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "emile_knife_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 "jun_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "jun_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "kat_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "pliers_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "fx_dyn_light_jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 17 "fx_dyn_light_player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 18 "fx_dyn_light_carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 19 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 20 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 21 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 22 "broken_glass_1" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 24 "bro_sheath_1" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (cinematic_scripting_start_music 0 0 0)
    (cinematic_scripting_start_music 0 0 1)
    (sleep 217)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "binoculars_2" true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "jun_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "jun_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 13 "kat_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 14 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 15 "pliers_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 16 "fx_dyn_light_jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 17 "fx_dyn_light_player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 18 "fx_dyn_light_carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 19 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 20 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 21 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 22 "broken_glass_2" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 7)
    (cinematic_scripting_start_dialogue 0 1 0 (cinematic_scripting_get_object 0 12))
    (sleep 141)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "jun_3" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "binoculars_3" true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "carter_head_3" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 12 "jun_head_3" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (object_hide (cinematic_scripting_get_object 0 14) true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 16 "fx_dyn_light_jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 17 "fx_dyn_light_player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 18 "fx_dyn_light_carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 19 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 20 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 21 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 22 "broken_glass_3" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 108)
    (cinematic_scripting_start_dialogue 0 2 0 (cinematic_scripting_get_object 0 12))
    (sleep 19)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 3 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 3)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 1 "emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 2 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 3 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 4 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 5 "binoculars_4" true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 11 "jun_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 12 "jun_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 13 "kat_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 14 "player_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 15 "pliers_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 16 "fx_dyn_light_jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 17 "fx_dyn_light_player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 18 "fx_dyn_light_carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 19 "fx_dyn_light_emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 20 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 21 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 22 "broken_glass_4" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 24 "bro_sheath_4" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 36)
    (cinematic_scripting_start_dialogue 0 3 0 (cinematic_scripting_get_object 0 1))
    (sleep 33)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 4 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 4)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 1 "emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 2 "jun_5" true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 4 "player_5" true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 9 "emile_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 10 "emile_knife_5" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 12 "jun_head_5" true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 14 "player_ar_5" true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 16 "fx_dyn_light_jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 17 "fx_dyn_light_player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 18 "fx_dyn_light_carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 19 "fx_dyn_light_emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 20 "fx_dyn_light_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 21 "kat_pistol_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 22 "broken_glass_5" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 24 "bro_sheath_5" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 74)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 5 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 5)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 1 "emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 2 "jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 3 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 4 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 5 "binoculars_6" true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 8 "dog_tags_6" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 11 "jun_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 12 "jun_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 13 "kat_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 14 "player_ar_6" true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 16 "fx_dyn_light_jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 17 "fx_dyn_light_player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 18 "fx_dyn_light_carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 19 "fx_dyn_light_emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 20 "fx_dyn_light_kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 21 "kat_pistol_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 22 "broken_glass_6" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 24 "bro_sheath_6" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (sleep 7)
    (cinematic_scripting_start_dialogue 0 5 0 (cinematic_scripting_get_object 0 1))
    (sleep 94)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 6 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 6)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 0 "carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 1 "emile_7" true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (object_hide (cinematic_scripting_get_object 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 6 "carter_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 7 "carter_head_7" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 9 "emile_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 10 "emile_knife_7" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (object_hide (cinematic_scripting_get_object 0 12) true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (object_hide (cinematic_scripting_get_object 0 14) true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 16 "fx_dyn_light_jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 17 "fx_dyn_light_player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 18 "fx_dyn_light_carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 19 "fx_dyn_light_emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 20 "fx_dyn_light_kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 21 "kat_pistol_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 22 "broken_glass_7" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 24 "bro_sheath_7" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (sleep 56)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 7 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 7)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 0 "carter_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 1 "emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 2 "jun_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 3 "kat_8" true)
    (object_hide (cinematic_scripting_get_object 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 6 "carter_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 7 "carter_head_8" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 12 "jun_head_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 13 "kat_head_8" true)
    (object_hide (cinematic_scripting_get_object 0 14) true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 16 "fx_dyn_light_jun_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 17 "fx_dyn_light_player_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 18 "fx_dyn_light_carter_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 19 "fx_dyn_light_emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 20 "fx_dyn_light_kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 21 "kat_pistol_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 22 "broken_glass_8" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 7 24 "bro_sheath_8" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (sleep 37)
    (cinematic_scripting_start_dialogue 0 7 0 (cinematic_scripting_get_object 0 12))
    (sleep 71)
    (cinematic_scripting_start_dialogue 0 7 1 (cinematic_scripting_get_object 0 1))
    (sleep 33)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 8 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 8)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 0 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 1 "emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 2 "jun_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 3 "kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 4 "player_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 5 "binoculars_9" true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 11 "jun_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 12 "jun_head_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 13 "kat_head_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 14 "player_ar_9" true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 16 "fx_dyn_light_jun_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 17 "fx_dyn_light_player_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 18 "fx_dyn_light_carter_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 19 "fx_dyn_light_emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 20 "fx_dyn_light_kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 21 "kat_pistol_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 22 "broken_glass_9" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 8 24 "bro_sheath_9" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (sleep 44)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh10
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 9 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 9)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 0 "carter_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 1 "emile_10" true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 3 "kat_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 4 "player_10" true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (object_hide (cinematic_scripting_get_object 0 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 7 "carter_head_10" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 9 "emile_ar_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 10 "emile_knife_10" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (object_hide (cinematic_scripting_get_object 0 12) true)
    (object_hide (cinematic_scripting_get_object 0 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 14 "player_ar_10" true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 16 "fx_dyn_light_jun_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 17 "fx_dyn_light_player_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 18 "fx_dyn_light_carter_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 19 "fx_dyn_light_emile_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 20 "fx_dyn_light_kat_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 21 "kat_pistol_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 22 "broken_glass_10" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 9 24 "bro_sheath_10" true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 9)
    (cinematic_clips_initialize_for_shot 9)
    (sleep 73)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_010_sc_sh11
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 10 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 10)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 0 "carter_11" true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 3 "kat_11" true)
    (object_hide (cinematic_scripting_get_object 0 4) true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 6 "carter_ar_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 7 "carter_head_11" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (object_hide (cinematic_scripting_get_object 0 12) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 13 "kat_head_11" true)
    (object_hide (cinematic_scripting_get_object 0 14) true)
    (object_hide (cinematic_scripting_get_object 0 15) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 16 "fx_dyn_light_jun_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 17 "fx_dyn_light_player_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 18 "fx_dyn_light_carter_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 19 "fx_dyn_light_emile_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 20 "fx_dyn_light_kat_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 21 "kat_pistol_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 10 22 "broken_glass_11" true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (object_hide (cinematic_scripting_get_object 0 25) true)
    (object_hide (cinematic_scripting_get_object 0 26) true)
    (cinematic_lights_initialize_for_shot 10)
    (cinematic_clips_initialize_for_shot 10)
    (sleep 2)
    (cinematic_scripting_start_dialogue 0 10 0 (cinematic_scripting_get_object 0 7))
    (sleep 145)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (052lb_reflection_010_sc_sh1)
    (052lb_reflection_010_sc_sh2)
    (052lb_reflection_010_sc_sh3)
    (052lb_reflection_010_sc_sh4)
    (052lb_reflection_010_sc_sh5)
    (052lb_reflection_010_sc_sh6)
    (052lb_reflection_010_sc_sh7)
    (052lb_reflection_010_sc_sh8)
    (052lb_reflection_010_sc_sh9)
    (052lb_reflection_010_sc_sh10)
    (052lb_reflection_010_sc_sh11)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 052lb_reflection_013_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "jun_1" true)
    (object_hide (cinematic_scripting_get_object 1 2) true)
    (object_hide (cinematic_scripting_get_object 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "carter_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "jun_head_1" true)
    (object_hide (cinematic_scripting_get_object 1 6) true)
    (object_hide (cinematic_scripting_get_object 1 7) true)
    (object_hide (cinematic_scripting_get_object 1 8) true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "fx_dyn_light_jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "fx_dyn_light_player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "fx_dyn_light_carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 14 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "broken_glass_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (sleep 76)
    (cinematic_scripting_start_dialogue 1 0 0 (cinematic_scripting_get_object 1 5))
    (sleep 63)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_013_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 1 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 1)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "kat_2" true)
    (object_hide (cinematic_scripting_get_object 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "carter_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "jun_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "kat_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "binoculars_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "jun_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "pliers_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 10 "fx_dyn_light_jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "fx_dyn_light_player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "fx_dyn_light_carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "broken_glass_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 96)
    (cinematic_scripting_start_dialogue 1 1 0 (cinematic_scripting_get_object 1 4))
    (sleep 52)
    (cinematic_scripting_start_dialogue 1 1 1 (cinematic_scripting_get_object 1 6))
    (sleep 107)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_013_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 2 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 2)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 1 "jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 2 "kat_3" true)
    (object_hide (cinematic_scripting_get_object 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 4 "carter_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 5 "jun_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 6 "kat_head_3" true)
    (object_hide (cinematic_scripting_get_object 1 7) true)
    (object_hide (cinematic_scripting_get_object 1 8) true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 10 "fx_dyn_light_jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 11 "fx_dyn_light_player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 12 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 13 "fx_dyn_light_carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 14 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 15 "broken_glass_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (object_set_variant (cinematic_object_get "carter_head") "no_transparent")
    (cinematic_print "custom script play")
    (sleep 4)
    (cinematic_scripting_start_dialogue 1 2 0 (cinematic_scripting_get_object 1 4))
    (sleep 73)
    (cinematic_scripting_start_dialogue 1 2 1 (cinematic_scripting_get_object 1 6))
    (sleep 34)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_013_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 3 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 3)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 1 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 1 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 2 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 3 "player_4" true)
    (object_hide (cinematic_scripting_get_object 1 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 5 "jun_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 6 "kat_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 7 "binoculars_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 8 "jun_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 9 "pliers_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 10 "fx_dyn_light_jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 11 "fx_dyn_light_player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 12 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 13 "fx_dyn_light_carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 14 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 15 "broken_glass_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 113)
    (cinematic_scripting_start_dialogue 1 3 0 (cinematic_scripting_get_object 1 6))
    (sleep 31)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_013_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 4 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 4)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 1 "jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 2 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 3 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 4 "carter_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 5 "jun_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 6 "kat_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 7 "binoculars_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 8 "jun_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 9 "pliers_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 10 "fx_dyn_light_jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 11 "fx_dyn_light_player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 12 "fx_dyn_light_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 13 "fx_dyn_light_carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 14 "kat_pistol_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 15 "broken_glass_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 3)
    (cinematic_scripting_start_dialogue 1 4 0 (cinematic_scripting_get_object 1 4))
    (sleep 35)
    (cinematic_scripting_start_dialogue 1 4 1 (cinematic_scripting_get_object 1 6))
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_013_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 5 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 5)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 1 "jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 2 "kat_6" true)
    (object_hide (cinematic_scripting_get_object 1 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 4 "carter_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 5 "jun_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 6 "kat_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 7 "binoculars_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 8 "jun_ar_6" true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 10 "fx_dyn_light_jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 11 "fx_dyn_light_player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 12 "fx_dyn_light_kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 13 "fx_dyn_light_carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 14 "kat_pistol_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 15 "broken_glass_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (sleep 74)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_013_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 6 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 6)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 0 "carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 1 "jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 2 "kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 3 "player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 4 "carter_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 5 "jun_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 6 "kat_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 7 "binoculars_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 8 "jun_ar_7" true)
    (object_hide (cinematic_scripting_get_object 1 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 10 "fx_dyn_light_jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 11 "fx_dyn_light_player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 12 "fx_dyn_light_kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 13 "fx_dyn_light_carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 14 "kat_pistol_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 15 "broken_glass_7" true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (sleep 82)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_013_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (cinematic_object_destroy "emile")
    (052lb_reflection_013_sc_sh1)
    (052lb_reflection_013_sc_sh2)
    (052lb_reflection_013_sc_sh3)
    (052lb_reflection_013_sc_sh4)
    (052lb_reflection_013_sc_sh5)
    (052lb_reflection_013_sc_sh6)
    (052lb_reflection_013_sc_sh7)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 052lb_reflection_017_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 0 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 0 "carter_1" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 3 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 4 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 5 "carter_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 6 "jun_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 7 "kat_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 8 "binoculars_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 9 "carter_ar_1" true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 11 "jun_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 12 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 13 "tac_pad_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 14 "fx_dyn_light_jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 15 "fx_dyn_light_player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 16 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 17 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 18 "fx_dyn_light_carter1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 19 "fx_dyn_light_carter2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 20 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 21 "broken_glass_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 22 "headset_1" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (sleep 49)
    (cinematic_scripting_start_dialogue 2 0 0 (cinematic_scripting_get_object 2 7))
    (sleep 35)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 1 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 1)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 0 "carter_2" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 3 "kat_2" true)
    (object_hide (cinematic_scripting_get_object 2 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 5 "carter_head_2" true)
    (object_hide (cinematic_scripting_get_object 2 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 7 "kat_head_2" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (object_hide (cinematic_scripting_get_object 2 12) true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 14 "fx_dyn_light_jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 15 "fx_dyn_light_player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 16 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 17 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 18 "fx_dyn_light_carter1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 19 "fx_dyn_light_carter2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 20 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 21 "broken_glass_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 22 "headset_2" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 60)
    (cinematic_scripting_start_dialogue 2 1 0 (cinematic_scripting_get_object 2 5))
    (sleep 24)
    (cinematic_scripting_start_dialogue 2 1 1 none)
    (sleep 73)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 2 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 2)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 1 "emile_3" true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 3 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 4 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 5 "carter_head_3" true)
    (object_hide (cinematic_scripting_get_object 2 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 7 "kat_head_3" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 10 "emile_ar_3" true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 12 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 13 "tac_pad_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 14 "fx_dyn_light_jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 15 "fx_dyn_light_player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 16 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 17 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 18 "fx_dyn_light_carter1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 19 "fx_dyn_light_carter2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 20 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 21 "broken_glass_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 22 "headset_3" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (sleep 142)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 3 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 3)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 2 0) true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 2 "jun_4" true)
    (object_hide (cinematic_scripting_get_object 2 3) true)
    (object_hide (cinematic_scripting_get_object 2 4) true)
    (object_hide (cinematic_scripting_get_object 2 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 6 "jun_head_4" true)
    (object_hide (cinematic_scripting_get_object 2 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 8 "binoculars_4" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (object_hide (cinematic_scripting_get_object 2 12) true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 14 "fx_dyn_light_jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 15 "fx_dyn_light_player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 16 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 17 "fx_dyn_light_emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 18 "fx_dyn_light_carter1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 19 "fx_dyn_light_carter2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 20 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 21 "broken_glass_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 22 "headset_4" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (sleep 91)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 4 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 4)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 1 "emile_5" true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 3 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 4 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 5 "carter_head_5" true)
    (object_hide (cinematic_scripting_get_object 2 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 7 "kat_head_5" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 10 "emile_ar_5" true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 12 "player_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 13 "tac_pad_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 14 "fx_dyn_light_jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 15 "fx_dyn_light_player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 16 "fx_dyn_light_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 17 "fx_dyn_light_emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 18 "fx_dyn_light_carter1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 19 "fx_dyn_light_carter2_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 20 "kat_pistol_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 21 "broken_glass_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 4 22 "headset_5" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (sleep 16)
    (cinematic_scripting_start_dialogue 2 4 0 (cinematic_scripting_get_object 2 5))
    (sleep 32)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 5 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 5)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 0 "carter_6" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 2 "jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 3 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 4 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 5 "carter_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 6 "jun_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 7 "kat_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 8 "binoculars_6" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 12 "player_ar_6" true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 14 "fx_dyn_light_jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 15 "fx_dyn_light_player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 16 "fx_dyn_light_kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 17 "fx_dyn_light_emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 18 "fx_dyn_light_carter1_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 19 "fx_dyn_light_carter2_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 20 "kat_pistol_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 21 "broken_glass_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 5 22 "headset_6" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (sleep 11)
    (cinematic_scripting_start_dialogue 2 5 0 (cinematic_scripting_get_object 2 7))
    (sleep 51)
    (cinematic_scripting_start_dialogue 2 5 1 (cinematic_scripting_get_object 2 5))
    (sleep 53)
    (cinematic_scripting_start_dialogue 2 5 2 (cinematic_scripting_get_object 2 7))
    (sleep 17)
    (cinematic_scripting_start_dialogue 2 5 3 none)
    (sleep 218)
    (cinematic_scripting_start_dialogue 2 5 4 (cinematic_scripting_get_object 2 7))
    (sleep 70)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 6 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 6)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 0 "carter_7" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 2 "jun_7" true)
    (object_hide (cinematic_scripting_get_object 2 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 4 "player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 5 "carter_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 6 "jun_head_7" true)
    (object_hide (cinematic_scripting_get_object 2 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 8 "binoculars_7" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 11 "jun_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 12 "player_ar_7" true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 14 "fx_dyn_light_jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 15 "fx_dyn_light_player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 16 "fx_dyn_light_kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 17 "fx_dyn_light_emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 18 "fx_dyn_light_carter1_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 19 "fx_dyn_light_carter2_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 20 "kat_pistol_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 21 "broken_glass_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 6 22 "headset_7" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (sleep 2)
    (cinematic_scripting_start_dialogue 2 6 0 (cinematic_scripting_get_object 2 5))
    (sleep 101)
    (cinematic_scripting_start_dialogue 2 6 1 (cinematic_scripting_get_object 2 6))
    (sleep 85)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 7 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 7)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 0 "carter_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 1 "emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 2 "jun_8" true)
    (object_hide (cinematic_scripting_get_object 2 3) true)
    (object_hide (cinematic_scripting_get_object 2 4) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 5 "carter_head_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 6 "jun_head_8" true)
    (object_hide (cinematic_scripting_get_object 2 7) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 8 "binoculars_8" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (object_hide (cinematic_scripting_get_object 2 12) true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 14 "fx_dyn_light_jun_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 15 "fx_dyn_light_player_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 16 "fx_dyn_light_kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 17 "fx_dyn_light_emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 18 "fx_dyn_light_carter1_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 19 "fx_dyn_light_carter2_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 20 "kat_pistol_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 21 "broken_glass_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 7 22 "headset_8" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (sleep 34)
    (cinematic_scripting_start_dialogue 2 7 0 (cinematic_scripting_get_object 2 6))
    (sleep 34)
    (cinematic_scripting_start_dialogue 2 7 1 (cinematic_scripting_get_object 2 1))
    (sleep 11)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 8 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 8)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (object_hide (cinematic_scripting_get_object 2 0) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 1 "emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 2 "jun_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 3 "kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 4 "player_9" true)
    (object_hide (cinematic_scripting_get_object 2 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 6 "jun_head_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 7 "kat_head_9" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 10 "emile_ar_9" true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 12 "player_ar_9" true)
    (object_hide (cinematic_scripting_get_object 2 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 14 "fx_dyn_light_jun_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 15 "fx_dyn_light_player_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 16 "fx_dyn_light_kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 17 "fx_dyn_light_emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 18 "fx_dyn_light_carter1_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 19 "fx_dyn_light_carter2_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 20 "kat_pistol_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 21 "broken_glass_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 8 22 "headset_9" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (sleep 90)
    (cinematic_scripting_start_dialogue 2 8 0 (cinematic_scripting_get_object 2 7))
    (sleep 5)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh10
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 9 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 9)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 0 "carter_10" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 2 "jun_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 3 "kat_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 4 "player_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 5 "carter_head_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 6 "jun_head_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 7 "kat_head_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 8 "binoculars_10" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 11 "jun_ar_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 12 "player_ar_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 13 "tac_pad_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 14 "fx_dyn_light_jun_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 15 "fx_dyn_light_player_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 16 "fx_dyn_light_kat_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 17 "fx_dyn_light_emile_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 18 "fx_dyn_light_carter1_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 19 "fx_dyn_light_carter2_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 20 "kat_pistol_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 21 "broken_glass_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 9 22 "headset_10" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 9)
    (cinematic_clips_initialize_for_shot 9)
    (sleep 89)
    (cinematic_scripting_start_dialogue 2 9 0 (cinematic_scripting_get_object 2 5))
    (sleep 33)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh11
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 10 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 10)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 0 "carter_11" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 3 "kat_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 4 "player_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 5 "carter_head_11" true)
    (object_hide (cinematic_scripting_get_object 2 6) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 7 "kat_head_11" true)
    (object_hide (cinematic_scripting_get_object 2 8) true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (object_hide (cinematic_scripting_get_object 2 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 12 "player_ar_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 13 "tac_pad_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 14 "fx_dyn_light_jun_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 15 "fx_dyn_light_player_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 16 "fx_dyn_light_kat_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 17 "fx_dyn_light_emile_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 18 "fx_dyn_light_carter1_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 19 "fx_dyn_light_carter2_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 20 "kat_pistol_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 21 "broken_glass_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 10 22 "headset_11" true)
    (object_hide (cinematic_scripting_get_object 2 23) true)
    (object_hide (cinematic_scripting_get_object 2 24) true)
    (object_hide (cinematic_scripting_get_object 2 25) true)
    (cinematic_lights_initialize_for_shot 10)
    (cinematic_clips_initialize_for_shot 10)
    (sleep 8)
    (cinematic_scripting_start_dialogue 2 10 0 (cinematic_scripting_get_object 2 7))
    (sleep 89)
    (cinematic_scripting_start_dialogue 2 10 1 (cinematic_scripting_get_object 2 5))
    (sleep 25)
    (cinematic_scripting_start_dialogue 2 10 2 (cinematic_scripting_get_object 2 7))
    (sleep 18)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_017_sc_sh12
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 11 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 11)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 0 "carter_12" true)
    (object_hide (cinematic_scripting_get_object 2 1) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 2 "jun_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 3 "kat_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 4 "player_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 5 "carter_head_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 6 "jun_head_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 7 "kat_head_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 8 "binoculars_12" true)
    (object_hide (cinematic_scripting_get_object 2 9) true)
    (object_hide (cinematic_scripting_get_object 2 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 11 "jun_ar_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 12 "player_ar_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 13 "tac_pad_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 14 "fx_dyn_light_jun_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 15 "fx_dyn_light_player_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 16 "fx_dyn_light_kat_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 17 "fx_dyn_light_emile_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 18 "fx_dyn_light_carter1_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 19 "fx_dyn_light_carter2_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 20 "kat_pistol_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 21 "broken_glass_12" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 22 "headset_12" true)
    (cinematic_scripting_create_and_animate_object_no_animation 2 11 23 true)
    (cinematic_scripting_create_and_animate_object_no_animation 2 11 24 true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 11 25 "glass_chunks_01_12" true)
    (cinematic_lights_initialize_for_shot 11)
    (cinematic_clips_initialize_for_shot 11)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 21) "glass_broken" 0 0)
    (object_set_permutation (cinematic_object_get "broken_glass") "default" "default")
    (cinematic_print "custom script play")
    (sleep 16)
    (cinematic_scripting_start_dialogue 2 11 0 (cinematic_scripting_get_object 2 5))
    (sleep 7)
    (cinematic_scripting_start_effect 2 11 2 "fx_glassing_cine")
    (sleep 42)
    (cinematic_scripting_start_dialogue 2 11 1 (cinematic_scripting_get_object 2 7))
    (sleep 5)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 21) "glass_broken" 1 2)
    (sleep 2)
    (cinematic_scripting_start_effect 2 11 0 (cinematic_object_get "broken_glass"))
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "broken_glass") "default" "m52_glass_destroyed_missing")
    (sleep 8)
    (cinematic_scripting_start_effect 2 11 1 "fx_blast_smoke")
    (sleep 47)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_017_sc
    (cinematic_print "beginning scene 3")
    (cinematic_scripting_create_scene 2)
    (052lb_reflection_017_sc_sh1)
    (052lb_reflection_017_sc_sh2)
    (052lb_reflection_017_sc_sh3)
    (052lb_reflection_017_sc_sh4)
    (052lb_reflection_017_sc_sh5)
    (052lb_reflection_017_sc_sh6)
    (052lb_reflection_017_sc_sh7)
    (052lb_reflection_017_sc_sh8)
    (052lb_reflection_017_sc_sh9)
    (052lb_reflection_017_sc_sh10)
    (052lb_reflection_017_sc_sh11)
    (052lb_reflection_017_sc_sh12)
    (cinematic_scripting_destroy_scene 2)
)

(script static void 052lb_reflection_020_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 0 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 1 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 3 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 4 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 5 "carter_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 6 "kat_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 7 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 8 "elevator_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 9 "elevator_2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 10 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 11 "jun_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 12 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 13 "fx_dyn_light_atrim_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 14 "fx_dyn_light_elev1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 15 "fx_dyn_light_elev2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 16 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 17 "fx_dyn_light_escape_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 18 "fx_dyn_light_window_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 19 "cov_cruiser_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 20 "kat_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 21 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 22 "broken_glass_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 23 "glass_chunks_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 24 "glass_chunks_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 25 "glass_chunks_03_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 26 "glass_chunks_04_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 27 "glass_chunks_05_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 28 "glass_chunks_06_1" true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 0 29 true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 0 30 "fx_bro_glassing_beam_1" true)
    (object_hide (cinematic_scripting_get_object 3 31) true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 0 32 true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 11) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 7) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 10) "primary_ammunition_tens" 0.3 0)
    (cinematic_print "custom script play")
    (begin
        (object_set_variant (cinematic_object_get "kat_head") "no_transparent")
        (object_set_variant (cinematic_object_get "carter_head") "no_transparent")
    )
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "broken_glass") "default" "m52_glass_destroyed_missing")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 20) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 20) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 12) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 10) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 12) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 11) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 3 7) "primary_ammunition_ones" 0.2 0)
    (sleep 153)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_020_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 1 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 1)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 1 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 2 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 3 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 4 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 5 "carter_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 6 "kat_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 7 "carter_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 8 "elevator_1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 9 "elevator_2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 10 "emile_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 11 "jun_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 12 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 13 "fx_dyn_light_atrim_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 14 "fx_dyn_light_elev1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 15 "fx_dyn_light_elev2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 16 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 17 "fx_dyn_light_escape_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 18 "fx_dyn_light_window_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 19 "cov_cruiser_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 20 "kat_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 21 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 22 "broken_glass_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 23 "glass_chunks_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 24 "glass_chunks_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 25 "glass_chunks_03_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 26 "glass_chunks_04_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 27 "glass_chunks_05_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 28 "glass_chunks_06_2" true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 1 29 true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 1 30 "fx_bro_glassing_beam_2" true)
    (object_hide (cinematic_scripting_get_object 3 31) true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 1 32 true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 2 0)
    (sleep 67)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_020_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 2 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 2)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 1 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 2 "jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 3 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 4 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 5 "carter_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 6 "kat_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 7 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 8 "elevator_1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 9 "elevator_2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 10 "emile_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 11 "jun_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 12 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 13 "fx_dyn_light_atrim_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 14 "fx_dyn_light_elev1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 15 "fx_dyn_light_elev2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 16 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 17 "fx_dyn_light_escape_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 18 "fx_dyn_light_window_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 19 "cov_cruiser_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 20 "kat_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 21 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 22 "broken_glass_3" true)
    (object_hide (cinematic_scripting_get_object 3 23) true)
    (object_hide (cinematic_scripting_get_object 3 24) true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (object_hide (cinematic_scripting_get_object 3 26) true)
    (object_hide (cinematic_scripting_get_object 3 27) true)
    (object_hide (cinematic_scripting_get_object 3 28) true)
    (object_hide (cinematic_scripting_get_object 3 29) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 2 30 "fx_bro_glassing_beam_3" true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 2 31 true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 2 32 true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (cinematic_scripting_start_effect 3 2 0 "fx_elevator_dust")
    (sleep 29)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_020_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 3) 3 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 3) 3)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 0 "carter_4" true)
    (object_hide (cinematic_scripting_get_object 3 1) true)
    (object_hide (cinematic_scripting_get_object 3 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 3 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 4 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 5 "carter_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 6 "kat_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 7 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 8 "elevator_1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 9 "elevator_2_4" true)
    (object_hide (cinematic_scripting_get_object 3 10) true)
    (object_hide (cinematic_scripting_get_object 3 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 12 "player_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 13 "fx_dyn_light_atrim_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 14 "fx_dyn_light_elev1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 15 "fx_dyn_light_elev2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 16 "fx_dyn_light_emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 17 "fx_dyn_light_escape_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 18 "fx_dyn_light_window_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 19 "cov_cruiser_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 20 "kat_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 21 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 22 "broken_glass_4" true)
    (object_hide (cinematic_scripting_get_object 3 23) true)
    (object_hide (cinematic_scripting_get_object 3 24) true)
    (object_hide (cinematic_scripting_get_object 3 25) true)
    (object_hide (cinematic_scripting_get_object 3 26) true)
    (object_hide (cinematic_scripting_get_object 3 27) true)
    (object_hide (cinematic_scripting_get_object 3 28) true)
    (object_hide (cinematic_scripting_get_object 3 29) true)
    (cinematic_scripting_create_and_animate_cinematic_object 3 3 30 "fx_bro_glassing_beam_4" true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 3 31 true)
    (cinematic_scripting_create_and_animate_object_no_animation 3 3 32 true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (sleep 50)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_020_sc
    (cinematic_print "beginning scene 4")
    (cinematic_scripting_create_scene 3)
    (052lb_reflection_020_sc_sh1)
    (052lb_reflection_020_sc_sh2)
    (052lb_reflection_020_sc_sh3)
    (052lb_reflection_020_sc_sh4)
    (cinematic_scripting_destroy_scene 3)
)

(script static void 052lb_reflection_030_sc_sh1
    (render_weather false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 0 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 1 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 3 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 4 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 5 "kat_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 6 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 7 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 8 "jun_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 9 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 10 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 11 "elevator_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 12 "elevator_2_1" true)
    (object_hide (cinematic_scripting_get_object 4 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 14 "fx_dyn_light_elev_car_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 15 "fx_dyn_light_elev_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 16 "fx_dyn_light_prettykay_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 17 "fx_dyn_light_elevdwy_1" true)
    (cinematic_scripting_create_and_animate_object_no_animation 4 0 18 true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 0 19 "fx_dyn_light_kat2_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 6) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 6) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 7) "primary_ammunition_tens" 0.3 0)
    (cinematic_print "custom script play")
    (begin
        (object_set_variant (cinematic_object_get "kat_head") "default")
        (object_set_variant (cinematic_object_get "carter_head") "default")
    )
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 10) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 10) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 7) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 8) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 4 8) "primary_ammunition_tens" 0.3 0)
    (sleep 23)
    (cinematic_scripting_start_dialogue 4 0 0 (cinematic_scripting_get_object 4 5))
    (sleep 37)
    (cinematic_scripting_start_effect 4 0 0 "fx_blast_smoke")
    (sleep 74)
    (cinematic_scripting_start_dialogue 4 0 1 (cinematic_scripting_get_object 4 5))
    (sleep 62)
    (cinematic_scripting_start_dialogue 4 0 2 (cinematic_scripting_get_object 4 5))
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_030_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 1 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 1)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 1 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 2 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 3 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 4 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 5 "kat_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 6 "carter_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 7 "emile_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 8 "jun_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 9 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 10 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 11 "elevator_1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 12 "elevator_2_2" true)
    (object_hide (cinematic_scripting_get_object 4 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 14 "fx_dyn_light_elev_car_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 15 "fx_dyn_light_elev_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 16 "fx_dyn_light_prettykay_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 17 "fx_dyn_light_elevdwy_2" true)
    (cinematic_scripting_create_and_animate_object_no_animation 4 1 18 true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 1 19 "fx_dyn_light_kat2_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (sleep 55)
    (cinematic_scripting_start_dialogue 4 1 0 (cinematic_scripting_get_object 4 5))
    (sleep 68)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_030_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 2 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 2)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 1 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 2 "jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 3 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 4 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 5 "kat_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 6 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 7 "emile_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 8 "jun_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 9 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 10 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 11 "elevator_1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 12 "elevator_2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 13 "tac_pad_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 14 "fx_dyn_light_elev_car_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 15 "fx_dyn_light_elev_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 16 "fx_dyn_light_prettykay_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 17 "fx_dyn_light_elevdwy_3" true)
    (cinematic_scripting_create_and_animate_object_no_animation 4 2 18 true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 2 19 "fx_dyn_light_kat2_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (sleep 131)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_030_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 3 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 3)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 1 "emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 2 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 3 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 4 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 5 "kat_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 6 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 7 "emile_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 8 "jun_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 9 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 10 "player_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 11 "elevator_1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 12 "elevator_2_4" true)
    (object_hide (cinematic_scripting_get_object 4 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 14 "fx_dyn_light_elev_car_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 15 "fx_dyn_light_elev_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 16 "fx_dyn_light_prettykay_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 17 "fx_dyn_light_elevdwy_4" true)
    (cinematic_scripting_create_and_animate_object_no_animation 4 3 18 true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 3 19 "fx_dyn_light_kat2_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1.5 0)
    (sleep 4)
    (cinematic_scripting_start_dialogue 4 3 0 none)
    (sleep 54)
    (cinematic_scripting_start_dialogue 4 3 1 none)
    (sleep 31)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_030_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 4 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 4)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 1 "emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 2 "jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 3 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 4 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 5 "kat_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 6 "carter_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 7 "emile_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 8 "jun_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 9 "kat_pistol_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 10 "player_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 11 "elevator_1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 12 "elevator_2_5" true)
    (object_hide (cinematic_scripting_get_object 4 13) true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 14 "fx_dyn_light_elev_car_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 15 "fx_dyn_light_elev_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 16 "fx_dyn_light_prettykay_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 17 "fx_dyn_light_elevdwy_5" true)
    (cinematic_scripting_create_and_animate_object_no_animation 4 4 18 true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 4 19 "fx_dyn_light_kat2_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1 0)
    (sleep 36)
    (cinematic_scripting_start_dialogue 4 4 0 none)
    (sleep 32)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_030_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 4) 5 "052lb_reflection_010_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 4) 5)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_010_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 1 "emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 2 "jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 3 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 4 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 5 "kat_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 6 "carter_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 7 "emile_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 8 "jun_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 9 "kat_pistol_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 10 "player_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 11 "elevator_1_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 12 "elevator_2_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 13 "tac_pad_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 14 "fx_dyn_light_elev_car_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 15 "fx_dyn_light_elev_kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 16 "fx_dyn_light_prettykay_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 17 "fx_dyn_light_elevdwy_6" true)
    (cinematic_scripting_create_and_animate_object_no_animation 4 5 18 true)
    (cinematic_scripting_create_and_animate_cinematic_object 4 5 19 "fx_dyn_light_kat2_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 1 0)
    (sleep 76)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_030_sc
    (cinematic_print "beginning scene 5")
    (cinematic_scripting_create_scene 4)
    (052lb_reflection_030_sc_sh1)
    (052lb_reflection_030_sc_sh2)
    (052lb_reflection_030_sc_sh3)
    (052lb_reflection_030_sc_sh4)
    (052lb_reflection_030_sc_sh5)
    (052lb_reflection_030_sc_sh6)
    (cinematic_scripting_destroy_scene 4)
)

(script static void 052lb_reflection_040_sc_sh1
    (render_weather false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 0 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 1 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 3 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 4 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 5 "mag1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 6 "blast_doors_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 7 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 8 "jun_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 9 "carter_ar_1" true)
    (object_hide (cinematic_scripting_get_object 5 10) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 11 "elevator_2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 12 "fx_dyn_light_bunkdwy_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 13 "fx_dyn_light_pieta_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 14 "fx_dyn_light_elev_car_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 15 "fx_dyn_light_elev_ext_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 16 "fx_dyn_light_elev_k_int_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 17 "fx_dyn_light_elev_ext2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 18 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 19 "god_ray_1" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 22 "zealot_sniper_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 23 "kat_sniped_helmet_1" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 0 26 "fx_dyn_light_zealot_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 18) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 9) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 8) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 7) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 8) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 18) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 7) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 5 9) "primary_ammunition_tens" 0.3 0)
    (sleep 1)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") false)
    (sleep 42)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 1 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 1)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 1 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 2 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 3 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 4 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 5 "mag1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 6 "blast_doors_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 7 "emile_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 8 "jun_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 9 "carter_ar_2" true)
    (object_hide (cinematic_scripting_get_object 5 10) true)
    (object_hide (cinematic_scripting_get_object 5 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 12 "fx_dyn_light_bunkdwy_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 13 "fx_dyn_light_pieta_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 14 "fx_dyn_light_elev_car_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 15 "fx_dyn_light_elev_ext_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 16 "fx_dyn_light_elev_k_int_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 17 "fx_dyn_light_elev_ext2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 18 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 19 "god_ray_2" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 22 "zealot_sniper_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 23 "kat_sniped_helmet_2" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 1 26 "fx_dyn_light_zealot_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 0.75 0)
    (sleep 16)
    (cinematic_scripting_start_dialogue 5 1 0 none)
    (sleep 19)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 2 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 2)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 1 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 2 "jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 3 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 4 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 5 "mag1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 6 "blast_doors_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 7 "emile_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 8 "jun_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 9 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 10 "elevator_1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 11 "elevator_2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 12 "fx_dyn_light_bunkdwy_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 13 "fx_dyn_light_pieta_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 14 "fx_dyn_light_elev_car_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 15 "fx_dyn_light_elev_ext_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 16 "fx_dyn_light_elev_k_int_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 17 "fx_dyn_light_elev_ext2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 18 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 19 "god_ray_3" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 22 "zealot_sniper_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 23 "kat_sniped_helmet_3" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 2 26 "fx_dyn_light_zealot_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (sleep 36)
    (cinematic_scripting_start_dialogue 5 2 0 none)
    (sleep 15)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 3 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 3)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 1 "emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 2 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 3 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 4 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 5 "mag1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 6 "blast_doors_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 7 "emile_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 8 "jun_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 9 "carter_ar_4" true)
    (object_hide (cinematic_scripting_get_object 5 10) true)
    (object_hide (cinematic_scripting_get_object 5 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 12 "fx_dyn_light_bunkdwy_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 13 "fx_dyn_light_pieta_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 14 "fx_dyn_light_elev_car_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 15 "fx_dyn_light_elev_ext_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 16 "fx_dyn_light_elev_k_int_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 17 "fx_dyn_light_elev_ext2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 18 "player_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 19 "god_ray_4" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 22 "zealot_sniper_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 23 "kat_sniped_helmet_4" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 3 26 "fx_dyn_light_zealot_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 0.75 0)
    (sleep 60)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 4 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 4)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 1 "emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 2 "jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 3 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 4 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 5 "mag1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 6 "blast_doors_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 7 "emile_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 8 "jun_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 9 "carter_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 10 "elevator_1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 11 "elevator_2_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 12 "fx_dyn_light_bunkdwy_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 13 "fx_dyn_light_pieta_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 14 "fx_dyn_light_elev_car_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 15 "fx_dyn_light_elev_ext_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 16 "fx_dyn_light_elev_k_int_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 17 "fx_dyn_light_elev_ext2_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 18 "player_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 19 "god_ray_5" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 22 "zealot_sniper_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 23 "kat_sniped_helmet_5" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 4 26 "fx_dyn_light_zealot_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1 0)
    (sleep 37)
    (cinematic_scripting_start_dialogue 5 4 0 none)
    (sleep 10)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 5 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 5)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 1 "emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 2 "jun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 3 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 4 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 5 "mag1_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 6 "blast_doors_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 7 "emile_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 8 "jun_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 9 "carter_ar_6" true)
    (object_hide (cinematic_scripting_get_object 5 10) true)
    (object_hide (cinematic_scripting_get_object 5 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 12 "fx_dyn_light_bunkdwy_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 13 "fx_dyn_light_pieta_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 14 "fx_dyn_light_elev_car_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 15 "fx_dyn_light_elev_ext_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 16 "fx_dyn_light_elev_k_int_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 17 "fx_dyn_light_elev_ext2_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 18 "player_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 19 "god_ray_6" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 22 "zealot_sniper_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 23 "kat_sniped_helmet_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 24 "fx_bro_kick_up_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 25 "fx_brohead_shot_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 5 26 "fx_dyn_light_zealot_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 0.75 0)
    (sleep 43)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 6 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 6)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 0 "carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 1 "emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 2 "jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 3 "kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 4 "player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 5 "mag1_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 6 "blast_doors_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 7 "emile_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 8 "jun_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 9 "carter_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 10 "elevator_1_7" true)
    (object_hide (cinematic_scripting_get_object 5 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 12 "fx_dyn_light_bunkdwy_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 13 "fx_dyn_light_pieta_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 14 "fx_dyn_light_elev_car_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 15 "fx_dyn_light_elev_ext_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 16 "fx_dyn_light_elev_k_int_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 17 "fx_dyn_light_elev_ext2_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 18 "player_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 19 "god_ray_7" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 22 "zealot_sniper_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 23 "kat_sniped_helmet_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 24 "fx_bro_kick_up_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 25 "fx_brohead_shot_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 6 26 "fx_dyn_light_zealot_7" true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (render_exposure 1 0)
    (sleep 21)
    (cinematic_scripting_start_effect 5 6 0 (cinematic_object_get "fx_brohead_shot"))
    (sleep 1)
    (cinematic_scripting_start_effect 5 6 1 (cinematic_object_get "kat_sniped_helmet"))
    (cinematic_scripting_start_effect 5 6 2 (cinematic_object_get "fx_bro_kick_up"))
    (sleep 26)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 7 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 7)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 0 "carter_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 1 "emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 2 "jun_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 3 "kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 4 "player_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 5 "mag1_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 6 "blast_doors_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 7 "emile_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 8 "jun_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 9 "carter_ar_8" true)
    (object_hide (cinematic_scripting_get_object 5 10) true)
    (object_hide (cinematic_scripting_get_object 5 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 12 "fx_dyn_light_bunkdwy_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 13 "fx_dyn_light_pieta_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 14 "fx_dyn_light_elev_car_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 15 "fx_dyn_light_elev_ext_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 16 "fx_dyn_light_elev_k_int_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 17 "fx_dyn_light_elev_ext2_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 18 "player_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 19 "god_ray_8" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 22 "zealot_sniper_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 23 "kat_sniped_helmet_8" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 7 26 "fx_dyn_light_zealot_8" true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (render_exposure 0.75 0)
    (sleep 55)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 8 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 8)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 0 "carter_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 1 "emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 2 "jun_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 3 "kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 4 "player_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 5 "mag1_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 6 "blast_doors_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 7 "emile_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 8 "jun_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 9 "carter_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 10 "elevator_1_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 11 "elevator_2_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 12 "fx_dyn_light_bunkdwy_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 13 "fx_dyn_light_pieta_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 14 "fx_dyn_light_elev_car_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 15 "fx_dyn_light_elev_ext_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 16 "fx_dyn_light_elev_k_int_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 17 "fx_dyn_light_elev_ext2_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 18 "player_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 19 "god_ray_9" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 22 "zealot_sniper_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 23 "kat_sniped_helmet_9" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 8 26 "fx_dyn_light_zealot_9" true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (render_exposure 0.75 0)
    (sleep 43)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") true)
    (cinematic_print "custom script play")
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") false)
    (cinematic_print "custom script play")
    (sleep 14)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") true)
    (sleep 1)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") false)
    (sleep 43)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh10
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 9 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 9)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 0 "carter_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 1 "emile_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 2 "jun_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 3 "kat_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 4 "player_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 5 "mag1_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 6 "blast_doors_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 7 "emile_ar_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 8 "jun_ar_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 9 "carter_ar_10" true)
    (object_hide (cinematic_scripting_get_object 5 10) true)
    (object_hide (cinematic_scripting_get_object 5 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 12 "fx_dyn_light_bunkdwy_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 13 "fx_dyn_light_pieta_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 14 "fx_dyn_light_elev_car_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 15 "fx_dyn_light_elev_ext_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 16 "fx_dyn_light_elev_k_int_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 17 "fx_dyn_light_elev_ext2_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 18 "player_ar_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 19 "god_ray_10" true)
    (object_hide (cinematic_scripting_get_object 5 20) true)
    (object_hide (cinematic_scripting_get_object 5 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 22 "zealot_sniper_10" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 23 "kat_sniped_helmet_10" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 9 26 "fx_dyn_light_zealot_10" true)
    (cinematic_lights_initialize_for_shot 9)
    (cinematic_clips_initialize_for_shot 9)
    (render_exposure 0.75 0)
    (sleep 5)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "emile_ar_weapon") true)
    (cinematic_print "custom script play")
    (sleep 6)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") true)
    (sleep 24)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "jun_ar_weapon") true)
    (cinematic_print "custom script play")
    (sleep 21)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "emile_ar_weapon") false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "jun_ar_weapon") false)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_040_sc_sh11
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 5) 10 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 5) 10)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 0 "carter_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 1 "emile_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 2 "jun_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 3 "kat_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 4 "player_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 5 "mag1_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 6 "blast_doors_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 7 "emile_ar_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 8 "jun_ar_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 9 "carter_ar_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 10 "elevator_1_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 11 "elevator_2_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 12 "fx_dyn_light_bunkdwy_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 13 "fx_dyn_light_pieta_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 14 "fx_dyn_light_elev_car_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 15 "fx_dyn_light_elev_ext_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 16 "fx_dyn_light_elev_k_int_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 17 "fx_dyn_light_elev_ext2_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 18 "player_ar_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 19 "god_ray_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 20 "phantom_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 21 "zealot_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 22 "zealot_sniper_11" true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 23 "kat_sniped_helmet_11" true)
    (object_hide (cinematic_scripting_get_object 5 24) true)
    (object_hide (cinematic_scripting_get_object 5 25) true)
    (cinematic_scripting_create_and_animate_cinematic_object 5 10 26 "fx_dyn_light_zealot_11" true)
    (cinematic_lights_initialize_for_shot 10)
    (cinematic_clips_initialize_for_shot 10)
    (render_exposure 0.75 0)
    (sleep 13)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") true)
    (cinematic_print "custom script play")
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") false)
    (cinematic_print "custom script play")
    (sleep 11)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") true)
    (sleep 1)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") false)
    (sleep 14)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") true)
    (cinematic_print "custom script play")
    (sleep 1)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "mag1_weapon") false)
    (sleep 74)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_040_sc
    (cinematic_print "beginning scene 6")
    (cinematic_scripting_create_scene 5)
    (052lb_reflection_040_sc_sh1)
    (052lb_reflection_040_sc_sh2)
    (052lb_reflection_040_sc_sh3)
    (052lb_reflection_040_sc_sh4)
    (052lb_reflection_040_sc_sh5)
    (052lb_reflection_040_sc_sh6)
    (052lb_reflection_040_sc_sh7)
    (052lb_reflection_040_sc_sh8)
    (052lb_reflection_040_sc_sh9)
    (052lb_reflection_040_sc_sh10)
    (052lb_reflection_040_sc_sh11)
    (cinematic_scripting_destroy_scene 5)
)

(script static void 052lb_reflection_050_sc_sh1
    (render_weather false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 6) 0 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 6) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 1 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 3 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 4 "blast_doors_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 5 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 6 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 7 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 8 "jun_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 9 "femaleciv_01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 10 "femaleciv_02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 11 "fx_dyn_light_bunkdwy_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 12 "fx_dyn_light_pieta_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 13 "elevator_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 14 "elevator_2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 15 "god_ray_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 16 "kat_sniped_helmet_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 0 17 "player_ar_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 0.75 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 2) "primary_ammunition_tens" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 7) "primary_ammunition_ones" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 1) "primary_ammunition_tens" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 8) "primary_ammunition_ones" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 6) "primary_ammunition_ones" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 17) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 6) "primary_ammunition_tens" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 6 17) "primary_ammunition_ones" 0.2 0)
    (sleep 5)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "jun_ar_weapon") true)
    (sleep 7)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "jun_ar_weapon") false)
    (sleep 4)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "jun_ar_weapon") true)
    (cinematic_print "custom script play")
    (sleep 8)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "jun_ar_weapon") false)
    (sleep 14)
    (cinematic_scripting_start_dialogue 6 0 0 (cinematic_scripting_get_object 6 0))
    (sleep 36)
    (cinematic_scripting_start_dialogue 6 0 1 (cinematic_scripting_get_object 6 2))
    (sleep 7)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_050_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 6) 1 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 6) 1)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 1 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 2 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 3 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 4 "blast_doors_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 5 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 6 "carter_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 7 "emile_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 8 "jun_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 9 "femaleciv_01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 10 "femaleciv_02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 11 "fx_dyn_light_bunkdwy_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 12 "fx_dyn_light_pieta_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 13 "elevator_1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 14 "elevator_2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 15 "god_ray_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 16 "kat_sniped_helmet_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 1 17 "player_ar_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 0.75 0)
    (sleep 25)
    (cinematic_scripting_start_dialogue 6 1 0 none)
    (sleep 35)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_050_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 6) 2 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 6) 2)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 1 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 2 "jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 3 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 4 "blast_doors_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 5 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 6 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 7 "emile_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 8 "jun_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 9 "femaleciv_01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 10 "femaleciv_02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 11 "fx_dyn_light_bunkdwy_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 12 "fx_dyn_light_pieta_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 13 "elevator_1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 14 "elevator_2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 15 "god_ray_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 16 "kat_sniped_helmet_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 2 17 "player_ar_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 0.75 0)
    (sleep 17)
    (cinematic_scripting_start_dialogue 6 2 0 none)
    (sleep 43)
    (cinematic_scripting_start_dialogue 6 2 1 none)
    (sleep 35)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_050_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 6) 3 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 6) 3)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 1 "emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 2 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 3 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 4 "blast_doors_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 5 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 6 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 7 "emile_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 8 "jun_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 9 "femaleciv_01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 10 "femaleciv_02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 11 "fx_dyn_light_bunkdwy_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 12 "fx_dyn_light_pieta_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 13 "elevator_1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 14 "elevator_2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 15 "god_ray_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 16 "kat_sniped_helmet_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 6 3 17 "player_ar_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 0.75 0)
    (sleep 43)
    (cinematic_scripting_start_dialogue 6 3 0 none)
    (sleep 9)
    (fade_out 0 0 0 50)
    (cinematic_print "custom script play")
    (sleep 50)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection_050_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 6) 4 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 6) 4)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (object_hide (cinematic_scripting_get_object 6 0) true)
    (object_hide (cinematic_scripting_get_object 6 1) true)
    (object_hide (cinematic_scripting_get_object 6 2) true)
    (object_hide (cinematic_scripting_get_object 6 3) true)
    (object_hide (cinematic_scripting_get_object 6 4) true)
    (object_hide (cinematic_scripting_get_object 6 5) true)
    (object_hide (cinematic_scripting_get_object 6 6) true)
    (object_hide (cinematic_scripting_get_object 6 7) true)
    (object_hide (cinematic_scripting_get_object 6 8) true)
    (object_hide (cinematic_scripting_get_object 6 9) true)
    (object_hide (cinematic_scripting_get_object 6 10) true)
    (object_hide (cinematic_scripting_get_object 6 11) true)
    (object_hide (cinematic_scripting_get_object 6 12) true)
    (object_hide (cinematic_scripting_get_object 6 13) true)
    (object_hide (cinematic_scripting_get_object 6 14) true)
    (object_hide (cinematic_scripting_get_object 6 15) true)
    (object_hide (cinematic_scripting_get_object 6 16) true)
    (object_hide (cinematic_scripting_get_object 6 17) true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (fade_out 0 0 0 0)
    (cinematic_print "custom script play")
    (sleep 28)
    (cinematic_scripting_start_dialogue 6 4 0 none)
    (sleep 47)
    (cinematic_scripting_start_dialogue 6 4 1 none)
    (sleep 101)
    (cinematic_scripting_start_dialogue 6 4 2 none)
    (sleep 101)
    (cinematic_scripting_start_dialogue 6 4 3 none)
    (sleep 68)
    (cinematic_set_title "052lb_cine_timestamp_01")
    (cinematic_print "custom script play")
    (sleep 14)
    (cinematic_scripting_start_dialogue 6 4 4 none)
    (sleep 90)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_050_sc
    (cinematic_print "beginning scene 7")
    (cinematic_scripting_create_scene 6)
    (052lb_reflection_050_sc_sh1)
    (052lb_reflection_050_sc_sh2)
    (052lb_reflection_050_sc_sh3)
    (052lb_reflection_050_sc_sh4)
    (052lb_reflection_050_sc_sh5)
    (cinematic_scripting_destroy_scene 6)
)

(script static void 052lb_reflection_060_sc_sh1
    (render_weather false)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 7) 0 "052lb_reflection_040_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 7) 0)
    (cinematic_object_create_cinematic_anchor "052lb_reflection_040_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 1 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 3 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 4 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 5 "emile_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 6 "jun_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 7 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 8 "fx_dyn_light_jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 9 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 10 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 11 "lod_pelican_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 7 0 12 "omg_flare_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 3 0)
    (sleep 5)
    (fade_in 0 0 0 90)
    (cinematic_print "custom script play")
    (sleep 645)
    (cinematic_scripting_start_effect 7 0 0 (cinematic_object_get "omg_flare"))
    (sleep 849)
    (sleep (cinematic_tag_fade_out_from_cinematic "052lb_reflection"))
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !052lb_reflection_060_sc
    (cinematic_print "beginning scene 8")
    (cinematic_scripting_create_scene 7)
    (052lb_reflection_060_sc_sh1)
    (cinematic_scripting_destroy_scene 7)
)

(script static void 052lb_reflection_cleanup
    (cinematic_scripting_clean_up 1)
)

(script static void begin_052lb_reflection_debug
    (cinematic_zone_activate_for_debugging 1)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_052lb_reflection_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 1)
    (fade_in 0 0 0 0)
)

(script static void 052lb_reflection_debug
    (begin_052lb_reflection_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "052lb_reflection"))
    (cinematic_outro_start)
    (!052lb_reflection_010_sc)
    (!052lb_reflection_013_sc)
    (!052lb_reflection_017_sc)
    (!052lb_reflection_020_sc)
    (!052lb_reflection_030_sc)
    (!052lb_reflection_040_sc)
    (!052lb_reflection_050_sc)
    (!052lb_reflection_060_sc)
    (end_052lb_reflection_debug)
)

(script static void begin_052lb_reflection
    (cinematic_zone_activate 1)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_052lb_reflection
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 052lb_reflection
    (begin_052lb_reflection)
    (sleep (cinematic_tag_fade_in_to_cinematic "052lb_reflection"))
    (cinematic_outro_start)
    (!052lb_reflection_010_sc)
    (!052lb_reflection_013_sc)
    (!052lb_reflection_017_sc)
    (!052lb_reflection_020_sc)
    (!052lb_reflection_030_sc)
    (!052lb_reflection_040_sc)
    (!052lb_reflection_050_sc)
    (!052lb_reflection_060_sc)
    (end_052lb_reflection)
)

(script static void md_000_initial_to_f_md_abort
    (= (f_players_flying) true)
    (f_md_abort)
)

(script static void md_010_bldg_a_end_to_f_md_abort
    (= (f_objective_complete "dm_building_a_objective" "dc_objective_a_switch") true)
    (f_md_abort)
)

(script static void md_010_bldg_a_complete_to_f_md_abort
    (= (f_bsp_all_player 2) false)
    (f_md_abort)
)

(script static void md_020_bldg_b_troopers_to_f_md_abort
    (f_objective_complete "dm_building_b_objective" "dc_objective_b_switch")
    (f_md_abort)
)

(script static void md_030_bldg_c_interior_to_f_md_abort
    (= (f_objective_complete "dm_building_c_objective" "dc_objective_c_switch") true)
    (f_md_abort)
)

(script static void md_030_bldg_c_lost_to_f_md_abort
    (= (f_objective_complete "dm_building_c_objective" "dc_objective_c_switch") true)
    (f_md_abort)
)

(script static void md_030_bldg_c_end_to_f_md_abort
    (= (f_bsp_all_player 4) false)
    (f_md_abort)
)

(script static void md_040_bldg_oni_to_f_md_abort
    (b_oni_end)
    (f_md_abort)
)

(script static void crazy_marine_dialog_to_f_md_abort
    (< (ai_living_count "sq_bldg_c_scared_marine") 1)
    (f_md_abort)
)

(script static void bldg_a_navpoint_exit_to_branch_abort
    (= (f_bsp_any_player 2) false)
    (branch_abort)
)

(script static void bldg_b_navpoint_exit_to_branch_abort
    (= (f_bsp_any_player 3) false)
    (branch_abort)
)

(script static void bldg_c_scary_enc01_to_branch_abort
    (or (volume_test_players "tv_bldg_c_scary_start02") (volume_test_players "tv_bldg_c_scary_start03") (volume_test_players "tv_bldg_c_scary_start04"))
    (branch_abort)
)

(script static void bldg_c_scary_enc02_to_branch_abort
    (volume_test_players "tv_bldg_c_scary_start04")
    (branch_abort)
)

(script static void bldg_c_scary_enc03_to_branch_abort
    (volume_test_players "tv_bldg_c_scary_start04")
    (branch_abort)
)

(script static void perf_thsp_marine01_to_m52_a_marine01_vignette_kill
    (branch_m52 (performance_get_actor "brute"))
    (m52_a_marine01_vignette_kill)
)

(script static void perf_thsp_marine02_to_m52_a_marine02_vignette_kill
    (branch_m52 (performance_get_actor "brute"))
    (m52_a_marine02_vignette_kill)
)

(script static void perf_thsp_marine03_to_m52_a_marine03_vignette_kill
    (branch_m52 (performance_get_actor "brute"))
    (m52_a_marine03_vignette_kill)
)

; Decompilation finished in ~0.2972846s
