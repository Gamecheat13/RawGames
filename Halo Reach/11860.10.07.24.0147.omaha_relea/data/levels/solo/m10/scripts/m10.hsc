; Decompiled with Assembly
; 
; Source file: m10.hsc
; Start time: 2018-02-05 12:52:06 PM
; 
; Remember that all script code is property of Bungie/343 Industries.
; You have no rights. Play nice.

; Globals
(global boolean b_debug_fork true)
(global boolean b_debug_globals false)
(global short player_00 0)
(global short player_01 1)
(global short player_02 2)
(global short player_03 3)
(global short s_md_play_time 0)
(global string data_mine_mission_segment "")
(global boolean b_debug_cinematic_scripts true)
(global boolean b_cinematic_entered false)
(global sound sfx_a_button none)
(global sound sfx_b_button none)
(global sound sfx_hud_in none)
(global sound sfx_hud_out none)
(global sound sfx_objective none)
(global sound sfx_tutorial_complete "sound\game_sfx\ui\pda_transition.sound")
(global sound sfx_blip "sound\game_sfx\ui\transition_beeps")
(global object_list l_blip_list (players))
(global boolean b_blip_list_locked false)
(global short s_blip_list_index 0)
(global short blip_neutralize 0)
(global short blip_defend 1)
(global short blip_ordnance 2)
(global short blip_interface 3)
(global short blip_recon 4)
(global short blip_recover 5)
(global short blip_structure 6)
(global short blip_neutralize_alpha 7)
(global short blip_neutralize_bravo 8)
(global short blip_neutralize_charlie 9)
(global short blip_ammo 13)
(global short blip_hostile_vehicle 14)
(global short blip_hostile 15)
(global short blip_default_a 17)
(global short blip_default_b 18)
(global short blip_default_c 19)
(global short blip_default_d 20)
(global short blip_default 21)
(global short blip_destination 21)
(global boolean b_is_dialogue_playing false)
(global boolean editor_cinematics false)
(global boolean editor_object_management false)
(global boolean b_player_spotted_beacon false)
(global boolean b_training_look_done false)
(global short 3kiva_bsp 1)
(global short g_1stbowl_obj_control 1)
(global short g_barn_obj_control 1)
(global short g_meadow_obj_control 1)
(global short g_3kiva_obj_control 1)
(global short g_outpost_int_obj_control 1)
(global short g_outpost_ext_obj_control 1)
(global short g_wildlife_control 1)
(global object obj_carter none)
(global object obj_kat none)
(global object obj_jorge none)
(global object obj_emile none)
(global object obj_jun none)
(global ai squad_carter none)
(global ai squad_kat none)
(global ai squad_jorge none)
(global ai squad_emile none)
(global ai squad_jun none)
(global object obj_pickup none)
(global boolean skirmisher_report false)
(global boolean warthog_done false)
(global boolean beacon_done false)
(global boolean 3kiva01_done false)
(global boolean 3kiva02_done false)
(global boolean 3kiva03_done false)
(global boolean 3kiva01_visited false)
(global boolean 3kiva02_visited false)
(global boolean 3kiva03_visited false)
(global boolean 3kiva_jun_is_obj false)
(global short 3kiva_objective_count 1)
(global short 3kiva_troopers_bsp 0)
(global short 3kiva_jun_bsp 0)
(global boolean 3kiva_troopers_spoted false)
(global boolean 3kiva_troopers_found false)
(global boolean 3kiva_jun_spoted false)
(global boolean 3kiva_jun_found false)
(global boolean 3kiva_done false)
(global short b_waypoint_time (* 30 120))
(global short g_insertion_index 65535)
(global ai v_hog_control none)
(global boolean g_music01 false)
(global boolean g_music02 false)
(global boolean g_music03 false)
(global boolean g_music04 false)
(global boolean g_music05 false)
(global boolean g_music06 false)
(global boolean g_music_ins false)
(global short hud_info_on 2)
(global short hud_info_off 2)
(global short hud_flash_on 4)
(global short hud_flash_off 5)
(global short hud_flash_final 30)
(global short hud_info_fov 15)
(global short g_ui_obj_control 0)
(global short zoneset_all 22)

; Scripts
(script static void (f_load_fork (vehicle fork, string load_side, ai load_squad_01, ai load_squad_02, ai load_squad_03, ai load_squad_04))
    (ai_place load_squad_01)
    (ai_place load_squad_02)
    (ai_place load_squad_03)
    (ai_place load_squad_04)
    (sleep 1)
    (if (= load_side "left")
        (begin
            (if b_debug_fork
                (print "load fork left...")
            )
            (ai_vehicle_enter_immediate load_squad_01 fork 0)
            (ai_vehicle_enter_immediate load_squad_02 fork 0)
            (ai_vehicle_enter_immediate load_squad_03 fork 0)
            (ai_vehicle_enter_immediate load_squad_04 fork 0)
        )
        (if (= load_side "right")
            (begin
                (if b_debug_fork
                    (print "load fork right...")
                )
                (ai_vehicle_enter_immediate load_squad_01 fork 1)
                (ai_vehicle_enter_immediate load_squad_02 fork 1)
                (ai_vehicle_enter_immediate load_squad_03 fork 1)
                (ai_vehicle_enter_immediate load_squad_04 fork 1)
            )
            (if (= load_side "dual")
                (begin
                    (if b_debug_fork
                        (print "load fork dual...")
                    )
                    (ai_vehicle_enter_immediate load_squad_01 fork 0)
                    (ai_vehicle_enter_immediate load_squad_02 fork 0)
                    (ai_vehicle_enter_immediate load_squad_03 fork 1)
                    (ai_vehicle_enter_immediate load_squad_04 fork 1)
                )
                (if (= load_side "any")
                    (begin
                        (if b_debug_fork
                            (print "load fork any...")
                        )
                        (ai_vehicle_enter_immediate load_squad_01 fork 2)
                        (ai_vehicle_enter_immediate load_squad_02 fork 2)
                        (ai_vehicle_enter_immediate load_squad_03 fork 2)
                        (ai_vehicle_enter_immediate load_squad_04 fork 2)
                    )
                )
            )
        )
    )
)

(script static void (f_load_fork_cargo (vehicle fork, string load_type, ai load_squad_01, ai load_squad_02, ai load_squad_03))
    (if (= load_type "large")
        (begin
            (ai_place load_squad_01)
            (sleep 1)
            (vehicle_load_magic fork 3 (ai_vehicle_get_from_squad load_squad_01 0))
        )
        (if (= load_type "small")
            (begin
                (ai_place load_squad_01)
                (ai_place load_squad_02)
                (ai_place load_squad_03)
                (sleep 1)
                (vehicle_load_magic fork 4 (ai_vehicle_get_from_squad load_squad_01 0))
                (vehicle_load_magic fork 5 (ai_vehicle_get_from_squad load_squad_02 0))
                (vehicle_load_magic fork 6 (ai_vehicle_get_from_squad load_squad_03 0))
            )
        )
    )
)

(script static void (f_unload_fork (vehicle fork, string drop_side))
    (if b_debug_fork
        (print "opening fork...")
    )
    (unit_open fork)
    (sleep 30)
    (if (= drop_side "left")
        (begin
            (f_unload_fork_left fork)
            (sleep 75)
        )
        (if (= drop_side "right")
            (begin
                (f_unload_fork_right fork)
                (sleep 75)
            )
            (if (= drop_side "dual")
                (begin
                    (f_unload_fork_all fork)
                    (sleep 75)
                )
            )
        )
    )
    (if b_debug_fork
        (print "closing fork...")
    )
    (unit_close fork)
)

(script static void (f_unload_fork_left (vehicle fork))
    (begin_random
        (begin
            (vehicle_unload fork 7)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 8)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 9)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 10)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 11)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 12)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 13)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 14)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_fork_right (vehicle fork))
    (begin_random
        (begin
            (vehicle_unload fork 15)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 16)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 17)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 18)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 19)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 20)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 21)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 22)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_fork_all (vehicle fork))
    (begin_random
        (begin
            (vehicle_unload fork 7)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 8)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 9)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 10)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 11)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 12)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 13)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 14)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 15)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 16)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 17)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 18)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 19)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 20)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 21)
            (sleep (random_range 0 10))
        )
        (begin
            (vehicle_unload fork 22)
            (sleep (random_range 0 10))
        )
    )
)

(script static void (f_unload_fork_cargo (vehicle fork, string load_type))
    (if (= load_type "large")
        (vehicle_unload fork 3)
        (if (= load_type "small")
            (begin_random
                (begin
                    (vehicle_unload fork 4)
                    (sleep (random_range 15 30))
                )
                (begin
                    (vehicle_unload fork 5)
                    (sleep (random_range 15 30))
                )
                (begin
                    (vehicle_unload fork 6)
                    (sleep (random_range 15 30))
                )
            )
            (if (= load_type "small01")
                (vehicle_unload fork 4)
                (if (= load_type "small02")
                    (vehicle_unload fork 5)
                    (if (= load_type "small03")
                        (vehicle_unload fork 6)
                    )
                )
            )
        )
    )
)

(script static void f_hud_obj_complete
    (objectives_clear)
    (chud_show_screen_objective "campaign_hud_objcomplete")
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static unit player0
    (player_get 0)
)

(script static unit player1
    (player_get 1)
)

(script static unit player2
    (player_get 2)
)

(script static unit player3
    (player_get 3)
)

(script static short player_count
    (list_count (players))
)

(script static void print_difficulty
    (if (= (game_difficulty_get_real) easy)
        (print "easy")
        (if (= (game_difficulty_get_real) normal)
            (print "normal")
            (if (= (game_difficulty_get_real) heroic)
                (print "heroic")
                (if (= (game_difficulty_get_real) legendary)
                    (print "legendary")
                )
            )
        )
    )
)

(script static boolean difficulty_legendary
    (= (game_difficulty_get_real) legendary)
)

(script static boolean difficulty_heroic
    (= (game_difficulty_get_real) heroic)
)

(script static boolean difficulty_normal
    (<= (game_difficulty_get_real) normal)
)

(script static void replenish_players
    (if b_debug_globals
        (print "replenish player health...")
    )
    (unit_set_current_vitality player0 80 80)
    (unit_set_current_vitality player1 80 80)
    (unit_set_current_vitality player2 80 80)
    (unit_set_current_vitality player3 80 80)
)

(script static boolean coop_players_2
    (>= (game_coop_player_count) 2)
)

(script static boolean coop_players_3
    (>= (game_coop_player_count) 3)
)

(script static boolean coop_players_4
    (>= (game_coop_player_count) 4)
)

(script static boolean any_players_in_vehicle
    (or (unit_in_vehicle (unit player0)) (unit_in_vehicle (unit player1)) (unit_in_vehicle (unit player2)) (unit_in_vehicle (unit player3)))
)

(script static void (f_vehicle_scale_destroy (vehicle vehicle_variable))
    (object_set_scale vehicle_variable 0.01 (* 30 5))
    (sleep (* 30 5))
    (object_destroy vehicle_variable)
)

(script static void (f_ai_place_vehicle_deathless (ai squad))
    (ai_place squad)
    (ai_cannot_die (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0))) true)
    (object_cannot_die (ai_vehicle_get_from_squad squad 0) true)
)

(script static void (f_ai_place_vehicle_deathless_no_emp (ai squad))
    (ai_place squad)
    (ai_cannot_die (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0))) true)
    (object_cannot_die (ai_vehicle_get_from_squad squad 0) true)
    (object_ignores_emp (ai_vehicle_get_from_squad squad 0) true)
)

(script static short (f_vehicle_rider_number (vehicle v))
    (list_count (vehicle_riders v))
)

(script static boolean (f_all_squad_in_vehicle (ai inf_squad, ai vehicle_squad))
    (and (= (ai_living_count inf_squad) 0) (= (ai_living_count vehicle_squad) (f_vehicle_rider_number (ai_vehicle_get_from_squad vehicle_squad 0))))
)

(script static ai (f_ai_get_vehicle_driver (ai squad))
    (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad squad 0)))
)

(script static void (f_ai_magically_see_players (ai squad))
    (ai_magically_see_object squad player0)
    (ai_magically_see_object squad player1)
    (ai_magically_see_object squad player2)
    (ai_magically_see_object squad player3)
)

(script dormant void f_global_health_saves
    (sleep_until (> (player_count) 0))
    (sleep_until 
        (begin
            (sleep_until (< (object_get_health player0) 1))
            (sleep (* 30 7))
            (if (< (object_get_health player0) 1)
                (begin
                    (sleep_until (= (object_get_health player0) 1))
                    (print "global health: health pack aquired")
                    (game_save)
                )
                (print "global health: re-gen")
            )
            false
        )
    )
)

(script static void (f_coop_resume_unlocked (cutscene_title resume_title, short insertion_point))
    (if (game_is_cooperative)
        (begin
            (sound_impulse_start sfx_hud_in none 1)
            (cinematic_set_chud_objective resume_title)
            (game_insertion_point_unlock insertion_point)
        )
    )
)

(script static boolean cinematic_skip_start
    (cinematic_skip_start_internal)
    (game_save_cinematic_skip)
    (sleep_until (not (game_saving)) 1)
    (not (game_reverted))
)

(script static void (cinematic_skip_stop (string_id cinematic_name))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
        )
    )
)

(script static void (cinematic_skip_stop_load_zone (string_id cinematic_name, zone_set z))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
        )
    )
    (switch_zone_set z)
    (sleep 2)
)

(script static void (cinematic_skip_stop_terminal (string_id cinematic_name))
    (cinematic_skip_stop_internal)
    (if (not (game_reverted))
        (begin
            (game_revert)
            (sleep 1)
            (if b_debug_globals
                (print "sleeping forever...")
            )
            (sleep_forever)
        )
    )
)

(script static void test_cinematic_enter_exit
    (sleep 30)
)

(script static void (cinematic_enter (string_id cinematic_name, boolean lower_weapon))
    (set b_cinematic_entered true)
    (cinematic_enter_pre lower_weapon)
    (sleep (cinematic_tag_fade_out_from_game cinematic_name))
    (cinematic_enter_post)
)

(script static void (designer_cinematic_enter (boolean lower_weapon))
    (cinematic_enter_pre lower_weapon)
    (sleep (cinematic_transition_fade_out_from_game "cinematics\transitions\default_intra.cinematic_transition"))
    (cinematic_enter_post)
)

(script static void (cinematic_enter_pre (boolean lower_weapon))
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (if (= lower_weapon true)
        (begin
            (if b_debug_cinematic_scripts
                (print "lowering weapon slowly...")
            )
            (unit_lower_weapon player0 30)
            (unit_lower_weapon player1 30)
            (unit_lower_weapon player2 30)
            (unit_lower_weapon player3 30)
        )
    )
    (campaign_metagame_time_pause true)
    (chud_cinematic_fade 0 0.5)
)

(script static void cinematic_enter_post
    (if b_debug_cinematic_scripts
        (print "hiding players...")
    )
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (player_enable_input false)
    (player_disable_movement true)
    (sleep 1)
    (if b_debug_cinematic_scripts
        (print "camera control on")
    )
    (camera_control true)
    (cinematic_start)
)

(script static void (cinematic_exit (string_id cinematic_name, boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (sleep (cinematic_tag_fade_in_to_game cinematic_name))
    (cinematic_exit_post weapon_starts_lowered)
)

(script static void (designer_cinematic_exit (boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (sleep (cinematic_transition_fade_in_to_game "cinematics\transitions\default_intra.cinematic_transition"))
    (cinematic_exit_post weapon_starts_lowered)
)

(script static void (cinematic_exit_into_title (string_id cinematic_name, boolean weapon_starts_lowered))
    (cinematic_exit_pre weapon_starts_lowered)
    (chud_cinematic_fade 0 0)
    (sleep (cinematic_tag_fade_in_to_game cinematic_name))
    (cinematic_exit_post_title weapon_starts_lowered)
)

(script static void (cinematic_exit_pre (boolean weapon_starts_lowered))
    (cinematic_stop)
    (camera_control false)
    (object_hide player0 false)
    (object_hide player1 false)
    (object_hide player2 false)
    (object_hide player3 false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "snapping weapon to lowered state...")
            )
            (unit_lower_weapon player0 1)
            (unit_lower_weapon player1 1)
            (unit_lower_weapon player2 1)
            (unit_lower_weapon player3 1)
            (sleep 1)
        )
        (begin
            (unit_raise_weapon player0 1)
            (unit_raise_weapon player1 1)
            (unit_raise_weapon player2 1)
            (unit_raise_weapon player3 1)
            (sleep 1)
        )
    )
    (player_control_unlock_gaze player0)
    (player_control_unlock_gaze player1)
    (player_control_unlock_gaze player2)
    (player_control_unlock_gaze player3)
    (sleep 1)
)

(script static void (cinematic_exit_post (boolean weapon_starts_lowered))
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (chud_cinematic_fade 1 1)
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void (cinematic_exit_post_title (boolean weapon_starts_lowered))
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void insertion_snap_to_black
    (fade_out 0 0 0 0)
    (ai_disregard (players) true)
    (object_cannot_take_damage (players))
    (player_control_fade_out_all_input 1)
    (unit_lower_weapon player0 0)
    (unit_lower_weapon player1 0)
    (unit_lower_weapon player2 0)
    (unit_lower_weapon player3 0)
    (campaign_metagame_time_pause true)
    (chud_cinematic_fade 0 0)
    (if b_debug_cinematic_scripts
        (print "hiding players...")
    )
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (player_enable_input false)
    (player_disable_movement true)
    (sleep 1)
    (if b_debug_cinematic_scripts
        (print "camera control on")
    )
)

(script static void insertion_fade_to_gameplay
    (designer_fade_in "fade_from_black" true)
)

(script static void (designer_fade_in (string fade_type, boolean weapon_starts_lowered))
    (cinematic_stop)
    (camera_control false)
    (object_hide player0 false)
    (object_hide player1 false)
    (object_hide player2 false)
    (object_hide player3 false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "snapping weapon to lowered state...")
            )
            (unit_lower_weapon player0 1)
            (unit_lower_weapon player1 1)
            (unit_lower_weapon player2 1)
            (unit_lower_weapon player3 1)
            (sleep 1)
        )
    )
    (player_control_unlock_gaze player0)
    (player_control_unlock_gaze player1)
    (player_control_unlock_gaze player2)
    (player_control_unlock_gaze player3)
    (sleep 1)
    (if (= fade_type "fade_from_black")
        (begin
            (if b_debug_cinematic_scripts
                (print "fading from black...")
            )
            (fade_in 0 0 0 30)
            (sleep 20)
        )
        (if (= fade_type "fade_from_white")
            (begin
                (if b_debug_cinematic_scripts
                    (print "fading from white...")
                )
                (fade_in 1 1 1 30)
                (sleep 20)
            )
            (if (= fade_type "snap_from_black")
                (begin
                    (if b_debug_cinematic_scripts
                        (print "snapping from black...")
                    )
                    (fade_in 0 0 0 5)
                    (sleep 5)
                )
                (if (= fade_type "snap_from_white")
                    (begin
                        (if b_debug_cinematic_scripts
                            (print "snapping from white...")
                        )
                        (fade_in 1 1 1 5)
                        (sleep 5)
                    )
                    (if (= fade_type "no_fade")
                        (begin
                            (fade_in 1 1 1 0)
                            (sleep 5)
                        )
                    )
                )
            )
        )
    )
    (cinematic_show_letterbox false)
    (if (= weapon_starts_lowered true)
        (begin
            (if b_debug_cinematic_scripts
                (print "raising player weapons slowly...")
            )
            (unit_raise_weapon player0 30)
            (unit_raise_weapon player1 30)
            (unit_raise_weapon player2 30)
            (unit_raise_weapon player3 30)
            (sleep 10)
        )
    )
    (chud_cinematic_fade 1 1)
    (sleep 1)
    (player_enable_input true)
    (player_control_fade_in_all_input 1)
    (campaign_metagame_time_pause false)
    (ai_disregard (players) false)
    (object_can_take_damage (players))
    (player_disable_movement false)
)

(script static void cinematic_snap_to_black
    (sleep 0)
)

(script static void cinematic_snap_to_white
    (sleep 0)
)

(script static void cinematic_snap_from_black
    (sleep 0)
)

(script static void cinematic_snap_from_white
    (sleep 0)
)

(script static void cinematic_fade_to_black
    (sleep 0)
)

(script static void cinematic_fade_to_white
    (sleep 0)
)

(script static void cinematic_fade_to_gameplay
    (designer_fade_in "fade_from_black" true)
)

(script static void cinematic_hud_on
    (chud_cinematic_fade 1 0)
    (chud_show_crosshair false)
)

(script static void cinematic_hud_off
    (chud_cinematic_fade 0 0)
    (chud_show_crosshair true)
)

(script static void performance_default_script
    (sleep_until 
        (begin
            (performance_play_line_by_id (+ (performance_get_last_played_line_index) 1))
            (>= (+ (performance_get_last_played_line_index) 1) (performance_get_line_count))
        )
        0
    )
)

(script static void end_mission
    (game_won)
)

(script static void (f_start_mission (string_id cinematic_name))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name true)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_cinematic_scripts
                (print "f_start_mission: cinematic_skip_start is true... starting cinematic...")
            )
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop cinematic_name)
)

(script static void (f_play_cinematic_advanced (string_id cinematic_name, zone_set cinematic_zone_set, zone_set zone_to_load_when_done))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (set b_cinematic_entered false)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "f_play_cinematic: playing cinematic...")
            )
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_load_zone cinematic_name zone_to_load_when_done)
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: done with cinematic. resetting audio levels...")
    )
)

(script static void (f_play_cinematic_unskippable (string_id cinematic_name, zone_set cinematic_zone_set))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (begin
        (if b_debug_globals
            (print "f_play_cinematic: playing cinematic...")
        )
        (cinematic_show_letterbox true)
        (sleep 30)
        (cinematic_show_letterbox_immediate true)
        (cinematic_run_script_by_name cinematic_name)
    )
)

(script static void (f_play_cinematic (string_id cinematic_name, zone_set cinematic_zone_set))
    (if b_debug_cinematic_scripts
        (print "f_play_cinematic: calling cinematic_enter")
    )
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (sound_suppress_ambience_update_on_revert)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "f_play_cinematic: playing cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop cinematic_name)
)

(script static void (f_end_mission (string_id cinematic_name, zone_set cinematic_zone_set))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (ai_erase_all)
    (garbage_collect_now)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "play outro cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_internal)
    (fade_out 0 0 0 0)
    (sleep 1)
)

(script static void (f_end_mission_ai (string_id cinematic_name, zone_set cinematic_zone_set))
    (if (= b_cinematic_entered false)
        (cinematic_enter cinematic_name false)
    )
    (set b_cinematic_entered false)
    (sleep 1)
    (ai_disregard player0 true)
    (ai_disregard player1 true)
    (ai_disregard player2 true)
    (ai_disregard player3 true)
    (garbage_collect_now)
    (switch_zone_set cinematic_zone_set)
    (sleep 1)
    (if (cinematic_skip_start)
        (begin
            (if b_debug_globals
                (print "play outro cinematic...")
            )
            (cinematic_show_letterbox true)
            (sleep 30)
            (cinematic_show_letterbox_immediate true)
            (cinematic_run_script_by_name cinematic_name)
        )
    )
    (cinematic_skip_stop_internal)
    (fade_out 0 0 0 0)
    (sleep 1)
)

(script startup void beginning_mission_segment
    (data_mine_set_mission_segment "mission_start")
)

(script static void (f_sfx_a_button (short player_short))
    (sound_impulse_start sfx_a_button (player_get player_short) 1)
)

(script static void (f_sfx_b_button (short player_short))
    (sound_impulse_start sfx_b_button (player_get player_short) 1)
)

(script static void (f_sfx_hud_in (short player_short))
    (sound_impulse_start sfx_hud_in (player_get player_short) 1)
)

(script static void (f_sfx_hud_out (short player_short))
    (sound_impulse_start sfx_hud_out (player_get player_short) 1)
)

(script static void (f_sfx_hud_tutorial_complete (player player_to_train))
    (sound_impulse_start sfx_tutorial_complete player_to_train 1)
)

(script static void (f_display_message (short player_short, cutscene_title display_title))
    (chud_show_cinematic_title (player_get player_short) display_title)
    (sleep 5)
)

(script static void (f_tutorial_begin (player player_to_train, string_id display_title))
    (f_hud_training_forever player_to_train display_title)
    (sleep 5)
    (unit_action_test_reset player_to_train)
    (sleep 5)
)

(script static void (f_tutorial_end (player player_to_train))
    (f_sfx_hud_tutorial_complete player_to_train)
    (f_hud_training_clear player_to_train)
    (sleep 30)
)

(script static void (f_tutorial_boost (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_grenade_trigger player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_rotate_weapons (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_rotate_weapons player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_fire_weapon (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_primary_trigger player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_turn (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep 20)
    (sleep_until (unit_action_test_look_relative_all_directions player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_throttle (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep 20)
    (sleep_until (unit_action_test_move_relative_all_directions player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_tutorial_tricks (player player_variable, string_id display_title))
    (f_tutorial_begin player_variable display_title)
    (sleep_until (unit_action_test_vehicle_trick_secondary player_variable) 1)
    (f_tutorial_end player_variable)
)

(script static void (f_hud_training (player player_num, string_id string_hud))
    (chud_show_screen_training player_num string_hud)
    (sleep 120)
    (chud_show_screen_training player_num "")
)

(script static void (f_hud_training_forever (player player_num, string_id string_hud))
    (chud_show_screen_training player_num string_hud)
)

(script static void (f_hud_training_clear (player player_num))
    (chud_show_screen_training player_num "")
)

(script static void f_hud_training_new_weapon
    (chud_set_static_hs_variable player0 0 1)
    (chud_set_static_hs_variable player1 0 1)
    (chud_set_static_hs_variable player2 0 1)
    (chud_set_static_hs_variable player3 0 1)
    (sleep 200)
    (chud_clear_hs_variable player0 0)
    (chud_clear_hs_variable player1 0)
    (chud_clear_hs_variable player2 0)
    (chud_clear_hs_variable player3 0)
)

(script static void (f_hud_training_new_weapon_player (player p))
    (chud_set_static_hs_variable p 0 1)
    (sleep 200)
    (chud_clear_hs_variable p 0)
)

(script static void (f_hud_training_new_weapon_player_clear (player p))
    (chud_clear_hs_variable p 0)
)

(script static void (f_hud_training_confirm (player player_num, string_id string_hud, string button_press))
    (if (= (player_is_in_game player_num) false)
        (sleep_forever)
    )
    (chud_show_screen_training player_num string_hud)
    (sleep 10)
    (player_action_test_reset)
    (sleep_until (if (= button_press "primary_trigger")
        (sleep_until (unit_action_test_primary_trigger player_num))
        (if (= button_press "grenade_trigger")
            (sleep_until (unit_action_test_grenade_trigger player_num))
            (if (= button_press "equipment")
                (sleep_until (unit_action_test_equipment player_num))
                (if (= button_press "melee")
                    (sleep_until (unit_action_test_melee player_num))
                    (if (= button_press "jump")
                        (sleep_until (unit_action_test_jump player_num))
                        (if (= button_press "rotate_grenades")
                            (sleep_until (unit_action_test_rotate_grenades player_num))
                            (if (= button_press "rotate_weapons")
                                (sleep_until (unit_action_test_rotate_weapons player_num))
                                (if (= button_press "context_primary")
                                    (sleep_until (unit_action_test_context_primary player_num))
                                    (if (= button_press "vision_trigger")
                                        (sleep_until (or (unit_action_test_vision_trigger player_num) (player_night_vision_on)))
                                        (if (= button_press "back")
                                            (sleep_until (unit_action_test_back player_num))
                                            (if (= button_press "vehicle_trick")
                                                (sleep_until (unit_action_test_vehicle_trick_primary player_num))
                                            )
                                        )
                                    )
                                )
                            )
                        )
                    )
                )
            )
        )
    ) 1 (* 30 10))
    (chud_show_screen_training player_num "")
)

(script static void (f_hud_obj_new (string_id string_hud, string_id string_start))
    (f_hud_start_menu_obj string_start)
    (chud_show_screen_objective string_hud)
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static void (f_hud_obj_repeat (string_id string_hud))
    (chud_show_screen_objective string_hud)
    (sleep 160)
    (chud_show_screen_objective "")
)

(script static void (f_hud_start_menu_obj (string_id reference))
    (objectives_clear)
    (objectives_set_string 0 reference)
    (objectives_show_string reference)
)

(script static void (f_hud_chapter (string_id string_hud))
    (chud_cinematic_fade 0 30)
    (sleep 10)
    (chud_show_screen_chapter_title string_hud)
    (chud_fade_chapter_title_for_player player0 1 30)
    (chud_fade_chapter_title_for_player player1 1 30)
    (chud_fade_chapter_title_for_player player2 1 30)
    (chud_fade_chapter_title_for_player player3 1 30)
    (sleep 120)
    (chud_fade_chapter_title_for_player player0 0 30)
    (chud_fade_chapter_title_for_player player1 0 30)
    (chud_fade_chapter_title_for_player player2 0 30)
    (chud_fade_chapter_title_for_player player3 0 30)
    (chud_show_screen_chapter_title "")
    (sleep 10)
    (chud_cinematic_fade 1 30)
)

(script static void (f_hud_flash_object_fov (object_name hud_object_highlight))
    (sleep_until (or (objects_can_see_object player0 hud_object_highlight 25) (objects_can_see_object player1 hud_object_highlight 25) (objects_can_see_object player2 hud_object_highlight 25) (objects_can_see_object player3 hud_object_highlight 25)) 1)
    (object_create hud_object_highlight)
    (set chud_debug_highlight_object_color_red 1)
    (set chud_debug_highlight_object_color_green 1)
    (set chud_debug_highlight_object_color_blue 0)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (object_destroy hud_object_highlight)
)

(script static void (f_hud_flash_object (object_name hud_object_highlight))
    (object_create hud_object_highlight)
    (set chud_debug_highlight_object_color_red 1)
    (set chud_debug_highlight_object_color_green 1)
    (set chud_debug_highlight_object_color_blue 0)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (f_hud_flash_single hud_object_highlight)
    (object_destroy hud_object_highlight)
)

(script static void (f_hud_flash_single (object_name hud_object_highlight))
    (object_hide hud_object_highlight false)
    (set chud_debug_highlight_object hud_object_highlight)
    (sleep 4)
    (object_hide hud_object_highlight true)
    (sleep 5)
)

(script static void (f_hud_flash_single_nodestroy (object_name hud_object_highlight))
    (set chud_debug_highlight_object hud_object_highlight)
    (sleep 4)
    (set chud_debug_highlight_object none)
    (sleep 5)
)

(script static void (f_blip_internal (object obj, short icon_disappear_time, short final_delay))
    (chud_track_object obj true)
    (sound_impulse_start sfx_blip none 1)
    (sleep icon_disappear_time)
    (chud_track_object obj false)
    (sleep final_delay)
)

(script static void (f_blip_flag_internal (cutscene_flag f, short icon_disappear_time, short final_delay))
    (chud_track_flag f true)
    (sound_impulse_start sfx_blip none 1)
    (sleep icon_disappear_time)
    (chud_track_flag f false)
    (sleep final_delay)
)

(script static void (f_blip_flag (cutscene_flag f, short type))
    (chud_track_flag_with_priority f type)
)

(script static void (f_blip_flag_forever (cutscene_flag f))
    (print "f_blip_flag_forever is going away. please use f_blip_flag")
    (f_blip_flag f blip_neutralize)
)

(script static void (f_unblip_flag (cutscene_flag f))
    (chud_track_flag f false)
)

(script static void (f_blip_object (object obj, short type))
    (chud_track_object_with_priority obj type)
)

(script static void (f_blip_object_offset (object obj, short type, short offset))
    (chud_track_object_with_priority obj type)
    (chud_track_object_set_vertical_offset obj offset)
)

(script static void (f_blip_object_forever (object obj))
    (print "f_blip_object_forever is going away. please use f_blip_object")
    (chud_track_object obj true)
)

(script static void (f_unblip_object (object obj))
    (chud_track_object obj false)
)

(script static void (f_blip_object_until_dead (object obj))
    (chud_track_object obj true)
    (sleep_until (<= (object_get_health obj) 0))
    (chud_track_object obj false)
)

(script static void (f_blip_ai (ai group, short blip_type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_blip_object (list_get l_blip_list s_blip_list_index) blip_type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_ai_offset (ai group, short blip_type, short offset))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_blip_object_offset (list_get l_blip_list s_blip_list_index) blip_type offset)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_ai_forever (ai group))
    (print "f_blip_ai_forever is going away. please use f_blip_ai")
    (f_blip_ai group 0)
)

(script static void (f_blip_ai_until_dead (ai char))
    (print "f_blip_ai_until_dead will be rolled into the new f_blip_ai command. consider using that instead.")
    (f_blip_ai_forever char)
    (sleep_until (<= (object_get_health (ai_get_object char)) 0))
    (f_unblip_ai char)
)

(script static void (f_unblip_ai (ai group))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set s_blip_list_index 0)
    (set l_blip_list (ai_actors group))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_unblip_object (list_get l_blip_list s_blip_list_index))
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set b_blip_list_locked false)
)

(script static void (f_blip_title (object obj, string_id title))
    (chud_track_object_with_priority obj 6 title)
    (sleep 120)
    (chud_track_object obj false)
)

(script static void (f_blip_weapon (object gun, short dist, short dist2))
    (sleep_until (or (and (<= (objects_distance_to_object player0 gun) dist) (>= (objects_distance_to_object player0 gun) 0.1)) (and (<= (objects_distance_to_object player1 gun) dist) (>= (objects_distance_to_object player1 gun) 0.1)) (and (<= (objects_distance_to_object player2 gun) dist) (>= (objects_distance_to_object player2 gun) 0.1)) (and (<= (objects_distance_to_object player3 gun) dist) (>= (objects_distance_to_object player3 gun) 0.1))) 1)
    (print "blip on")
    (f_blip_object gun blip_ordnance)
    (sleep_until (or (not (object_get_at_rest gun)) (and (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2) (>= (objects_distance_to_object player0 gun) dist2))) 1)
    (print "blip off")
    (f_unblip_object gun)
)

(script static void (f_hud_spartan_waypoint (ai spartan, string_id spartan_hud, short max_dist))
    (sleep_until 
        (begin
            (if (< (objects_distance_to_object (ai_get_object spartan) player0) 0.95)
                (begin
                    (chud_track_object spartan false)
                    (sleep 60)
                )
                (if (> (objects_distance_to_object (ai_get_object spartan) player0) max_dist)
                    (begin
                        (chud_track_object spartan false)
                        (sleep 60)
                    )
                    (if (< (objects_distance_to_object (ai_get_object spartan) player0) 3)
                        (begin
                            (chud_track_object_with_priority spartan 22 spartan_hud)
                            (sleep 60)
                        )
                        (if (objects_can_see_object player0 (ai_get_object spartan) 10)
                            (begin
                                (chud_track_object_with_priority spartan 22 spartan_hud)
                                (sleep 60)
                            )
                            (if true
                                (begin
                                    (chud_track_object_with_priority spartan 5 "")
                                )
                            )
                        )
                    )
                )
            )
            false
        )
        30
    )
)

(script static void (f_callout_atom (object obj, short type, short time, short postdelay))
    (chud_track_object_with_priority obj type)
    (sound_impulse_start sfx_blip none 1)
    (sleep time)
    (chud_track_object obj false)
    (sleep postdelay)
)

(script static void (f_callout_flag_atom (cutscene_flag f, short type, short time, short postdelay))
    (chud_track_flag_with_priority f type)
    (sound_impulse_start sfx_blip none 1)
    (sleep time)
    (chud_track_flag f false)
    (sleep postdelay)
)

(script static void (f_callout_object (object obj, short type))
    (f_callout_atom obj type 120 2)
)

(script static void (f_callout_object_fast (object obj, short type))
    (f_callout_atom obj type 20 5)
)

(script static void (f_callout_ai (ai actors, short type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set l_blip_list (ai_actors actors))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_callout_object (list_get l_blip_list s_blip_list_index) type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set s_blip_list_index 0)
    (set b_blip_list_locked false)
)

(script static void (f_callout_ai_fast (ai actors, short type))
    (sleep_until (= b_blip_list_locked false) 1)
    (set b_blip_list_locked true)
    (set l_blip_list (ai_actors actors))
    (sleep_until 
        (begin
            (if (> (object_get_health (list_get l_blip_list s_blip_list_index)) 0)
                (f_callout_object_fast (list_get l_blip_list s_blip_list_index) type)
            )
            (set s_blip_list_index (+ s_blip_list_index 1))
            (>= s_blip_list_index (list_count l_blip_list))
        )
        1
    )
    (set s_blip_list_index 0)
    (set b_blip_list_locked false)
)

(script static void (f_callout_and_hold_flag (cutscene_flag f, short type))
    (chud_track_flag_with_priority f type)
    (sound_impulse_start sfx_blip none 1)
    (sleep 10)
)

(script static void (f_md_ai_play (short delay, ai character, ai_line line))
    (set b_is_dialogue_playing true)
    (if (>= (ai_living_count character) 1)
        (begin
            (set s_md_play_time (ai_play_line character line))
            (sleep s_md_play_time)
            (sleep delay)
        )
        (print "this actor does not exist to play f_md_ai_play")
    )
    (set b_is_dialogue_playing false)
)

(script static void (f_md_object_play (short delay, object obj, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (ai_play_line_on_object obj line))
    (sleep s_md_play_time)
    (sleep delay)
    (set b_is_dialogue_playing false)
)

(script static void (f_md_ai_play_cutoff (short cutoff_time, ai character, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (- (ai_play_line character line) cutoff_time))
    (sleep s_md_play_time)
    (set b_is_dialogue_playing false)
)

(script static void (f_md_object_play_cutoff (short cutoff_time, object obj, ai_line line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (- (ai_play_line_on_object obj line) cutoff_time))
    (sleep s_md_play_time)
    (set b_is_dialogue_playing false)
)

(script static void f_md_abort
    (sleep s_md_play_time)
    (print "dialog script aborted!")
    (set b_is_dialogue_playing false)
    (ai_dialogue_enable true)
)

(script static void f_md_abort_no_combat_dialog
    (f_md_abort)
    (sleep 1)
    (ai_dialogue_enable false)
)

(script static void (f_md_play (short delay, sound line))
    (set b_is_dialogue_playing true)
    (set s_md_play_time (sound_impulse_language_time line))
    (sound_impulse_start line none 1)
    (sleep (sound_impulse_language_time line))
    (sleep delay)
    (set s_md_play_time 0)
    (set b_is_dialogue_playing false)
)

(script static boolean f_is_dialogue_playing
    b_is_dialogue_playing
)

(script static boolean (f_ai_has_spawned (ai actors))
    (> (ai_spawn_count actors) 0)
)

(script static boolean (f_ai_is_defeated (ai actors))
    (and (> (ai_spawn_count actors) 0) (<= (ai_living_count actors) 0))
)

(script static boolean (f_ai_is_partially_defeated (ai actors, short count))
    (and (>= (ai_spawn_count actors) count) (<= (ai_living_count actors) count))
)

(script static boolean (f_task_is_empty (ai task))
    (<= (ai_task_count task) 0)
)

(script static boolean (f_task_has_actors (ai task))
    (> (ai_task_count task) 0)
)

(script static ai (f_object_get_squad (object ai_obj))
    (ai_get_squad (object_get_ai ai_obj))
)

(script static void debug_toggle_cookie_cutters
    (if (= debug_instanced_geometry false)
        (begin
            (set debug_objects_collision_models false)
            (set debug_objects_physics_models false)
            (set debug_objects_bounding_spheres false)
            (set debug_objects_cookie_cutters true)
            (set debug_objects true)
            (set debug_instanced_geometry_collision_geometry false)
            (set debug_instanced_geometry_cookie_cutters true)
            (set debug_instanced_geometry true)
        )
        (begin
            (set debug_objects_cookie_cutters false)
            (set debug_objects false)
            (set debug_instanced_geometry_cookie_cutters false)
            (set debug_instanced_geometry false)
        )
    )
)

(script static void debug_toggle_pathfinding_collisions
    (if (= collision_debug false)
        (begin
            (set collision_debug true)
            (set collision_debug_flag_ignore_invisible_surfaces false)
        )
        (begin
            (set collision_debug false)
            (set collision_debug_flag_ignore_invisible_surfaces true)
        )
    )
)

(script static void f_branch_empty01
    (print "branch exit")
)

(script static void f_branch_empty02
    (print "branch exit")
)

(script static void f_branch_empty03
    (print "branch exit")
)

(script command_script void sleep_cs
    (sleep_forever)
)

(script command_script void abort_cs
    (sleep 1)
)

(script static void branch_kill
    (print "branch kill")
)

(script command_script void cs_looking_targeting
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (sleep_forever)
)

(script static void (bring_spartans_forward (short dist))
    (print "bring forward: spartan")
    (ai_bring_forward "group_carter" dist)
    (ai_bring_forward "group_kat" dist)
    (ai_bring_forward "group_jun" dist)
    (ai_bring_forward "group_emile" dist)
    (ai_bring_forward "group_jorge" dist)
)

(script startup void m10
    (print "m10 go!")
    (fade_out 0 0 0 0)
    (ai_allegiance human player)
    (ai_allegiance player human)
    (player_set_profile "profile_coop_respawn")
    (soft_ceiling_enable "soft_ceiling_010" false)
    (kill_volume_disable "kill_tv_outpost")
    (kill_volume_disable "kill_tv_outpost_ext")
    (wake achievment01_start)
    (wake object_control)
    (wake ceiling_control)
    (if (not (game_is_cooperative))
        (wake f_global_health_saves)
    )
    (if (not (game_is_cooperative))
        (wake m10_weapon_training)
    )
    (player_disable_movement false)
    (zone_set_trigger_volume_enable "zone_set:zoneset_1stbowl" false)
    (zone_set_trigger_volume_enable "begin_zone_set:zoneset_outpost_interior" false)
    (if (and (> (player_count) 0) (not (editor_mode)))
        (start)
        (begin
            (fade_in 0 0 0 0)
        )
    )
    (sleep_until (>= g_insertion_index 0) 1)
    (if (<= g_insertion_index 0)
        (wake 1stbowl_start)
    )
    (sleep_until (or (volume_test_players "vol_barn_start") (>= g_insertion_index 1)) 1)
    (if (<= g_insertion_index 1)
        (wake barn_start)
    )
    (sleep_until (or (= (current_zone_set_fully_active) 4) (>= g_insertion_index 2)) 1)
    (if (<= g_insertion_index 2)
        (wake meadow_start)
    )
    (sleep_until (or (volume_test_players "tv_3kiva_start") (>= g_insertion_index 3)) 1)
    (if (<= g_insertion_index 3)
        (wake 3kiva_start)
    )
    (sleep_until (or (= (current_zone_set_fully_active) 6) (>= g_insertion_index 4)) 1)
    (if (<= g_insertion_index 4)
        (wake outpost_ext_start)
    )
    (sleep_until (or (= (current_zone_set_fully_active) 7) (>= g_insertion_index 5)) 1)
    (if (<= g_insertion_index 5)
        (wake outpost_int_start)
    )
)

(script static void start
    (print "start!")
    (if (= (game_insertion_point_get) 0)
        (ins_1stbowl)
        (if (= (game_insertion_point_get) 1)
            (ins_barn)
            (if (= (game_insertion_point_get) 2)
                (ins_meadow)
                (if (= (game_insertion_point_get) 3)
                    (ins_3kiva)
                    (if (= (game_insertion_point_get) 4)
                        (ins_outpost_ext)
                        (if (= (game_insertion_point_get) 5)
                            (ins_outpost_int)
                            (if (= (game_insertion_point_get) 10)
                                (ins_blank)
                            )
                        )
                    )
                )
            )
        )
    )
)

(script dormant void 1stbowl_start
    (if (or editor_cinematics (not (editor_mode)))
        (begin
            (print "starting intro cinematic!")
            (f_start_mission "010la_outpost")
        )
    )
    (print "1st bowl start")
    (if (not (>= (current_zone_set_fully_active) 1))
        (begin
            (print "pre-loading 1stbowl zoneset in script")
            (switch_zone_set "zoneset_insert")
            (sleep_until (>= (current_zone_set_fully_active) 1) 1)
            (prepare_to_switch_to_zone_set "zoneset_1stbowl")
        )
    )
    (print "placing spartans")
    (ai_place "spartan_carter")
    (ai_place "spartan_kat")
    (ai_place "spartan_jun")
    (ai_place "spartan_emile")
    (sleep 1)
    (set obj_carter (ai_get_unit "group_carter"))
    (set obj_kat (ai_get_unit "group_kat"))
    (set obj_jun (ai_get_unit "group_jun"))
    (set obj_emile (ai_get_unit "group_emile"))
    (if (not (game_is_cooperative))
        (begin
            (print "placing jorge")
            (ai_place "spartan_jorge")
            (set obj_jorge (ai_get_unit "group_jorge"))
        )
        (begin
            (print "coop: not placing jorge")
            (wake 1stbowl_coop_spartans)
        )
    )
    (ai_cannot_die "group_spartans" true)
    (ai_disregard (ai_actors "group_jun") true)
    (wake md_1stbowl_hover)
    (wake intro_falcons_start)
    (wake rain_start)
    (wake obj_start)
    (hud_enable_training false)
    (sleep 60)
    (cinematic_exit "010la_outpost" false)
    (wake music_1stbowl)
    (chud_cinematic_fade 0 0)
    (f_hud_start_menu_obj "primary_objective_1_1")
    (game_save_immediate)
    (sleep_until (>= g_1stbowl_obj_control 20) 1)
    (print "player dropoff")
    (sleep_until (not (any_players_in_vehicle)) 5)
    (wake 1stbowl_zoneset_control)
    (wake chapter_01_start)
    (chud_show_motion_sensor false)
    (wake md_1stbowl_orders)
    (wake md_1stbowl_next_structure)
    (wake md_1stbowl_house)
    (wake md_1stbowl_stand_down01)
    (wake 1stbowl_kiva_start)
    (wake witnesses_start)
    (wake hud_barn_start)
    (sleep_until (>= (current_zone_set_fully_active) 2) 5)
    (wake bowl_birds_start)
    (wake 1stbowl_wildlife_start)
    (if (= (game_difficulty_get) legendary)
        (wake 1stbowl_elite_start)
    )
    (sleep_until (volume_test_players "tv_1stbowl_gas"))
    (bring_spartans_forward 15)
    (game_save)
    (sleep_until (volume_test_players "tv_1stbowl_part2"))
    (set beacon_done true)
    (set warthog_done true)
    (set g_music02 true)
    (thespian_performance_kill_by_ai "group_spartans")
    (ai_bring_forward "group_emile" 7)
    (sleep_until (volume_test_players "tv_1stbowl_cliffside"))
    (set g_1stbowl_obj_control 21)
    (thespian_performance_kill_by_ai "group_spartans")
    (sleep_until (volume_test_players "tv_first_bowl_end") 5)
    (set g_1stbowl_obj_control 30)
    (bring_spartans_forward 8)
    (game_save)
)

(script dormant void 1stbowl_zoneset_control
    (zone_set_trigger_volume_enable "zone_set:zoneset_1stbowl" true)
    (sleep_until (>= (current_zone_set_fully_active) 2) 5)
    (zone_set_trigger_volume_enable "zone_set:zoneset_1stbowl" false)
    (sleep 90)
    (game_save)
    (sleep 200)
    (prepare_to_switch_to_zone_set "zoneset_barn")
)

(script dormant void 1stbowl_coop_spartans
    (sleep_until (>= (current_zone_set_fully_active) 2))
    (sleep_until (volume_test_players "tv_1stbowl_part2"))
    (print "coop: placing jorge")
    (ai_place "spartan_jorge/witnesses")
    (ai_cannot_die "group_spartans" true)
    (ai_vehicle_enter_immediate "group_jorge" (ai_vehicle_get_from_squad "intro_falcon_02" 0) 23)
)

(script dormant void intro_falcons_start
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01")
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_02")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_02" 0))
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "prop_control" 0.2 0.2)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "prop_control" 0.2 0.2)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "flying" 1 1)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "flying" 1 1)
    (sleep 1)
    (objects_attach "dm_falcon01_start" "" (ai_vehicle_get_from_squad "intro_falcon_01" 0) "")
    (objects_attach "dm_falcon02_start" "" (ai_vehicle_get_from_squad "intro_falcon_02" 0) "")
    (wake intro_falcon01_anim_start)
    (wake intro_falcon02_anim_start)
    (wake sound_1stbowl_falcons)
    (intro_falcons_setup_start)
)

(script static void intro_falcons_setup_start
    (unit_lower_weapon player0 0)
    (unit_lower_weapon player1 0)
    (f_set_falcon_interaction_false (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (f_set_falcon_interaction_false (ai_vehicle_get_from_squad "intro_falcon_02" 0))
    (thespian_performance_setup_and_begin "carter_falcon_intro" "" 0)
    (thespian_performance_setup_and_begin "kat_falcon_intro" "" 0)
    (thespian_performance_setup_and_begin "emile_falcon_intro" "" 0)
    (ai_vehicle_enter_immediate "group_jorge" (ai_vehicle_get_from_squad "intro_falcon_02" 0) 23)
    (ai_vehicle_enter_immediate "group_jun" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24)
    (sleep 1)
    (unit_enter_vehicle_immediate player0 (ai_vehicle_get_from_squad "intro_falcon_01" 0) "falcon_p_l1")
    (unit_enter_vehicle_immediate player1 (ai_vehicle_get_from_squad "intro_falcon_01" 0) "falcon_p_l2")
    (unit_enter_vehicle_immediate player2 (ai_vehicle_get_from_squad "intro_falcon_02" 0) "falcon_p_r2")
    (unit_enter_vehicle_immediate player3 (ai_vehicle_get_from_squad "intro_falcon_02" 0) "falcon_p_l2")
)

(script dormant void intro_falcon01_anim_start
    (intro_falcon01_dropoff_start)
)

(script dormant void intro_falcon02_anim_start
    (intro_falcon02_dropoff_start)
)

(script static void intro_falcon01_dropoff_start
    (device_set_position_track "dm_falcon01_start" "m10_insert_dropoff_a_leomar" 0)
    (device_animate_position "dm_falcon01_start" 1 50 0.1 0.1 false)
    (player_camera_control false)
    (player_enable_input false)
    (print "lookat_carter")
    (player_control_lock_gaze player0 "pts_1stbowl/lookat_carter" 40)
    (sleep 30)
    (player_control_unlock_gaze player0)
    (sleep_until (>= (device_get_position "dm_falcon01_start") 0.12) 1)
    (print "lookat_outpost")
    (player_control_lock_gaze player0 "pts_1stbowl/lookat_outpost" 40)
    (sleep_until (>= (device_get_position "dm_falcon01_start") 0.22) 1)
    (sleep_until (>= (device_get_position "dm_falcon01_start") 0.95) 1)
    (game_save_immediate)
    (wake md_1stbowl_unload)
    (if (not (game_is_cooperative))
        (begin
            (wake ct_training_exit_start)
        )
    )
    (intro_falcon01_exit_start)
    (if (not (game_is_cooperative))
        (begin
            (sleep_until (not (unit_in_vehicle (unit player0))) 1)
            (print "player has exited")
            (f_set_falcon_interaction_false (ai_vehicle_get_from_squad "intro_falcon_01" 0))
            (unit_raise_weapon player0 30)
        )
    )
    (sleep_until (>= (device_get_position "dm_falcon01_start") 1) 1)
    (objects_detach "dm_falcon01_start" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 0.7)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_intro_falcons)
    (object_clear_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "flying")
    (object_clear_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "prop_control")
)

(script command_script void cs_intro_falcons
    (cs_fly_by "pts_1stbowl/air_support00a")
    (cs_face true "pts_1stbowl/air_support00_face")
    (cs_vehicle_speed 0.6)
    (cs_fly_by "pts_1stbowl/air_support00b")
    (cs_vehicle_speed 0.5)
    (sleep_until 
        (begin
            (cs_fly_by "pts_1stbowl/air_support00b")
            (cs_fly_by "pts_1stbowl/air_support00c")
            (cs_fly_by "pts_1stbowl/air_support00d")
            (cs_fly_by "pts_1stbowl/air_support00e")
            false
        )
        5
    )
)

(script static void intro_falcon02_dropoff_start
    (device_set_position_track "dm_falcon02_start" "m10_insert_dropoff_b_leomar" 0)
    (device_animate_position "dm_falcon02_start" 1 56 0.1 0.1 false)
    (sleep_until (>= (device_get_position "dm_falcon02_start") 0.85) 1)
    (print "anim: falcon02_dropoff")
    (intro_falcon02_exit_start)
    (sleep_until (>= (device_get_position "dm_falcon02_start") 0.95) 1)
    (objects_detach "dm_falcon02_start" (ai_vehicle_get_from_squad "intro_falcon_02" 0))
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_02" 0) 2 0 2)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_02") cs_intro_falcons_02)
    (object_clear_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "flying")
    (object_clear_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "prop_control")
)

(script command_script void cs_intro_falcons_02
    (cs_fly_by "pts_1stbowl/air_support01")
    (cs_fly_by "pts_1stbowl/air_support02")
    (cs_face true "pts_1stbowl/air_support02_face")
    (sleep_until warthog_done)
    (cs_fly_by "pts_1stbowl/air_support03")
    (sleep_until (>= g_1stbowl_obj_control 21))
    (cs_vehicle_speed 0.2)
    (cs_fly_by "pts_1stbowl/air_support04" 1)
    (sleep_until (volume_test_players "tv_1stbowl_witnesses") 1)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 23 true)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 23)
    (sleep 200)
    (cs_vehicle_speed 0.2)
    (cs_fly_by "pts_1stbowl/air_support05")
    (cs_face false "pts_1stbowl/air_support02_face")
    (cs_vehicle_speed 1)
    (cs_fly_by "pts_1stbowl/air_support06")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script static void intro_falcon01_exit_start
    (f_set_falcon_interaction_exit (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 26 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 28 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30 true)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29)
    (sleep 20)
    (if (game_is_cooperative)
        (begin
            (f_set_falcon_interaction_false (ai_vehicle_get_from_squad "intro_falcon_01" 0))
            (unit_exit_vehicle player0)
            (unit_raise_weapon player0 30)
        )
    )
    (sleep 7)
    (unit_exit_vehicle player1)
    (unit_raise_weapon player1 30)
    (ai_reset_objective "obj_1stbowl_hum")
    (sleep 1)
    (set g_1stbowl_obj_control 20)
)

(script static void intro_falcon02_exit_start
    (f_set_falcon_interaction_exit (ai_vehicle_get_from_squad "intro_falcon_02" 0))
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 24 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 26 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 25 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 28 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 29 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 30 true)
    (f_set_falcon_interaction_false (ai_vehicle_get_from_squad "intro_falcon_02" 0))
    (sleep 7)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 28)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 29)
    (sleep 7)
    (unit_exit_vehicle player2)
    (unit_raise_weapon player2 30)
    (sleep 7)
    (unit_exit_vehicle player3)
    (unit_raise_weapon player3 30)
    (set g_1stbowl_obj_control 20)
)

(script static void (f_set_falcon_interaction_false (vehicle v))
    (vehicle_set_player_interaction v 31 false false)
    (vehicle_set_player_interaction v 26 false false)
    (vehicle_set_player_interaction v 27 false false)
    (vehicle_set_player_interaction v 28 false false)
    (vehicle_set_player_interaction v 29 false false)
    (vehicle_set_player_interaction v 30 false false)
)

(script static void (f_set_falcon_interaction_exit (vehicle v))
    (vehicle_set_player_interaction v 31 false false)
    (vehicle_set_player_interaction v 26 false true)
    (vehicle_set_player_interaction v 27 false true)
    (vehicle_set_player_interaction v 28 false true)
    (vehicle_set_player_interaction v 29 false true)
    (vehicle_set_player_interaction v 30 false false)
)

(script dormant void 1stbowl_wildlife_start
    (ai_place "1stbowl_moah01")
    (ai_disregard (ai_actors "1stbowl_moah01") true)
    (sleep_until (= (current_zone_set_fully_active) 4))
    (ai_disposable "1stbowl_moah01" true)
)

(script command_script void cs_1stbowl_moah01
    (cs_abort_on_damage true)
    (sleep_until (volume_test_players "tv_1stbowl_wildlife"))
    (sound_impulse_start "sound\characters\ambient_life\moa\moa_call_long_bigger" (ai_get_object ai_current_actor) 1)
    (cs_go_to "ps_1stbowl_moahs/p0")
)

(script command_script void cs_1stbowl_moah02
    (cs_abort_on_damage true)
    (sleep_until (volume_test_players "tv_1stbowl_wildlife"))
    (cs_go_to "ps_1stbowl_moahs/p1")
)

(script dormant void witnesses_start
    (sleep_until (volume_test_players "tv_1stbowl_witnesses") 1)
    (wake md_1stbowl_civ_heat)
    (wake md_1stbowl_witnesses)
    (wake hud_witnesses)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_witnesses)
    (ai_bring_forward "group_carter" 8)
    (ai_bring_forward "group_kat" 8)
    (ai_place "1stbowl_witnesses_dad")
    (ai_place "1stbowl_witnesses_family")
    (ai_disregard (ai_actors "group_civilians") true)
    (if (not (volume_test_objects "tv_1stbowl_witnesses" obj_emile))
        (begin
            (wake witnesses_emile_teleport)
            (sleep_until (volume_test_objects "tv_1stbowl_witnesses" obj_emile))
        )
    )
    (sleep 1)
    (thespian_performance_activate "thes_witnesses")
)

(script dormant void witnesses_emile_teleport
    (sleep_until (or (volume_test_objects "tv_1stbowl_witnesses" obj_emile) (and (not (objects_can_see_object (players) obj_emile 30)) (not (objects_can_see_object (players) "sc_emile_teleport_test" 30)))) 1 100)
    (if (not (volume_test_objects "tv_1stbowl_witnesses" obj_emile))
        (cs_run_command_script "group_emile" cs_emile_witnesses_teleport)
    )
)

(script command_script void cs_emile_witnesses_teleport
    (sleep 10)
    (cs_teleport "ps_vigs_witnesses/emile_teleport" "ps_vigs_witnesses/emile_teleport_face")
)

(script dormant void witnesses_player_kills
    (sleep_until (or (<= (ai_living_count "obj_1stbowl_civ") 3) (>= g_barn_obj_control 10)) 1)
    (if (<= (ai_living_count "obj_1stbowl_civ") 3)
        (begin
            (print "player kills")
            (print "scream!")
            (sleep 20)
            (device_set_position "dm_kiva01_door" 0)
            (set g_1stbowl_obj_control 99)
            (ai_allegiance_break human player)
            (ai_allegiance_break player human)
        )
    )
)

(script dormant void hud_barn_start
    (wake md_1stbowl_sprint)
    (sleep_until (>= g_1stbowl_obj_control 30))
    (sleep 100)
    (sleep_until (objects_can_see_object player0 "sc_hud_barn01" 25) 10 (* 15 30))
    (f_hud_flash_object "sc_hud_barn01_highlight")
    (f_blip_object "sc_hud_barn01" blip_default)
    (sleep_until (volume_test_players "vol_barn_start"))
    (f_unblip_object "sc_hud_barn01")
)

(script dormant void bowl_birds_start
    (sleep_until (> 40 (objects_distance_to_object player0 "sc_1stbowl_truck")))
    (flock_create "flocks_bowl_birds")
    (sleep_until (> 30 (objects_distance_to_object player0 "sc_1stbowl_truck")))
    (flock_create "flocks_bowl_birds02")
    (flock_create "flocks_bowl_birds_skirm")
    (sleep_until (>= (current_zone_set) 4))
    (flock_delete "flocks_bowl_birds")
    (flock_delete "flocks_bowl_birds02")
    (flock_delete "flocks_bowl_birds_skirm")
)

(script dormant void 1stbowl_kiva_start
    (sleep_until (volume_test_players "vol_1stbowl_kiva01") 5)
    (game_save)
)

(script dormant void 1stbowl_elite_start
    (sleep_until (volume_test_players "tv_1stbowl_adv01") 5)
    (print "1stbowl_elite")
    (ai_place "1stbowl_elite")
    (ai_disregard (ai_actors "1stbowl_elite") true)
    (ai_cannot_die "1stbowl_elite" true)
    (object_create "terminal_m10_10")
    (sleep 1)
    (objects_attach (ai_get_object "1stbowl_elite") "backpack" "terminal_m10_10" "")
    (sleep_until (or (<= (object_get_health (ai_get_object "1stbowl_elite")) 0.1) (< (objects_distance_to_object (players) (ai_get_object "1stbowl_elite")) 1)) 1)
    (objects_detach (ai_get_object "1stbowl_elite") "terminal_m10_10")
    (ai_cannot_die "1stbowl_elite" false)
    (sleep 1)
    (if (<= (object_get_health (ai_get_object "1stbowl_elite")) 0.1)
        (unit_kill (ai_get_unit "1stbowl_elite"))
    )
)

(script command_script void cs_1stbowl_elite
    (ai_set_active_camo ai_current_actor true)
    (cs_go_to "pts_1stbowl/elite_excape01")
    (cs_go_to "pts_1stbowl/elite_excape02")
    (cs_go_to "pts_1stbowl/elite_excape03")
    (ai_erase ai_current_actor)
)

(script dormant void 1stbowl_skirm
    (ai_place "1stbowl_skirms")
)

(script command_script void cs_1stbowl_skirm
    (cs_queue_command_script ai_current_actor cs_1stbowl_skirm_q01)
    (cs_abort_on_damage true)
    (sleep_until (volume_test_players "tv_1stbowl_gas"))
    (flock_create "flocks_bowl_birds_skirm")
    (print "jump")
)

(script command_script void cs_1stbowl_skirm_q01
    (cs_go_to "pts_1stbowl/skirm_excape01" 10)
    (cs_go_to "pts_barn/skirm_excape02")
    (set skirmisher_report true)
    (ai_erase ai_current_actor)
)

(script dormant void barn_start
    (print "barn start")
    (set g_barn_obj_control 1)
    (wake barn_skirm_init_start)
    (ai_disregard (ai_actors "barn_skirm_init") true)
    (bring_spartans_forward 15)
    (ai_set_objective "group_spartans" "obj_barn_hum")
    (wake music_barn)
    (wake barn_bodies_door)
    (wake barn_combat)
    (wake ct_training_melee_start)
    (wake md_barn_window)
    (game_save)
    (sleep_until (volume_test_players "vol_barn_start") 5)
    (game_save)
    (sleep_until (volume_test_players "vol_barn_courtyard") 5)
    (thespian_performance_kill_by_ai (object_get_ai obj_carter))
    (ai_bring_forward "group_carter" 8)
    (ai_bring_forward "group_spartans" 12)
    (set g_barn_obj_control 10)
    (sleep_until (volume_test_players "tv_barn_main") 5)
    (game_save)
    (sleep_until (volume_test_players "tv_barn_window_view") 5)
    (bring_spartans_forward 4)
    (sleep_until (volume_test_players "tv_barn_training_grenades") 5)
    (wake md_barn_skirm_grenades)
    (ai_bring_forward "obj_barn_cov" 4)
    (wake ct_training_grenades_start)
    (game_save)
    (sleep_until (or (<= (ai_living_count "obj_barn_cov") 0) (volume_test_players "vol_meadow_start02")))
    (sleep (random_range 60 100))
    (wake barn_health_hud)
)

(script dormant void barn_combat
    (ai_place "barn_skirm01")
    (ai_place "barn_grunts01")
    (ai_place "barn_grunts02")
    (ai_place "barn_grunts03")
    (cs_run_command_script "barn_skirm01" sleep_cs)
    (ai_disregard (ai_actors "obj_barn_cov") true)
    (sleep_until (volume_test_players "tv_barn_bloodtrail03") 5)
    (ai_disregard (ai_actors "obj_barn_cov") false)
    (wake barn_falcon_start)
    (wake meadow_banshees_start)
    (sleep 5)
    (set g_barn_obj_control 20)
    (sleep 70)
    (sleep_until (or (and (objects_can_see_flag (players) "fl_barn_skirm_init02" 25) (volume_test_players "tv_barn_window_view")) (volume_test_players "tv_barn_combat02")) 1)
    (print "barn combat triggered")
    (set g_barn_obj_control 30)
    (ai_place "barn_skirm02")
    (sleep 1)
    (cs_run_command_script "barn_skirm01" cs_barn_skirms)
    (cs_run_command_script "barn_skirm02" cs_barn_skirms)
    (sleep 10)
    (thespian_performance_setup_and_begin "vig_barn_call" "" 0)
    (wake md_barn_contact)
    (sleep_until (volume_test_players "tv_barn_combat02") 30 (random_range 120 130))
    (print "abort barn cov")
    (cs_run_command_script "barn_grunts01" abort_cs)
    (cs_run_command_script "barn_grunts03" abort_cs)
    (ai_dialogue_enable true)
    (sleep_until (volume_test_players "vol_barn_lower01"))
    (ai_place "barn_grunts_sideflank")
    (sleep_until (volume_test_players "vol_meadow_start") 5 180)
    (set g_barn_obj_control 40)
    (ai_bring_forward "group_spartans" 10)
    (sleep_until (volume_test_players "vol_meadow_start") 5 140)
    (set g_barn_obj_control 50)
)

(script command_script void cs_barn_skirms
    (sleep 50)
    (cs_abort_on_damage true)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (sleep_until (volume_test_players "tv_barn_combat02") 30 (random_range 300 350))
    (print "skirm shooting")
)

(script dormant void meadow_banshees_start
    (sleep_until (>= g_barn_obj_control 40) 5)
    (print "meadow_banshees_start")
    (wake md_meadow_banshees)
    (ai_place "meadow_banshees")
    (object_set_scale (ai_vehicle_get_from_squad "meadow_banshees" 0) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "meadow_banshees" 1) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "meadow_banshees" 0) 1 90)
    (object_set_scale (ai_vehicle_get_from_squad "meadow_banshees" 1) 1 90)
    (ai_set_targeting_group "meadow_banshees" 2)
)

(script command_script void cs_meadow_banshees_entry
    (cs_vehicle_boost true)
    (ai_prefer_target_ai ai_current_actor "group_spartans" true)
    (sleep 130)
    (print "cs banshees: boost done")
    (cs_enable_moving true)
    (cs_enable_looking true)
    (cs_enable_targeting true)
    (cs_vehicle_boost false)
    (cs_shoot_secondary_trigger true)
    (sleep 120)
)

(script dormant void barn_skirm_init_start
    (ai_place "barn_skirm_init")
    (ai_disregard (ai_actors "barn_skirm_init") true)
    (object_set_scale (ai_get_object "barn_skirm_init") 0.1 0)
    (cs_run_command_script "barn_skirm_init" sleep_cs)
    (sleep_until (or (volume_test_players "tv_barn01_end") (volume_test_players "vol_barn_courtyard")) 1)
    (sound_impulse_start "sound\characters\skirmisher\skirmisher_rooftop" "sc_sound_barn_skirm" 1)
    (wake md_motion_tracker)
    (cs_run_command_script "barn_skirm_init" cs_barn_skirm_init)
    (object_set_scale (ai_get_object "barn_skirm_init") 1 30)
)

(script command_script void cs_barn_skirm_init
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "pts_barn/court_skirm01a")
    (cs_go_to "pts_barn/court_skirm01b")
    (sleep 40)
    (ai_erase ai_current_actor)
)

(script command_script void cs_barn_spartan
    (cs_enable_pathfinding_failsafe true)
    (cs_walk true)
    (cs_go_to "pts_barn/spartan01" 1)
    (cs_look true "pts_barn/bloodtrail")
    (cs_go_to "pts_barn/spartan02" 1)
)

(script command_script void cs_barn_spartan02
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "pts_barn/spartan02" 1)
    (cs_walk true)
    (cs_go_to "pts_barn/spartan03" 1)
    (sleep_forever)
)

(script command_script void cs_barn_spartan04
    (cs_abort_on_damage true)
    (cs_enable_pathfinding_failsafe true)
    (cs_walk true)
    (cs_go_to_and_face "pts_barn/spartan02" "pts_barn/spartan02_face")
    (cs_enable_targeting true)
    (sleep 200)
)

(script command_script void cs_barn_skirms_lower
    (cs_go_to "pts_barn/barn_lower")
)

(script dormant void barn_gren_hud
    (sleep_until (< (objects_distance_to_object (players) "eq_barn_gren") 3) 5)
    (chud_track_object_with_priority "eq_barn_gren" 6 "wp_callout_gren")
    (sleep_until (volume_test_players "vol_meadow_start"))
    (chud_track_object "eq_barn_gren" false)
)

(script dormant void barn_health_hud
    (print "barn health hud: disabled")
    (sleep_forever)
    (sleep_until (< (objects_distance_to_object (players) "dc_barn_health") 3) 5)
    (if (> 1 (object_get_health (player0)))
        (begin
            (chud_track_object_with_priority "dc_barn_health" 6 "wp_callout_health")
            (sleep_until (>= 12 (objects_distance_to_object (player0) "dc_barn_health")))
            (chud_track_object "dc_barn_health" false)
        )
    )
)

(script dormant void barn_bodies_door
    (sleep_until (= (current_zone_set) 4) 1)
    (device_set_power "dm_barn_door01" 1)
    (device_set_position "dm_barn_door01" 0)
    (soft_ceiling_enable "soft_ceiling_010" true)
)

(script dormant void barn_falcon_start
    (if (not (volume_test_object "tv_barn_falcon_failsafe" (ai_vehicle_get_from_squad "intro_falcon_01" 0)))
        (begin
            (print "barn falcon failsafe!!! file bug!")
            (ai_erase "intro_falcon_01")
            (sleep 1)
            (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/barn")
            (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
            (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "ps_air_meadow/falcon_barn_entry")
        )
        (print "barn falcon arrived")
    )
    (ai_set_targeting_group "intro_falcon_01" 2)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_barn_combat)
    (sleep_until (>= g_barn_obj_control 50) 5)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_barn_combat_done)
)

(script command_script void cs_falcon01_witnesses
    (print "cs_falcon01_witnesses")
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "pts_1stbowl/air_support00f")
    (cs_fly_to_and_face "pts_1stbowl/air_support00f" "pts_1stbowl/air_support00_face")
    (sleep_until (>= g_1stbowl_obj_control 30))
    (sleep 60)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "pts_1stbowl/air_support00g")
    (cs_face true "pts_1stbowl/air_support00_faceb")
    (cs_fly_by "pts_1stbowl/air_support00h")
    (cs_run_command_script ai_current_actor cs_falcon01_barn)
)

(script command_script void cs_falcon01_barn
    (print "cs_falcon01_barn")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 0.3)
    (cs_face true "pts_1stbowl/air_support00_faceb")
    (sleep_until 
        (begin
            (cs_fly_by "pts_1stbowl/air_support00h")
            (cs_fly_by "pts_1stbowl/air_support00i")
            (cs_fly_by "pts_1stbowl/air_support00j")
            (cs_fly_by "pts_1stbowl/air_support00k")
            false
        )
        5
    )
)

(script command_script void cs_falcon01_barn_combat
    (print "cs_falcon01_barn_combat")
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_air_meadow/falcon_barn_entry")
    (sleep_until (>= g_barn_obj_control 30) 5)
    (cs_fly_by "ps_air_meadow/falcon_buzz01")
    (cs_face true "ps_air_meadow/falcon_buzz_face")
    (cs_fly_by "ps_air_meadow/falcon_buzz02")
    (cs_shoot_point true "ps_air_meadow/falcon_shoot")
    (cs_vehicle_speed 0.6)
    (sleep_until 
        (begin
            (cs_fly_by "ps_air_meadow/falcon_buzz01")
            (sleep (random_range 60 90))
            (if (>= (random_range 0 3) 1)
                (cs_shoot_point true "ps_air_meadow/falcon_shoot")
                (cs_shoot_point false "ps_air_meadow/falcon_shoot")
            )
            (cs_fly_by "ps_air_meadow/falcon_buzz02")
            (sleep (random_range 60 90))
            (if (>= (random_range 0 3) 1)
                (cs_shoot_point true "ps_air_meadow/falcon_shoot")
                (cs_shoot_point false "ps_air_meadow/falcon_shoot")
            )
            false
        )
    )
)

(script command_script void cs_falcon01_barn_combat_done
    (print "cs_falcon01_barn_combat")
    (cs_enable_pathfinding_failsafe true)
    (cs_shoot_point true "ps_air_meadow/falcon_shoot02")
    (sleep (random_range 40 60))
    (cs_shoot_point false "ps_air_meadow/falcon_shoot02")
    (cs_fly_by "ps_air_meadow/falcon_buzz02")
    (cs_face true "ps_air_meadow/meadow_drop02")
    (cs_fly_by "ps_air_meadow/falcon_circle01d")
    (cs_face false "ps_air_meadow/meadow_drop02")
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (sleep_until 
        (begin
            (cs_fly_by "ps_air_meadow/falcon_circle01a")
            (cs_fly_by "ps_air_meadow/falcon_circle01b")
            (cs_fly_by "ps_air_meadow/falcon_circle01c")
            (cs_fly_by "ps_air_meadow/falcon_circle01d")
            false
        )
    )
)

(script dormant void meadow_start
    (print "meadow start")
    (wake meadow_cov_air_start)
    (sleep_until (volume_test_players "vol_meadow_start") 5)
    (wake meadow_falcon_start)
    (if (not (game_is_cooperative))
        (wake meadow_evac)
    )
    (if (game_is_cooperative)
        (begin
            (wake meadow_coop_jorge)
            (ai_erase "group_kat")
            (ai_erase "group_emile")
        )
    )
    (if (>= (game_coop_player_count) 3)
        (begin
            (ai_erase "group_jorge")
        )
    )
    (wake meadow_back_setup)
    (hud_enable_training true)
    (wake meadow_waypoints)
    (wake music_meadow)
    (ai_place "meadow_moah01")
    (ai_disregard (ai_actors "group_wildlife") true)
    (game_save)
    (sleep_until (volume_test_players "vol_meadow_start02"))
    (ai_place "meadow_skirms01")
    (ai_set_objective "obj_barn_cov" "obj_meadow_cov")
    (ai_set_objective "group_spartans" "obj_meadow_hum")
    (ai_bring_forward "group_spartans" 10)
    (game_save)
    (sleep_until (volume_test_players "vol_meadow_halfway"))
    (ai_bring_forward "group_spartans" 20)
    (game_save)
    (sleep_until (volume_test_players "vol_meadow_exit"))
    (ai_place "meadow_cov_elites")
    (if (= (game_difficulty_get) heroic)
        (begin
            (ai_place "meadow_cov_elites02")
            (ai_place "meadow_cov_elites03")
        )
    )
    (if (= (game_difficulty_get) legendary)
        (begin
            (ai_place "meadow_cov_elites02")
            (ai_place "meadow_cov_elite_gold")
        )
    )
    (ai_bring_forward "group_spartans" 10)
    (sleep_until (<= (ai_living_count "obj_meadow_cov") 0))
    (ai_bring_forward "group_spartans" 10)
    (game_save)
)

(script dormant void meadow_back_setup
    (sleep_until (>= (ai_living_count "meadow_fork") 1) 5)
    (sleep_until (<= (ai_living_count "meadow_fork") 2) 5)
    (print "cov in part1")
    (sleep_until (or (<= (ai_task_count "obj_meadow_cov/gate_meadow_front") 0) (volume_test_players "vol_meadow_halfway")) 5)
    (print "cov dead in part1")
    (sleep (random_range 20 30))
    (wake md_meadow02)
)

(script dormant void meadow_cov_air_start
    (sleep_until (volume_test_players "vol_meadow_start") 5)
    (sleep_until (or (<= (ai_living_count "obj_barn_cov") 1) (>= (ai_task_count "obj_barn_cov/overlook_fallback02") 1) (volume_test_players "vol_meadow_start02")) 5)
    (print "meadow_cov_air_start")
    (ai_place "meadow_fork")
    (object_set_scale (ai_vehicle_get_from_squad "meadow_fork" 0) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "meadow_fork" 0) 1 90)
    (ai_set_targeting_group "meadow_fork/driver01" 2)
    (ai_magically_see "meadow_fork" "group_spartans")
    (sleep 80)
    (wake md_meadow_dropship)
    (game_save)
)

(script dormant void meadow_coop_jorge
    (print "meadow_coop_jorge")
    (sleep_until (volume_test_players "vol_meadow_halfway"))
    (if (not (volume_test_object "tv_meadow_adv01" obj_jorge))
        (begin
            (sleep_until (not (objects_can_see_object (players) "sc_meadow_coop_jorge" 30)) 5 200)
            (object_teleport_to_ai_point obj_jorge "ps_meadow/coop_jorge")
        )
    )
)

(script dormant void meadow_falcon_start
    (ai_set_objective "intro_falcon_01" "obj_airsupport_hum")
    (ai_set_targeting_group "intro_falcon_01" 2)
    (sleep_until (volume_test_players "vol_meadow_quartway"))
    (print "fork and falcon falling back")
    (cs_run_command_script "meadow_fork/driver01" cs_meadow_fork_fallback)
    (cs_run_command_script "meadow_banshees" cs_meadow_fork_exit)
    (ai_set_targeting_group "meadow_fork" 2)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_meadow)
    (sleep_until (volume_test_players "vol_meadow_halfway"))
    (print "fork exiting and falcon ready to assist")
    (cs_run_command_script "meadow_fork/driver01" cs_meadow_fork_exit)
    (sleep_until (volume_test_players "vol_meadow_exit"))
    (print "falcon assisting")
    (ai_disregard (ai_actors "intro_falcon_01") true)
    (if (<= (game_coop_player_count) 2)
        (ai_set_targeting_group "intro_falcon_01" 65535)
    )
    (sleep_until (or (<= (ai_task_count "obj_meadow_cov/meadow_elite") 2) (volume_test_players "tv_3kiva_start02")))
    (print "falcon leaving")
    (ai_set_targeting_group "intro_falcon_01" 65535)
    (if (not (volume_test_players "tv_3kiva_start02"))
        (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_meadow_exit)
    )
)

(script command_script void cs_falcon01_meadow
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_face true "ps_air_meadow/meadow_face02")
    (sleep_until 
        (begin
            (cs_fly_by "ps_air_meadow/falcon_circle02a")
            (cs_fly_by "ps_air_meadow/falcon_circle02b")
            (cs_fly_by "ps_air_meadow/falcon_circle02c")
            false
        )
    )
)

(script command_script void cs_falcon01_meadow_exit
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_air_meadow/falcon_3kiva_start")
    (sleep_forever)
)

(script dormant void meadow_evac
    (sleep_until (volume_test_players "vol_meadow_halfway"))
    (sleep_until (or (<= (ai_living_count "obj_meadow_cov") 0) (volume_test_players "tv_3kiva_start02")))
    (ai_place "meadow_falcon02")
    (object_set_scale (ai_vehicle_get_from_squad "meadow_falcon02" 0) 0.01 0)
    (sleep 1)
    (object_set_scale (ai_vehicle_get_from_squad "meadow_falcon02" 0) 1 (* 30 10))
    (sleep_until (>= (current_zone_set) 5) 1)
    (ai_erase "group_kat")
    (ai_erase "group_emile")
    (ai_erase "meadow_falcon02")
)

(script command_script void cs_meadow_falcon_evac
    (cs_enable_pathfinding_failsafe true)
    (ai_disregard (ai_vehicle_get ai_current_actor) true)
    (cs_fly_by "ps_air_meadow/falcon_goto01")
    (cs_vehicle_speed 0.5)
    (cs_fly_to "ps_air_meadow/falcon_hover01" 1)
    (cs_vehicle_speed 0.1)
    (cs_fly_to_and_face "ps_air_meadow/falcon_land01" "ps_air_meadow/falcon_land_face" 1)
    (ai_vehicle_enter "group_emile" (ai_vehicle_get ai_current_actor) 28)
    (ai_vehicle_enter "group_kat" (ai_vehicle_get ai_current_actor) 29)
    (if (not (<= (game_coop_player_count) 2))
        (ai_vehicle_enter "group_jorge" (ai_vehicle_get ai_current_actor) 23)
    )
    (sleep_until (meadow_falcon_loaded) 30 500)
    (if (not (meadow_falcon_loaded))
        (begin
            (ai_vehicle_enter_immediate "group_emile" (ai_vehicle_get ai_current_actor) 24)
            (ai_vehicle_enter_immediate "group_kat" (ai_vehicle_get ai_current_actor) 25)
            (if (not (<= (game_coop_player_count) 2))
                (ai_vehicle_enter "group_jorge" (ai_vehicle_get ai_current_actor) 23)
            )
        )
    )
    (sleep 40)
    (cs_run_command_script ai_current_actor cs_meadow_falcon_evac_exit)
)

(script command_script void cs_meadow_falcon_evac_exit
    (cs_enable_pathfinding_failsafe true)
    (print "falcon02 heading to outpost")
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_air_meadow/falcon_exit01")
    (cs_fly_by "ps_air_meadow/falcon_exit02")
    (cs_fly_by "ps_air_meadow/falcon_exit03")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script static boolean meadow_falcon_loaded
    (and (vehicle_test_seat (ai_vehicle_get_from_squad "meadow_falcon02" 0) 24) (vehicle_test_seat (ai_vehicle_get_from_squad "meadow_falcon02" 0) 25) (if (not (<= (game_coop_player_count) 2))
        (vehicle_test_seat (ai_vehicle_get_from_squad "meadow_falcon02" 0) 23)
    ))
)

(script command_script void cs_meadow_fork_entry
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "meadow_cov03" "meadow_cov01" "meadow_cov02" none)
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_air_meadow/meadow_drop02")
    (cs_fly_to_and_face "ps_air_meadow/meadow_drop03" "ps_air_meadow/meadow_face" 1)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (cs_fly_by "ps_air_meadow/meadow_drop06")
)

(script command_script void cs_meadow_fork_fallback
    (if (>= (game_coop_player_count) 3)
        (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "meadow_cov_back01" "meadow_cov_back_l" "meadow_cov_back02" none)
        (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "meadow_cov_back01" "meadow_cov_back_l" none none)
    )
    (cs_fly_by "ps_air_meadow/meadow_drop04")
    (cs_fly_to_and_face "ps_air_meadow/meadow_drop05" "ps_air_meadow/meadow_face" 1)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
)

(script command_script void cs_meadow_fork_exit
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_boost true)
    (cs_fly_by "ps_air_meadow/meadow_exit01" 5)
    (cs_fly_to "ps_air_meadow/meadow_exit02")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void meadow_waypoints
    (branch (volume_test_players "tv_3kiva_start") (hud_unblip_all))
    (sleep_until (volume_test_players "vol_meadow_quartway") 30 b_waypoint_time)
    (sleep_until (volume_test_players "vol_meadow_halfway") 30 b_waypoint_time)
    (sleep_until (volume_test_players "tv_3kiva_start") 30 b_waypoint_time)
    (f_blip_object "sc_hud_meadow_waypoint01" blip_default)
    (sleep_until (volume_test_players "tv_3kiva_start"))
    (hud_unblip_all)
)

(script dormant void 3kiva_start
    (wake 3kiva_waypoints)
    (wake 3kiva_troopers_bsp_start)
    (wake 3kiva_location)
    (wake ct_training_enterexit_start)
    (ai_disposable "obj_meadow_cov" true)
    (if (>= (game_coop_player_count) 2)
        (object_create "v_3kiva_pickup_init02")
    )
    (if (>= (game_coop_player_count) 3)
        (object_teleport_to_ai_point "v_3kiva_pickup_left" "ps_3kiva/4player_pickup")
    )
    (if (game_is_cooperative)
        (wake 3kiva_coop_test)
    )
    (wake chapter_02_start)
    (wake music_3kiva)
    (wake md_3kiva_start)
    (wake 3kiva_driver)
    (sleep_until (volume_test_players "tv_3kiva_start02"))
    (ai_bring_forward "group_carter" 10)
    (ai_bring_forward "group_jorge" 10)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_3kiva_falcon01)
    (if (not (volume_test_object "tv_3kiva_falcon_failsafe" (ai_vehicle_get_from_squad "intro_falcon_01" 0)))
        (wake 3kiva_falcon_failsafe)
        (print "3kiva falcon arrived")
    )
    (ai_set_objective "group_carter" "obj_3kiva_hum")
    (if (<= (game_coop_player_count) 2)
        (ai_set_objective "group_jorge" "obj_3kiva_hum")
    )
    (game_save)
    (game_insertion_point_unlock 3)
    (ai_place "3kiva_moah01")
    (ai_disregard (ai_actors "group_wildlife") true)
    (ai_place "3kiva_perimeter_cov01")
    (ai_place "3kiva_perimeter_cov02")
    (wake 3kiva_wildlife)
    (sleep_until (volume_test_players "tv_3kiva_pickup"))
    (ai_vehicle_enter "group_carter" "v_3kiva_pickup_init" 32)
    (ai_vehicle_enter "group_jorge" "v_3kiva_pickup_init" 34)
    (sleep_until (volume_test_players "vol_3kiva_1bsp"))
    (ai_place "3kiva_fork")
    (object_set_scale (ai_vehicle_get_from_squad "3kiva_fork" 0) 0.01 1)
    (sleep_until (= (current_zone_set_fully_active) 5) 1)
    (if (volume_test_object "tv_3kiva_meadow" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
        (wake 3kiva_falcon_start_failsafe)
        (print "3kiva falcon arrived")
    )
    (ai_place "3kiva_bob")
    (wake 3kiva01_cov_start)
    (wake 3kiva02_cov_start)
    (wake 3kiva03_cov_start)
    (ai_place "3kiva_perimeter_cov03")
    (sleep 1)
    (ai_place "3kiva_perimeter_cov04")
    (wake 3kiva_carter_catchup01_start)
    (wake 3kiva_carter_catchup02_start)
    (sleep 90)
    (game_save)
    (sleep_until 3kiva_troopers_spoted)
    (wake rain_3kiva_defend_start)
    (game_save)
    (sleep_until 3kiva_troopers_found)
    (wake 3kiva_falcon_ecav_start)
    (game_save)
    (if (not (game_is_cooperative))
        (wake 3kiva_coop_test)
    )
    (sleep_until 3kiva_done)
    (game_save)
    (sleep_until (volume_test_players "tv_cliffside_start"))
    (f_unblip_object (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (ai_disposable "group_3kiva_cov" true)
    (ai_disposable "group_wildlife" true)
    (sleep_forever 3kiva01_cov_start)
    (hud_unblip_all)
)

(script dormant void 3kiva_falcon_failsafe
    (print "3kiva falcon failsafe!!! file bug!")
    (ai_erase "intro_falcon_01")
    (sleep 1)
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/3kiva")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "ps_air_meadow/falcon_3kiva_start")
    (sleep 1)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_3kiva_falcon01)
)

(script dormant void 3kiva01_cov_start
    (sleep_until (volume_test_players "vol_3kiva01_approach02") 5)
    (print "kiva01 start")
    (set 3kiva01_visited true)
    (set 3kiva_objective_count (+ 3kiva_objective_count 1))
    (hud_unblip_all)
    (game_save)
    (wake 3kiva01_hud)
    (ai_place "3kiva01c_elite")
    (ai_place "3kiva01c_grunts01")
    (sleep 1)
    (ai_place "3kiva01c_grunts02")
    (ai_bring_forward "group_carter" 25)
    (ai_bring_forward "group_jorge" 25)
    (sleep_until (<= (ai_living_count "obj_3kiva01c_cov") 0))
    (set 3kiva01_done true)
    (wake md_3kiva_kiva01_done)
    (game_save)
)

(script dormant void 3kiva02_cov_start
    (sleep_until (>= 3kiva_troopers_bsp 2))
    (if (= 3kiva_troopers_bsp 2)
        (begin
            (sleep_until (volume_test_players "vol_3kiva02_approach01") 5)
            (set 3kiva02_visited true)
            (set 3kiva_objective_count (+ 3kiva_objective_count 1))
            (game_save)
            (sleep_forever)
        )
    )
    (print "kiva02 cov start")
    (ai_place "3kiva_hog_cov02a")
    (ai_place "3kiva_hog_cov02b")
    (ai_place "3kiva_hog_cov02c")
    (ai_bring_forward "group_carter" 25)
    (ai_bring_forward "group_jorge" 25)
    (sleep_until (volume_test_players "vol_3kiva02_approach01") 5)
    (set 3kiva02_visited true)
    (set 3kiva_objective_count (+ 3kiva_objective_count 1))
    (hud_unblip_all)
    (set g_music03 true)
    (sleep_until (<= (ai_living_count "group_3kiva02_hog_cov") 0))
    (print "kiva02 hog done")
    (set 3kiva02_done true)
    (game_save)
)

(script dormant void 3kiva03_cov_start
    (sleep_until (>= 3kiva_troopers_bsp 2))
    (if (= 3kiva_troopers_bsp 3)
        (begin
            (sleep_until (volume_test_players "vol_3kiva03_approach01") 5)
            (set 3kiva03_visited true)
            (set 3kiva_objective_count (+ 3kiva_objective_count 1))
            (game_save)
            (sleep_forever)
        )
    )
    (print "kiva03 cov start")
    (ai_place "3kiva_hog_cov03a")
    (ai_place "3kiva_hog_cov03b")
    (ai_place "3kiva_hog_cov03c")
    (ai_bring_forward "group_carter" 25)
    (ai_bring_forward "group_jorge" 25)
    (sleep_until (volume_test_players "vol_3kiva03_approach01") 5)
    (game_save)
    (set 3kiva03_visited true)
    (set 3kiva_objective_count (+ 3kiva_objective_count 1))
    (hud_unblip_all)
    (set g_music03 true)
    (sleep_until (<= (ai_living_count "group_3kiva03_hog_cov") 0))
    (print "kiva03 hog done")
    (set 3kiva03_done true)
    (game_save)
)

(script dormant void 3kiva_coop_test
    (sleep_until (>= (current_zone_set) 5))
    (zone_set_trigger_volume_enable "begin_zone_set:zoneset_barn_outro:2" false)
    (sleep_until 
        (begin
            (sleep_until (volume_test_players "begin_zone_set:zoneset_barn_outro:2") 5)
            (if (volume_test_object "begin_zone_set:zoneset_barn_outro:2" player0)
                (object_teleport_to_ai_point player0 "ps_3kiva/coop_test")
                (if (volume_test_object "begin_zone_set:zoneset_barn_outro:2" player1)
                    (object_teleport_to_ai_point player1 "ps_3kiva/coop_test")
                    (if (volume_test_object "begin_zone_set:zoneset_barn_outro:2" player2)
                        (object_teleport_to_ai_point player2 "ps_3kiva/coop_test")
                        (if (volume_test_object "begin_zone_set:zoneset_barn_outro:2" player3)
                            (object_teleport_to_ai_point player3 "ps_3kiva/coop_test")
                        )
                    )
                )
            )
            false
        )
    )
)

(script dormant void 3kiva_wildlife
    (sleep_until (volume_test_players "tv_3kiva_wildlife02") 5)
    (ai_disposable "meadow_moah01" true)
    (flock_create "flocks_3kiva_init_birds01")
    (flock_create "flocks_3kiva_birds01")
    (sleep 1)
    (flock_create "flocks_3kiva_birds02")
    (flock_create "flocks_3kiva_birds03")
    (flock_create "flocks_3kiva_birds04")
    (sleep 1)
    (sleep 1)
    (if (<= (game_coop_player_count) 2)
        (ai_place "3kiva_moah03")
    )
    (ai_disregard (ai_actors "group_wildlife") true)
    (sleep 30)
    (sleep_until (volume_test_players "tv_3kiva_wildlife03") 5)
    (if (not (game_is_cooperative))
        (ai_place "3kiva_moah02")
    )
    (ai_disregard (ai_actors "group_wildlife") true)
    (sleep_until 
        (begin
            (set g_wildlife_control 1)
            (sleep 1000)
            (set g_wildlife_control 2)
            (sleep 900)
            3kiva_done
        )
    )
    (sleep_until (>= (current_zone_set) 6))
    (flock_delete "flocks_3kiva_init_birds01")
    (flock_delete "flocks_3kiva_birds01")
    (flock_delete "flocks_3kiva_birds02")
    (flock_delete "flocks_3kiva_birds03")
    (flock_delete "flocks_3kiva_birds04")
)

(script command_script void cs_3kiva_perimeter_cov01
    (cs_abort_on_damage true)
    (sleep_until (volume_test_players "tv_3kiva_wildlife01") 5)
)

(script static ai players_vehicle
    (ai_player_get_vehicle_squad player0)
)

(script static boolean players_vehicle_has_driver
    (>= (ai_living_count (f_ai_get_vehicle_driver (players_vehicle))) 1)
)

(script dormant void 3kiva_driver
    (branch 3kiva_done (branch_kill))
    (sleep_until 
        (begin
            (sleep_until (players_vehicle_has_driver) 1)
            (set v_hog_control (players_vehicle))
            (print "hog has driver")
            (if (volume_test_objects "tv_3kiva_pickup_start" v_hog_control)
                (cs_run_command_script (f_ai_get_vehicle_driver v_hog_control) cs_pickup_3kiva_start)
            )
            (sleep_until (or (not (players_vehicle_has_driver)) (not (= (players_vehicle) v_hog_control))) 1)
            (cs_run_command_script (f_ai_get_vehicle_driver v_hog_control) abort_cs)
            (print "hog has no driver")
            false
        )
    )
)

(script command_script void cs_pickup_3kiva_start
    (cs_enable_pathfinding_failsafe true)
    (cs_abort_on_vehicle_exit true)
    (cs_ignore_obstacles true)
    (cs_vehicle_speed 0.7)
    (cs_go_to "ps_pickup_3kiva/p0")
    (cs_go_to "ps_pickup_3kiva/p1")
    (object_set_velocity (ai_vehicle_get ai_current_actor) 8)
    (cs_go_to "ps_pickup_3kiva/p2")
)

(script static boolean carter_driving_pickup
    (spartan_driving_pickup (object_get_ai obj_carter))
)

(script static boolean spartans_allowed_in_pickup
    (or (and (player_driving_pickup) (or (spartan_in_pickup (object_get_ai obj_carter)) (spartan_in_pickup (object_get_ai obj_jorge)))) (and (any_players_in_vehicle) (not (and (not 3kiva01_done) (volume_test_players "vol_3kiva01_approach02"))) (not (and (not 3kiva02_done) (volume_test_players "vol_3kiva02_approach02"))) (not (and (not 3kiva03_done) (volume_test_players "vol_3kiva03_approach02")))))
)

(script static boolean (spartan_driving_pickup (ai spartan))
    (or (vehicle_test_seat_unit "v_3kiva_pickup_init" 35 (ai_get_unit spartan)) (vehicle_test_seat_unit "v_3kiva_pickup_left" 35 (ai_get_unit spartan)) (if (= (current_zone_set_fully_active) 5)
        (begin
            (or (vehicle_test_seat_unit "v_3kiva_pickup_kiva02" 35 (ai_get_unit spartan)) (vehicle_test_seat_unit "v_3kiva_pickup_kiva03" 35 (ai_get_unit spartan)))
        )
    ) (if (>= (game_coop_player_count) 2)
        (vehicle_test_seat_unit "v_3kiva_pickup_init02" 35 (ai_get_unit spartan))
    ))
)

(script static boolean (spartan_in_pickup (ai spartan))
    (or (vehicle_test_seat_unit "v_3kiva_pickup_init" none (ai_get_unit spartan)) (vehicle_test_seat_unit "v_3kiva_pickup_left" none (ai_get_unit spartan)) (if (= (current_zone_set_fully_active) 5)
        (begin
            (vehicle_test_seat_unit "v_3kiva_pickup_kiva02" none (ai_get_unit spartan))
            (vehicle_test_seat_unit "v_3kiva_pickup_kiva03" none (ai_get_unit spartan))
        )
    ) (if (>= (game_coop_player_count) 2)
        (vehicle_test_seat_unit "v_3kiva_pickup_init02" none (ai_get_unit spartan))
    ))
)

(script static boolean player_driving_pickup
    (or (vehicle_test_seat_unit_list "v_3kiva_pickup_init" 35 (players)) (vehicle_test_seat_unit_list "v_3kiva_pickup_left" 35 (players)) (if (= (current_zone_set_fully_active) 5)
        (begin
            (vehicle_test_seat_unit_list "v_3kiva_pickup_kiva02" 35 (players))
            (vehicle_test_seat_unit_list "v_3kiva_pickup_kiva03" 35 (players))
        )
    ) (if (game_is_cooperative)
        (vehicle_test_seat_unit_list "v_3kiva_pickup_kiva02" 35 (players))
    ))
)

(script dormant void 3kiva_troopers_bsp_start
    (wake md_trooper_distress_attack)
    (wake md_3kiva_troopers_spoted)
    (wake 3kiva_defend_blip)
    (sleep_until 
        (begin
            (if (volume_test_players "vol_3kiva_2bsp")
                (set 3kiva_troopers_bsp 3)
                (if (volume_test_players "vol_3kiva_3bsp")
                    (set 3kiva_troopers_bsp 2)
                )
            )
            (>= 3kiva_troopers_bsp 2)
        )
    )
    (if (= 3kiva_troopers_bsp 2)
        (wake 3kiva_troopers_bsp2)
        (if (= 3kiva_troopers_bsp 3)
            (wake 3kiva_troopers_bsp3)
        )
    )
)

(script dormant void 3kiva_troopers_bsp2
    (print "troopers in bsp 2")
    (ai_place "3kiva_troopers_bsp02")
    (ai_cannot_die "3kiva_troopers_bsp02" true)
    (object_create "cr_3kiva_hogsite02")
    (wake 3kiva_trooper_crashsite_arrival02)
    (object_create_folder "w_crashsite02")
    (object_create_folder "e_crashsite02")
    (wake 3kiva_dmr_blip)
    (game_save)
    (sleep_until 3kiva_troopers_found)
    (ai_cannot_die "3kiva_troopers_bsp02" false)
    (ai_renew "3kiva_troopers_bsp02")
    (ai_disposable "group_3kiva01_cov" true)
    (ai_disposable "group_3kiva03_cov" true)
    (sleep_until (<= (ai_living_count "3kiva_fork_squad01") 3))
    (sleep_until (<= (ai_living_count "3kiva_fork_squad01") 0) 30 (* 30 20))
    (wake 3kiva_final_bsp2)
)

(script dormant void 3kiva_troopers_bsp3
    (print "troopers in bsp 2")
    (ai_place "3kiva_troopers_bsp03")
    (ai_cannot_die "3kiva_troopers_bsp03" true)
    (object_create "cr_3kiva_hogsite03")
    (wake 3kiva_trooper_crashsite_arrival03)
    (object_create_folder "w_crashsite03")
    (object_create_folder "e_crashsite03")
    (wake 3kiva_dmr_blip)
    (game_save)
    (sleep_until 3kiva_troopers_found)
    (ai_cannot_die "3kiva_troopers_bsp03" false)
    (ai_renew "3kiva_troopers_bsp03")
    (ai_disposable "group_3kiva01_cov" true)
    (ai_disposable "group_3kiva03_cov" true)
    (sleep_until (<= (ai_living_count "3kiva_fork_squad01") 3))
    (sleep_until (<= (ai_living_count "3kiva_fork_squad01") 0) 30 (* 30 20))
    (wake 3kiva_final_bsp3)
)

(script dormant void 3kiva_trooper_crashsite_arrival02
    (sleep_until (volume_test_players "tv_3kiva_jun02"))
    (set 3kiva_troopers_spoted true)
    (game_save)
    (print "player spotted troopers in bsp 2")
    (sleep_until (< (objects_distance_to_object (players) "cr_3kiva_hogsite02") 10))
    (print "player located troopers in bsp 2")
    (set 3kiva_troopers_found true)
    (ai_set_objective "group_spartans" "obj_3kiva02_spartans")
    (ai_bring_forward "group_carter" 25)
    (ai_bring_forward "group_jorge" 25)
)

(script dormant void 3kiva_trooper_crashsite_arrival03
    (sleep_until (volume_test_players "tv_3kiva_jun03"))
    (set 3kiva_troopers_spoted true)
    (game_save)
    (print "player spotted troopers in bsp 3")
    (sleep_until (< (objects_distance_to_object (players) "cr_3kiva_hogsite03") 10))
    (print "player located troopers in bsp 3")
    (set 3kiva_troopers_found true)
    (ai_set_objective "group_spartans" "obj_3kiva03_spartans")
    (ai_bring_forward "group_carter" 25)
    (ai_bring_forward "group_jorge" 25)
)

(script dormant void 3kiva_defend_blip
    (branch 3kiva_done (3kiva_unblip_defend))
    (sleep_until 3kiva_troopers_spoted 5)
    (if (= 3kiva_troopers_bsp 2)
        (3kiva_defend_blip "sc_hud_3kiva02_defend" "3kiva_troopers_bsp02")
        (if (= 3kiva_troopers_bsp 3)
            (3kiva_defend_blip "sc_hud_3kiva03_defend" "3kiva_troopers_bsp03")
        )
    )
)

(script static void (3kiva_defend_blip (object_name defend_object, ai troopers))
    (f_blip_ai troopers 5)
    (sleep_until (= g_ui_obj_control 4))
    (f_blip_object defend_object blip_defend)
    (sleep 120)
    (sleep_until 
        (begin
            (sleep_until (< (objects_distance_to_object (players) defend_object) 30))
            (f_unblip_object defend_object)
            (f_unblip_ai troopers)
            (sleep_until (> (objects_distance_to_object (players) defend_object) 35))
            (f_blip_ai troopers 5)
            (f_blip_object defend_object blip_defend)
            false
        )
    )
)

(script static void 3kiva_unblip_defend
    (f_unblip_object "sc_hud_3kiva02_defend")
    (f_unblip_object "sc_hud_3kiva03_defend")
    (f_unblip_ai "3kiva_troopers_bsp02")
    (f_unblip_ai "3kiva_troopers_bsp03")
)

(script dormant void 3kiva_dmr_blip
    (if (= 3kiva_troopers_bsp 2)
        (f_blip_weapon "w_3kiva02_dmr" 5 9)
        (if (= 3kiva_troopers_bsp 3)
            (f_blip_weapon "w_3kiva03_dmr" 5 9)
        )
    )
)

(script dormant void 3kiva_final_bsp2
    (print "3kiva_final_bsp2")
    (set g_3kiva_obj_control 2)
    (game_save)
    (ai_place "3kiva02_fork")
    (ai_set_targeting_group "3kiva02_fork/driver01" 2)
    (sleep 700)
    (set g_3kiva_obj_control 3)
    (ai_place "3kiva02_fork02")
    (ai_set_targeting_group "3kiva02_fork02/driver01" 2)
    (sleep_until (<= (ai_living_count "group_3kiva_final02_forks") 0))
    (sleep_until (<= (ai_living_count "obj_3kiva02_cov") 2))
    (sleep_until (<= (ai_living_count "obj_3kiva02_cov") 1) 30 (* 30 300))
    (sleep_until (<= (ai_living_count "obj_3kiva02_cov") 0) 30 (* 30 160))
    (ai_kill "obj_3kiva02_cov")
    (ai_kill "group_3kiva02_cov")
    (print "3kiva done")
    (set 3kiva_done true)
    (sleep_until (<= (ai_living_count "group_3kiva02_cov") 0))
    (ai_vehicle_enter "group_carter" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24)
    (ai_vehicle_enter "group_jorge" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23)
)

(script dormant void 3kiva_final_bsp3
    (print "3kiva_final_bsp3")
    (set g_3kiva_obj_control 2)
    (game_save)
    (ai_place "3kiva03_fork")
    (ai_set_targeting_group "3kiva03_fork/driver01" 2)
    (sleep 700)
    (set g_3kiva_obj_control 3)
    (ai_place "3kiva03_fork02")
    (ai_set_targeting_group "3kiva03_fork02/driver01" 2)
    (sleep_until (<= (ai_living_count "group_3kiva_final03_forks") 0))
    (sleep_until (<= (ai_living_count "obj_3kiva03_cov") 2))
    (sleep_until (<= (ai_living_count "obj_3kiva03_cov") 1) 30 (* 30 300))
    (sleep_until (<= (ai_living_count "obj_3kiva03_cov") 0) 30 (* 30 160))
    (ai_kill "obj_3kiva03_cov")
    (ai_kill "group_3kiva03_cov")
    (print "3kiva done")
    (set 3kiva_done true)
    (sleep_until (<= (ai_living_count "group_3kiva03_cov") 0))
    (ai_vehicle_enter "group_carter" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24)
    (ai_vehicle_enter "group_jorge" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23)
)

(script command_script void cs_kiva02_fork
    (cs_enable_pathfinding_failsafe true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (sleep 1)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 (* 30 10))
    (cs_vehicle_boost true)
    (cs_fly_by "ps_air_3kiva_fork/3kiva02_drop01a")
    (cs_vehicle_boost false)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva02_drop01b02" "ps_air_3kiva_fork/3kiva02_face01" 1)
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "3kiva02_cov_drop01a" "3kiva02_cov_drop01b" none "3kiva02_cov_drop01c")
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (sleep (random_range 110 140))
    (cs_fly_by "ps_air_3kiva_fork/3kiva02_drop01a")
    (cs_fly_to "ps_air_3kiva_fork/3kiva02_exit01")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_kiva02_fork02
    (cs_enable_pathfinding_failsafe true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (sleep 1)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 (* 30 10))
    (cs_vehicle_boost true)
    (cs_fly_by "ps_air_3kiva_fork/3kiva02_drop02a")
    (cs_fly_by "ps_air_3kiva_fork/3kiva02_drop02b")
    (cs_vehicle_boost false)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva02_drop02c" "ps_air_3kiva_fork/3kiva02_drop02_face" 1)
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "3kiva02_cov_drop02a" none "3kiva02_cov_drop02b" "3kiva02_cov_drop02c")
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (sleep (random_range 110 140))
    (cs_fly_by "ps_air_3kiva_fork/3kiva02_drop01a")
    (cs_fly_to "ps_air_3kiva_fork/3kiva02_exit01")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_kiva03_fork
    (cs_enable_pathfinding_failsafe true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (sleep 1)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 (* 30 10))
    (cs_vehicle_boost true)
    (cs_fly_by "ps_air_3kiva_fork/3kiva03_drop01a")
    (cs_fly_by "ps_air_3kiva_fork/3kiva03_drop01b")
    (cs_vehicle_boost false)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva03_drop01c" "ps_air_3kiva_fork/3kiva03_face01" 1)
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "3kiva03_cov_drop01a" "3kiva03_cov_drop01b" none "3kiva03_cov_drop01c")
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (cs_fly_by "ps_air_3kiva_fork/3kiva03_drop01d")
    (cs_vehicle_boost true)
    (cs_fly_to "ps_air_3kiva_fork/3kiva03_exit01a")
    (cs_fly_to "ps_air_3kiva_fork/3kiva03_exit01b")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_kiva03_fork02
    (cs_enable_pathfinding_failsafe true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 0)
    (sleep 1)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 (* 30 10))
    (cs_vehicle_boost true)
    (cs_fly_by "ps_air_3kiva_fork/3kiva03_drop01a")
    (cs_fly_by "ps_air_3kiva_fork/3kiva03_drop01b")
    (cs_vehicle_boost false)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva03_drop01c" "ps_air_3kiva_fork/3kiva03_face01" 1)
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "3kiva03_cov_drop02c" none "3kiva03_cov_drop02b" "3kiva03_cov_drop02a")
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (cs_fly_by "ps_air_3kiva_fork/3kiva03_drop01d")
    (cs_vehicle_boost true)
    (cs_fly_to "ps_air_3kiva_fork/3kiva03_exit01a")
    (cs_fly_to "ps_air_3kiva_fork/3kiva03_exit01b")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void 3kiva_location
    (sleep_until 
        (begin
            (if (volume_test_players "tv_3kiva_beginning")
                (begin
                    (set 3kiva_bsp 0)
                )
                (if (volume_test_players "vol_3kiva_1bsp")
                    (begin
                        (set 3kiva_bsp 1)
                    )
                    (if (volume_test_players "vol_3kiva_2bsp")
                        (begin
                            (set 3kiva_bsp 2)
                        )
                        (if (volume_test_players "vol_3kiva_3bsp")
                            (begin
                                (set 3kiva_bsp 3)
                            )
                        )
                    )
                )
            )
            (= (current_zone_set_fully_active) 6)
        )
        5
    )
)

(script dormant void 3kiva_carter_catchup01_start
    (sleep_until (>= (objects_distance_to_object (players) (ai_get_object "group_carter")) 100))
    (print "carter is lost")
)

(script dormant void 3kiva_carter_catchup02_start
    (sleep_until (>= 3kiva_jun_bsp 2))
    (if (>= (objects_distance_to_object (players) (ai_get_object "group_carter")) 100)
        (sleep_forever)
    )
    (print "carter is getting vehicle")
)

(script dormant void 3kiva_waypoints
    (branch 3kiva_done (hud_unblip_all))
    (print "3kiva waypoints")
    (sleep_until (volume_test_players "tv_3kiva_pickup") 30 b_waypoint_time)
    (if (not (volume_test_players "tv_3kiva_pickup"))
        (begin
            (f_blip_object "v_3kiva_pickup_init" blip_default)
            (sleep_until (volume_test_players "tv_3kiva_pickup"))
            (hud_unblip_all)
        )
    )
    (sleep_until (volume_test_players "vol_3kiva_1bsp") 30 b_waypoint_time)
    (if (not (volume_test_players "vol_3kiva_1bsp"))
        (begin
            (f_blip_object "sc_hud_3kiva01" blip_default)
            (sleep_until (volume_test_players "vol_3kiva_1bsp"))
            (hud_unblip_all)
        )
    )
    (print "3kiva waypoints: phase 1: player has found 3kiva space")
    (sleep_until (or (>= 3kiva_objective_count 2) (volume_test_players "tv_3kiva_beginning")) 30 b_waypoint_time)
    (if (not (>= 3kiva_objective_count 2))
        (begin
            (3kiva_blip_next_objective)
            (sleep_until (= 3kiva_objective_count 2))
            (hud_unblip_all)
        )
        (print "else: player doesn't need waypoint help")
    )
    (print "3kiva waypoints: phase 2: one objective found")
    (sleep_until (or 3kiva01_done (>= 3kiva_troopers_bsp 2) (volume_test_players "tv_3kiva_beginning")) 30 b_waypoint_time)
    (if (not (or 3kiva01_done (>= 3kiva_troopers_bsp 2)))
        (begin
            (3kiva_blip_next_objective)
            (sleep_until (>= 3kiva_troopers_bsp 2))
            (hud_unblip_all)
        )
        (print "else: player doesn't need waypoint help")
    )
    (print "3kiva waypoints: phase 2: one objective found")
    (sleep_until (or (>= 3kiva_troopers_bsp 2) (volume_test_players "tv_3kiva_beginning")) 30 b_waypoint_time)
    (if (not (>= 3kiva_troopers_bsp 2))
        (begin
            (3kiva_blip_next_objective)
            (sleep_until (>= 3kiva_troopers_bsp 2))
            (hud_unblip_all)
        )
        (print "else: player doesn't need waypoint help")
    )
    (print "3kiva waypoints: phase 3: troopers are placed")
    (sleep_until (or 3kiva_troopers_spoted (volume_test_players "tv_3kiva_beginning")) 30 b_waypoint_time)
    (if (not 3kiva_troopers_spoted)
        (begin
            (f_blip_object (ai_vehicle_get_from_squad "3kiva_fork" 0) blip_hostile_vehicle)
            (sleep_until 3kiva_troopers_spoted)
            (hud_unblip_all)
        )
        (print "else: player doesn't need waypoint help")
    )
    (print "3kiva waypoints: done")
)

(script static void 3kiva_blip_next_objective
    (print "blip next obj")
    (if (volume_test_objects "vol_3kiva_1bsp" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
        (wake md_3kiva_waypoint_kiva01)
        (if (volume_test_objects "vol_3kiva_2bsp" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
            (wake md_3kiva_waypoint_kiva02)
            (if (volume_test_objects "vol_3kiva_3bsp" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
                (wake md_3kiva_waypoint_kiva03)
            )
        )
    )
    (f_blip_object (ai_vehicle_get_from_squad "intro_falcon_01" 0) blip_default)
)

(script command_script void cs_kiva_jun_banshee
    (cs_vehicle_boost true)
    (if (volume_test_players "vol_3kiva_2bsp")
        (cs_fly_by "ps_3kiva_banshee/3kiva02")
        (if (volume_test_players "vol_3kiva_3bsp")
            (cs_fly_by "ps_3kiva_banshee/3kiva03")
        )
    )
)

(script command_script void cs_kiva_jun_fork
    (cs_enable_pathfinding_failsafe true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 1)
    (sleep 1)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 (* 30 10))
    (cs_fly_by "ps_air_3kiva_fork/3kiva_drop01a" 5)
    (sleep_until (>= 3kiva_troopers_bsp 2))
    (if (= 3kiva_troopers_bsp 2)
        (cs_run_command_script ai_current_actor cs_kiva_fork_02)
        (if (= 3kiva_troopers_bsp 3)
            (cs_run_command_script ai_current_actor cs_kiva_fork_03)
        )
    )
)

(script command_script void cs_kiva_fork_02
    (cs_enable_pathfinding_failsafe true)
    (print "fork flying to kiva02")
    (cs_vehicle_boost true)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva02_drop01a" "ps_air_3kiva_fork/3kiva02_face01" 1)
    (cs_vehicle_boost false)
    (cs_run_command_script (ai_get_turret_ai ai_current_actor 0) cs_kiva_fork_02_shoot)
    (sleep_until (volume_test_players "vol_3kiva02_approach01"))
    (cs_fly_by "ps_air_3kiva_fork/3kiva02_drop01a")
    (cs_vehicle_speed 0.8)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva02_drop01b02" "ps_air_3kiva_fork/3kiva02_face01" 1)
    (f_load_fork (ai_vehicle_get ai_current_actor) "right" "3kiva_fork_squad01" none none none)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (ai_set_objective "3kiva_fork_squad01" "obj_3kiva02_cov")
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva02_drop01a" "ps_air_3kiva_fork/3kiva02_face01" 1)
    (cs_enable_moving true)
    (cs_enable_looking true)
    (sleep_until 3kiva_troopers_spoted)
    (cs_enable_moving false)
    (cs_enable_looking false)
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_air_3kiva_fork/3kiva03_drop01a")
    (cs_fly_to "ps_air_3kiva_fork/3kiva03_exit01a")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.1 60)
    (sleep 60)
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_kiva_fork_03
    (cs_enable_pathfinding_failsafe true)
    (print "fork flying to kiva03")
    (cs_vehicle_boost true)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva_drop05a" "ps_air_3kiva_fork/3kiva_drop03_shoot")
    (cs_run_command_script (ai_get_turret_ai ai_current_actor 0) cs_kiva_fork_03_shoot)
    (cs_vehicle_boost false)
    (sleep_until (volume_test_players "vol_3kiva03_approach01"))
    (cs_fly_to "ps_air_3kiva_fork/3kiva_drop03a")
    (cs_vehicle_speed 0.8)
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva_drop04a" "ps_air_3kiva_fork/3kiva03_drop02_face" 1)
    (f_load_fork (ai_vehicle_get ai_current_actor) "right" "3kiva_fork_squad01" none none none)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (ai_set_objective "3kiva_fork_squad01" "obj_3kiva03_cov")
    (cs_fly_to "ps_air_3kiva_fork/3kiva_drop03a")
    (cs_fly_to_and_face "ps_air_3kiva_fork/3kiva_drop05a" "ps_air_3kiva_fork/3kiva_drop03_shoot")
    (cs_enable_moving true)
    (cs_enable_looking true)
    (sleep_until 3kiva_troopers_spoted)
    (cs_enable_moving false)
    (cs_enable_looking false)
    (cs_vehicle_speed 1)
    (cs_fly_to "ps_air_3kiva_fork/3kiva03_exit01a")
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.1 60)
    (sleep 60)
    (object_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_kiva_fork_02_shoot
    (cs_shoot_point true "ps_air_3kiva_fork/3kiva_drop02_shoot")
    (sleep_until 3kiva_troopers_spoted)
)

(script command_script void cs_kiva_fork_03_shoot
    (cs_shoot_point true "ps_air_3kiva_fork/3kiva_drop03_shoot")
    (sleep_until 3kiva_troopers_spoted)
)

(script dormant void 3kiva_falcon_start_failsafe
    (print "3kiva start falcon failsafe!!! file bug!")
    (ai_erase "intro_falcon_01")
    (sleep 1)
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/3kiva")
    (sleep 1)
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (sleep 1)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_3kiva_falcon01)
)

(script command_script void cs_3kiva_falcon01
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_to "ps_air_3kiva_falcon/start01")
    (sleep_until (or (= (current_zone_set) 5) (volume_test_players "tv_3kiva_pickup")) 5)
    (cs_fly_by "ps_air_3kiva_falcon/start02")
    (cs_fly_by "ps_air_3kiva_falcon/start03")
    (sleep_until (or (volume_test_players "vol_3kiva_1bsp") (>= 3kiva_troopers_bsp 2)))
    (cs_fly_to "ps_air_3kiva_falcon/kiva01")
    (sleep_until (or 3kiva01_done (>= 3kiva_troopers_bsp 2)))
    (if 3kiva01_done
        (cs_fly_to "ps_air_3kiva_falcon/kiva02")
    )
    (sleep_until 
        (begin
            (if (volume_test_players "vol_3kiva_2bsp")
                (cs_fly_to "ps_air_3kiva_falcon/kiva02")
                (if (volume_test_players "vol_3kiva_3bsp")
                    (cs_fly_to "ps_air_3kiva_falcon/kiva03")
                )
            )
            (or 3kiva02_done 3kiva03_done 3kiva_troopers_spoted)
        )
    )
    (if (= 3kiva_troopers_bsp 2)
        (cs_fly_to "ps_air_3kiva_falcon/kiva02")
        (if (= 3kiva_troopers_bsp 3)
            (cs_fly_to "ps_air_3kiva_falcon/kiva03")
        )
    )
    (sleep_until 3kiva_troopers_spoted)
    (if (= 3kiva_troopers_bsp 2)
        (cs_run_command_script ai_current_actor cs_3kiva_falcon_circle02)
        (if (= 3kiva_troopers_bsp 3)
            (cs_run_command_script ai_current_actor cs_3kiva_falcon_circle03)
        )
    )
)

(script dormant void 3kiva_falcon_ecav_start
    (ai_erase (object_get_ai obj_jun))
    (sleep_until (>= g_3kiva_obj_control 3))
    (sleep_until (and (<= (ai_living_count "group_3kiva_final02_forks") 0) (<= (ai_living_count "group_3kiva_final03_forks") 0)))
    (ai_set_objective "intro_falcon_01" "obj_3kiva_hum")
    (3kiva_falcon_ecav_jun)
    (wake 3kiva_falcon02_start)
    (add_recycling_volume "tv_recycle_evac02" 0 0)
    (add_recycling_volume "tv_recycle_evac03" 0 0)
    (sleep_until 3kiva_done)
    (wake 3kiva_falcon_evac_failsafe)
    (if (= 3kiva_troopers_bsp 2)
        (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_3kiva_falcon_evac02)
        (if (= 3kiva_troopers_bsp 3)
            (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_3kiva_falcon_evac03)
        )
    )
    (3kiva_falcon_ecav_setup)
    (sleep_until (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad "intro_falcon_01" 0) none (players)))
    (set g_3kiva_obj_control 10)
    (wake rain_3kiva_evac_start)
    (sleep_until 
        (begin
            (print "loading players")
            (load_player_into_falcon player0 "intro_falcon_01")
            (load_player_into_falcon player1 "intro_falcon_01")
            (load_player_into_falcon player2 "intro_falcon_01")
            (load_player_into_falcon player3 "intro_falcon_01")
            (and (or (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad "intro_falcon_01" 0) none player0) (not (player_is_in_game player0))) (or (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad "intro_falcon_01" 0) none player1) (not (player_is_in_game player1))) (or (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad "intro_falcon_01" 0) none player2) (not (player_is_in_game player2))) (or (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad "intro_falcon_01" 0) none player3) (not (player_is_in_game player3))))
        )
    )
    (f_unblip_object (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (game_safe_to_respawn false)
    (if (not (game_is_cooperative))
        (begin
            (print "spartans in seat")
            (sleep_until (and (vehicle_test_seat_unit (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24 (ai_get_unit (object_get_ai obj_carter))) (vehicle_test_seat_unit (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23 (ai_get_unit (object_get_ai obj_jorge)))) 5 200)
            (if (not (and (vehicle_test_seat_unit (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24 (ai_get_unit (object_get_ai obj_carter))) (vehicle_test_seat_unit (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23 (ai_get_unit (object_get_ai obj_jorge)))))
                (begin
                    (unit_enter_vehicle_immediate (ai_get_unit (object_get_ai obj_carter)) (ai_vehicle_get_from_squad "intro_falcon_01" 0) "falcon_p_r1_wpn")
                    (unit_enter_vehicle_immediate (ai_get_unit (object_get_ai obj_jorge)) (ai_vehicle_get_from_squad "intro_falcon_01" 0) "falcon_p_l1_wpn")
                )
            )
        )
    )
    (if (>= (game_coop_player_count) 3)
        (unit_enter_vehicle_immediate (ai_get_unit (object_get_ai obj_carter)) (ai_vehicle_get_from_squad "intro_falcon_01" 0) "falcon_p_bench")
    )
    (sleep 30)
    (cs_run_command_script (object_get_ai (vehicle_driver (ai_vehicle_get_from_squad "intro_falcon_01" 0))) cs_3kiva_falcon_evac_exit)
    (game_save)
    (wake md_outpost_sitrep02)
    (object_create "sc_020_cap")
    (object_create "sc_030_cap")
)

(script static void (load_player_into_falcon (unit player_num, ai falcon_squad))
    (if (not (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad falcon_squad 0) none player_num))
        (begin
            (if (not (vehicle_test_seat (ai_vehicle_get_from_squad falcon_squad 0) 28))
                (unit_enter_vehicle_immediate player_num (ai_vehicle_get_from_squad falcon_squad 0) "falcon_p_r2")
                (if (not (vehicle_test_seat (ai_vehicle_get_from_squad falcon_squad 0) 29))
                    (unit_enter_vehicle_immediate player_num (ai_vehicle_get_from_squad falcon_squad 0) "falcon_p_l2")
                    (if (not (vehicle_test_seat (ai_vehicle_get_from_squad falcon_squad 0) 26))
                        (if (>= (game_coop_player_count) 3)
                            (unit_enter_vehicle_immediate player_num (ai_vehicle_get_from_squad falcon_squad 0) "falcon_p_r1")
                        )
                        (if (not (vehicle_test_seat (ai_vehicle_get_from_squad falcon_squad 0) 27))
                            (if (>= (game_coop_player_count) 3)
                                (unit_enter_vehicle_immediate player_num (ai_vehicle_get_from_squad falcon_squad 0) "falcon_p_l1")
                            )
                        )
                    )
                )
            )
        )
    )
)

(script static void 3kiva_falcon_ecav_jun
    (print "3kiva_falcon_ecav_jun")
    (if (not (game_is_cooperative))
        (begin
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 28 false)
            (ai_place "spartan_jun/3kiva")
            (set obj_jun (ai_get_unit "group_jun"))
            (ai_cannot_die "group_spartans" true)
            (ai_disregard (ai_actors "group_jun") true)
            (ai_set_objective "group_jun" "obj_3kiva_hum")
            (sleep 1)
            (ai_vehicle_enter_immediate "group_jun" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 28)
        )
    )
)

(script static void 3kiva_falcon_ecav_setup
    (print "3kiva_falcon_ecav_setup")
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 26 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24 false)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23 false)
    (wake falcon_weapon_drop_players)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 31 false false)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 false false)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 26 false false)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29 false false)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 28 false false)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30 true false)
    (if (game_is_cooperative)
        (begin
            (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30 false false)
            (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29 true false)
            (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 28 true false)
        )
    )
    (if (>= (game_coop_player_count) 3)
        (begin
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30 false)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24 true)
            (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23 true)
            (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 true false)
            (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 26 true false)
        )
    )
)

(script dormant void 3kiva_falcon02_start
    (if (<= 3kiva_troopers_bsp 2)
        (begin
            (ai_place "3kiva_falcon02/02")
            (object_set_scale (ai_vehicle_get_from_squad "3kiva_falcon02" 0) 0.01 0)
            (sleep 1)
            (cs_run_command_script (f_ai_get_vehicle_driver "3kiva_falcon02") cs_3kiva_falcon02_entry02)
            (ai_set_objective "3kiva_falcon02" "obj_3kiva02_hum")
        )
        (if (= 3kiva_troopers_bsp 3)
            (begin
                (ai_place "3kiva_falcon02/03")
                (object_set_scale (ai_vehicle_get_from_squad "3kiva_falcon02" 0) 0.01 0)
                (sleep 1)
                (cs_run_command_script (f_ai_get_vehicle_driver "3kiva_falcon02") cs_3kiva_falcon02_entry03)
                (ai_set_objective "3kiva_falcon02" "obj_3kiva03_hum")
            )
        )
    )
    (ai_set_targeting_group "3kiva_falcon02" 2)
    (sleep 1)
    (object_set_scale (ai_vehicle_get_from_squad "3kiva_falcon02" 0) 1 90)
    (sleep_until 3kiva_done)
    (if (= 3kiva_troopers_bsp 2)
        (cs_run_command_script (f_ai_get_vehicle_driver "3kiva_falcon02") cs_3kiva_falcon02_evac02)
        (if (= 3kiva_troopers_bsp 3)
            (cs_run_command_script (f_ai_get_vehicle_driver "3kiva_falcon02") cs_3kiva_falcon02_evac03)
        )
    )
)

(script dormant void 3kiva_falcon_evac_failsafe
    (if (= 3kiva_troopers_bsp 2)
        (wake 3kiva_falcon_evac02_failsafe)
        (if (= 3kiva_troopers_bsp 3)
            (wake 3kiva_falcon_evac03_failsafe)
        )
    )
)

(script command_script void cs_3kiva_falcon_evac02
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva02a")
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva02c")
    (cs_face true "ps_air_3kiva_falcon_evac/3kiva02_face")
    (cs_vehicle_speed 0.1)
    (cs_fly_to "ps_air_3kiva_falcon_evac/3kiva02_land02" 1)
    (cs_run_command_script ai_current_actor cs_3kiva_falcon_evac_finish)
)

(script dormant void 3kiva_falcon_evac02_failsafe
    (if (volume_test_object "tv_3kiva02_falcon_failsafe" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
        (begin
            (print "evac falcon in position")
            (sleep_forever)
        )
    )
    (print "3kiva evac02 falcon failsafe!!! file bug!")
    (ai_erase "intro_falcon_01")
    (sleep 1)
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/3kiva")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "ps_air_3kiva_falcon_evac/3kiva02a")
    (sleep 1)
    (3kiva_falcon_ecav_setup)
    (3kiva_falcon_ecav_jun)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_3kiva_falcon_evac02)
)

(script command_script void cs_3kiva_falcon_evac03
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva03_teleport")
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva03_jun01")
    (cs_vehicle_speed 0.3)
    (cs_fly_to_and_face "ps_air_3kiva_falcon_evac/3kiva03_jun_land" "ps_air_3kiva_falcon_evac/3kiva03_face" 1)
    (cs_run_command_script ai_current_actor cs_3kiva_falcon_evac_finish)
)

(script dormant void 3kiva_falcon_evac03_failsafe
    (if (volume_test_object "tv_3kiva03_falcon_failsafe" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
        (begin
            (print "evac falcon in position")
            (sleep_forever)
        )
    )
    (print "3kiva evac03 falcon failsafe!!! file bug!")
    (ai_erase "intro_falcon_01")
    (sleep 1)
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/3kiva")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "ps_air_3kiva_falcon_evac/3kiva03_teleport")
    (sleep 1)
    (3kiva_falcon_ecav_setup)
    (3kiva_falcon_ecav_jun)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_3kiva_falcon_evac03)
)

(script command_script void cs_3kiva_falcon_circle02
    (print "cs_3kiva_falcon_circle02")
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_3kiva_falcon02_evac02/circle01a")
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_face true "ps_3kiva_falcon02_evac02/face02")
    (cs_vehicle_speed 0.7)
    (sleep_until 
        (begin
            (cs_fly_by "ps_3kiva_falcon02_evac02/circle01a")
            (cs_fly_by "ps_3kiva_falcon02_evac02/circle01b")
            (cs_fly_by "ps_3kiva_falcon02_evac02/circle01c")
            false
        )
    )
)

(script command_script void cs_3kiva_falcon02_entry02
    (print "cs_3kiva_falcon02_entry02")
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_3kiva_falcon02_evac02/circle01a")
    (sleep_forever)
)

(script command_script void cs_3kiva_falcon02_evac02
    (cs_fly_to "ps_3kiva_falcon02_evac02/circle01a")
    (cs_vehicle_speed 0.6)
    (cs_fly_to "ps_3kiva_falcon02_evac02/land")
    (if (>= (ai_living_count "group_3kiva_troopers") 1)
        (begin
            (wake md_3kiva_troopers_evac)
            (cs_face true "ps_3kiva_falcon02_evac02/face01")
            (cs_vehicle_speed 0.1)
            (cs_fly_to "ps_3kiva_falcon02_evac02/land02" 1)
            (sleep_until 
                (begin
                    (ai_vehicle_enter "3kiva_troopers_bsp02" (ai_vehicle_get ai_current_actor) none)
                    (f_all_squad_in_vehicle "group_3kiva_troopers" ai_current_squad)
                )
                30
                1000
            )
            (sleep 50)
            (ai_vehicle_enter_immediate "3kiva_troopers_bsp02" (ai_vehicle_get ai_current_actor) none)
            (print "troopers loaded")
            (cs_vehicle_speed 1)
            (cs_face false "ps_3kiva_falcon02_evac02/face01")
        )
    )
    (cs_fly_by "ps_3kiva_falcon02_evac02/flyby02")
    (cs_fly_by "ps_3kiva_falcon02_evac02/flyby03")
    (cs_fly_by "ps_3kiva_falcon02_evac02/flyby04")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_3kiva_falcon_circle03
    (print "cs_3kiva_falcon_circle03")
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_3kiva_falcon02_evac03/circle01a")
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_face true "ps_3kiva_falcon02_evac03/face01")
    (cs_vehicle_speed 0.7)
    (sleep_until 
        (begin
            (cs_fly_by "ps_3kiva_falcon02_evac03/circle01a")
            (cs_fly_by "ps_3kiva_falcon02_evac03/circle01b")
            (cs_fly_by "ps_3kiva_falcon02_evac03/circle01c")
            false
        )
    )
)

(script command_script void cs_3kiva_falcon02_entry03
    (print "cs_3kiva_falcon02_entry03")
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_3kiva_falcon02_evac03/circle01a")
    (sleep_forever)
)

(script command_script void cs_3kiva_falcon02_evac03
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_to "ps_3kiva_falcon02_evac03/circle01c")
    (cs_vehicle_speed 0.6)
    (cs_fly_to "ps_3kiva_falcon02_evac03/land")
    (if (>= (ai_living_count "group_3kiva_troopers") 1)
        (begin
            (wake md_3kiva_troopers_evac)
            (cs_face true "ps_3kiva_falcon02_evac03/face01")
            (cs_vehicle_speed 0.1)
            (cs_fly_to "ps_3kiva_falcon02_evac03/land02" 1)
            (sleep_until 
                (begin
                    (ai_vehicle_enter "3kiva_troopers_bsp03" (ai_vehicle_get ai_current_actor) none)
                    (f_all_squad_in_vehicle "group_3kiva_troopers" ai_current_squad)
                )
                30
                1000
            )
            (sleep 50)
            (ai_vehicle_enter_immediate "3kiva_troopers_bsp03" (ai_vehicle_get ai_current_actor) none)
            (print "troopers loaded")
            (cs_vehicle_speed 1)
            (cs_face false "ps_3kiva_falcon02_evac03/face01")
        )
    )
    (cs_fly_by "ps_3kiva_falcon02_evac03/flyby02")
    (cs_fly_by "ps_3kiva_falcon02_evac03/flyby03")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script command_script void cs_3kiva_falcon_evac_finish
    (cs_vehicle_speed 0.1)
    (wake md_3kiva_jun_evac)
    (ai_vehicle_enter "group_carter" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24)
    (ai_vehicle_enter "group_jorge" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23)
    (if (>= (game_coop_player_count) 3)
        (ai_vehicle_enter "group_carter" (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30)
    )
    (sleep 60)
    (f_blip_object_offset (ai_vehicle_get ai_current_actor) blip_default 1)
    (sleep_forever)
)

(script command_script void cs_3kiva_falcon_evac_exit
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 0.7)
    (cs_face true "ps_air_3kiva_falcon_evac/3kiva_exit01")
    (if (= 3kiva_bsp 2)
        (cs_run_command_script ai_current_actor cs_3kiva_falcon_evac_exit_02)
        (if (= 3kiva_bsp 3)
            (cs_run_command_script ai_current_actor cs_3kiva_falcon_evac_outpost)
        )
    )
)

(script command_script void cs_3kiva_falcon_evac_exit_02
    (soft_ceiling_enable "all" false)
    (soft_ceiling_enable "falcon_ride" true)
    (print "cs_3kiva_falcon_evac_exit_02")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_speed 0.7)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva02_evac_exit02")
    (cs_vehicle_speed 1.5)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva02_evac_exit03")
    (cs_run_command_script ai_current_actor cs_3kiva_falcon_evac_outpost)
)

(script command_script void cs_3kiva_falcon_evac_outpost
    (print "cs_3kiva_falcon_evac_outpost")
    (soft_ceiling_enable "all" false)
    (soft_ceiling_enable "falcon_ride" true)
    (cs_enable_pathfinding_failsafe true)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva_exit" 10)
    (cs_face false "ps_air_3kiva_falcon_evac/3kiva_exit01")
    (cs_attach_to_spline "spline_falcon")
    (cs_vehicle_speed 0.8)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva_exit01")
    (cs_attach_to_spline "")
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva_exit02")
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva_exit03")
    (cs_vehicle_speed 0.6)
    (cs_attach_to_spline "spline_falcon02")
    (cs_fly_to "ps_air_3kiva_falcon_evac/3kiva_exit04")
    (set g_outpost_ext_obj_control 10)
    (cs_attach_to_spline "")
    (cs_vehicle_speed 0.1)
    (cs_fly_to_and_face "ps_air_3kiva_falcon_evac/3kiva_exit_unload" "ps_air_3kiva_falcon_evac/3kiva_exit_face" 1)
    (soft_ceiling_enable "player_blocker_end" true)
    (soft_ceiling_enable "falcon_ride" false)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29 true)
    (ai_set_objective "group_carter" "obj_outpost_ext_hum")
    (ai_set_objective "group_jorge" "obj_outpost_ext_hum")
    (sleep 10)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 false true)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 26 false true)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29 false true)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 28 false true)
    (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30 false true)
    (if (game_is_cooperative)
        (begin
            (unit_exit_vehicle player0)
            (unit_exit_vehicle player1)
            (unit_exit_vehicle player2)
            (unit_exit_vehicle player3)
        )
    )
    (sleep_until (not (any_players_in_vehicle)) 5)
    (wake rain_outpost_start)
    (game_save)
    (if (not (volume_test_objects "vol_outpost_ext" (ai_get_object "group_carter")))
        (object_teleport_to_ai_point (ai_get_object "group_carter") "ps_air_3kiva_falcon_evac/3kiva_exit_face")
    )
    (if (not (volume_test_objects "vol_outpost_ext" (ai_get_object "group_emile")))
        (object_teleport_to_ai_point (ai_get_object "group_emile") "ps_air_3kiva_falcon_evac/3kiva_exit_face")
    )
    (sleep 100)
    (wake falcon_weapon_drop_players_end)
    (cs_vehicle_speed 0.8)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva_exit10" 2)
    (cs_face false "ps_air_3kiva_falcon_evac/3kiva_exit_face")
    (cs_vehicle_speed 1)
    (cs_fly_by "ps_air_3kiva_falcon_evac/3kiva_exit11")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void falcon_weapon_drop_players
    (wake falcon_weapon_drop_player0)
    (wake falcon_weapon_drop_player1)
    (wake falcon_weapon_drop_player2)
    (wake falcon_weapon_drop_player3)
)

(script dormant void falcon_weapon_drop_players_end
    (sleep_forever falcon_weapon_drop_player0)
    (sleep_forever falcon_weapon_drop_player1)
    (sleep_forever falcon_weapon_drop_player2)
    (sleep_forever falcon_weapon_drop_player3)
)

(script dormant void falcon_weapon_drop_player0
    (falcon_weapon_drop (ai_vehicle_get_from_squad "intro_falcon_01" 0) (player0))
)

(script dormant void falcon_weapon_drop_player1
    (falcon_weapon_drop (ai_vehicle_get_from_squad "intro_falcon_01" 0) (player1))
)

(script dormant void falcon_weapon_drop_player2
    (falcon_weapon_drop (ai_vehicle_get_from_squad "intro_falcon_01" 0) (player2))
)

(script dormant void falcon_weapon_drop_player3
    (falcon_weapon_drop (ai_vehicle_get_from_squad "intro_falcon_01" 0) (player3))
)

(script static void (falcon_weapon_drop (vehicle falcon, unit player_num))
    (sleep_until 
        (begin
            (sleep_until (vehicle_test_seat_unit_list falcon none player_num) 1)
            (unit_lower_weapon player_num 30)
            (sleep_until (not (vehicle_test_seat_unit_list falcon none player_num)) 1)
            (unit_raise_weapon player_num 30)
            false
        )
    )
)

(script dormant void outpost_ext_start
    (print "outpost_ext start")
    (ai_place "spartan_kat/outpost")
    (ai_place "spartan_emile/outpost")
    (set obj_kat (ai_get_unit "spartan_kat/outpost"))
    (set obj_emile (ai_get_unit "spartan_emile/outpost"))
    (ai_cannot_die "group_spartans" true)
    (wake kat_outpost_waypoint)
    (wake emile_outpost_waypoint)
    (ai_set_objective "group_kat" "obj_outpost_ext_hum")
    (ai_set_objective "group_emile" "obj_outpost_ext_hum")
    (ai_place "outpost_extinit_grunts01")
    (ai_place "outpost_extinit_jacks01")
    (ai_place "outpost_extinit_jacks02")
    (ai_set_targeting_group "group_outpost_ext_cov" 2)
    (ai_set_targeting_group "spartan_kat" 2)
    (ai_set_targeting_group "spartan_emile" 2)
    (wake music_outpost_ext)
    (device_set_position_immediate "dm_outpost_door01" 0)
    (vehicle_set_player_interaction "v_outpost_civ01" none false false)
    (object_dynamic_simulation_disable "v_outpost_civ01" true)
    (vehicle_set_player_interaction "v_outpost_civ02" none false false)
    (object_dynamic_simulation_disable "v_outpost_civ02" true)
    (game_save)
    (sleep_until (not (any_players_in_vehicle)) 5)
    (game_safe_to_respawn true)
    (ai_set_targeting_group "group_outpost_ext_cov" 65535)
    (ai_set_targeting_group "spartan_kat" 65535)
    (ai_set_targeting_group "spartan_emile" 65535)
    (set g_ui_obj_control 60)
    (game_insertion_point_unlock 4)
    (ai_vehicle_reserve "v_outpost_civ01" true)
    (ai_vehicle_reserve "v_outpost_civ02" true)
    (game_save)
    (sleep_until (<= (ai_living_count "obj_outpost_ext_cov") 3))
    (sleep_until (or (volume_test_players "tv_outpost_ext_control") (<= (ai_living_count "obj_outpost_ext_cov") 0)) 5)
    (if (volume_test_players "tv_outpost_ext_control")
        (begin
            (ai_bring_forward "group_carter" 10)
            (ai_bring_forward "group_jorge" 10)
        )
        (sleep_until (volume_test_players "tv_outpost_ext_control") 5 100)
    )
    (wake md_outpost_ext01)
    (sleep 100)
    (wake outpost_fork_start)
    (game_save)
    (sleep_until (>= g_outpost_ext_obj_control 30))
    (sleep_until (<= (device_get_position "dm_outpost_blastdoor") 0.45) 1)
    (set g_outpost_ext_obj_control 40)
    (zone_set_trigger_volume_enable "begin_zone_set:zoneset_outpost_interior" true)
    (kill_volume_enable "kill_tv_outpost_ext")
    (ai_set_targeting_group "obj_outpost_ext_cov" 2)
    (sleep 60)
    (thespian_performance_kill_by_ai "group_spartans")
    (sleep 20)
    (thespian_performance_setup_and_begin "vig_outpost_rally" "" 0)
    (wake chapter_03_start)
    (ai_disregard (ai_actors "obj_outpost_ext_cov") true)
    (sleep_until (= (device_get_position "dm_outpost_blastdoor") 0))
    (sleep 60)
    (switch_zone_set "zoneset_outpost_interior")
    (sleep_until (= (current_zone_set_fully_active) 7) 1)
    (sleep_until (>= g_outpost_ext_obj_control 50) 1 200)
    (device_set_position "dm_outpost_door01" 1)
    (sleep 40)
    (thespian_performance_kill_by_ai "group_spartans")
    (ai_set_objective "group_carter" "obj_outpost_int_hum")
    (ai_set_objective "group_kat" "obj_outpost_int_hum")
    (ai_set_objective "group_jorge" "obj_outpost_int_hum")
    (game_save)
)

(script dormant void outpost_spartans_all_fallback
    (wake outpost_carter_fallback)
    (wake outpost_kat_fallback)
    (wake outpost_emile_fallback)
    (wake outpost_jorge_fallback)
)

(script dormant void outpost_carter_fallback
    (outpost_spartan_fallback "group_carter")
)

(script dormant void outpost_kat_fallback
    (outpost_spartan_fallback "group_kat")
)

(script dormant void outpost_emile_fallback
    (outpost_spartan_fallback "group_emile")
)

(script dormant void outpost_jorge_fallback
    (outpost_spartan_fallback "group_jorge")
)

(script static void (outpost_spartan_fallback (ai spartan))
    (sleep_until 
        (begin
            (sleep_until (not (volume_test_object "tv_outpost_ext_control" spartan)))
            (if (>= g_outpost_ext_obj_control 40)
                (sleep_forever)
            )
            (ai_set_targeting_group spartan 2)
            (cs_run_command_script spartan cs_outpost_spartan_fallback)
            (sleep_until (volume_test_object "tv_outpost_ext_control" spartan))
            (ai_set_targeting_group spartan 65535)
            (>= g_outpost_ext_obj_control 40)
        )
        5
    )
)

(script command_script void cs_outpost_spartan_fallback
    (cs_enable_pathfinding_failsafe true)
    (cs_go_to "pts_outpost_ext/spartan_fallback" 0.5)
)

(script dormant void outpost_blastdoor_start
    (sleep_until (>= g_outpost_ext_obj_control 20) 30)
    (sleep 140)
    (ai_bring_forward "group_carter" 10)
    (ai_bring_forward "group_emile" 10)
    (ai_bring_forward "group_jorge" 10)
    (sleep_until 
        (begin
            (sleep_until (and (volume_test_object "tv_outpost_ext_control" obj_carter) (volume_test_object "tv_outpost_ext_control" obj_jorge) (volume_test_object "tv_outpost_ext_control" obj_emile)) 30 500)
            (wake outpost_spartans_all_fallback)
            (print "spartans in volume or timeout")
            (sleep_until (volume_test_players_all "tv_outpost_ext_control"))
            (print "blastdoor:shutting")
            (device_set_power "dm_outpost_blastdoor" 1)
            (device_set_position "dm_outpost_blastdoor" 0)
            (sleep_until (or (not (volume_test_players_all "tv_outpost_ext_control")) (<= (device_get_position "dm_outpost_blastdoor") 0.6)) 1)
            (print "blastdoor:reopen")
            (if (not (<= (device_get_position "dm_outpost_blastdoor") 0.6))
                (device_set_position "dm_outpost_blastdoor" 0.8)
                (wake md_outpost_ext_fallback_b)
            )
            (<= (device_get_position "dm_outpost_blastdoor") 0.6)
        )
    )
    (print "blastdoor:shunt")
    (object_create "cr_shunt_outpostdoor")
    (sleep_until (<= (device_get_position "dm_outpost_blastdoor") 0.45) 1)
    (sound_impulse_start "sound\levels\solo\m10\sound_scenery\blast_doors\blast_door_oneshot\blast_door_close_mono" "dm_outpost_blastdoor" 1)
    (sound_impulse_start "sound\levels\solo\m10\sound_scenery\blast_doors\blast_door_oneshot\blast_door_close_surr" "dm_outpost_blastdoor" 1)
    (sound_looping_stop "sound\levels\solo\m10\sound_scenery\blast_doors\blast_door_loop\blast_door_loop")
    (sleep_until (= (device_get_position "dm_outpost_blastdoor") 0) 5)
    (print "door:poweroff")
    (device_set_power "dm_outpost_blastdoor" 0)
)

(script dormant void outpost_fork_start
    (print "outpost_fork")
    (ai_place "outpost_fork")
    (object_set_scale (ai_vehicle_get_from_squad "outpost_fork" 0) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "outpost_fork" 0) 1 200)
    (sleep 750)
    (print "outpost_fork02")
    (ai_place "outpost_fork02")
    (object_set_scale (ai_vehicle_get_from_squad "outpost_fork02" 0) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "outpost_fork02" 0) 1 200)
    (sleep 600)
    (sleep_until (<= (ai_living_count "outpost_fork02") 2))
    (sleep_until (<= (ai_living_count "obj_outpost_ext_cov") 14))
    (print "outpost_fork03")
    (ai_place "outpost_fork03")
    (object_set_scale (ai_vehicle_get_from_squad "outpost_fork03" 0) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "outpost_fork03" 0) 1 200)
    (sleep 400)
    (wake md_outpost_ext_fallback)
    (wake outpost_blastdoor_start)
    (sleep 90)
    (ai_place "outpost_banshees")
    (object_set_scale (ai_vehicle_get_from_squad "outpost_banshees" 0) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "outpost_banshees" 1) 0.01 0)
    (object_set_scale (ai_vehicle_get_from_squad "outpost_banshees" 0) 1 200)
    (object_set_scale (ai_vehicle_get_from_squad "outpost_banshees" 1) 1 200)
    (sleep_until (<= (ai_living_count "obj_outpost_ext_cov") 0))
    (game_save)
)

(script command_script void cs_outpost_fork_entry
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "outpost_ext_cov01" none "outpost_ext_grunts01" none)
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_boost true)
    (cs_fly_by "pts_outpost_ext/fork_entry01aa")
    (cs_vehicle_boost false)
    (cs_vehicle_speed 0.6)
    (cs_fly_by "pts_outpost_ext/fork_entry01a" 1)
    (cs_vehicle_speed 0.4)
    (begin_random_count
        1
        (cs_fly_to_and_face "pts_outpost_ext/fork_entry01b" "pts_outpost_ext/face01" 1)
        (cs_fly_to_and_face "pts_outpost_ext/fork_entry01b" "pts_outpost_ext/face02" 1)
    )
    (cs_fly_to "pts_outpost_ext/fork_entry01b" 1)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (cs_run_command_script ai_current_actor cs_outpost_fork_exit)
)

(script command_script void cs_outpost_fork02_entry
    (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "outpost_ext_jacks02" "outpost_ext_cov02" "outpost_ext_skirms02" "outpost_ext_grunts02")
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_boost true)
    (cs_fly_by "pts_outpost_ext/fork_entry01aa")
    (cs_vehicle_boost false)
    (cs_vehicle_speed 0.6)
    (cs_fly_by "pts_outpost_ext/fork_entry01a")
    (cs_vehicle_speed 0.4)
    (begin_random_count
        1
        (cs_fly_to_and_face "pts_outpost_ext/fork_entry01b" "pts_outpost_ext/face01" 2)
        (cs_fly_to_and_face "pts_outpost_ext/fork_entry01b" "pts_outpost_ext/face02" 2)
    )
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (sleep_until (>= (ai_living_count "outpost_fork03") 1) 30 400)
    (cs_run_command_script ai_current_actor cs_outpost_fork_exit)
)

(script command_script void cs_outpost_fork03_entry
    (if (= (game_difficulty_get) legendary)
        (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "outpost_ext_skirms03" "outpost_ext_grunts03" "outpost_ext_jacks03" "outpost_ext_cov03_legendary")
        (f_load_fork (ai_vehicle_get ai_current_actor) "dual" "outpost_ext_jacks03" "outpost_ext_cov03" "outpost_ext_skirms03" "outpost_ext_grunts03")
    )
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_boost true)
    (cs_fly_by "pts_outpost_ext/fork_entry01aa")
    (cs_vehicle_boost false)
    (cs_vehicle_speed 0.6)
    (cs_fly_by "pts_outpost_ext/fork_entry01a")
    (cs_vehicle_speed 0.4)
    (cs_fly_to_and_face "pts_outpost_ext/fork_entry01b" "pts_outpost_ext/face01" 2)
    (f_unload_fork (ai_vehicle_get ai_current_actor) "dual")
    (cs_fly_by "pts_outpost_ext/fork_hover01")
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_enable_moving true)
    (sleep_until (<= (ai_living_count "obj_outpost_ext_cov") 7) 150)
    (cs_run_command_script ai_current_actor cs_outpost_fork_exit)
)

(script command_script void cs_outpost_banshee_entry
    (cs_vehicle_boost true)
    (ai_prefer_target_ai ai_current_actor "group_spartans" true)
    (sleep 230)
    (cs_vehicle_boost false)
    (cs_shoot_secondary_trigger true)
    (sleep 20)
    (begin_random
        (cs_shoot_point true "ps_outpost_banshees/p0")
        (cs_shoot_point true "ps_outpost_banshees/p1")
        (cs_shoot_point true "ps_outpost_banshees/p2")
        (cs_shoot_point true "ps_outpost_banshees/p3")
        (cs_shoot_point true "ps_outpost_banshees/p4")
    )
    (sleep 40)
)

(script command_script void cs_outpost_fork_exit
    (cs_enable_pathfinding_failsafe true)
    (cs_vehicle_boost true)
    (cs_fly_to "pts_outpost_ext/fork_exit01a")
    (cs_fly_to "pts_outpost_ext/fork_exit01b")
    (f_vehicle_scale_destroy (ai_vehicle_get ai_current_actor))
)

(script dormant void outpost_int_start
    (print "enc:outpost_exterior")
    (sleep_until (volume_test_players "vol_outpost_ext_exit") 5)
    (set g_outpost_int_obj_control 10)
    (wake outpost_hud_body_start)
    (ai_place "outpost_int_trooper")
    (thespian_performance_setup_and_begin "vig_outpost_trooper" "" 0)
    (object_cannot_take_damage (ai_get_object "outpost_int_trooper"))
    (wake md_outpost_nightvision)
    (wake outpost_concussion_training)
    (if (not (game_is_cooperative))
        (wake training_health)
    )
    (ai_disposable "obj_outpost_ext_cov" true)
    (device_set_position_immediate "dm_outpost_door03" 0)
    (game_save)
    (sleep_until (volume_test_players "tv_body_search") 1)
    (cinematic_enter "010lc_bodysearch" true)
    (if (any_players_in_vehicle)
        (begin
            (unit_exit_vehicle player0)
            (unit_exit_vehicle player1)
            (unit_exit_vehicle player2)
            (unit_exit_vehicle player3)
            (sleep_until (not (any_players_in_vehicle)) 1)
        )
    )
    (object_destroy_folder "cr_outpost_ext")
    (object_destroy "v_outpost_ext_forklift")
    (object_destroy "sc_sorvad")
    (object_destroy "sc_sorvads_blood")
    (device_set_position "dm_outpost_door02" 0)
    (object_hide player0 true)
    (object_hide player1 true)
    (object_hide player2 true)
    (object_hide player3 true)
    (ai_erase_all)
    (object_destroy "dm_outpost_door03")
    (sleep 1)
    (if (or editor_cinematics (not (editor_mode)))
        (begin
            (print "cinematic: 010lc_bodysearch")
            (f_play_cinematic_advanced "010lc_bodysearch" "zoneset_outpost_interior" "zoneset_end_cinematic")
        )
    )
    (object_create "dm_outpost_door03")
    (device_set_position_immediate "dm_outpost_door03" 0)
    (object_teleport_to_ai_point player0 "ps_teleports/outpost_cin_exit00")
    (object_teleport_to_ai_point player1 "ps_teleports/outpost_cin_exit01")
    (object_teleport_to_ai_point player2 "ps_teleports/outpost_cin_exit02")
    (object_teleport_to_ai_point player3 "ps_teleports/outpost_cin_exit03")
    (unit_add_equipment player0 "profile_outpost" true false)
    (unit_add_equipment player1 "profile_outpost" true false)
    (unit_add_equipment player2 "profile_outpost" true false)
    (unit_add_equipment player3 "profile_outpost" true false)
    (ai_place "spartan_jorge/outpost02")
    (set obj_jorge (ai_get_unit "spartan_jorge/outpost"))
    (ai_cannot_die "group_spartans" true)
    (switch_zone_set "zoneset_end_cinematic")
    (cinematic_exit "010lc_bodysearch" true)
    (wake music_outpost_int)
    (set g_ui_obj_control 90)
    (ai_place "outpost_int_elites01")
    (ai_place "outpost_int_cov01")
    (ai_place "outpost_int_cov02")
    (cs_run_command_script "outpost_int_cov01" cs_interior_cov_hall01)
    (cs_run_command_script "outpost_int_cov02" cs_interior_cov_hall01)
    (cs_run_command_script (object_get_ai obj_jorge) abort_cs)
    (game_save_immediate)
    (sleep_until (volume_test_players "vol_outpost_combat") 5)
    (game_save)
    (sleep_until (volume_test_players "vol_outpost_int_start02"))
    (thespian_performance_setup_and_begin "vig_outpost_elite_intro" "" 0)
    (test_glowstick02)
    (sleep_until (volume_test_players "vol_outpost_int_back01") 5)
    (ai_place "outpost_int_jacks02")
    (ai_place "outpost_int_grunts02")
    (game_save)
    (set g_music01 true)
    (sleep_until (volume_test_players "vol_outpost_int_back02") 5)
    (ai_place "outpost_int_cov03")
    (game_save)
    (wake outpost_servers)
    (sleep_until (volume_test_players "vol_outpost_int_back_hall01") 5)
    (game_save)
    (ai_bring_forward "group_jorge" 4)
    (wake md_outpost_flush)
    (if (>= (game_coop_player_count) 2)
        (ai_place "outpost_int_elites02a")
    )
    (ai_place "outpost_int_elite_leader")
    (ai_place "outpost_final_grunts01")
    (sleep 20)
    (wake outpost_server_door_close)
    (sleep_until (<= (ai_living_count "obj_outpost_int_cov") 0))
    (set g_music03 true)
    (wake md_outpost_finished)
    (device_set_power "dc_outpost_end" 1)
    (sleep_until (> (device_get_position "dc_outpost_end") 0) 1)
    (wake outpost_servers_end)
    (object_destroy "sc_outpost_console")
    (object_destroy "sc_outpost_computer")
    (if (or editor_cinematics (not (editor_mode)))
        (f_end_mission "010ld_wintercontingency" "zoneset_end_cinematic02")
    )
    (game_won)
)

(script dormant void outpost_server_door_close
    (sleep_until (volume_test_players "vol_outpost_int_rear02") 5)
    (device_set_power "dm_outpost_server_door_init" 1)
    (device_set_position "dm_outpost_server_door_init" 0)
    (sleep_until (= (device_get_position "dm_outpost_server_door_init") 0))
    (if (volume_test_object "kill_tv_outpost" player0)
        (object_teleport_to_ai_point player0 "ps_teleports/outpost_server00")
    )
    (if (volume_test_object "kill_tv_outpost" player1)
        (object_teleport_to_ai_point player1 "ps_teleports/outpost_server01")
    )
    (if (volume_test_object "kill_tv_outpost" player2)
        (object_teleport_to_ai_point player2 "ps_teleports/outpost_server02")
    )
    (if (volume_test_object "kill_tv_outpost" player3)
        (object_teleport_to_ai_point player3 "ps_teleports/outpost_server03")
    )
    (kill_volume_enable "kill_tv_outpost")
)

(script dormant void outpost_hud_body_start
    (branch (volume_test_players "tv_body_search") (hud_unblip_all))
    (sleep_until (volume_test_players "vol_outpost_int_bodyblip") 5)
    (sleep_until (or (objects_can_see_object player0 "sc_hud_outpost_body" 25) (objects_can_see_object player1 "sc_hud_outpost_body" 25) (objects_can_see_object player2 "sc_hud_outpost_body" 25) (objects_can_see_object player3 "sc_hud_outpost_body" 25)) 1)
    (wake md_outpost_search)
    (f_blip_object "sc_hud_outpost_body" blip_default)
)

(script dormant void outpost_concussion_training
    (sleep_until (or (unit_has_weapon player0 "objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon") (unit_has_weapon player1 "objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon") (unit_has_weapon player2 "objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon") (unit_has_weapon player3 "objects\weapons\rifle\concussion_rifle\concussion_rifle.weapon")) 5)
    (sleep 10)
    (f_hud_training_new_weapon)
)

(script static void outpost_elite_berserk
    (ai_berserk "obj_outpost_int_cov/elite_last" true)
)

(script command_script void cs_elite01
    (cs_abort_on_damage true)
    (sleep_until (volume_test_players "vol_outpost_int_start02") 1)
)

(script command_script void cs_interior_cov_hall01
    (sleep_until (volume_test_players "vol_outpost_int_start02") 1)
    (sleep 40)
)

(script command_script void cs_interior_cov_hall01_queue
    (print "queued cs go")
)

(script static boolean outpost_int_elite_back_prep
    (and (>= (object_get_shield (object_get_ai "outpost_int_elites01")) 0.7) (>= (ai_task_count "obj_outpost_int_cov/gate_front") 5))
)

(script dormant void outpost_servers
    (device_set_position "dm_server04" 0.1)
    (device_set_position "dm_server02" 0.3)
    (device_set_position "dm_server03" 0)
    (device_set_position "dm_server06" 0.2)
    (sleep_until (volume_test_players "vol_outpost_int_back_hall01") 5)
    (device_set_position "dm_server06" 0)
    (sleep 10)
    (device_set_position "dm_server07" 0)
    (sleep 14)
    (device_set_position "dm_server11" 0.3)
    (sleep 9)
    (device_set_position "dm_server13" 0.3)
    (sleep 35)
    (device_set_position "dm_server02" 1)
    (sleep 3)
    (device_set_position "dm_server03" 1)
    (sleep 9)
    (device_set_position "dm_server04" 1)
    (sleep 9)
    (device_set_position "dm_server06" 0.1)
    (sleep 170)
    (sleep_until 
        (begin
            (begin_random_count
                1
                (device_set_position "dm_server06" (real_random_range 0 0.3))
                (device_set_position "dm_server07" (real_random_range 0 0.3))
                (device_set_position "dm_server10" 0)
                (device_set_position "dm_server10" 1)
                (device_set_position "dm_server11" (real_random_range 0 0.3))
            )
            (sleep (random_range 20 50))
            false
        )
    )
)

(script dormant void outpost_servers_end
    (sleep_forever outpost_servers)
    (device_set_position "dm_server01" 1)
    (device_set_position "dm_server02" 1)
    (device_set_position "dm_server03" 1)
    (device_set_position "dm_server04" 1)
    (device_set_position "dm_server05" 1)
    (device_set_position "dm_server06" 1)
    (device_set_position "dm_server07" 1)
    (device_set_position "dm_server08" 1)
    (device_set_position "dm_server09" 1)
    (device_set_position "dm_server10" 1)
    (device_set_position "dm_server11" 1)
    (device_set_position "dm_server12" 1)
    (device_set_position "dm_server13" 1)
    (device_set_position "dm_server14" 1)
    (device_set_position "dm_server15" 1)
    (device_set_position "dm_server16" 1)
)

(script command_script void cs_bob_elite
    (sleep_until (or (bob_will_run_from_player player0 ai_current_actor) (bob_will_run_from_player player1 ai_current_actor) (bob_will_run_from_player player2 ai_current_actor) (bob_will_run_from_player player3 ai_current_actor) (>= 3kiva_troopers_bsp 2)))
    (cs_enable_moving true)
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_enable_dialogue true)
    (print "special elite spotted")
    (sleep (* 30 35))
    (ai_set_active_camo ai_current_actor true)
    (sleep 90)
    (print "special fail")
    (sleep 1)
    (ai_erase ai_current_actor)
)

(script static boolean (bob_will_run_from_player (player player_num, ai bob))
    (and (or (or (> (object_get_recent_shield_damage (ai_get_object bob)) 0) (> (object_get_recent_body_damage (ai_get_object bob)) 0)) (< (objects_distance_to_object player_num bob) 25)) (= (player_is_in_game player_num) true))
)

(script continuous void recycle_all_continuous
    (sleep_until 
        (begin
            (if (volume_test_players "vol_recycle_barn")
                (recycle_barn_lite_go)
                (recycle_barn_go)
            )
            (if (volume_test_players "vol_recycle_meadow")
                (recycle_meadow_lite_go)
                (recycle_meadow_go)
            )
            (if (volume_test_players "vol_recycle_3kiva")
                (recycle_3kiva_lite_go)
                (recycle_3kiva_go)
            )
            (if (volume_test_players "vol_recycle_3kiva01")
                (recycle_3kiva01_lite_go)
                (recycle_3kiva01_go)
            )
            (if (volume_test_players "vol_recycle_3kiva02")
                (recycle_3kiva02_lite_go)
                (recycle_3kiva02_go)
            )
            (if (volume_test_players "vol_recycle_3kiva03")
                (recycle_3kiva03_lite_go)
                (recycle_3kiva03_go)
            )
            (if (volume_test_players "vol_recycle_cliffside")
                (recycle_cliffside_lite_go)
                (recycle_cliffside_go)
            )
            (if (volume_test_players "vol_recycle_outpost")
                (recycle_outpost_lite_go)
                (recycle_outpost_go)
            )
            false
        )
        400
    )
)

(script static void recycle_barn_lite_go
    (add_recycling_volume "vol_recycle_barn" 20 5)
)

(script static void recycle_barn_go
    (add_recycling_volume "vol_recycle_barn" 0 0)
)

(script static void recycle_meadow_lite_go
    (add_recycling_volume "vol_recycle_meadow" 20 5)
)

(script static void recycle_meadow_go
    (add_recycling_volume "vol_recycle_meadow" 0 0)
)

(script static void recycle_3kiva_lite_go
    (add_recycling_volume "vol_recycle_3kiva" 30 5)
)

(script static void recycle_3kiva_go
    (add_recycling_volume "vol_recycle_3kiva" 0 0)
)

(script static void recycle_3kiva01_lite_go
    (add_recycling_volume "vol_recycle_3kiva01" 20 5)
)

(script static void recycle_3kiva01_go
    (add_recycling_volume "vol_recycle_3kiva01" 0 0)
)

(script static void recycle_3kiva02_lite_go
    (add_recycling_volume "vol_recycle_3kiva02" 20 5)
)

(script static void recycle_3kiva02_go
    (add_recycling_volume "vol_recycle_3kiva02" 0 0)
)

(script static void recycle_3kiva03_lite_go
    (add_recycling_volume "vol_recycle_3kiva03" 20 5)
)

(script static void recycle_3kiva03_go
    (add_recycling_volume "vol_recycle_3kiva03" 0 0)
)

(script static void recycle_cliffside_lite_go
    (add_recycling_volume "vol_recycle_3kiva" 20 5)
)

(script static void recycle_cliffside_go
    (add_recycling_volume "vol_recycle_cliffside" 0 0)
)

(script static void recycle_outpost_lite_go
    (add_recycling_volume "vol_recycle_outpost" 20 5)
)

(script static void recycle_outpost_go
    (add_recycling_volume "vol_recycle_outpost" 0 0)
)

(script dormant void object_control
    (if (and (editor_mode) (not editor_object_management))
        (begin
            (print "(sleep_forever object_control)")
            (sleep_forever)
        )
    )
    (print "object_control")
    (objects_destroy_all)
    (if (= (current_zone_set) 0)
        (objects_manage_0)
    )
    (sleep_until (>= (current_zone_set_fully_active) 1) 1)
    (objects_manage_1)
    (sleep_until (>= (current_zone_set_fully_active) 2) 1)
    (objects_manage_2)
    (sleep_until (>= (current_zone_set_fully_active) 3) 1)
    (objects_manage_3)
    (sleep_until (>= (current_zone_set_fully_active) 4) 1)
    (objects_manage_4)
    (sleep_until (>= (current_zone_set_fully_active) 5) 1)
    (objects_manage_5)
    (sleep_until (>= (current_zone_set_fully_active) 6) 1)
    (objects_manage_6)
    (sleep_until (>= (current_zone_set_fully_active) 7) 1)
    (objects_manage_7)
    (sleep_until (>= (current_zone_set_fully_active) 8) 1)
    (objects_manage_8)
)

(script static void objects_manage_0
    (object_create_folder "sc_windmills01")
    (print "no objects to destroy")
)

(script static void objects_manage_1
    (object_create_folder "sc_1stbowl")
    (object_create_folder "cr_1stbowl")
    (print "no objects to destroy")
)

(script static void objects_manage_2
    (object_create_folder "sc_barn")
    (object_create_folder "cr_barn")
    (sleep 1)
    (print "no objects to destroy")
    (setup_barn_bodies)
)

(script static void objects_manage_3
    (print "no objects to create")
    (print "no objects to destroy")
)

(script static void objects_manage_4
    (object_destroy_folder "sc_1stbowl")
    (object_destroy_folder "cr_1stbowl")
    (sleep 1)
    (object_create_folder "sc_3kiva")
    (object_create_folder "cr_3kiva")
    (object_create_folder "sc_windmills02")
)

(script static void objects_manage_5
    (object_destroy_folder "sc_barn")
    (object_destroy_folder "cr_barn")
    (object_destroy_folder "sc_windmills01")
    (sleep 1)
    (object_create_folder "sc_3kiva02")
    (object_create_folder "cr_3kiva01")
    (object_create_folder "cr_3kiva02")
    (if (not (>= (game_coop_player_count) 3))
        (object_create_folder "cr_3kiva02_no3coop")
        (object_destroy_folder "cr_3kiva02_no3coop")
    )
    (object_create_folder "cr_3kiva03")
    (sleep 1)
    (setup_3kiva_bodies)
)

(script static void objects_manage_6
    (object_destroy_folder "cr_3kiva01")
    (object_destroy_folder "cr_3kiva02")
    (object_destroy_folder "cr_3kiva02_no3coop")
    (object_destroy_folder "cr_3kiva03")
    (object_destroy_folder "sc_windmills02")
    (sleep 1)
    (object_create_folder "sc_outpost")
    (object_create_folder "cr_outpost")
    (object_create_folder "cr_outpost_ext")
    (object_create_folder "v_outpost")
    (object_create_folder "sc_windmills01")
    (sleep 1)
)

(script static void objects_manage_7
    (object_create_folder "sc_outpost02")
)

(script static void objects_manage_8
    (object_create_folder "sc_outpost03")
    (sleep 1)
    (setup_outpost_bodies)
)

(script static void objects_destroy_all
    (print "destroying all objects")
    (object_destroy_folder "sc_1stbowl")
    (object_destroy_folder "cr_1stbowl")
    (object_destroy_folder "sc_barn")
    (object_destroy_folder "cr_barn")
    (object_destroy_folder "sc_windmills01")
    (object_destroy_folder "sc_windmills02")
    (object_destroy_folder "sc_3kiva")
    (object_destroy_folder "sc_3kiva02")
    (object_destroy_folder "cr_3kiva")
    (object_destroy_folder "cr_3kiva01")
    (object_destroy_folder "cr_3kiva02")
    (object_destroy_folder "cr_3kiva02_no3coop")
    (object_destroy_folder "cr_3kiva03")
    (object_destroy_folder "sc_outpost")
    (object_destroy_folder "sc_outpost02")
    (object_destroy_folder "sc_outpost03")
    (object_destroy_folder "cr_outpost")
    (object_destroy_folder "cr_outpost_ext")
    (object_destroy_folder "v_outpost")
    (object_destroy_folder "bi_outpost")
)

(script static void setup_barn_bodies
    (print "setup_barn_bodies")
    (scenery_animation_start "sc_barn_deadmarine05" "objects\characters\marine\marine" "death_pose_2:idle:var1")
    (scenery_animation_start "sc_barn_deadmarine01" "objects\characters\marine\marine" "deadbody_02")
    (scenery_animation_start "sc_barn_deadmarine03" "objects\characters\marine\marine" "deadbody_09")
    (scenery_animation_start "sc_barn_deadciv01" "objects\characters\marine\marine" "deadbody_01")
    (scenery_animation_start "sc_barn_deadciv02" "objects\characters\marine\marine" "deadbody_02")
    (scenery_animation_start "sc_barn_deadciv03" "objects\characters\marine\marine" "deadbody_03")
    (scenery_animation_start "sc_barn_deadciv04" "objects\characters\civilian_female\civilian_female" "deadbody_01")
    (scenery_animation_start "sc_barn_deadciv05" "objects\characters\civilian_female\civilian_female" "deadbody_02")
    (scenery_animation_start "sc_barn_deadciv06" "objects\characters\civilian_female\civilian_female" "deadbody_03")
)

(script static void setup_3kiva_bodies
    (scenery_animation_start "sc_3kiva_deadciv01a" "objects\characters\civilian_female\civilian_female" "deadbody_02")
    (scenery_animation_start "sc_3kiva_deadciv01b" "objects\characters\marine\marine" "deadbody_01")
    (scenery_animation_start "sc_3kiva_deadciv01c" "objects\characters\marine\marine" "deadbody_02")
    (scenery_animation_start "sc_3kiva_deadciv02a" "objects\characters\marine\marine" "deadbody_01")
    (scenery_animation_start "sc_3kiva_deadciv03a" "objects\characters\marine\marine" "deadbody_02")
    (scenery_animation_start "sc_3kiva_deadciv03b" "objects\characters\civilian_female\civilian_female" "deadbody_02")
    (scenery_animation_start "sc_3kiva_deadciv03c" "objects\characters\civilian_female\civilian_female" "deadbody_03")
    (scenery_animation_start "sc_3kiva_deadmarine01" "objects\characters\marine\marine" "deadbody_11")
    (scenery_animation_start "sc_3kiva_deadmarine02" "objects\characters\marine\marine" "deadbody_14")
    (scenery_animation_start "sc_3kiva_deadmarine03" "objects\characters\marine\marine" "deadbody_15")
)

(script static void setup_outpost_bodies
    (scenery_animation_start "sc_outpost_deadmarine01" "objects\characters\marine\marine" "deadbody_04")
    (scenery_animation_start "sc_outpost_deadmarine02" "objects\characters\marine\marine" "deadbody_08")
    (scenery_animation_start "sc_outpost_deadmarine03" "objects\characters\marine\marine" "deadbody_06")
    (scenery_animation_start "sc_outpost_deadmarine04" "objects\characters\marine\marine" "deadbody_07")
)

(script dormant void rain_start
    (if (>= (game_coop_player_count) 3)
        (sleep_forever)
    )
    (print "rain_start")
    (weather_animate_force "light_rain_far" 1 0)
    (sleep_until (>= g_1stbowl_obj_control 20))
    (sleep_until (not (any_players_in_vehicle)))
    (weather_animate_force "light_rain" 1 5)
    (sleep_until (volume_test_players "vol_barn_start"))
    (wake rain_barn_start)
)

(script dormant void rain_barn_start
    (if (>= (game_coop_player_count) 3)
        (sleep_forever)
    )
    (weather_animate_force "heavy_rain" 1 5)
    (print "rain_barn_start")
    (if (game_is_cooperative)
        (begin
            (sleep_until (volume_test_players "tv_barn_bloodtrail02"))
            (weather_animate_force "off" 1 3)
        )
    )
    (sleep_until (volume_test_players "tv_weather03"))
    (sleep (random_range 100 200))
    (wake rain_3kiva_start)
)

(script dormant void rain_3kiva_start
    (if (>= (game_coop_player_count) 3)
        (sleep_forever)
    )
    (branch 3kiva_troopers_spoted (branch_kill))
    (print "rain_3kiva_start")
    (sleep_until 
        (begin
            (weather_animate_force "light_rain" 1 (random_range 5 15))
            (sleep (random_range (* 30 20) (* 30 30)))
            (weather_animate_force "heavy_rain" 1 (random_range 5 15))
            (sleep (random_range (* 30 5) (* 30 25)))
            (weather_animate_force "light_rain" 1 (random_range 5 15))
            (sleep (random_range (* 30 15) (* 30 20)))
            (weather_animate_force "off" 1 (random_range 5 15))
            (sleep (random_range (* 30 15) (* 30 30)))
            false
        )
    )
)

(script dormant void rain_3kiva_defend_start
    (if (>= (game_coop_player_count) 3)
        (sleep_forever)
    )
    (branch (>= g_3kiva_obj_control 10) (branch_kill))
    (print "rain_3kiva_defend_start")
    (sleep (random_range (* 30 5) (* 30 25)))
    (weather_animate_force "light_rain" 1 (random_range 5 15))
)

(script dormant void rain_3kiva_evac_start
    (if (>= (game_coop_player_count) 3)
        (sleep_forever)
    )
    (print "rain_3kiva_evac_start")
    (weather_animate_force "light_rain_far" 1 0)
)

(script dormant void rain_outpost_start
    (if (>= (game_coop_player_count) 3)
        (sleep_forever)
    )
    (print "rain_3kiva_evac_start")
    (weather_animate_force "light_rain" 1 (random_range 5 15))
    (sleep (random_range (* 30 20) (* 30 30)))
    (weather_animate_force "heavy_rain" 1 (random_range 5 15))
    (sleep_until (>= g_outpost_int_obj_control 10))
    (weather_animate_force "off" 1 5)
)

(script dormant void md_1stbowl_hover
    (sleep 44)
    (set g_1stbowl_obj_control 5)
    (sleep 40)
    (print "carter: shoot-down attempts are likely, so keep your distance.")
    (f_md_ai_play 20 (object_get_ai obj_carter) m10_0080)
    (print "pilot2: yes sir!")
    (f_md_object_play 40 none m10_1890)
    (set g_music01 true)
    (print "carter: lets stay focused.  watch your sectors...")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_0420)
    (sleep_until (>= (device_get_position "dm_falcon01_start") 0.22) 1)
    (chud_cinematic_fade 1 30)
    (player_camera_control true)
    (player_enable_input true)
    (wake hud_outpost_start)
    (player_control_unlock_gaze player0)
    (if (not (game_is_cooperative))
        (wake training_look_start)
    )
    (print "jorge: theres the communications outpost.")
    (f_md_ai_play 0 (object_get_ai obj_jorge) m10_0010)
    (print "kat: reading a distress beacon.")
    (f_md_ai_play 0 (object_get_ai obj_kat) m10_0020)
    (wake hud_beacon_start)
    (sleep_until b_training_look_done 5 200)
    (sleep 90)
    (chud_track_object "sc_beacon_nav02" false)
    (sleep 40)
    (hud_unblip_all)
    (set g_1stbowl_obj_control 7)
    (print "carter: could be the missing troopers.  let's check it out.")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_0030)
    (sleep 20)
    (set g_ui_obj_control 5)
    (sleep 70)
    (print "carter: put us down on the bluff.")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_0040)
    (sleep 220)
    (set g_1stbowl_obj_control 8)
    (sleep 50)
    (print "carter: jun, i want your eyes in the sky.")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_0050)
    (print "jun: sir.")
    (f_md_ai_play 0 (object_get_ai obj_jun) m10_0060)
)

(script dormant void md_1stbowl_unload
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "carter: let's go, six.")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_0070)
)

(script dormant void md_1stbowl_orders
    (sleep_until (not b_is_dialogue_playing) 5)
    (ai_dialogue_enable false)
    (print "carter: alright, noble team, spread out. watch the approach.")
    (f_md_ai_play 0 "group_carter" m10_0100)
    (ai_dialogue_enable true)
    (wake md_1stbowl_beacon_south)
)

(script dormant void md_1stbowl_rock_look
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: emile, high left and scout.")
    (f_md_ai_play 0 "group_carter" m10_0110)
    (print "emile: roger.")
    (f_md_ai_play 0 "group_emile" m10_0120)
)

(script dormant void md_1stbowl_beacon_south
    (sleep_until (volume_test_players "tv_1stbowl_adv04"))
    (sleep_until (not b_is_dialogue_playing))
    (print "kat: distress beacon's coming from just south of here, boss.  we're close.")
    (f_md_ai_play 0 "group_kat" m10_0140)
    (wake hud_beacon02_start)
    (sleep 20)
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "carter: roger that. eyes peeled.")
    (f_md_ai_play 0 "group_carter" m10_0150)
)

(script dormant void md_1stbowl_rock_look02
    (sleep_until (object_running_sync_action (ai_get_object "group_emile") "spartan_rock_climb") 1)
    (sleep 150)
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "emile: structure point three-four.  looks clear from this angle.")
    (f_md_ai_play 0 "group_emile" m10_0130)
)

(script dormant void md_1stbowl_blood
    (sleep_until (not b_is_dialogue_playing))
    (sleep 20)
    (print "emile: blood on the ground. a lot.")
    (f_md_ai_play 0 "group_emile" m10_0200)
)

(script dormant void md_1stbowl_beacon_found
    (branch warthog_done (f_md_abort))
    (sleep_until (object_running_sync_action (ai_get_object "group_kat") "spartan_inspect_debris") 1 (* 30 9))
    (if (not (object_running_sync_action (ai_get_object "group_kat") "spartan_inspect_debris"))
        (print "vig_beacon: failsafe")
    )
    (sleep_until (not b_is_dialogue_playing) 1)
    (print "beacon sync action")
    (sleep 190)
    (print "emile: found the beacon.")
    (f_md_ai_play 0 "group_emile" m10_0160)
    (set g_music02 true)
    (sleep 40)
    (print "carter: make out any id?")
    (sleep 45)
    (f_md_ai_play 0 "group_carter" m10_0170)
    (print "kat: negative.  but it's military.")
    (f_md_ai_play 20 "group_kat" m10_0180)
    (print "jorge: so where are the troopers?")
    (f_md_object_play 0 none m10_0190)
    (set beacon_done true)
)

(script dormant void md_1stbowl_ex_residue
    (branch warthog_done (f_md_abort))
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (print "kat: why are we not seeing explosives residue?")
    (f_md_ai_play 0 "group_kat" m10_0360)
    (print "carter: noble three, can you confirm any ex residue in the area?")
    (f_md_ai_play 0 "group_carter" m10_0370)
    (print "jun: mm... negative, commander.")
    (f_md_object_play 20 none m10_0380)
    (print "emile: plasma, maybe?")
    (f_md_ai_play 0 "group_emile" m10_0400)
    (print "jorge: cant be.  not on reach --")
    (f_md_object_play_cutoff 12 none m10_0410)
    (ai_dialogue_enable true)
    (sleep (random_range 30 50))
    (wake md_1stbowl_move_on)
)

(script dormant void md_1stbowl_move_on
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (print "carter: all right, noble, looks like theres nothing here.  lets move on.")
    (f_md_ai_play 0 "group_carter" m10_0250)
    (ai_dialogue_enable true)
    (set warthog_done true)
    (wake obj_locate02_start)
    (game_save)
)

(script dormant void md_1stbowl_stand_down01
    (branch (= (current_zone_set) 4) (f_md_abort))
    (sleep_until (= (object_get_health "sc_1stbowl_propane01") 0))
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "carter: stand down noble six!")
    (f_md_ai_play 0 "group_carter" m10_0495)
)

(script dormant void md_1stbowl_stand_down02
    (branch (= (current_zone_set) 4) (f_md_abort))
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "carter: stand down noble six!")
    (f_md_ai_play 0 "group_carter" m10_0495)
)

(script dormant void md_1stbowl_next_structure
    (branch (volume_test_players "tv_1stbowl_witnesses") (f_md_abort))
    (sleep_until warthog_done)
    (sleep_until (not b_is_dialogue_playing))
    (set g_music02 true)
    (ai_dialogue_enable false)
    (print "kat: smoke at the next structure, boss.")
    (f_md_ai_play 0 "group_kat" m10_0260)
    (print "carter: circle west and check it out.  noble team: you have permission to engage, but be selective.  we don't need to telegraph our presence.")
    (f_md_ai_play 0 "group_carter" m10_0270)
    (ai_dialogue_enable true)
)

(script dormant void md_1stbowl_house
    (branch (volume_test_players "tv_1stbowl_witnesses") (f_md_abort))
    (sleep_until (volume_test_players "vol_1stbowl_kiva01"))
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: noble six, move into the house.  go in quiet.  i'm right behind you.")
    (f_md_ai_play 0 "group_carter" m10_1670)
)

(script dormant void md_1stbowl_tossed
    (branch (volume_test_players "tv_1stbowl_witnesses") (f_md_abort_no_combat_dialog))
    (sleep_until (not b_is_dialogue_playing))
    (print "jorge: place was tossed.")
    (f_md_ai_play 10 "group_jorge" m10_0330)
    (print "emile: looking for what?  weapons?")
    (f_md_ai_play 10 "group_emile" m10_0340)
    (print "kat: whatever it was, i don't think they found it...")
    (f_md_ai_play 0 "group_carter" m10_0350)
)

(script dormant void md_1stbowl_civ_heat
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "jun: noble leader, im seeing heat sigs in the structure ahead.")
    (f_md_object_play 0 none m10_0430)
)

(script dormant void md_1stbowl_witnesses
    (branch (>= g_1stbowl_obj_control 30) (f_md_abort))
    (sleep_until (object_running_sync_action (ai_get_object "1stbowl_witnesses_dad") "witnesses_enter") 1)
    (ai_dialogue_enable false)
    (sleep 70)
    (print "civilian 2: hungarian: we've done nothing")
    (f_md_ai_play_cutoff 20 "1stbowl_witnesses_family/son" m10_0500)
    (print "emile: move! on your knees! now!")
    (f_md_ai_play_cutoff 10 "group_emile" m10_0490)
    (print "civilian 1: hungarian: please. do not shoot!")
    (f_md_ai_play_cutoff 50 "1stbowl_witnesses_dad" m10_0510)
    (print "jorge: they're not rebels!")
    (f_md_ai_play 0 "group_jorge" m10_0520)
    (print "jorge: they're farmers. look at them.")
    (f_md_ai_play 0 "group_jorge" m10_0530)
    (print "carter: ask them what they're doing here.")
    (f_md_ai_play 0 "group_carter" m10_0540)
    (print "jorge: hungarian: what are you doing here?")
    (f_md_ai_play 0 "group_jorge" m10_0550)
    (print "civilian 1: hungarian: we hide in here")
    (f_md_ai_play_cutoff 5 "1stbowl_witnesses_dad" m10_0560)
    (print "jorge: hiding, sir.")
    (f_md_ai_play 0 "group_jorge" m10_0570)
    (sleep_until (object_running_sync_action (ai_get_object "1stbowl_witnesses_dad") "witnesses_dialogue") 1)
    (print "civilian 1: hungarian: in the night, my neighbor, his family screams, gunfire then, before sunrise, nothing.")
    (f_md_ai_play_cutoff 100 "1stbowl_witnesses_dad" m10_0580)
    (print "jorge: neighbors were attacked last night he heard screams, gunfire stopped around sunrise")
    (f_md_ai_play_cutoff 80 "group_jorge" m10_0590)
    (print "civilian 1: hungarian: something kill my son")
    (f_md_ai_play 0 "1stbowl_witnesses_dad" m10_0600)
    (sleep 20)
    (print "jorge: says something in the fields killed his son.")
    (f_md_ai_play 0 "group_jorge" m10_0610)
    (print "carter: something?")
    (f_md_ai_play 0 "group_carter" m10_0620)
    (set g_1stbowl_obj_control 25)
    (ai_dialogue_enable true)
)

(script dormant void md_1stbowl_sprint
    (sleep_until (>= g_1stbowl_obj_control 25) 1)
    (sleep_until (not b_is_dialogue_playing) 1)
    (ai_dialogue_enable false)
    (print "jun: commander, be advised i'm reading heat signatures in that structure directly east of your position, over.")
    (f_md_object_play 10 none m10_0630)
    (if (= g_1stbowl_obj_control 25)
        (begin
            (print "carter: copy that. get them back inside!")
            (f_md_ai_play 20 "group_carter" m10_0640)
            (set g_1stbowl_obj_control 30)
            (print "jorge: hungarian: i said back inside! go!")
            (f_md_ai_play 0 "group_jorge" m10_0650)
        )
    )
    (sleep_until (volume_test_players "tv_training_sprint") 5)
    (print "carter: noble team, double-time it!")
    (f_md_ai_play 0 "group_carter" m10_0660)
    (ai_dialogue_enable true)
    (set g_music03 true)
    (wake ct_training_sprint_start)
)

(script dormant void md_barn_entry
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: six, you're with me.  everyone else, fan out and check the perimeter.")
    (f_md_ai_play 0 "group_carter" m10_0760)
)

(script dormant void md_barn_dead_troopers
    (branch (volume_test_players "tv_barn01_end") (kill_md_barn_dead_troopers))
    (sleep_until (not b_is_dialogue_playing))
    (sleep_until (volume_test_object "tv_barn_bodies" obj_carter) 5)
    (ai_dialogue_enable false)
    (print "carter: damn.")
    (f_md_ai_play 20 "group_carter" m10_0800)
    (set g_music01 true)
    (print "jun: fill me in, noble.  what are you seeing, over?")
    (f_md_object_play 10 none m10_0810)
    (print "carter: we've got military casualties.  two of our missing troopers.")
    (f_md_ai_play 50 "group_carter" m10_0820)
    (print "carter: looks like they were interrogated.. its messy")
    (f_md_ai_play 0 "group_carter" m10_0830)
    (ai_dialogue_enable true)
    (set g_music02 true)
)

(script static void kill_md_barn_dead_troopers
    (set g_music01 true)
    (set g_music02 true)
    (f_md_abort)
)

(script dormant void md_motion_tracker
    (branch (volume_test_players "tv_barn_main") (f_md_abort))
    (sleep 45)
    (set g_music02 true)
    (sleep_until (not b_is_dialogue_playing) 1)
    (ai_dialogue_enable false)
    (print "carter: movement. watch your motion tracker people.")
    (f_md_ai_play 0 "group_carter" m10_0710)
    (training_motion_tracker)
    (sleep 50)
    (print "emile: the hell was that?")
    (f_md_ai_play 10 "group_emile" m10_0700)
    (print "carter: jun, you see anything?")
    (f_md_ai_play 30 "group_carter" m10_0730)
    (print "jun: negative. thermal's clean.")
    (f_md_object_play 0 none m10_0740)
    (ai_dialogue_enable true)
    (set g_music03 true)
    (sleep 30)
)

(script dormant void md_barn_window
    (sleep_until (volume_test_players "tv_barn_bloodtrail03") 5)
    (sleep_until (not b_is_dialogue_playing) 5)
    (set g_music03 true)
    (ai_dialogue_enable false)
    (print "jun: boss, i see movement! outside your structure!")
    (f_md_object_play 10 none m10_0850)
    (print "carter: noble two, move up to the west!  we're about to be flanked!")
    (f_md_ai_play 0 "group_carter" m10_0860)
    (ai_dialogue_enable true)
)

(script static void test
    (sleep 60)
)

(script dormant void md_barn_contact
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (print "jorge: huh")
    (f_md_ai_play_cutoff 3 "group_jorge" m10_0863)
    (print "jorge: dammit")
    (f_md_ai_play 0 "group_emile" m10_0866)
    (print "jorge: covenant!")
    (f_md_ai_play 10 "group_jorge" m10_0869)
    (print "carter: contact!  contact!")
    (f_md_ai_play 0 "group_carter" m10_0870)
    (print "carter: spartans!  assist!")
    (f_md_ai_play 10 "group_carter" m10_0890)
    (print "jorge: here we go")
    (f_md_ai_play 0 "group_jorge" m10_0880)
    (ai_dialogue_enable true)
    (set g_music04 true)
    (sleep 20)
    (set g_ui_obj_control 10)
    (sleep 70)
    (print "carter: they're headed into the basement!  let's move down to the lower level!")
    (f_md_ai_play 0 "group_carter" m10_0910)
)

(script dormant void md_barn_skirm_grenades
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: they're in the back pen!  noble six, flush 'em out with grenades!")
)

(script dormant void md_meadow_dropship
    (sleep_until (not b_is_dialogue_playing))
    (print "jun: noble leader!  enemy dropships inbound!")
    (f_md_object_play 0 none m10_1120)
    (set g_music01 true)
    (sleep 100)
    (print "pilot 1: falcon moving to assist!")
    (f_md_object_play 10 none m10_1140)
)

(script dormant void md_meadow_banshees
    (sleep_until (>= (ai_living_count "meadow_banshees") 1) 5)
    (sleep 50)
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "pilot 2: banshees! heads up, charlie one!")
    (f_md_object_play 15 none m10_1150)
    (print "jun: get some altitude! now!")
    (f_md_ai_play 0 "group_jun" m10_1160)
)

(script dormant void md_meadow02
    (branch (volume_test_players "tv_3kiva_start03") (f_md_abort))
    (sleep_until (not b_is_dialogue_playing))
    (if (volume_test_players "vol_meadow_halfway")
        (sleep_until (and (<= (ai_task_count "obj_meadow_cov/meadow_elite") 0) (<= (ai_task_count "obj_meadow_cov/gate_meadow_back") 0)))
    )
    (game_save)
    (ai_dialogue_enable false)
    (print "carter: stand down, noble, stand down!  contacts neutralized!")
    (f_md_ai_play 20 "group_carter" m10_1020)
    (print "jorge: contacts?  it's the damn covenant!")
    (f_md_ai_play 15 "group_jorge" m10_1030)
    (print "emile: cheer up, big man.  this whole valley just turned into a free-fire zone.")
    (f_md_ai_play 35 "group_emile" m10_1090)
    (print "carter: kat, we gotta warn holland.  i need you at that relay outpost now!")
    (f_md_ai_play 20 "group_carter" m10_1040)
    (if (not (volume_test_players "vol_meadow_exit"))
        (begin
            (print "jun: boss, i'm showing more activity to the east")
            (f_md_object_play 20 none m10_1490)
            (print "carter: copy that, jun.  we're on it.  six, you've got point.")
            (f_md_ai_play 0 "group_carter" m10_1110)
        )
    )
    (ai_dialogue_enable true)
)

(script dormant void md_meadow_evac_request
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (print "kat: noble three, requesting airlift, over!")
    (f_md_ai_play 20 "group_kat" m10_1050)
    (print "jun: falcon en route.  stand by!")
    (f_md_object_play 20 none m10_1060)
    (ai_dialogue_enable true)
)

(script dormant void md_3kiva_jun_evac
    (branch (>= g_3kiva_obj_control 10) (f_md_abort))
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: six, jun! let's go!")
    (f_md_ai_play 0 "group_carter" m10_2120)
    (sleep 400)
    (print "carter: on the falcon, six! now!")
    (f_md_ai_play 0 "group_carter" m10_2130)
    (sleep 600)
    (print "carter: lieutenant, mount up. that's an order!")
    (f_md_ai_play 0 "group_carter" m10_2140)
)

(script dormant void md_3kiva_start
    (sleep_until (or (<= (ai_living_count "obj_meadow_cov") 0) (volume_test_players "tv_3kiva_start02")))
    (sleep 90)
    (ai_dialogue_enable false)
    (sleep_until (not b_is_dialogue_playing))
    (print "jun: commander, i'm seeing more hostile activity to the northeast.")
    (f_md_object_play 0 none m10_1100)
    (sleep 50)
    (print "carter: jorge, emile: you're with kat.  six and i will run interference on the ground; we'll meet you at the outpost.")
    (f_md_ai_play 30 "group_carter" m10_1070)
    (print "kat: noble three, requesting airlift, over!")
    (f_md_ai_play 20 "group_kat" m10_1050)
    (set g_music02 true)
    (set g_ui_obj_control 20)
    (sleep 50)
    (print "carter: get to work noble. the war just came to reach.")
    (f_md_ai_play 0 "group_carter" m10_1220)
    (set g_music_ins true)
    (ai_dialogue_enable true)
    (wake md_3kiva_start_prompt)
)

(script dormant void md_3kiva_start_prompt
    (branch (or (volume_test_players "tv_3kiva_start02") (>= (current_zone_set) 5)) (f_md_abort))
    (sleep 400)
    (print "carter: noble six, on me.")
    (f_md_ai_play 0 "group_carter" m10_0770)
    (sleep 600)
    (print "carter: lieutenant!  you're with me!")
    (f_md_ai_play 0 "group_carter" m10_0780)
)

(script dormant void md_3kiva01_heat
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "jun: noble leader, im seeing heat sigs in the structure ahead.")
    (f_md_object_play 0 none m10_0430)
    (set g_music01 true)
)

(script dormant void md_3kiva_waypoint_kiva01
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "jun: boss, i'm showing more activity to the east")
    (f_md_object_play 40 none m10_1490)
)

(script dormant void md_3kiva_waypoint_kiva02
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "jun: boss, i'm showing more activity to the east")
    (f_md_object_play 40 none m10_1490)
)

(script dormant void md_3kiva_waypoint_kiva03
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "jun: boss, i'm showing more activity to the east")
    (f_md_object_play 40 none m10_1490)
)

(script dormant void md_3kiva_kiva01_done
    (branch 3kiva_troopers_spoted (f_md_abort))
    (ai_dialogue_enable false)
    (sleep 100)
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: looks like we're clear, lieutenant.")
    (f_md_ai_play 90 "group_carter" m10_1460)
    (ai_dialogue_enable true)
    (sleep 100)
    (sleep_until (not (volume_test_players "tv_kiva01_center")) 30 (* 30 500))
    (wake md_3kiva_kiva01_more)
)

(script dormant void md_3kiva_kiva01_more
    (branch 3kiva_troopers_spoted (f_md_abort))
    (ai_dialogue_enable false)
    (print "jun: boss, i'm showing more activity to the east")
    (f_md_object_play 40 none m10_1490)
    (print "jun: ...advise you check it out.")
    (f_md_object_play 20 none m10_1510)
    (print "carter: roger, three.  we're en route.")
    (f_md_ai_play 0 "group_carter" m10_1350)
    (ai_dialogue_enable true)
)

(script dormant void md_3kiva_blip
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "jun: boss, i'm showing more activity to the south")
    (f_md_object_play 40 none m10_1480)
)

(script dormant void md_3kiva_trooper_distress_start
    (branch (or (and (= 3kiva_troopers_bsp 2) (volume_test_players "vol_3kiva_2bsp")) (and (= 3kiva_troopers_bsp 3) (volume_test_players "vol_3kiva_3bsp"))) (f_md_abort))
    (sleep_until (or 3kiva02_done 3kiva03_done) 30)
    (sleep 100)
    (sleep_until (and (not (volume_test_players_all "vol_3kiva02_approach03")) (not (volume_test_players_all "vol_3kiva03_approach03"))) 30)
    (sleep_until (not b_is_dialogue_playing) 5)
    (ai_dialogue_enable false)
    (print "carter: looks like we're clear, lieutenant.")
    (f_md_ai_play 180 "group_carter" m10_1460)
    (print "jun: boss, we're picking up a distress signal.")
    (f_md_object_play 0 none m10_1250)
    (sleep 20)
    (print "trooper5: mayday, three charlie six does anyone read?")
    (f_md_object_play (random_range 10 40) none m10_2630)
    (print "trooper5: i repeat, we have multiple wounded and need immediate assistance.")
    (f_md_object_play (random_range 10 40) none m10_2640)
    (print "trooper5: we were attacked by covenant forces; the covenant is on reach -- i repeat, the covenant is on reach.")
    (f_md_object_play (random_range 10 40) none m10_2650)
    (print "trooper5: if anyone is picking this up, please respond.")
    (f_md_object_play (random_range 10 40) none m10_2660)
    (print "jorge: the troopers?")
    (f_md_ai_play 20 "group_jorge" m10_1260)
    (print "carter: let's move, six.  we gotta find the source of that distress call.")
    (f_md_ai_play 180 "group_carter" m10_1530)
    (set g_ui_obj_control 30)
    (print "jun: no disrespect, but don't we have more important things to do than round up strays?")
    (f_md_object_play 10 none m10_1380)
    (print "carter: we don't leave people behind.  you see those troopers, you let me know.")
    (f_md_ai_play 0 "group_carter" m10_1390)
    (ai_dialogue_enable true)
)

(script dormant void md_trooper_distress_attack
    (branch 3kiva_troopers_spoted (f_md_abort))
    (sleep_until (>= 3kiva_troopers_bsp 2))
    (sleep_until (or 3kiva02_done 3kiva03_done (player_in_trooper_bsp)) 5)
    (if (or 3kiva02_done 3kiva03_done)
        (sleep 100)
    )
    (sleep_until (not b_is_dialogue_playing) 5)
    (ai_dialogue_enable false)
    (print "jun: boss, we're picking up a distress signal.")
    (f_md_object_play 0 none m10_1250)
    (sleep 20)
    (print "trooper5: mayday, three charlie six does anyone read?")
    (f_md_object_play 10 none m10_2630)
    (print "trooper5: we were attacked by covenant forces; the covenant is on reach -- i repeat, the covenant is on reach.")
    (f_md_object_play 10 none m10_2650)
    (print "jorge: the troopers?")
    (f_md_ai_play 20 "group_jorge" m10_1260)
    (print "carter: let's move, six.  we gotta find the source of that distress call.")
    (f_md_ai_play 0 "group_carter" m10_1530)
    (set g_ui_obj_control 30)
    (print "jun: no disrespect, but don't we have more important things to do than round up strays?")
    (f_md_object_play 10 none m10_1380)
    (print "carter: we don't leave people behind.  you see those troopers, you let me know.")
    (f_md_ai_play 0 "group_carter" m10_1390)
    (wake md_3kiva_distress_response)
)

(script static boolean player_in_trooper_bsp
    (or (and (= 3kiva_troopers_bsp 2) (volume_test_players "vol_3kiva_2bsp")) (and (= 3kiva_troopers_bsp 3) (volume_test_players "vol_3kiva_3bsp")))
)

(script dormant void md_3kiva_distress_response
    (branch 3kiva_troopers_spoted (f_md_abort))
    (sleep_until (not b_is_dialogue_playing) 5)
    (ai_dialogue_enable false)
    (sleep 50)
    (if (= 3kiva_troopers_bsp 2)
        (begin
            (print "jun: noble leader, i'm seeing possible friendly forces under attack, northeast of your position, over!")
            (f_md_object_play 0 none m10_1760)
        )
        (if (= 3kiva_troopers_bsp 3)
            (begin
                (print "jun: noble primary, i'm seeing possible friendly forces under attack, south of your position, over!")
                (f_md_object_play 0 none m10_1770)
            )
        )
    )
    (if (not (player_in_trooper_bsp))
        (wake md_trooper_distress_attack02)
    )
)

(script dormant void md_trooper_distress_attack02
    (branch 3kiva_troopers_spoted (f_md_abort))
    (sleep_until (not b_is_dialogue_playing) 5)
    (ai_dialogue_enable false)
    (print "trooper5: we're under attack!")
    (f_md_object_play 0 none m10_2750)
    (print "trooper5: i repeat: mayday, mayday!  three charlie six!  we are under attack by the covenant!")
    (f_md_object_play 0 none m10_2760)
    (print "trooper5: i got wounded!  cannot hold this position!")
    (f_md_object_play (random_range 10 40) none m10_2780)
    (print "carter: we need to find those troopers now!")
    (f_md_ai_play 0 "group_carter" m10_1750)
    (ai_dialogue_enable true)
)

(script dormant void md_3kiva_troopers_spoted
    (sleep_until 3kiva_troopers_spoted 5)
    (sleep_until (not b_is_dialogue_playing) 5)
    (ai_dialogue_enable false)
    (print "carter: noble three, we've located the trooper squad.  request immediate evac, my coordinates.")
    (f_md_ai_play 10 "group_carter" m10_1810)
    (print "jun: solid copy, commander.  recalling falcon charlie two.  hold that evac position.")
    (f_md_object_play 0 none m10_1820)
    (wake md_3kiva_troopers_evac_dropship)
    (wake md_3kiva_troopers_evac_dropship02)
    (wake md_3kiva_troopers_clear)
    (ai_dialogue_enable true)
)

(script dormant void md_3kiva_troopers_evac_dropship
    (sleep_until (>= g_3kiva_obj_control 2) 5)
    (sleep_until (not b_is_dialogue_playing) 5)
    (ai_dialogue_enable false)
    (sleep (random_range 40 70))
    (print "jun: noble leader, be advised i have visual on inbound covenant dropships!")
    (f_md_object_play 0 none m10_1830)
    (print "carter: evac transport, keep your distance!")
    (f_md_ai_play 40 "group_carter" m10_1840)
    (print "carter: six! hold position -- clear an lz!")
    (f_md_ai_play 0 "group_carter" m10_1850)
    (set g_music04 true)
    (set g_ui_obj_control 40)
    (ai_dialogue_enable true)
)

(script dormant void md_3kiva_troopers_evac_dropship02
    (sleep_until (= g_3kiva_obj_control 3))
    (sleep_until (not b_is_dialogue_playing))
    (print "jun: be advised.. we got hostile dropship inbound!")
    (f_md_object_play 20 none m10_2080)
)

(script dormant void md_3kiva_troopers_clear
    (sleep_until 3kiva_done)
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (f_hud_obj_complete)
    (print "carter: transport, lz is clear.  move in for evac!")
    (f_md_ai_play 0 "group_carter" m10_1860)
    (set g_ui_obj_control 50)
    (print "jun: affirmative! transport inbound!")
    (f_md_object_play 0 none m10_1870)
    (ai_dialogue_enable true)
    (set g_music05 true)
)

(script dormant void md_3kiva_troopers_evac
    (branch (<= (ai_living_count "group_3kiva_troopers") 0) (f_md_abort))
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: troopers: hop that bird, on the double!  pilot, stay close; watch for hostile air!")
    (f_md_ai_play 0 "group_carter" m10_1880)
)

(script command_script void cs_spartans_talks
    (cs_custom_animation "objects\characters\spartans_ai\spartans_ai.model_animation_graph" "falcon_p_r1:rifle:communication" true)
)

(script dormant void md_outpost_sitrep02
    (sleep 90)
    (sleep_until (not b_is_dialogue_playing))
    (cs_run_command_script (object_get_ai obj_carter) cs_spartans_talks)
    (sleep 40)
    (print "carter: noble two, sitrep.")
    (f_md_ai_play 30 (object_get_ai obj_carter) m10_2210)
    (print "kat: we're at the relay outpost.  door's locked; mechanism's been flash-fused.")
    (f_md_object_play 10 none m10_1610)
    (print "carter: can you beat it?")
    (f_md_ai_play 20 (object_get_ai obj_carter) m10_1620)
    (print "kat: i'll dial up my torch, cut a way through.  gonna take some time")
    (f_md_object_play 0 none m10_1630)
    (cs_run_command_script (object_get_ai obj_carter) cs_spartans_talks)
    (sleep 30)
    (print "carter: ok. were en route to your position.")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_2230)
    (sleep_until (volume_test_players "vol_outpost_ext") 5)
    (print "pilot 1: approaching the comm outpost!")
    (f_md_object_play 0 none m10_2240)
    (cs_run_command_script (object_get_ai obj_carter) cs_spartans_talks)
    (sleep 20)
    (print "carter: drop us in the courtyard.")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_2250)
    (set g_music06 true)
    (print "pilot 1: lz's a little hot, sir")
    (f_md_object_play_cutoff 5 none m10_2260)
    (print "carter: put her down, pilot. six: break's over.")
    (f_md_ai_play 0 (object_get_ai obj_carter) m10_2270)
)

(script dormant void md_outpost_ext01
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (print "carter: how we doing', kat?")
    (f_md_ai_play 20 "group_carter" m10_2280)
    (set g_music_ins true)
    (print "kat: taking a little longer than i hoped, commander; i've cut about halfway through the door.")
    (f_md_ai_play 10 "group_kat" m10_2220)
    (print "emile: contact!")
    (f_md_ai_play 80 "group_emile" m10_2310)
    (print "carter: hold 'em off 'til kat can hack the control!")
    (f_md_ai_play 0 "group_carter" m10_2320)
    (set g_outpost_ext_obj_control 12)
    (set g_ui_obj_control 70)
    (ai_dialogue_enable true)
)

(script dormant void md_outpost_ext_fallback
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (print "carter: kat?!")
    (f_md_ai_play 20 "group_carter" m10_2350)
    (print "kat: just... about... there!  we're in!")
    (f_md_ai_play 0 "group_kat" m10_2360)
    (set g_outpost_ext_obj_control 20)
    (set g_music01 true)
    (sleep 40)
    (print "everybody inside!  go, go, go!")
    (f_md_ai_play 0 "group_carter" m10_2370)
    (set g_ui_obj_control 80)
    (set g_outpost_ext_obj_control 30)
    (set g_music02 true)
    (sleep 200)
    (if (not (volume_test_players "tv_outpost_ext_control"))
        (wake md_outpost_ext_fallback_a)
    )
    (ai_dialogue_enable true)
)

(script dormant void md_outpost_ext_fallback_a
    (sleep_until (not b_is_dialogue_playing))
    (print "carter: inside, lieutenant!  i'll cover you!")
    (f_md_ai_play 0 "group_carter" m10_2380)
)

(script dormant void md_outpost_ext_fallback_b
    (sleep_until (not b_is_dialogue_playing))
    (if (not (volume_test_players "tv_outpost_ext_control"))
        (begin
            (print "carter: noble six!  inside!  that's an order!")
            (f_md_ai_play 0 "group_carter" m10_2400)
        )
    )
)

(script dormant void md_outpost_rally
    (sleep_until (not b_is_dialogue_playing))
    (ai_dialogue_enable false)
    (print "carter: we need to find the control room.")
    (f_md_ai_play 0 "group_carter" m10_2420)
    (sleep_until (>= g_outpost_ext_obj_control 45) 5 200)
    (print "carter: from there, kat can get the relay back online.")
    (f_md_ai_play 15 "group_carter" m10_2430)
    (set g_outpost_ext_obj_control 47)
    (print "carter: emile, post here.  if we flush any hostiles, they're yours. ")
    (f_md_ai_play 0 "group_carter" m10_2440)
    (set g_outpost_ext_obj_control 50)
    (sleep 50)
    (print "carter: all right, let's do this.")
    (f_md_ai_play 0 "group_carter" m10_2450)
    (wake ct_training_nightvision02_start)
    (ai_dialogue_enable true)
)

(script dormant void md_outpost_nightvision
    (branch (player_night_vision_on) (f_md_abort))
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "carter: can't see a thing... noble six, turn on your night vision.")
    (f_md_ai_play 0 "group_carter" m10_0790)
    (wake md_outpost_control)
)

(script dormant void md_outpost_control
    (sleep_until (volume_test_players "vol_outpost_int_server01"))
    (sleep_until (not b_is_dialogue_playing))
    (print "kat: control room. go easy. ")
    (f_md_ai_play 40 "group_kat" m10_2460)
    (print "carter: go in quiet -- just in case...")
    (f_md_ai_play 0 "group_carter" m10_0430)
)

(script dormant void md_outpost_search
    (branch (volume_test_players "tv_body_search") (f_md_abort))
    (sleep_until (not b_is_dialogue_playing) 5)
    (print "kat: noble six, search that body.")
    (f_md_ai_play 0 "group_kat" m10_2540)
    (sleep 200)
    (print "kat: lieutenant!  check that body for id!")
    (f_md_ai_play 0 "group_kat" m10_2550)
)

(script dormant void md_outpost_flush
    (sleep_until (not b_is_dialogue_playing) 5)
    (set g_music02 true)
    (sleep 25)
    (print "jorge: quiet!... hear that?  theres more.  flush em out; ive got you covered.")
    (f_md_ai_play 0 "group_jorge" m10_2570)
)

(script dormant void md_outpost_finished
    (sleep_until (not b_is_dialogue_playing))
    (sleep 40)
    (print "jorge: noble five reporting.  targets neutralized.")
    (f_md_ai_play 40 "group_jorge" m10_2580)
    (print "carter: kat needs you to reset a junction.  do it, and get back here.")
    (f_md_object_play 0 none m10_2590)
    (wake ct_training_activate_start)
)

(script static void (md_play (short delay, ai character, ai_line line))
    (sleep (ai_play_line character line))
    (sleep delay)
)

(script static void (md_play_object (short delay, object obj, ai_line line))
    (sleep (ai_play_line_on_object obj line))
    (sleep delay)
)

(script dormant void sound_1stbowl_falcons
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "rotor_audio" 1 0)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "engine_audio" 0.6 0)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "rotor_audio" 1 0)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "engine_audio" 0.6 0)
    (sleep_until (>= (device_get_position "dm_falcon01_start") 0.22) 5)
    (print "sound_1stbowl_falcons: slow down to the hover")
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "rotor_audio" 0.6 60)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "rotor_audio" 0.6 60)
    (sleep_until (= g_1stbowl_obj_control 7) 5)
    (print "sound_1stbowl_falcons: speed up again")
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "rotor_audio" 1 60)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "rotor_audio" 1 60)
    (sleep_until (>= (device_get_position "dm_falcon01_start") 0.9) 5)
    (print "sound_1stbowl_falcons: hovering to drop off")
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "rotor_audio" 0.2 60)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "engine_audio" 0.2 60)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "rotor_audio" 0.2 60)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "engine_audio" 0.2 60)
    (sleep_until (>= (device_get_position "dm_falcon02_start") 0.9) 5)
    (print "sound_1stbowl_falcons: falcon02 takes off")
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "rotor_audio" 1 60)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_02" 0) "engine_audio" 0.6 60)
    (sleep_until (not (any_players_in_vehicle)) 5)
    (print "sound_1stbowl_falcons: falcon01 takes off")
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "rotor_audio" 1 60)
    (object_set_cinematic_function_variable (ai_vehicle_get_from_squad "intro_falcon_01" 0) "engine_audio" 0.6 60)
)

(script static void reset_music_var_go
    (set g_music01 false)
    (set g_music02 false)
    (set g_music03 false)
    (set g_music04 false)
    (set g_music05 false)
    (set g_music06 false)
    (set g_music_ins false)
)

(script dormant void music_1stbowl
    (print "music_1stbowl")
    (sleep_until g_music01 5)
    (print "music change: let's stay focused")
    (sound_looping_start "levels\solo\m10\music\m10_music01" none 1)
    (sleep_until g_music02 5)
    (print "music change: gas kiva- found the beacon")
    (sound_looping_stop "levels\solo\m10\music\m10_music01")
    (sound_looping_start "levels\solo\m10\music\m10_music02" none 1)
    (sleep_until g_music03 5)
    (print "music change: double time it")
    (sound_looping_start "levels\solo\m10\music\m10_music03" none 1)
)

(script dormant void music_barn
    (print "music_barn")
    (reset_music_var_go)
    (sleep_until g_music01 5)
    (print "music change: damn...")
    (sound_looping_stop "levels\solo\m10\music\m10_music03")
    (sleep_until g_music02 5)
    (print "music change: it's messy")
    (sound_looping_start "levels\solo\m10\music\m10_music04" none 1)
    (sleep_until g_music03 5)
    (print "music change: thermal's clean")
    (sound_looping_stop "levels\solo\m10\music\m10_music02")
    (sleep_until g_music04 5)
    (print "music change: about to be flanked")
    (sound_looping_stop "levels\solo\m10\music\m10_music04")
)

(script dormant void music_meadow
    (print "music_meadow")
    (reset_music_var_go)
    (sleep_until g_music01 5)
    (print "music change: enemy dropships inbound")
    (sound_looping_start "levels\solo\m10\music\m10_music05" none 1)
    (sleep_until g_music02 5)
    (print "music change: george go with kat")
    (sound_looping_stop "levels\solo\m10\music\m10_music05")
)

(script dormant void music_3kiva
    (print "music_3kiva")
    (reset_music_var_go)
    (wake music_3kiva01)
    (wake music_3kiva02)
    (sleep_until g_music05 5)
    (print "music change: transport inbound")
    (sound_looping_start "levels\solo\m10\music\m10_music08" none 1)
    (sleep_until g_music06 5)
    (print "music change: drop us in the courtyard")
    (sound_looping_set_alternate "levels\solo\m10\music\m10_music08" true)
)

(script dormant void music_3kiva01
    (print "music_3kiva01")
    (sleep_until (or 3kiva_done g_music01) 5)
    (if (or 3kiva_done g_music03)
        (sleep_forever)
    )
    (print "music change: 3kiva01 start")
    (sound_looping_start "levels\solo\m10\music\m10_music06" none 1)
    (sleep_until (or 3kiva01_done (not (volume_test_players "vol_3kiva01_approach01"))) 5)
    (print "music change: 3kiva01 done")
    (sound_looping_stop "levels\solo\m10\music\m10_music06")
)

(script dormant void music_3kiva02
    (print "music_3kiva02")
    (sleep_until (or g_music03 g_music04) 5)
    (if g_music04
        (sleep_forever)
    )
    (sleep_until g_music03 5)
    (print "music change: hog kiva")
    (sound_looping_start "levels\solo\m10\music\m10_music07" none 1)
    (sleep_until g_music04 5)
    (print "music change: clear an lz")
    (sound_looping_stop "levels\solo\m10\music\m10_music07")
)

(script dormant void music_outpost_ext
    (print "music_outpost_ext")
    (reset_music_var_go)
    (sleep_until g_music01 5)
    (print "music change: fallback into outpost")
    (sound_looping_stop "levels\solo\m10\music\m10_music08")
    (sleep_until g_music02 5)
    (print "music change: objective defend outpost")
    (sound_looping_start "levels\solo\m10\music\m10_music09" none 1)
    (sleep_until g_music03 5)
    (print "music change: body search")
    (sound_looping_stop "levels\solo\m10\music\m10_music09")
)

(script dormant void music_outpost_int
    (print "music_outpost_int")
    (reset_music_var_go)
    (sleep_until g_music01 5)
    (print "music change: when 1st group of convenant fall back in 1st hall")
    (sound_looping_stop "levels\solo\m10\music\m10_music095")
    (sleep_until g_music02 5)
    (print "music change: there's more, flush em out i've got you covered")
    (sound_looping_start "levels\solo\m10\music\m10_music10" none 1)
    (sleep_until g_music03 5)
    (print "music change: kill last elite")
    (sound_looping_stop "levels\solo\m10\music\m10_music10")
)

(script dormant void music_alpha
    (print "music_alpha")
    (reset_music_var_go)
    (print "music change: alpha start")
    (sound_looping_start "levels\solo\m10\music\m10_music11" none 1)
    (sleep_until g_music_ins 5)
    (print "music change: get to work, noble")
    (sound_looping_stop "levels\solo\m10\music\m10_music11")
)

(script dormant void music_bravo
    (print "music_bravo")
    (reset_music_var_go)
    (print "music change: bravo start")
    (sound_looping_start "levels\solo\m10\music\m10_music08" none 1)
    (sleep_until g_music_ins 5)
    (print "music change: how we doin' kat?")
    (sound_looping_set_alternate "levels\solo\m10\music\m10_music08" true)
    (sleep_until g_music01 5)
    (print "music change: fallback into outpost")
    (sound_looping_stop "levels\solo\m10\music\m10_music08")
)

(script command_script void cs_lookat_player
    (cs_look_player true)
)

(script command_script void cs_void
    (sleep 1)
)

(script static void branch_kill_vignette
    (print "killing vignette")
)

(script static void branch_witnesses_dad
    (print "witnesses_dad: branch")
    (set g_1stbowl_obj_control 30)
)

(script static void witnesses_dad_exit
    (print "witnesses_dad: finished")
    (set g_1stbowl_obj_control 30)
)

(script static boolean (branch_vig_damage (ai my_actor))
    (or (> (object_get_recent_shield_damage (ai_get_object my_actor)) 0) (> (object_get_recent_body_damage (ai_get_object my_actor)) 0))
)

(script static boolean (branch_vig_damage_hack (ai my_actor))
    (or (> (object_get_recent_shield_damage (ai_get_object my_actor)) 0.3) (> (object_get_recent_body_damage (ai_get_object my_actor)) 0))
)

(script static void vig_glowstick02
    (sleep_until (object_running_sync_action (ai_get_object "group_jorge") "throw_flare") 1)
    (sleep 60)
    (print "throwing flare")
    (object_create "cr_outpost_glowstick02")
    (object_set_velocity "cr_outpost_glowstick02" 7.5)
)

(script static boolean (branch_outpost_elite_leader (ai my_actor))
    (or (> (object_get_recent_shield_damage (ai_get_object my_actor)) 0.3) (> (object_get_recent_body_damage (ai_get_object my_actor)) 0) (<= (ai_living_count "outpost_int_elites01") 0) (volume_test_players "vol_outpost_int_rear03") (and (<= (ai_living_count "outpost_final_grunts01") 0) (volume_test_players "vol_outpost_int_rear02")))
)

(script dormant void hud_outpost_start
    (f_hud_flash_object "sc_hud_outpost_highlight")
    (f_blip_title "sc_hud_outpost_dish" "wp_callout_m10_visegrad")
)

(script dormant void hud_beacon_start
    (f_blip_object "sc_beacon_nav" blip_default)
    (chud_track_object_with_priority "sc_beacon_nav02" 6 "wp_callout_m10_beacon")
)

(script dormant void hud_beacon02_start
    (f_blip_object "sc_beacon_nav" blip_default)
    (sleep_until (volume_test_players "tv_1stbowl_gas"))
    (hud_unblip_all)
)

(script dormant void hud_witnesses
    (sleep_until (objects_can_see_object player0 "sc_hud_1stbowl_kiva01" 25) 5 (* 5 30))
    (f_hud_flash_object "sc_hud_1stbowl_kiva_highlight")
)

(script dormant void 3kiva01_hud
    (sleep_until (player_can_see_or_dist "sc_hud_3kiva01_center" 20 10) 5 (* 5 30))
    (wake md_3kiva01_heat)
    (f_hud_flash_object "sc_hud_3kiva01_highlight")
)

(script dormant void 3kiva02_hud
    (sleep_until (player_can_see_or_dist "sc_hud_3kiva02" 25 10) 5 (* 5 30))
    (f_hud_flash_object "sc_hud_3kiva02_highlight")
)

(script dormant void 3kiva03_hud
    (sleep_until (player_can_see_or_dist "sc_hud_3kiva03" 25 10) 5 (* 5 30))
)

(script dormant void 1stbowl_hud_master
    (sleep_until 
        (begin
            (if (player_can_see_and_dist "sc_hud_1stbowl_gas01" hud_info_fov 3)
                (hud_info_object_destroy "sc_hud_1stbowl_gas01" "wp_callout_damage01")
                (if (player_can_see_and_dist "sc_hud_1stbowl_gas02" hud_info_fov 3)
                    (hud_info_object_destroy "sc_hud_1stbowl_gas02" "wp_callout_damage02")
                    (if (player_can_see_and_dist "sc_hud_1stbowl_hog" hud_info_fov 3)
                        (hud_info_object_destroy "sc_hud_1stbowl_hog" "wp_callout_vehicle01")
                    )
                )
            )
            (= (current_zone_set_fully_active) 5)
        )
    )
)

(script static void (hud_info_object (object_name hud_object, string wp_callout_type))
    (print "hud info action")
    (sleep 80)
    (sleep_until (not (objects_can_see_object player0 hud_object 35)) 5 150)
    (chud_track_object hud_object false)
)

(script static void (hud_info_object_destroy (object_name hud_object, string wp_callout_type))
    (hud_info_object hud_object wp_callout_type)
    (object_destroy hud_object)
)

(script static boolean (player_can_see_and_dist (object_name hud_object, short fov, short distance))
    (and (objects_can_see_object player0 hud_object fov) (> (player_count) 0) (>= distance (objects_distance_to_object player0 hud_object)))
)

(script static boolean (player_can_see_or_dist (object_name hud_object, short fov, short distance))
    (or (objects_can_see_object player0 hud_object fov) (objects_can_see_object player1 hud_object fov) (objects_can_see_object player2 hud_object fov) (objects_can_see_object player3 hud_object fov) (>= distance (objects_distance_to_object player0 hud_object)))
)

(script static void spartan_waypoints
    (wake carter_waypoint)
    (wake kat_waypoint)
    (wake jun_waypoint)
    (wake emile_waypoint)
    (wake jorge_waypoint)
)

(script dormant void carter_waypoint
    (f_hud_spartan_waypoint (object_get_ai obj_carter) "carter_name" 60)
)

(script dormant void kat_waypoint
    (branch (>= (current_zone_set) 5) (branch_kill))
    (f_hud_spartan_waypoint (object_get_ai obj_kat) "kat_name" 60)
)

(script dormant void kat_outpost_waypoint
    (f_hud_spartan_waypoint (object_get_ai obj_kat) "kat_name" 60)
)

(script dormant void jun_waypoint
    (f_hud_spartan_waypoint (object_get_ai obj_jun) "jun_name" 300)
)

(script dormant void emile_waypoint
    (branch (>= (current_zone_set) 5) (branch_kill_waypoint (object_get_ai obj_emile)))
    (f_hud_spartan_waypoint (object_get_ai obj_emile) "emile_name" 60)
)

(script dormant void emile_outpost_waypoint
    (branch (volume_test_players "vol_outpost_int_server01") (branch_kill))
    (f_hud_spartan_waypoint (object_get_ai obj_emile) "emile_name" 60)
)

(script dormant void jorge_waypoint
    (f_hud_spartan_waypoint (object_get_ai obj_jorge) "jorge_name" 60)
)

(script static void (branch_kill_waypoint (ai spartan))
    (chud_track_object spartan false)
)

(script dormant void obj_start
    (sleep_until (>= g_ui_obj_control 5) 5)
    (if (= g_ui_obj_control 5)
        (wake obj_01_locate_start)
    )
    (sleep_until (>= g_ui_obj_control 10) 5)
    (if (= g_ui_obj_control 10)
        (wake obj_engage_start)
    )
    (sleep_until (>= g_ui_obj_control 20) 5)
    (if (= g_ui_obj_control 20)
        (wake obj_recon_start)
    )
    (sleep_until (>= g_ui_obj_control 30) 5)
    (if (= g_ui_obj_control 30)
        (wake obj_troopers_start)
    )
    (sleep_until (>= g_ui_obj_control 40) 5)
    (if (= g_ui_obj_control 40)
        (wake obj_evac_start)
    )
    (sleep_until (>= g_ui_obj_control 50) 5)
    (if (= g_ui_obj_control 50)
        (wake obj_falcon_start)
    )
    (sleep_until (>= g_ui_obj_control 60) 5)
    (if (= g_ui_obj_control 60)
        (wake obj_outpost_start)
    )
    (sleep_until (>= g_ui_obj_control 70) 5)
    (if (= g_ui_obj_control 70)
        (wake obj_outpost02_start)
    )
    (sleep_until (>= g_ui_obj_control 80) 5)
    (if (= g_ui_obj_control 80)
        (wake obj_outpost03_start)
    )
    (sleep_until (>= g_ui_obj_control 90) 5)
    (if (= g_ui_obj_control 90)
        (wake obj_inside_start)
    )
)

(script dormant void obj_01_locate_start
    (f_hud_obj_new "ct_objective_locate" "primary_objective_1")
)

(script dormant void obj_locate02_start
    (f_hud_obj_new "ct_objective_investigate" "primary_objective_1_5")
)

(script dormant void obj_engage_start
    (f_hud_obj_new "ct_objective_engage" "primary_objective_2")
)

(script dormant void obj_recon_start
    (f_hud_obj_new "ct_objective_recon" "primary_objective_35")
)

(script dormant void obj_troopers_start
    (f_hud_obj_new "ct_objective_troopers" "primary_objective_45")
)

(script dormant void obj_evac_start
    (f_hud_obj_new "ct_objective_evac" "primary_objective_4")
)

(script dormant void obj_falcon_start
    (f_hud_obj_new "ct_objective_falcon" "primary_objective_5")
)

(script dormant void obj_outpost_start
    (f_hud_obj_new "ct_objective_outpost01" "primary_objective_55")
)

(script dormant void obj_outpost02_start
    (f_hud_obj_new "ct_objective_outpost02" "primary_objective_6")
)

(script dormant void obj_outpost03_start
    (f_hud_obj_new "ct_objective_outpost03" "primary_objective_65")
)

(script dormant void obj_inside_start
    (f_hud_obj_new "ct_objective_inside" "primary_objective_7")
)

(script static void hud_unblip_all
    (f_unblip_object "sc_beacon_nav")
    (f_unblip_object "sc_hud_barn01")
    (f_unblip_object "sc_hud_meadow_waypoint01")
    (f_unblip_object "v_3kiva_pickup_init")
    (f_unblip_object "sc_hud_3kiva01")
    (f_unblip_object "sc_hud_3kiva02")
    (f_unblip_object "sc_hud_3kiva03")
    (f_unblip_object (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (f_unblip_object (ai_vehicle_get_from_squad "3kiva_fork" 0))
    (f_unblip_object "dc_outpost_health")
    (f_unblip_object "sc_hud_outpost_body")
)

(script dormant void training_look_start
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (sleep 60)
    (chud_cinematic_fade 1 30)
    (training_look player0)
)

(script static void (training_look (player player_num))
    (print "begin training look")
    (chud_show_screen_training player_num "tr_look")
    (sleep 90)
    (training_player_has_looked)
    (print "player has looked")
    (chud_show_screen_training player_num "")
    (print "ask player if they like their settings ")
    (f_display_message_confirm player_num "tr_look_accept")
    (if (player_action_test_accept)
        (begin
            (print "camera settings accepted")
            (set b_training_look_done true)
            (f_training_set_look_pref player0)
        )
        (if (player_action_test_rotate_weapons)
            (begin
                (print "camera settings rejected")
                (f_training_look_rejected player0)
            )
            (if true
                (f_display_message_time player_num "tr_start_menu_short" 200)
            )
        )
    )
    (print "training look done")
    (set b_training_look_done true)
)

(script static void training_player_has_looked
    (player_action_test_reset)
    (sleep 5)
    (sleep_until (or (player_action_test_look_relative_up) (player_action_test_look_relative_down) (player_action_test_look_relative_left) (player_action_test_look_relative_right)))
    (sleep_until (or (player_action_test_look_relative_all_directions) (>= g_1stbowl_obj_control 7)) 30 (* 30 10))
    (sleep 80)
)

(script static void (f_training_set_look_pref (player player_num))
    (chud_show_screen_training player_num "")
    (sleep 30)
    (f_display_message_time player_num "tr_start_menu_short" 250)
    (sleep 15)
)

(script static void (f_training_look_rejected (player player_num))
    (chud_show_cinematic_title player_num "tr_look_reject")
    (player_invert_look player_num)
    (sleep 30)
    (chud_show_cinematic_title player_num "tr_look")
    (sleep 15)
    (training_player_has_looked)
    (f_display_message_confirm player_num "tr_look_accept")
    (if (player_action_test_accept)
        (begin
            (print "camera settings accepted")
            (set b_training_look_done true)
            (f_training_set_look_pref player0)
        )
        (if (player_action_test_rotate_weapons)
            (begin
                (print "camera settings rejected")
                (f_training_look_rejected player0)
            )
        )
    )
    (chud_show_screen_training player_num "")
    (set b_training_look_done true)
)

(script dormant void ct_training_sprint_start
    (branch (volume_test_players "vol_barn_start") (branch_kill))
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (sleep_until (volume_test_players "tv_training_sprint") 5)
    (wake ct_training_sprint_start0)
    (wake ct_training_sprint_start1)
    (wake ct_training_sprint_start2)
    (wake ct_training_sprint_start3)
)

(script dormant void ct_training_sprint_start0
    (f_hud_training_confirm player0 "ct_training_sprint" "equipment")
)

(script dormant void ct_training_sprint_start1
    (f_hud_training_confirm player1 "ct_training_sprint" "equipment")
)

(script dormant void ct_training_sprint_start2
    (f_hud_training_confirm player2 "ct_training_sprint" "equipment")
)

(script dormant void ct_training_sprint_start3
    (f_hud_training_confirm player3 "ct_training_sprint" "equipment")
)

(script static void training_motion_tracker
    (chud_show_motion_sensor false)
    (chud_set_static_hs_variable player0 4 1)
    (chud_show_motion_sensor true)
    (sleep 15)
    (chud_clear_hs_variable player0 4)
)

(script dormant void ct_training_switch
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (sleep_until (volume_test_players "vol_meadow_halfway"))
    (f_hud_training_confirm player0 "ct_training_switch" "rotate_weapons")
)

(script dormant void ct_training_exit_start
    (branch (not (unit_in_vehicle (unit player0))) (f_hud_training_clear player0))
    (f_hud_training_forever player0 "ct_training_enterexit")
    (sleep_until (not (unit_in_vehicle (unit player0))) 5)
    (f_hud_training_clear player0)
)

(script dormant void ct_training_enterexit_start
    (branch (or (unit_in_vehicle (unit player0)) (volume_test_players "vol_3kiva_1bsp")) (ct_training_enterexit_done))
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (sleep_until (>= 10 (objects_distance_to_object player0 "v_3kiva_pickup_init")) 5)
    (f_blip_object_offset "v_3kiva_pickup_init" blip_default 1)
    (sleep_until 
        (begin
            (sleep_until (player_can_see_and_dist "v_3kiva_pickup_init" 10 5) 5)
            (f_hud_training_forever player0 "ct_training_enterexit")
            (sleep_until (not (<= (objects_distance_to_object player0 "v_3kiva_pickup_init") 6)) 5)
            (f_hud_training_clear player0)
            false
        )
    )
)

(script static void ct_training_enterexit_done
    (f_hud_training_clear player0)
    (f_unblip_object "v_3kiva_pickup_init")
)

(script dormant void training_health
    (branch (or (>= (unit_get_health player0) 1) (volume_test_players "tv_body_search")) (f_unblip_object "dc_outpost_health"))
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (if (>= (unit_get_health player0) 1)
        (sleep_forever)
    )
    (sleep_until (< (objects_distance_to_object "dc_outpost_health" player0) 4) 1)
    (f_blip_object "dc_outpost_health" blip_default)
    (wake ct_training_health_start)
)

(script dormant void ct_training_health_start
    (f_hud_training player0 "ct_training_health")
)

(script dormant void ct_training_activate_start
    (branch (>= (device_get_position "dc_outpost_end") 1) (f_unblip_object "dc_outpost_end"))
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (f_blip_object "dc_outpost_end" blip_interface)
    (sleep_until (>= (device_get_position "dc_outpost_end") 1) 5)
    (f_unblip_object "dc_outpost_end")
)

(script dormant void ct_training_activate_end
    (f_unblip_object "dc_outpost_end")
)

(script dormant void ct_training_jump_start
    (f_hud_training player0 "ct_training_jump")
)

(script dormant void ct_training_melee_start
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (sleep_until (volume_test_players "tv_barn_training_grenades") 5)
    (f_hud_training player0 "ct_training_melee")
)

(script dormant void ct_training_grenades_start
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (f_hud_training player0 "ct_training_grenades")
)

(script dormant void ct_training_nightvision_start
    (if (= (game_difficulty_get) legendary)
        (sleep_forever)
    )
    (f_hud_training player0 "ct_training_nightvision")
)

(script dormant void ct_training_nightvision02_start
    (branch (volume_test_players "tv_body_search") (f_hud_training_clear player0))
    (sleep 20)
    (f_hud_training_confirm player0 "ct_training_nightvision" "vision_trigger")
)

(script dormant void m10_weapon_training
    (sleep_until (or (unit_has_weapon player0 "objects\weapons\rifle\dmr\dmr.weapon") (unit_has_weapon player0 "objects\weapons\pistol\plasma_pistol\plasma_pistol.weapon") (unit_has_weapon player0 "objects\weapons\rifle\plasma_rifle\plasma_rifle.weapon") (unit_has_weapon player0 "objects\weapons\pistol\needler\needler.weapon") (unit_has_weapon player0 "objects\weapons\rifle\needle_rifle\needle_rifle.weapon")) 5)
    (sleep 10)
    (f_hud_training_new_weapon)
)

(script static void (f_display_message_time (player player_num, string_id display_title, short ticks))
    (chud_show_screen_training player_num display_title)
    (sleep ticks)
    (chud_show_screen_training player_num "")
)

(script static void (f_display_message_confirm (player player_num, string_id display_title))
    (chud_show_screen_training player_num display_title)
    (sleep 5)
    (unit_action_test_reset player_num)
    (sleep 5)
    (sleep_until (or (unit_action_test_accept player_num) (unit_action_test_rotate_weapons player_num) (>= g_1stbowl_obj_control 8)) 1)
    (print "player has given input")
    (chud_show_screen_training player_num "")
    (sleep 5)
)

(script static void (f_display_message_accept (player player_num, string_id display_title))
    (chud_show_screen_training player_num display_title)
    (sleep 5)
    (unit_action_test_reset player_num)
    (sleep 5)
    (sleep_until (unit_action_test_accept player_num) 1)
    (chud_show_screen_training player_num "")
    (sleep 30)
)

(script dormant void chapter_01_start
    (sleep 30)
    (f_hud_chapter "chapter_01")
    (if (not (game_is_cooperative))
        (spartan_waypoints)
    )
)

(script dormant void chapter_02_start
    (sleep_until (volume_test_players "tv_3kiva_start03") 5)
    (f_hud_chapter "chapter_02")
)

(script dormant void chapter_03_start
    (sleep 90)
    (f_hud_chapter "chapter_03")
)

(script dormant void achievment01_start
    (sleep_until (= (current_zone_set_fully_active) 4))
    (sleep_until (or (any_players_in_vehicle) 3kiva_done))
    (if 3kiva_done
        (begin
            (print "achievement: no pickups")
            (submit_incident_with_cause_player "3kiva_clear" player0)
            (submit_incident_with_cause_player "3kiva_clear" player1)
            (submit_incident_with_cause_player "3kiva_clear" player2)
            (submit_incident_with_cause_player "3kiva_clear" player3)
        )
        (print "achievement: fail")
    )
)

(script dormant void ceiling_control
    (soft_ceiling_enable "camera_blocker_07" false)
    (soft_ceiling_enable "camera_blocker_06" false)
    (sleep_until (or (volume_test_players "tv_1stbowl_adv02") (> g_insertion_index 0)))
    (soft_ceiling_enable "falcon_ride" false)
    (soft_ceiling_enable "camera_blocker_01" false)
    (sleep_until (or (volume_test_players "tv_barn_hud") (>= g_insertion_index 1)))
    (soft_ceiling_enable "camera_blocker_02" false)
    (sleep_until (or (= (current_zone_set) 4) (>= g_insertion_index 2)))
    (soft_ceiling_enable "camera_blocker_07" true)
    (sleep_until (or (volume_test_players "vol_meadow_start02") (>= g_insertion_index 2)))
    (soft_ceiling_enable "camera_blocker_03" false)
    (sleep_until (or (volume_test_players "vol_meadow_exit") (volume_test_players "tv_meadow_backleft") (>= g_insertion_index 2)))
    (soft_ceiling_enable "camera_blocker_04" false)
    (sleep_until (or (= (current_zone_set) 5) (>= g_insertion_index 3)))
    (soft_ceiling_enable "camera_blocker_06" true)
    (sleep_until (or (volume_test_players "vol_3kiva_1bsp") (>= g_insertion_index 3)))
    (soft_ceiling_enable "camera_blocker_05" false)
)

(script static boolean obj_1adv_0_0
    (not (volume_test_players "tv_1stbowl_wildlife02"))
)

(script static boolean obj_atasks_1_2
    (volume_test_players "vol_meadow_quartway")
)

(script static boolean obj_atasks_1_3
    (volume_test_players "vol_meadow_quartway")
)

(script static boolean obj_atasks_1_4
    (volume_test_players "vol_meadow_halfway")
)

(script static boolean obj_atasks_1_5
    (volume_test_players "vol_meadow_halfway")
)

(script static boolean obj_ameado_2_0
    (volume_test_players "vol_meadow_quartway")
)

(script static boolean obj_atasks_2_4
    (volume_test_players "vol_meadow_start02")
)

(script static boolean obj_1gate__3_0
    (volume_test_players "vol_1stbowl_kiva01")
)

(script static boolean obj_1gate__3_2
    (>= g_1stbowl_obj_control 30)
)

(script static boolean obj_1beaco_3_4
    (volume_test_players "tv_1stbowl_gas")
)

(script static boolean obj_1gate__3_6
    warthog_done
)

(script static boolean obj_1gate__3_15
    (>= g_1stbowl_obj_control 20)
)

(script static boolean obj_1gate__3_18
    (volume_test_players "tv_1stbowl_witnesses")
)

(script static boolean obj_1tasks_3_20
    (volume_test_players "tv_1stbowl_adv02")
)

(script static boolean obj_1tasks_3_21
    (volume_test_players "tv_1stbowl_adv02")
)

(script static boolean obj_1tasks_3_22
    (volume_test_players "tv_1stbowl_adv01")
)

(script static boolean obj_1tasks_3_23
    (volume_test_players "tv_1stbowl_adv01")
)

(script static boolean obj_1tasks_3_24
    (volume_test_players "tv_1stbowl_adv03")
)

(script static boolean obj_1gate__3_25
    beacon_done
)

(script static boolean obj_1gt_wi_3_33
    (volume_test_players "tv_1stbowl_wildlife")
)

(script static boolean obj_1side__3_35
    (volume_test_players "tv_1stbowl_cliffside")
)

(script static boolean obj_1sprin_3_36
    (volume_test_players "tv_training_sprint")
)

(script static boolean obj_1playe_3_38
    (= g_1stbowl_obj_control 99)
)

(script static boolean obj_bspart_5_0
    (volume_test_players "tv_barn_combat02")
)

(script static boolean obj_bbodie_5_1
    (volume_test_players "vol_barn_start")
)

(script static boolean obj_bbodie_5_2
    (volume_test_players "vol_barn_start02")
)

(script static boolean obj_bgate__5_3
    (volume_test_players "tv_barn_bloodtrail03")
)

(script static boolean obj_bbarn__5_4
    (volume_test_players "vol_barn_courtyard")
)

(script static boolean obj_bgate__5_11
    (<= (ai_task_count "obj_barn_cov/gate_barn_main") 0)
)

(script static boolean obj_bspart_5_12
    (<= (ai_task_count "obj_barn_cov/overlook_inf") 0)
)

(script static boolean obj_btasks_5_13
    (>= (ai_task_count "obj_barn_cov/overlook_fallback01") 1)
)

(script static boolean obj_bemile_5_15
    (volume_test_objects "tv_barn_window_view" obj_emile)
)

(script static boolean obj_bgate__5_16
    (game_is_cooperative)
)

(script static boolean obj_blower_6_1
    (not (volume_test_players "vol_barn_lower01"))
)

(script static boolean obj_bgate__6_2
    (volume_test_players "tv_barn_combat02")
)

(script static boolean obj_belite_6_7
    (volume_test_players "vol_barn_courtyard02")
)

(script static boolean obj_bgrunt_6_10
    (volume_test_players "tv_barn_combat02")
)

(script static boolean obj_belite_6_11
    (volume_test_players "tv_barn_main")
)

(script static boolean obj_belite_6_12
    (volume_test_players "tv_barn_combat02")
)

(script static boolean obj_boverl_6_13
    (not (volume_test_players "tv_barn_end"))
)

(script static boolean obj_bgate__6_15
    (volume_test_players "vol_barn_lower01")
)

(script static boolean obj_boverl_6_18
    (not (volume_test_players "tv_barn_end"))
)

(script static boolean obj_bsidef_6_22
    (volume_test_players "tv_barn_lower_sideflank")
)

(script static boolean obj_mplaye_7_1
    (volume_test_players "vol_meadow_exit")
)

(script static boolean obj_mlead_7_2
    (volume_test_players "tv_meadow_river01")
)

(script static boolean obj_mlead__7_3
    (volume_test_players "vol_meadow_quartway")
)

(script static boolean obj_mlead__7_4
    (volume_test_players "vol_meadow_halfway")
)

(script static boolean obj_mlead__7_5
    (<= (ai_task_count "obj_meadow_cov/gate_meadow_front") 0)
)

(script static boolean obj_mcarte_7_6
    (<= (ai_living_count "obj_meadow_cov") 0)
)

(script static boolean obj_mjorge_7_7
    (<= (ai_living_count "obj_meadow_cov") 0)
)

(script static boolean obj_mkat_e_7_10
    (>= (ai_living_count "meadow_falcon02") 1)
)

(script static boolean obj_memile_7_11
    (>= (ai_living_count "meadow_falcon02") 1)
)

(script static boolean obj_mjorge_7_12
    (and (>= (ai_living_count "meadow_falcon02") 1) (not (<= (game_coop_player_count) 3)))
)

(script static boolean obj_melite_7_13
    (>= (ai_task_status "obj_meadow_cov/meadow_elite_init") ai_task_status_exhausted)
)

(script static boolean obj_mcov01_8_0
    (not (volume_test_players "vol_meadow_quartway"))
)

(script static boolean obj_mtasks_8_3
    (< (ai_combat_status "obj_meadow_cov") ai_combat_status_definite)
)

(script static boolean obj_mfinal_8_5
    (<= (ai_task_count "obj_meadow_cov/gate_meadow_front") 3)
)

(script static boolean obj_mcov_f_8_6
    (volume_test_players "tv_meadow_cov_fallback")
)

(script static boolean obj_mbackl_8_11
    (volume_test_players "tv_meadow_backleft")
)

(script static boolean obj_mfront_8_12
    (volume_test_players "tv_meadow_middleright")
)

(script static boolean obj_mback__8_13
    (volume_test_players "tv_meadow_middleright")
)

(script static boolean obj_mmeado_8_15
    (volume_test_players "vol_meadow_exit")
)

(script static boolean obj_mcov_i_8_17
    (not (volume_test_players "tv_meadow_adv01"))
)

(script static boolean obj_mmeado_8_21
    (volume_test_players "tv_meadow_middleright")
)

(script static boolean obj_mfreak_9_0
    (volume_test_players "tv_wildlife_meadow")
)

(script static boolean obj_3vehic_10_1
    (spartans_allowed_in_pickup)
)

(script static boolean obj_3picku_10_2
    (volume_test_players_all "tv_3kiva_start02")
)

(script static boolean obj_3carte_10_3
    (and (not 3kiva01_done) (< 3kiva_troopers_bsp 2))
)

(script static boolean obj_3gate__10_4
    (carter_driving_pickup)
)

(script static boolean obj_3carte_10_5
    (not 3kiva02_done)
)

(script static boolean obj_3carte_10_6
    (not 3kiva03_done)
)

(script static boolean obj_3foot__10_7
    (and (volume_test_object "vol_3kiva01_approach02" obj_carter) 3kiva01_done)
)

(script static boolean obj_33kiva_10_8
    (volume_test_objects "tv_3kiva_pickup_start" obj_carter)
)

(script static boolean obj_3perim_11_3
    (not (= 3kiva_troopers_bsp 3))
)

(script static boolean obj_33kiva_11_4
    (not (volume_test_players "tv_3kiva_cov01"))
)

(script static boolean obj_33kiva_11_7
    (not 3kiva01_done)
)

(script static boolean obj_33kiva_11_8
    (not (volume_test_players "tv_3kiva_cov02"))
)

(script static boolean obj_3tasks_11_11
    3kiva01_done
)

(script static boolean obj_3bob02_11_13
    (volume_test_players "vol_3kiva_2bsp")
)

(script static boolean obj_3bob03_11_14
    (volume_test_players "vol_3kiva_3bsp")
)

(script static boolean obj_3bob01_11_15
    (volume_test_players "vol_3kiva01_entry_right")
)

(script static boolean obj_3kiva0_12_2
    (volume_test_players "vol_3kiva_2bsp")
)

(script static boolean obj_3kiva0_12_3
    (volume_test_players "vol_3kiva_3bsp")
)

(script static boolean obj_3gate__12_4
    3kiva_done
)

(script static boolean obj_3kiva0_12_5
    (volume_test_players "vol_3kiva_1bsp")
)

(script static boolean obj_3kiva0_12_6
    (volume_test_players "vol_3kiva_2bsp")
)

(script static boolean obj_3kiva0_12_7
    (volume_test_players "vol_3kiva_3bsp")
)

(script static boolean obj_33kiva_12_8
    (vehicle_test_seat_unit_list (ai_vehicle_get_from_squad "intro_falcon_01" 0) none (players))
)

(script static boolean obj_3tasks_13_1
    (volume_test_players "vol_3kiva_1bsp")
)

(script static boolean obj_3tasks_13_2
    (or (volume_test_players "vol_3kiva_2bsp") (volume_test_players "vol_3kiva_3bsp"))
)

(script static boolean obj_3tasks_13_4
    (volume_test_players "tv_3kiva_exit_area")
)

(script static boolean obj_3tasks_13_5
    (volume_test_players "vol_3kiva_2bsp")
)

(script static boolean obj_3tasks_13_6
    (volume_test_players "vol_3kiva_3bsp")
)

(script static boolean obj_33kiva_13_8
    (= 3kiva_troopers_bsp 2)
)

(script static boolean obj_3tasks_13_9
    (= 3kiva_troopers_bsp 3)
)

(script static boolean obj_33kiva_13_10
    (volume_test_players "vol_3kiva_2bsp")
)

(script static boolean obj_3tasks_13_12
    (= 3kiva_jun_bsp 2)
)

(script static boolean obj_3tasks_13_13
    (= 3kiva_jun_bsp 3)
)

(script static boolean obj_3tasks_14_3
    (<= (ai_living_count "obj_3kiva01c_cov") 3)
)

(script static boolean obj_3tasks_15_0
    3kiva_troopers_spoted
)

(script static boolean obj_3tasks_15_2
    3kiva_done
)

(script static boolean obj_3meet_15_3
    (= g_3kiva_obj_control 2)
)

(script static boolean obj_3tasks_16_1
    (<= (ai_living_count "obj_3kiva02_cov") 5)
)

(script static boolean obj_3tasks_16_5
    (not (volume_test_players "vol_3kiva02_approach02"))
)

(script static boolean obj_3tasks_16_10
    3kiva_troopers_spoted
)

(script static boolean obj_3perim_16_13
    3kiva_done
)

(script static boolean obj_3playe_17_1
    (any_players_in_vehicle)
)

(script static boolean obj_3evac_17_2
    3kiva_done
)

(script static boolean obj_3carte_17_3
    (<= (objects_distance_to_object "cr_3kiva_hogsite02" (ai_get_object "group_carter")) 12)
)

(script static boolean obj_3gate__17_4
    3kiva_troopers_found
)

(script static boolean obj_3jorge_17_5
    (<= (objects_distance_to_object "cr_3kiva_hogsite02" (ai_get_object "group_jorge")) 12)
)

(script static boolean obj_3clean_17_6
    (and (<= (ai_living_count "obj_3kiva02_cov") 5) (>= g_3kiva_obj_control 3))
)

(script static boolean obj_3playe_18_0
    3kiva_troopers_spoted
)

(script static boolean obj_3evac_18_2
    3kiva_done
)

(script static boolean obj_3meet_18_3
    (= g_3kiva_obj_control 2)
)

(script static boolean obj_3inf02_19_1
    (<= (ai_living_count "obj_3kiva03_cov") 5)
)

(script static boolean obj_3perim_19_11
    3kiva_done
)

(script static boolean obj_3playe_20_1
    (any_players_in_vehicle)
)

(script static boolean obj_3evac_20_2
    3kiva_done
)

(script static boolean obj_3gate__20_3
    3kiva_troopers_found
)

(script static boolean obj_3carte_20_4
    (<= (objects_distance_to_object "cr_3kiva_hogsite03" (ai_get_object "group_carter")) 12)
)

(script static boolean obj_3jorge_20_5
    (<= (objects_distance_to_object "cr_3kiva_hogsite03" (ai_get_object "group_jorge")) 12)
)

(script static boolean obj_3clean_20_6
    (and (<= (ai_living_count "obj_3kiva03_cov") 5) (>= g_3kiva_obj_control 3))
)

(script static boolean obj_ofallt_21_4
    (<= (ai_task_count "obj_outpost_ext_cov/gate_inf") 4)
)

(script static boolean obj_ogate__21_5
    (volume_test_players "tv_outpost_ext_control")
)

(script static boolean obj_odoor__21_7
    (<= (device_get_position "dm_outpost_blastdoor") 0.6)
)

(script static boolean obj_oplaye_21_13
    (unit_in_vehicle_type player0 20)
)

(script static boolean obj_ounder_21_14
    (volume_test_players "tv_outpost_ext_underside")
)

(script static boolean obj_ospart_22_0
    (>= g_outpost_ext_obj_control 20)
)

(script static boolean obj_ojorge_22_2
    (>= g_outpost_ext_obj_control 12)
)

(script static boolean obj_ocarte_22_4
    (>= g_outpost_ext_obj_control 12)
)

(script static boolean obj_ospart_22_6
    (>= g_outpost_ext_obj_control 12)
)

(script static boolean obj_ospart_22_8
    (>= g_outpost_ext_obj_control 40)
)

(script static boolean obj_ocarte_22_9
    (volume_test_players "vol_outpost_ext_advance")
)

(script static boolean obj_ojorge_22_10
    (volume_test_players "vol_outpost_ext_advance")
)

(script static boolean obj_ogate__23_1
    (volume_test_players "vol_outpost_int_back02")
)

(script static boolean obj_oelite_23_4
    (not (volume_test_players "vol_outpost_int_start02"))
)

(script static boolean obj_oelite_23_5
    (volume_test_players "vol_outpost_int_rear")
)

(script static boolean obj_ogate__23_6
    (volume_test_players "vol_outpost_int_back01")
)

(script static boolean obj_oinit__23_14
    (not (volume_test_players "vol_outpost_int_rear02"))
)

(script static boolean obj_obackh_23_16
    (volume_test_players "tv_outpost_int_back03")
)

(script static boolean obj_oelite_23_17
    (outpost_int_elite_back_prep)
)

(script static boolean obj_osidef_23_20
    (volume_test_players_all "tv_outpost_int_sideflank")
)

(script static boolean obj_ofight_24_1
    (volume_test_players "vol_outpost_int_back_hall01")
)

(script static boolean obj_oadv01_24_2
    (>= (ai_task_status "obj_outpost_int_cov/fallback2") ai_task_status_exhausted)
)

(script static boolean obj_oadv02_24_3
    (volume_test_players "vol_outpost_int_back01")
)

(script static boolean obj_otasks_24_4
    (<= (ai_living_count "obj_outpost_int_cov") 3)
)

(script static boolean obj_oserve_24_5
    (volume_test_players "vol_outpost_int_server01")
)

(script static boolean obj_oadv03_24_6
    (<= (ai_task_count "obj_outpost_int_cov/gate_back_hall") 0)
)

(script static boolean obj_ogate__24_7
    (volume_test_players "vol_outpost_combat")
)

(script static boolean obj_3adv01_26_1
    (volume_test_players "tv_3kiva_wildlife01")
)

(script static boolean obj_3tasks_26_4
    (volume_test_players "tv_3kiva_wildlife05")
)

(script static boolean obj_3tasks_26_5
    (volume_test_players "tv_3kiva_wildlife02")
)

(script static boolean obj_3tasks_26_6
    (volume_test_players "tv_3kiva_wildlife05b")
)

(script static boolean obj_3troop_26_7
    (and (= 3kiva_troopers_bsp 3) 3kiva_troopers_spoted)
)

(script static boolean obj_3troop_26_8
    (and (= 3kiva_troopers_bsp 2) 3kiva_troopers_spoted)
)

(script static boolean obj_3troop_26_9
    (= g_wildlife_control 2)
)

(script static boolean obj_3troop_26_10
    (= g_wildlife_control 2)
)

(script static boolean obj_3tasks_26_14
    (volume_test_players "tv_3kiva_wildlife04b")
)

(script static boolean obj_3tasks_26_15
    (volume_test_players "tv_3kiva_wildlife04")
)

(script static boolean obj_1go_in_27_3
    (>= g_1stbowl_obj_control 3)
)

(script static void ins_1stbowl
    (print "insertion point : 1st bowl")
    (if (or editor_cinematics (not (editor_mode)))
        (begin
            (print "switching zone sets:zoneset_intro_cinematic")
            (switch_zone_set "zoneset_intro_cinematic")
            (sleep_until (= (current_zone_set_fully_active) 0) 1)
        )
        (begin
            (print "switching zone sets for editor")
            (switch_zone_set "zoneset_insert")
            (sleep_until (= (current_zone_set_fully_active) 1) 1)
        )
    )
    (set g_insertion_index 0)
)

(script static void ins_barn
    (print "insertion point : barn")
    (set g_insertion_index 1)
    (if (!= (current_zone_set) 3)
        (begin
            (print "switching zone sets...")
            (switch_zone_set "zoneset_barn")
            (sleep_until (= (current_zone_set_fully_active) 3) 1)
        )
    )
    (ai_place "barn_carter")
    (ai_place "barn_kat")
    (ai_place "barn_jorge")
    (ai_place "barn_emile")
    (set obj_carter "barn_carter/carter")
    (set obj_kat "barn_kat/kat")
    (set obj_jorge "barn_jorge/jorge")
    (set obj_emile "barn_emile/emile")
    (ai_cannot_die "group_spartans" true)
    (ai_disregard (ai_actors "group_jun") true)
    (object_teleport_to_ai_point (player0) "ps_teleports/barn01")
    (object_teleport_to_ai_point (player1) "ps_teleports/barn02")
    (object_teleport_to_ai_point (player2) "ps_teleports/barn03")
    (object_teleport_to_ai_point (player3) "ps_teleports/barn04")
    (print "ai placed")
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "pts_1stbowl/air_support00h")
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_barn)
    (sleep 5)
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 10)
    (wake rain_start)
    (ai_dialogue_enable false)
    (cinematic_fade_to_gameplay)
    (wake obj_start)
    (game_save_immediate)
)

(script static void ins_meadow
    (print "insertion point : meadow")
    (set g_insertion_index 2)
    (if (!= (current_zone_set) zoneset_all)
        (begin
            (print "switching zone sets...")
            (switch_zone_set "zoneset_barn_outro")
            (sleep_until (= (current_zone_set_fully_active) 4) 1)
        )
    )
    (ai_place "spartan_carter/carter_barn")
    (ai_place "spartan_kat/kat_barn")
    (ai_place "spartan_emile/emile_barn")
    (ai_place "spartan_jorge/jorge_barn")
    (set obj_carter (ai_get_unit "spartan_carter/carter_barn"))
    (set obj_kat (ai_get_unit "spartan_kat/kat_barn"))
    (set obj_emile (ai_get_unit "spartan_emile/emile_barn"))
    (set obj_jorge (ai_get_unit "spartan_jorge/jorge_barn"))
    (ai_cannot_die "group_spartans" true)
    (ai_disregard (ai_actors "group_jun") true)
    (ai_set_objective "all_humans" "obj_meadow_hum")
    (object_teleport (player0) "flag_teleport_meadow00")
    (object_teleport (player1) "flag_teleport_meadow01")
    (object_teleport (player2) "flag_teleport_meadow02")
    (object_teleport (player3) "flag_teleport_meadow03")
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/barn")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "ps_air_meadow/falcon_barn_entry")
    (sleep 5)
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 10)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_barn_combat_done)
    (ai_place "barn_skirm02")
    (ai_set_objective "barn_skirm02" "obj_meadow_cov")
    (wake rain_barn_start)
    (sleep 60)
    (cinematic_fade_to_gameplay)
    (set g_ui_obj_control 10)
    (wake obj_start)
    (game_save_immediate)
)

(script static void ins_3kiva
    (print "insertion point : 3kiva")
    (set g_insertion_index 3)
    (if (!= (current_zone_set) zoneset_all)
        (begin
            (print "switching zone sets...")
            (switch_zone_set "zoneset_barn_outro")
            (sleep_until (= (current_zone_set_fully_active) 4) 1)
        )
    )
    (object_teleport_to_ai_point (player0) "ps_teleports/3kiva01")
    (object_teleport_to_ai_point (player1) "ps_teleports/3kiva02")
    (object_teleport_to_ai_point (player2) "ps_teleports/3kiva03")
    (object_teleport_to_ai_point (player3) "ps_teleports/3kiva04")
    (ai_place "spartan_carter/3kiva")
    (ai_place "spartan_jorge/3kiva")
    (ai_set_objective "group_carter" "obj_3kiva_hum")
    (ai_set_objective "group_jorge" "obj_3kiva_hum")
    (ai_cannot_die "group_spartans" true)
    (ai_disregard (ai_actors "group_jun") true)
    (set obj_carter (ai_get_unit "group_carter"))
    (set obj_jorge (ai_get_unit "group_jorge"))
    (if (not (game_is_cooperative))
        (spartan_waypoints)
    )
    (wake rain_barn_start)
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/3kiva")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (sleep 5)
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 10)
    (soft_ceiling_enable "player_blocker_end" true)
    (insertion_fade_to_gameplay)
    (set g_ui_obj_control 20)
    (wake obj_start)
    (wake barn_bodies_door)
    (wake music_alpha)
    (game_save_immediate)
)

(script static void ins_outpost_ext
    (print "insertion point : outpost")
    (set g_insertion_index 4)
    (if (!= (current_zone_set) zoneset_all)
        (begin
            (print "switching zone sets...")
            (switch_zone_set "zoneset_outpost_intro")
            (sleep_until (= (current_zone_set_fully_active) 6) 1)
        )
    )
    (object_teleport_to_ai_point (player0) "ps_teleports/outpost01")
    (object_teleport_to_ai_point (player1) "ps_teleports/outpost02")
    (object_teleport_to_ai_point (player2) "ps_teleports/outpost03")
    (object_teleport_to_ai_point (player3) "ps_teleports/outpost04")
    (ai_place "spartan_carter/outpost")
    (set obj_carter (ai_get_unit "spartan_carter/outpost"))
    (ai_place "spartan_jorge/outpost")
    (set obj_jorge (ai_get_unit "spartan_jorge/outpost"))
    (ai_cannot_die "group_spartans" true)
    (ai_set_objective "group_carter" "obj_outpost_ext_hum")
    (ai_set_objective "group_jorge" "obj_outpost_ext_hum")
    (if (not (game_is_cooperative))
        (spartan_waypoints)
    )
    (wake rain_outpost_start)
    (soft_ceiling_enable "all" false)
    (soft_ceiling_enable "player_blocker_end" true)
    (sleep 30)
    (insertion_fade_to_gameplay)
    (set g_ui_obj_control 60)
    (wake obj_start)
    (wake music_bravo)
    (game_save_immediate)
)

(script static void ins_outpost_int
    (print "insertion point : outpost")
    (set g_insertion_index 5)
    (if (!= (current_zone_set) zoneset_all)
        (begin
            (print "switching zone sets...")
            (switch_zone_set "zoneset_outpost_interior")
            (sleep_until (= (current_zone_set_fully_active) 7) 1)
        )
    )
    (object_teleport_to_ai_point (player0) "ps_teleports/outpost_int01")
    (object_teleport_to_ai_point (player1) "ps_teleports/outpost_int02")
    (object_teleport_to_ai_point (player2) "ps_teleports/outpost_int03")
    (object_teleport_to_ai_point (player3) "ps_teleports/outpost_int04")
    (set g_outpost_ext_obj_control 30)
    (ai_place "spartan_carter/outpost_int")
    (ai_place "spartan_kat/outpost")
    (ai_place "spartan_jorge/outpost_int")
    (ai_place "spartan_emile/outpost")
    (set obj_carter (ai_get_unit "spartan_carter/outpost_int"))
    (set obj_kat (ai_get_unit "spartan_kat/outpost"))
    (set obj_jorge (ai_get_unit "spartan_jorge/outpost_int"))
    (set obj_emile (ai_get_unit "spartan_emile/outpost"))
    (ai_cannot_die "group_spartans" true)
    (ai_set_objective "group_spartans" "obj_outpost_ext_hum")
    (ai_set_objective "group_carter" "obj_outpost_ext_hum")
    (ai_set_objective "group_kat" "obj_outpost_ext_hum")
    (ai_set_objective "group_jorge" "obj_outpost_ext_hum")
    (set g_outpost_ext_obj_control 40)
    (set g_ui_obj_control 80)
    (wake obj_start)
    (device_set_position_immediate "dm_outpost_door01" 0)
    (soft_ceiling_enable "all" false)
    (soft_ceiling_enable "player_blocker_end" true)
    (device_set_power "dm_outpost_blastdoor" 1)
    (sleep 1)
    (device_set_position_immediate "dm_outpost_blastdoor" 0.45)
    (sleep 1)
    (device_set_position "dm_outpost_blastdoor" 0)
    (cinematic_fade_to_gameplay)
    (game_save_immediate)
    (sleep 1)
    (thespian_performance_setup_and_begin "vig_outpost_rally" "" 0)
    (sleep_until (= (device_get_position "dm_outpost_blastdoor") 0))
    (device_set_power "dm_outpost_blastdoor" 0)
    (sleep 60)
    (sleep_until (>= g_outpost_ext_obj_control 50) 1 200)
    (device_set_position "dm_outpost_door01" 1)
    (sleep 40)
    (thespian_performance_kill_by_ai "group_spartans")
    (ai_set_objective "group_carter" "obj_outpost_int_hum")
    (ai_set_objective "group_kat" "obj_outpost_int_hum")
    (ai_set_objective "group_jorge" "obj_outpost_int_hum")
    (wake ct_training_nightvision02_start)
)

(script static void ins_blank
    (print "insertion point : blank")
    (cinematic_fade_to_gameplay)
    (game_save_immediate)
)

(script static void vig_outpost_trooper
    (performance_play_line "tele")
    (cs_stow (performance_get_actor "trooper") true)
    (performance_play_line "cs_stow")
    (performance_play_line "anim")
    (sleep_forever)
    (performance_play_line "sleep_forever")
)

(script static void vig_outpost_fallback
    (performance_play_line "emile_init")
    (performance_play_line "carter_goto")
    (cs_enable_targeting (performance_get_actor "carter") true)
    (performance_play_line "carter_targeting")
    (performance_play_line "emile_goto")
    (cs_enable_targeting (performance_get_actor "emile") true)
    (performance_play_line "emile_targeting")
    (performance_play_line "jorge_goto")
    (cs_enable_targeting (performance_get_actor "jorge") true)
    (performance_play_line "jorge_targeting")
    (sleep_until (>= g_outpost_ext_obj_control 40))
    (performance_play_line "sleep_until_door_closed")
)

(script static void carter_falcon_intro
    (ai_vehicle_enter_immediate (performance_get_actor "carter") (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25)
    (performance_play_line "load_into_falcon_01")
    (performance_play_line "look_at_outpost")
    (sleep_until (= g_1stbowl_obj_control 5))
    (performance_play_line "sleep_until_anim_mission_troopers")
    (performance_play_line "talk_anim01")
    (performance_play_line "look_at_beacon")
    (sleep_until (= g_1stbowl_obj_control 7))
    (performance_play_line "sleep_until_anim_put_us_down")
    (performance_play_line "point_anim")
    (sleep_until (= g_1stbowl_obj_control 8))
    (performance_play_line "sleep_until_anim_jun")
    (performance_play_line "talk_anim02")
    (performance_play_line "block_until_all_done")
    (sleep_until (>= (device_get_position "dm_falcon01_start") 0.9) 1)
    (performance_play_line "sleep_until_its_time_to_unload")
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25)
    (performance_play_line "unload_from_falcon")
    (sleep 90)
    (performance_play_line "sleep_for_anim_length")
    (performance_play_line "land_anim")
    (performance_play_line "face_beacon")
    (sleep_until (not (vehicle_test_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27)) 1)
    (performance_play_line "sleep_until_player_seat_is_empty")
    (performance_play_line "commands_anim")
    (performance_play_line "block_all")
)

(script static void vig_outpost_hack
    (performance_play_line "kat_tele01")
    (performance_play_line "sleep_30")
    (performance_play_line "stance_alert")
    (cs_stow (performance_get_actor "kat") true)
    (performance_play_line "cs_stow")
    (performance_play_line "kat_sync_idle")
    (sleep_until (volume_test_players "tv_outpost_ext_control"))
    (performance_play_line "sleep_until_player_in_tv")
    (performance_play_line "kat_sync_idle2")
    (sleep_until (>= g_outpost_ext_obj_control 20))
    (performance_play_line "sleep_until_obj_control_20")
    (performance_play_line "kat_sync_shutting")
    (sleep_until (>= g_outpost_ext_obj_control 40))
    (performance_play_line "sleep_until_obj_control")
    (performance_play_line "kat_sync_exit")
    (cs_stow (performance_get_actor "kat") false)
    (performance_play_line "cs_stow_false")
    (sleep 30)
    (performance_play_line "sleep30")
    (performance_play_line "all_done")
)

(script static void vig_outpost_hack_carter
    (performance_play_line "carter_goto01")
    (sleep_until (>= g_outpost_ext_obj_control 12))
    (performance_play_line "sleep_until_hold_off")
)

(script static void vig_barn_bodies
    (branch (volume_test_players "vol_barn_courtyard") (branch_kill_vignette))
    (performance_play_line "branch")
    (wake md_barn_dead_troopers)
    (performance_play_line "dialog")
    (performance_play_line "goto_align")
    (performance_play_line "anim")
    (performance_play_line "lookat")
)

(script static void vig_1stbowl_rock
    (performance_play_line "dialog")
    (wake md_1stbowl_rock_look02)
    (performance_play_line "sync_action")
    (performance_play_line "anim_exit")
    (performance_play_line "lines_6")
)

(script static void vig_beacon
    (wake md_1stbowl_beacon_found)
    (performance_play_line "dialog")
    (performance_play_line "kat_goto")
    (performance_play_line "emile_goto")
    (performance_play_line "sync_action")
)

(script static void vig_1stbowl_investigate
    (branch warthog_done (branch_kill_vignette))
    (performance_play_line "branch")
    (performance_play_line "goby")
    (performance_play_line "animate")
)

(script static void vig_1stbowl_investigate02
    (branch warthog_done (branch_kill_vignette))
    (performance_play_line "branch")
    (performance_play_line "goby")
    (wake md_1stbowl_blood)
    (performance_play_line "dialog")
    (performance_play_line "animate")
)

(script static void vig_taceval
    (performance_play_line "carter_goto01")
    (performance_play_line "carter_animate")
    (wake md_1stbowl_ex_residue)
    (performance_play_line "dialog")
    (performance_play_line "kat_goto01")
    (performance_play_line "kat_face_carter")
    (performance_play_line "sleep")
)

(script static void vig_barn_skirm_init
    (performance_play_line "tele01")
    (performance_play_line "tele02")
    (performance_play_line "anim01")
    (performance_play_line "anim02")
    (sleep_forever)
    (performance_play_line "sleep_forever")
)

(script static void vig_outpost_rally
    (print "vig:vig_outpost_rally")
    (performance_play_line "print_start")
    (wake md_outpost_rally)
    (performance_play_line "play_dialog")
    (performance_play_line "jorge_goto01")
    (performance_play_line "emile_goto01")
    (performance_play_line "carter_goto01")
    (set g_outpost_ext_obj_control 45)
    (performance_play_line "play_dialog_45")
    (sleep_until (>= g_outpost_ext_obj_control 47) 5 200)
    (performance_play_line "sleep_dialog_47")
    (performance_play_line "carter_animate")
    (performance_play_line "carter_goto02")
    (performance_play_line "carter_aimat_door")
    (sleep 60)
    (performance_play_line "carter_sleep_60")
    (sleep_until (>= g_outpost_ext_obj_control 50) 5 200)
    (performance_play_line "carter_sleep_lookat_door")
)

(script static void vig_outpost_kat_control
    (performance_play_line "goto")
    (performance_play_line "face_body")
    (sleep 80)
    (performance_play_line "sleep_80")
)

(script static void vig_outpost_jorge_control
    (performance_play_line "goto")
    (performance_play_line "face_body")
    (sleep_forever)
    (performance_play_line "sleep_80")
)

(script static void vig_outpost_flare
    (performance_play_line "sync")
    (vig_glowstick02)
    (performance_play_line "flare")
    (performance_play_line "block_done")
)

(script static void vig_outpost_elite_intro
    (performance_play_line "lines_0")
    (performance_play_line "lines_1")
)

(script static void vig_kiva02_meet
    (performance_play_line "carter_goto")
    (performance_play_line "trooper_goto")
    (performance_play_line "carter_face")
    (sleep_until (not b_is_dialogue_playing) 5)
    (performance_play_line "not_dialog")
    (performance_play_line "trooper_dialog")
    (performance_play_line "carter_dialog")
)

(script static void vig_kiva03_meet
    (performance_play_line "carter_goto")
    (performance_play_line "trooper_goto")
    (performance_play_line "carter_face")
    (sleep_until (not b_is_dialogue_playing) 5)
    (performance_play_line "not_dialog")
    (performance_play_line "trooper_dialog")
    (performance_play_line "carter_dialog")
)

(script static void thes_witnesses
    (performance_play_line "tele_male01")
    (performance_play_line "tele_male02")
    (performance_play_line "tele_mom")
    (performance_play_line "tele_daughter")
    (performance_play_line "open_door")
    (performance_play_line "jorge_enter")
    (performance_play_line "male01_enter")
    (sleep_until (object_running_sync_action (ai_get_object (performance_get_actor "male01")) "witnesses_enter") 1)
    (performance_play_line "sleep")
    (device_set_position "dm_kiva01_door" 0.42)
    (performance_play_line "device_open")
    (performance_play_line "male02_enter")
    (performance_play_line "jorge_dialogue")
    (performance_play_line "male01_dialogue")
    (performance_play_line "male01_idle2")
    (performance_play_line "male02_idle")
    (performance_play_line "male02_hands_down")
    (performance_play_line "mom_enter")
    (performance_play_line "daughter_enter_anim")
    (performance_play_line "mother_anim_loop")
    (performance_play_line "daughter_anim_loop")
    (performance_play_line "jorge_exit")
    (performance_play_line "male01_goto")
    (sleep_until (or (>= g_1stbowl_obj_control 30) (not (thespian_performance_is_blocked))) 1)
    (performance_play_line "cond_exit")
    (performance_play_line "mom_exit")
    (performance_play_line "daughter_exit")
    (performance_play_line "male02_exit")
    (performance_play_line "male01_exit")
    (device_set_position "dm_kiva01_door" 0)
    (performance_play_line "device_close")
    (performance_play_line "block_until_done01")
)

(script static void vig_barn_investigate01
    (performance_play_line "goby")
    (performance_play_line "animate")
)

(script static void vig_outpost_elite_leader
    (performance_play_line "teleport")
    (cs_stow (performance_get_actor "elite") true)
    (performance_play_line "stow")
    (performance_play_line "anim")
    (sleep_until (branch_outpost_elite_leader (performance_get_actor "elite")))
    (performance_play_line "sleep_forever")
    (performance_play_line "anim_exit")
)

(script static void kat_falcon_intro
    (ai_vehicle_enter_immediate (performance_get_actor "kat") (ai_vehicle_get_from_squad "intro_falcon_02" 0) 25)
    (performance_play_line "load_into_falcon_02")
    (sleep_until (>= (device_get_position "dm_falcon02_start") 0.65) 1)
    (performance_play_line "sleep_until_its_time_to_communicate")
    (performance_play_line "communication_anim")
    (sleep_until (>= (device_get_position "dm_falcon02_start") 0.86) 1)
    (performance_play_line "sleep_until_its_time_to_unload")
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 25)
    (performance_play_line "unload_from_falcon")
    (sleep 30)
    (performance_play_line "sleep_until_time_to_land")
    (performance_play_line "land")
    (performance_play_line "sleep")
    (cs_lower_weapon (performance_get_actor "kat") true)
    (performance_play_line "lower_weapon")
    (performance_play_line "goto_and_align")
    (performance_play_line "anim")
    (performance_play_line "alert")
    (sleep_until (not (vehicle_test_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27)) 1)
    (performance_play_line_by_id 12)
    (performance_play_line "block_all")
)

(script static void emile_falcon_intro
    (ai_vehicle_enter_immediate (performance_get_actor "emile") (ai_vehicle_get_from_squad "intro_falcon_02" 0) 24)
    (performance_play_line "load_into_falcon_02")
    (sleep_until (>= (device_get_position "dm_falcon02_start") 0.8333333) 1)
    (performance_play_line "sleep_until_its_time_to_unload")
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 24)
    (performance_play_line "unload_from_falcon")
    (sleep 33)
    (performance_play_line "sleep")
    (performance_play_line "land")
    (performance_play_line "goto")
    (performance_play_line "block_all")
)

(script static void vig_barn_callx
    (performance_play_line "lines_2")
)

(script static void vig_barn_call
    (performance_play_line "lines_2")
)

(script static void 0
    (if (= game_speed 0)
        (set game_speed 1)
        (set game_speed 0)
    )
)

(script static void 1
    (if ai_render_sector_bsps
        (set ai_render_sector_bsps false)
        (set ai_render_sector_bsps true)
    )
)

(script static void 2
    (if ai_render_objectives
        (set ai_render_objectives false)
        (set ai_render_objectives true)
    )
)

(script static void 3
    (if ai_render_decisions
        (set ai_render_decisions false)
        (set ai_render_decisions true)
    )
)

(script static void 4
    (if ai_render_command_scripts
        (set ai_render_command_scripts false)
        (set ai_render_command_scripts true)
    )
)

(script static void 5
    (if debug_performances
        (set debug_performances false)
        (set debug_performances true)
    )
)

(script static void 6
    (if debug_instanced_geometry_cookie_cutters
        (begin
            (set debug_instanced_geometry_cookie_cutters false)
            (set debug_structure_cookie_cutters false)
        )
        (begin
            (set debug_instanced_geometry_cookie_cutters true)
            (set debug_structure_cookie_cutters true)
        )
    )
)

(script static ai (object_get_squad (object ai_obj))
    (ai_get_squad (object_get_ai ai_obj))
)

(script static void test_1stbowl_falcons_start
    (ai_place "spartan_carter")
    (ai_place "spartan_kat")
    (ai_place "spartan_jorge")
    (ai_place "spartan_emile")
    (ai_place "spartan_jun")
    (ai_cannot_die "group_spartans" true)
    (ai_place "intro_falcon_01")
    (ai_place "intro_falcon_02")
    (objects_attach "dm_falcon01_start" "" (ai_vehicle_get_from_squad "intro_falcon_01" 0) "")
    (objects_attach "dm_falcon02_start" "" (ai_vehicle_get_from_squad "intro_falcon_02" 0) "")
    (wake md_1stbowl_hover)
    (wake intro_falcon01_anim_start)
    (wake intro_falcon02_anim_start)
    (intro_falcons_setup_start)
)

(script static void test_1stbowl_falcons_loop
    (ai_place "intro_falcon_01")
    (ai_place "intro_falcon_02")
    (ai_place "spartan_carter")
    (ai_place "spartan_kat")
    (ai_place "spartan_jorge")
    (ai_place "spartan_emile")
    (ai_place "spartan_jun")
    (ai_cannot_die "group_spartans" true)
    (intro_falcons_setup_start)
    (sleep_until 
        (begin
            (objects_attach "dm_falcon01_start" "" (ai_vehicle_get_from_squad "intro_falcon_01" 0) "")
            (objects_attach "dm_falcon02_start" "" (ai_vehicle_get_from_squad "intro_falcon_02" 0) "")
            (device_set_position_track "dm_falcon01_start" "m10_insert_dropoff_a" 0)
            (device_animate_position "dm_falcon01_start" 1 50 0.1 0.1 false)
            (device_set_position_track "dm_falcon02_start" "m10_insert_dropoff_b" 0)
            (device_animate_position "dm_falcon02_start" 1 55 0.1 0.1 false)
            (sleep_until (and (= (device_get_position "dm_falcon01_start") 1) (= (device_get_position "dm_falcon02_start") 1)))
            (sleep 90)
            (objects_detach "dm_falcon01_start" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
            (objects_detach "dm_falcon02_start" (ai_vehicle_get_from_squad "intro_falcon_02" 0))
            (object_destroy "dm_falcon01_start")
            (object_destroy "dm_falcon02_start")
            (sleep 1)
            (object_create "dm_falcon01_start")
            (object_create "dm_falcon02_start")
            false
        )
        1
    )
)

(script static void test_1stbowl_falcons_dropoff_loop
    (ai_place "intro_falcon_01")
    (ai_place "intro_falcon_02")
    (sleep_until 
        (begin
            (objects_attach "dm_falcon01_start" "" (ai_vehicle_get_from_squad "intro_falcon_01" 0) "")
            (intro_falcons_setup_start)
            (intro_falcon01_dropoff_start)
            (object_destroy "dm_falcon01_start")
            (object_create "dm_falcon01_start")
            false
        )
        1
    )
)

(script static void test_1stbowl_falcons_startpoints
    (ai_place "intro_falcon_01")
    (ai_place "intro_falcon_02")
    (objects_attach "dm_falcon01_start" "" (ai_vehicle_get_from_squad "intro_falcon_01" 0) "")
    (objects_attach "dm_falcon02_start" "" (ai_vehicle_get_from_squad "intro_falcon_02" 0) "")
    (vehicle_load_magic (ai_vehicle_get_from_squad "intro_falcon_02" 0) 27 player0)
)

(script static void test_1stbowl_falcons_endpoints
    (device_set_position_track "dm_falcon01_start" "m10_dropoff" 0)
    (device_animate_position "dm_falcon01_start" 0.568 0.1 0.1 0.1 false)
)

(script static void test_1stbowl_falcons_end
    (ai_place "intro_falcon_01")
    (ai_place "intro_falcon_02")
    (objects_attach "sc_falcon01_end" "" (ai_vehicle_get_from_squad "intro_falcon_01" 0) "")
    (objects_attach "sc_falcon02_end" "" (ai_vehicle_get_from_squad "intro_falcon_02" 0) "")
    (ai_place "spartan_carter/carter")
    (ai_place "spartan_kat/kat")
    (ai_place "spartan_jun/jun")
    (ai_place "spartan_emile/emile")
    (ai_place "spartan_jorge/jorge")
    (set obj_carter (ai_get_unit "spartan_carter/carter"))
    (set obj_kat (ai_get_unit "spartan_kat/kat"))
    (set obj_jun (ai_get_unit "spartan_jun/jun"))
    (set obj_emile (ai_get_unit "spartan_emile/emile"))
    (set obj_jorge (ai_get_unit "spartan_jorge/jorge"))
    (ai_vehicle_enter_immediate (object_get_ai obj_carter) (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25)
    (ai_vehicle_enter_immediate (object_get_ai obj_jun) (ai_vehicle_get_from_squad "intro_falcon_01" 0) 24)
    (ai_vehicle_enter_immediate (object_get_ai "spartan_kat") (ai_vehicle_get_from_squad "intro_falcon_02" 0) 25)
    (ai_vehicle_enter_immediate (object_get_ai obj_emile) (ai_vehicle_get_from_squad "intro_falcon_02" 0) 24)
    (ai_vehicle_enter_immediate (object_get_ai obj_jorge) (ai_vehicle_get_from_squad "intro_falcon_02" 0) 23)
    (vehicle_load_magic (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 player0)
    (unit_lower_weapon player0 0)
    (wake md_1stbowl_unload)
    (if (not (game_is_cooperative))
        (begin
            (wake ct_training_exit_start)
            (vehicle_set_player_interaction (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 false true)
        )
    )
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 25)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 24)
    (test_1stbowl_falcons_end02)
    (if (not (game_is_cooperative))
        (begin
            (sleep_until (not (unit_in_vehicle (unit player0))) 1)
            (f_set_falcon_interaction_false (ai_vehicle_get_from_squad "intro_falcon_01" 0))
            (unit_raise_weapon player0 30)
        )
    )
    (sleep 60)
    (objects_detach "sc_falcon01_end" (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 0.7)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_intro_falcons)
    (objects_detach "sc_falcon02_end" (ai_vehicle_get_from_squad "intro_falcon_02" 0))
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_02" 0) 0 0 0.7)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_02") cs_intro_falcons_02)
)

(script static void test_1stbowl_falcons_end02
    (print "wtf")
    (set g_1stbowl_obj_control 20)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 26 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 24 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 25 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 28 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 29 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_02" 0) 30 true)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_02" 0) 25)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 31 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 23 true)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_01" 0) 25)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 27 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 29 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 26 true)
    (ai_vehicle_reserve_seat (ai_vehicle_get_from_squad "intro_falcon_01" 0) 28 true)
    (vehicle_unload (ai_vehicle_get_from_squad "intro_falcon_01" 0) 30)
)

(script static void test_hog_effect
    (effect_new_at_ai_point "fx\fx_library\_placeholder\placeholder_explosion.effect" "pts_1stbowl/fx_hog")
)

(script static void test_beacon
    (ai_place "spartan_carter")
    (ai_place "spartan_kat")
    (ai_place "spartan_emile")
    (object_teleport_to_ai_point (object_get_ai "spartan_kat") "ps_vig_beacon/goto01_kat")
    (object_teleport_to_ai_point (object_get_ai "spartan_emile") "ps_vig_beacon/goto_emile")
    (thespian_performance_activate "vig_beacon")
)

(script static void test_witnesses
    (set g_1stbowl_obj_control 20)
    (ai_place "1stbowl_witnesses_dad")
    (ai_place "1stbowl_witnesses_family")
    (ai_place "spartan_jorge/witnesses")
    (ai_place "spartan_emile/witnesses")
    (ai_place "spartan_carter")
    (sleep 1)
    (thespian_performance_activate "thes_witnesses")
    (wake hud_barn_start)
    (wake witnesses_player_kills)
    (wake md_1stbowl_witnesses)
    (sleep_until (volume_test_players "tv_first_bowl_end") 5)
    (set g_1stbowl_obj_control 30)
)

(script static void test_hack
    (ai_place "spartan_kat/outpost")
    (set obj_kat (ai_get_unit "spartan_kat/outpost"))
    (ai_set_objective "group_spartans" "obj_outpost_ext_hum")
    (sleep 100)
    (print "kat: just... about... there!  we're in!")
    (f_md_ai_play 0 "group_kat" m10_2360)
    (set g_outpost_ext_obj_control 20)
    (sleep 400)
    (print "kat: door shut")
    (set g_outpost_ext_obj_control 40)
)

(script static void test_flare
    (ai_place "spartan_jorge/outpost02")
    (set obj_jorge (ai_get_unit "spartan_jorge/outpost"))
    (ai_cannot_die "group_spartans" true)
    (ai_set_objective "group_jorge" "obj_outpost_int_hum")
    (ai_set_task_condition "obj_outpost_int_hum/gate_jorge" true)
)

(script static void test_1stbowl_spartans
    (spartan_waypoints)
    (ai_cannot_die "group_spartans" true)
    (wake rain_start)
    (test_1stbowl_falcons_end)
    (sleep_until (not (any_players_in_vehicle)) 5)
    (wake 1stbowl_zoneset_control)
    (wake chapter_01_start)
    (wake obj_start)
    (wake md_1stbowl_orders)
    (wake md_1stbowl_next_structure)
    (wake 1stbowl_kiva_start)
    (wake witnesses_start)
    (wake hud_barn_start)
    (ai_dialogue_enable false)
    (sleep_until (>= (current_zone_set_fully_active) 2) 5)
    (game_save)
    (wake bowl_birds_start)
    (wake 1stbowl_wildlife_start)
    (sleep_until (volume_test_players "tv_1stbowl_gas"))
    (thespian_performance_kill_by_ai "group_spartans")
    (bring_spartans_forward 8)
    (game_save)
    (sleep_until (volume_test_players "tv_1stbowl_part2"))
    (set warthog_done true)
    (thespian_performance_kill_by_ai "group_spartans")
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_witnesses)
    (sleep_until (volume_test_players "tv_first_bowl_end") 5)
    (set g_1stbowl_obj_control 30)
    (bring_spartans_forward 8)
)

(script static void test_barn_call
    (ai_place "barn_skirm01")
    (thespian_performance_setup_and_begin "vig_barn_call" "" 0)
)

(script static void test_1stbowl_kiva01_start
    (switch_zone_set "zoneset_1stbowl")
    (sleep_until (= (current_zone_set_fully_active) 2) 1)
    (ai_place "spartan_carter")
    (ai_place "spartan_kat")
    (ai_place "spartan_jorge")
    (ai_place "spartan_emile")
    (set obj_carter (ai_get_unit "spartan_carter/carter"))
    (set obj_kat (ai_get_unit "spartan_kat/kat"))
    (set obj_jorge (ai_get_unit "spartan_jorge/jorge"))
    (set obj_emile (ai_get_unit "spartan_emile/emile"))
    (object_teleport obj_carter "flag_teleport_1stbowl_kiva01")
    (object_teleport obj_kat "flag_teleport_1stbowl_kiva02")
    (object_teleport obj_jorge "flag_teleport_1stbowl_kiva03")
    (object_teleport obj_emile "flag_teleport_1stbowl_kiva04")
    (object_teleport (player0) "flag_teleport_1stbowl_kiva05")
    (sleep_until (volume_test_players "vol_barn_start") 5)
    (wake barn_start)
)

(script static void test_meadow_elites
    (ai_place "meadow_cov_elites")
    (f_ai_place_vehicle_deathless_no_emp "intro_falcon_01/barn")
    (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "ps_air_meadow/falcon_circle02b")
    (sleep 5)
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 10)
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_meadowx)
)

(script command_script void cs_falcon01_meadowx
    (cs_enable_pathfinding_failsafe true)
    (cs_enable_targeting true)
    (cs_enable_looking true)
    (cs_face true "ps_air_meadow/meadow_face02")
    (cs_fly_by "ps_air_meadow/falcon_circle02a")
    (cs_face false "ps_air_meadow/meadow_face02")
    (sleep_forever)
    (sleep_until 
        (begin
            (cs_fly_by "ps_air_meadow/falcon_circle02a")
            (cs_fly_by "ps_air_meadow/falcon_circle02b")
            (cs_fly_by "ps_air_meadow/falcon_circle02c")
            false
        )
    )
)

(script static void test_meadow_evac
    (ai_place "meadow_falcon02")
    (object_set_scale (ai_vehicle_get_from_squad "meadow_falcon02" 0) 0.01 0)
    (sleep 1)
    (object_set_scale (ai_vehicle_get_from_squad "meadow_falcon02" 0) 1 (* 30 10))
    (ai_place "spartan_kat/kat_barn")
    (ai_place "spartan_emile/emile_barn")
    (set obj_kat (ai_get_unit "spartan_kat/kat_barn"))
    (set obj_emile (ai_get_unit "spartan_emile/emile_barn"))
    (ai_cannot_die "group_spartans" true)
    (ai_set_objective "all_humans" "obj_meadow_hum")
    (ai_teleport "group_kat" "ps_teleports/meadow_evac")
    (ai_teleport "group_emile" "ps_teleports/meadow_evac")
)

(script static void test_3kiva_hog
    (object_teleport_to_ai_point "v_3kiva_pickup_init" "ps_pickup_3kiva02/3kiva02")
    (ai_place "spartan_carter/3kiva")
    (ai_cannot_die "spartan_carter" true)
    (set obj_carter (ai_get_unit "spartan_carter"))
    (ai_vehicle_enter_immediate "group_carter" "v_3kiva_pickup_init" 35)
    (vehicle_load_magic "v_3kiva_pickup_init" 32 player0)
    (wake 3kiva_driver)
    (set 3kiva01_done true)
    (set 3kiva02_done true)
)

(script static void test_3kiva_jorge
    (ai_place "spartan_jorge/3kiva")
    (ai_vehicle_enter_immediate "group_jorge" "v_3kiva_pickup_init" 34)
)

(script static void test_3kiva_loadup
    (ai_vehicle_enter_immediate "group_jorge" "v_3kiva_pickup_init" 34)
)

(script static void test_barn_combat_falcon
    (f_ai_place_vehicle_deathless "intro_falcon_01/barn")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01" 0))
    (object_teleport_to_ai_point (ai_vehicle_get_from_squad "intro_falcon_01" 0) "ps_air_meadow/falcon_barn_entry")
    (sleep 5)
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 10)
    (ai_set_objective "intro_falcon_01" "obj_airsupport_hum")
    (cs_run_command_script (f_ai_get_vehicle_driver "intro_falcon_01") cs_falcon01_barn_combat)
)

(script static void test_3kiva_fork03
    (ai_place "3kiva_fork")
    (object_set_scale (ai_vehicle_get_from_squad "3kiva_fork" 0) 0.01 1)
    (cs_run_command_script (f_ai_get_vehicle_driver "3kiva_fork") cs_kiva_test_fork)
)

(script command_script void cs_kiva_test_fork
    (f_load_fork (ai_vehicle_get ai_current_actor) "right" "3kiva_fork_squad01" none none none)
    (cs_enable_pathfinding_failsafe true)
    (object_set_scale (ai_vehicle_get ai_current_actor) 0.01 1)
    (sleep 1)
    (object_set_scale (ai_vehicle_get ai_current_actor) 1 (* 30 10))
    (cs_fly_by "ps_air_3kiva_fork/3kiva_drop01a" 5)
    (cs_run_command_script ai_current_actor cs_kiva_fork_02)
)

(script static void test_evac
    (ai_place "intro_falcon_01/3kiva")
    (object_cannot_take_damage (ai_vehicle_get_from_squad "intro_falcon_01/3kiva" 0))
    (sleep 5)
    (object_set_velocity (ai_vehicle_get_from_squad "intro_falcon_01" 0) 0 0 10)
    (ai_place "spartan_carter/3kiva")
    (set obj_carter (ai_get_unit "spartan_carter/3kiva"))
    (ai_place "spartan_jorge/3kiva")
    (set obj_jorge (ai_get_unit "spartan_jorge/3kiva"))
    (wake 3kiva_location)
    (set g_3kiva_obj_control 3)
    (set 3kiva_done true)
    (if (volume_test_players "vol_3kiva_2bsp")
        (begin
            (ai_teleport "group_carter" "ps_teleports/3kiva_evac2_carter")
            (ai_teleport "group_jorge" "ps_teleports/3kiva_evac2_carter")
            (ai_set_objective "group_spartans" "obj_3kiva02_spartans")
            (object_create "cr_3kiva_hogsite02")
            (ai_place "3kiva_troopers_bsp02")
            (set 3kiva_troopers_bsp 2)
        )
        (if (volume_test_players "vol_3kiva_3bsp")
            (begin
                (ai_teleport "group_carter" "ps_teleports/3kiva_evac3_carter")
                (ai_teleport "group_jorge" "ps_teleports/3kiva_evac3_carter")
                (ai_set_objective "group_spartans" "obj_3kiva03_spartans")
                (object_create "cr_3kiva_hogsite03")
                (ai_place "3kiva_troopers_bsp03")
                (set 3kiva_troopers_bsp 3)
            )
        )
    )
    (sleep 30)
    (wake 3kiva_falcon_ecav_start)
)

(script static void test_troopers
    (ai_place "spartan_carter/3kiva")
    (ai_place "spartan_jorge/3kiva")
    (if (volume_test_players "vol_3kiva_2bsp")
        (begin
            (set 3kiva_troopers_bsp 2)
            (wake 3kiva_troopers_bsp2)
            (ai_teleport "group_carter" "ps_teleports/3kiva_evac2_carter")
            (ai_teleport "group_jorge" "ps_teleports/3kiva_evac2_carter")
        )
        (if (volume_test_players "vol_3kiva_3bsp")
            (begin
                (set 3kiva_troopers_bsp 3)
                (wake 3kiva_troopers_bsp3)
                (ai_teleport "group_carter" "ps_teleports/3kiva_evac3_carter")
                (ai_teleport "group_jorge" "ps_teleports/3kiva_evac3_carter")
            )
        )
    )
    (set 3kiva_troopers_spoted true)
    (set 3kiva_troopers_found true)
    (wake md_3kiva_troopers_spoted)
    (wake obj_start)
    (wake 3kiva_defend_blip)
    (wake 3kiva_falcon_ecav_start)
    (sleep_until (or (= (current_zone_set_fully_active) 6) (>= g_insertion_index 4)) 1)
    (if (<= g_insertion_index 4)
        (wake outpost_ext_start)
    )
)

(script static void test_evac_troopers
    (if (volume_test_players "vol_3kiva_2bsp")
        (begin
            (ai_place "3kiva_troopers_bsp02")
            (set 3kiva_troopers_bsp 2)
        )
        (if (volume_test_players "vol_3kiva_3bsp")
            (begin
                (ai_place "3kiva_troopers_bsp03")
                (set 3kiva_troopers_bsp 3)
            )
        )
    )
    (ai_place "3kiva_falcon02")
)

(script static void test_falcon_evac
    (switch_zone_set "zoneset_3kiva")
    (sleep_until (= (current_zone_set_fully_active) 5) 1)
    (object_teleport_to_ai_point player0 "ps_teleports/3kiva_evac3_carter")
    (sleep 1)
    (test_evac)
)

(script static void test_forklift_destroy
    (if (any_players_in_vehicle)
        (begin
            (unit_exit_vehicle player0)
            (unit_exit_vehicle player1)
            (unit_exit_vehicle player2)
            (unit_exit_vehicle player3)
            (sleep_until (not (any_players_in_vehicle)) 1)
        )
    )
    (set game_speed 0)
    (object_destroy "v_outpost_ext_forklift")
)

(script static void test_outpost_interior_hall01
    (ai_place "outpost_int_elites01")
    (ai_place "outpost_int_cov01")
    (ai_place "outpost_int_cov02")
    (cs_run_command_script "outpost_int_cov01" cs_interior_cov_hall01)
    (cs_run_command_script "outpost_int_cov02" cs_interior_cov_hall01)
    (cs_run_command_script (object_get_ai obj_jorge) abort_cs)
    (sleep_until (volume_test_players "vol_outpost_int_back01") 5)
    (ai_place "outpost_int_jacks02")
    (sleep_until (volume_test_players "vol_outpost_int_back02") 5)
    (ai_place "outpost_int_cov03")
    (sleep_until (volume_test_players "vol_outpost_int_back_hall01") 5)
    (game_save)
    (ai_bring_forward obj_jorge 2)
    (wake md_outpost_flush)
    (sleep 100)
    (object_create "outpost_flare")
    (sleep_until (volume_test_players "vol_outpost_int_rear02") 1)
    (ai_place "outpost_int_elites02a")
    (ai_place "outpost_final_grunts01")
)

(script static void test_outpost_interior_server
    (ai_place "outpost_final_grunts01")
    (ai_place "outpost_int_elite_leader")
    (wake outpost_servers)
    (ai_set_task_condition "obj_outpost_int_cov/gate_back" true)
    (sleep 20)
)

(script static void test_lockup_elite
    (switch_zone_set "zoneset_outpost_interior")
    (sleep_until (= (current_zone_set_fully_active) 9) 1)
    (object_create "outpost_flare")
    (ai_place "outpost_jorge")
    (set obj_jorge (ai_get_unit "outpost_jorge/jorge"))
    (ai_disregard (ai_actors "outpost_jorge") true)
    (ai_set_task_condition "obj_outpost_int_cov/gate_back" true)
    (ai_set_task_condition "obj_outpost_int_hum/gate_jorge" true)
    (ai_set_task_condition "obj_outpost_int_hum/fight" true)
    (object_teleport (player0) "fl_tele_lockup_elite")
    (object_teleport obj_jorge "fl_tele_lockup_elite")
    (sleep_until (volume_test_players "vol_outpost_int_rear02") 1)
    (ai_place "outpost_final_grunts01")
    (sleep_forever)
    (ai_place "outpost_int_elites02a")
)

(script static void test_glowstick
    (object_create "cr_outpost_glowstick")
    (object_set_velocity "cr_outpost_glowstick" 4.5)
)

(script static void test_glowstick02
    (print "replace this bitch")
    (object_create "cr_outpost_glowstick02")
    (object_set_velocity "cr_outpost_glowstick02" 7.5)
)

(script static void test_3kiva_objects
    (object_destroy_folder "v_3kiva")
    (object_destroy_folder "c_3kiva")
    (object_destroy_folder "cr_3kiva")
    (object_destroy_folder "cr_3kiva01")
    (object_destroy_folder "cr_3kiva02")
    (object_destroy_folder "cr_3kiva03")
    (object_destroy_folder "sc_windmills02")
    (object_destroy_folder "sc_windmills01")
    (object_destroy_folder "sc_3kiva")
    (object_destroy_folder "sc_hud")
    (object_destroy_folder "dm_3kiva")
)

(script static void 010la_outpost_050_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "falcon1new_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "falcon2new_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "jorge_backpack_1" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "junrifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "kat_1" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_light_marker_falcon1new_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "fx_light_marker_falcon2new_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "falcon1new_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "falcon1new_falcon_side_gun_left2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "falcon1new_falcon_side_gun_right3_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 17 "falcon2new_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 18 "falcon2new_falcon_side_gun_left2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 19 "falcon2new_falcon_side_gun_right3_1" true)
    (object_hide (cinematic_scripting_get_object 0 20) true)
    (object_hide (cinematic_scripting_get_object 0 21) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 22 "carter_dmr_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 23 "kat_pistol_1" true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (cinematic_scripting_start_music 0 0 0)
    (cinematic_scripting_start_music 0 0 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "engine_rpm" 1 0)
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (cinematic_print "custom script play")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "engine_exhaust" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "engine_exhaust" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "driver_seat_power" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "driver_seat_power" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "thrust" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "engine_rpm" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "blur" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 4) "thrust" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 5) "blur" 1 0)
    (sleep 75)
    (cinematic_scripting_start_dialogue 0 0 0 (cinematic_scripting_get_object 0 0))
    (sleep 74)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010la_outpost_050_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 2 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 3 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "falcon1new_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "falcon2new_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "jorge_backpack_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "jorgeturret_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 "junrifle_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "playerrifle_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "fx_light_marker_falcon1new_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 13 "fx_light_marker_falcon2new_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 14 "falcon1new_falcon_chin_gun1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 15 "falcon1new_falcon_side_gun_left2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 16 "falcon1new_falcon_side_gun_right3_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 17 "falcon2new_falcon_chin_gun1_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 18 "falcon2new_falcon_side_gun_left2_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 19 "falcon2new_falcon_side_gun_right3_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 20 "emile_shotgun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 21 "tac_pad_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 22 "carter_dmr_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 23 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 24 "logo_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 24) "camera" 1 0)
    (cinematic_scripting_start_screen_effect 0 1 0)
    (cinematic_print "custom script play")
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 24) "location" 0.1 0)
    (sleep 101)
    (cinematic_scripting_stop_screen_effect 0 1 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010la_outpost_050_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "emile_3" true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "falcon1new_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "falcon2new_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "jorge_backpack_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 8 "jorgeturret_3" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 10 "kat_3" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 12 "fx_light_marker_falcon1new_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 13 "fx_light_marker_falcon2new_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 14 "falcon1new_falcon_chin_gun1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 15 "falcon1new_falcon_side_gun_left2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 16 "falcon1new_falcon_side_gun_right3_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 17 "falcon2new_falcon_chin_gun1_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 18 "falcon2new_falcon_side_gun_left2_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 19 "falcon2new_falcon_side_gun_right3_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 20 "emile_shotgun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 21 "tac_pad_3" true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 23 "kat_pistol_3" true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (cinematic_print "custom script play")
    (sleep 109)
    (cinematic_scripting_start_dialogue 0 2 0 (cinematic_scripting_get_object 0 10))
    (sleep 49)
    (cinematic_scripting_start_dialogue 0 2 1 (cinematic_scripting_get_object 0 6))
    (sleep 92)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010la_outpost_050_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 3 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 3)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 0 "carter_4" true)
    (object_hide (cinematic_scripting_get_object 0 1) true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 4 "falcon1new_4" true)
    (object_hide (cinematic_scripting_get_object 0 5) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 6 "jorge_4" true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (object_hide (cinematic_scripting_get_object 0 10) true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 12 "fx_light_marker_falcon1new_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 13 "fx_light_marker_falcon2new_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 14 "falcon1new_falcon_chin_gun1_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 15 "falcon1new_falcon_side_gun_left2_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 3 16 "falcon1new_falcon_side_gun_right3_4" true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (object_hide (cinematic_scripting_get_object 0 18) true)
    (object_hide (cinematic_scripting_get_object 0 19) true)
    (object_hide (cinematic_scripting_get_object 0 20) true)
    (object_hide (cinematic_scripting_get_object 0 21) true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (object_hide (cinematic_scripting_get_object 0 23) true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (cinematic_print "custom script play")
    (sleep 3)
    (cinematic_scripting_start_dialogue 0 3 0 (cinematic_scripting_get_object 0 0))
    (sleep 78)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010la_outpost_050_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 4 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 4)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 1 "emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 2 "jun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 3 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 4 "falcon1new_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 5 "falcon2new_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 6 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 7 "jorge_backpack_5" true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 9 "junrifle_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 10 "kat_5" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 12 "fx_light_marker_falcon1new_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 13 "fx_light_marker_falcon2new_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 14 "falcon1new_falcon_chin_gun1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 15 "falcon1new_falcon_side_gun_left2_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 16 "falcon1new_falcon_side_gun_right3_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 17 "falcon2new_falcon_chin_gun1_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 18 "falcon2new_falcon_side_gun_left2_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 19 "falcon2new_falcon_side_gun_right3_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 20 "emile_shotgun_5" true)
    (object_hide (cinematic_scripting_get_object 0 21) true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 4 23 "kat_pistol_5" true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1.5 0)
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (cinematic_print "custom script play")
    (sleep 107)
    (cinematic_scripting_start_dialogue 0 4 0 (cinematic_scripting_get_object 0 10))
    (sleep 65)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010la_outpost_050_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 5 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 5)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 1 "emile_6" true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 4 "falcon1new_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 5 "falcon2new_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 6 "jorge_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 7 "jorge_backpack_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 8 "jorgeturret_6" true)
    (object_hide (cinematic_scripting_get_object 0 9) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 10 "kat_6" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 12 "fx_light_marker_falcon1new_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 13 "fx_light_marker_falcon2new_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 14 "falcon1new_falcon_chin_gun1_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 15 "falcon1new_falcon_side_gun_left2_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 16 "falcon1new_falcon_side_gun_right3_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 17 "falcon2new_falcon_chin_gun1_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 18 "falcon2new_falcon_side_gun_left2_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 19 "falcon2new_falcon_side_gun_right3_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 20 "emile_shotgun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 21 "tac_pad_6" true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 5 23 "kat_pistol_6" true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 1 0)
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (cinematic_print "custom script play")
    (sleep 1)
    (cinematic_scripting_start_dialogue 0 5 0 (cinematic_scripting_get_object 0 0))
    (sleep 39)
    (cinematic_scripting_start_dialogue 0 5 1 (cinematic_scripting_get_object 0 10))
    (sleep 113)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010la_outpost_050_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 6 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 6)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 0 "carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 1 "emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 2 "jun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 3 "player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 4 "falcon1new_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 5 "falcon2new_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 6 "jorge_7" true)
    (object_hide (cinematic_scripting_get_object 0 7) true)
    (object_hide (cinematic_scripting_get_object 0 8) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 9 "junrifle_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 10 "kat_7" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 12 "fx_light_marker_falcon1new_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 13 "fx_light_marker_falcon2new_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 14 "falcon1new_falcon_chin_gun1_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 15 "falcon1new_falcon_side_gun_left2_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 16 "falcon1new_falcon_side_gun_right3_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 17 "falcon2new_falcon_chin_gun1_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 18 "falcon2new_falcon_side_gun_left2_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 19 "falcon2new_falcon_side_gun_right3_7" true)
    (object_hide (cinematic_scripting_get_object 0 20) true)
    (object_hide (cinematic_scripting_get_object 0 21) true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 6 23 "kat_pistol_7" true)
    (object_hide (cinematic_scripting_get_object 0 24) true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (render_exposure 1.8 0)
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (cinematic_print "custom script play")
    (sleep 21)
    (cinematic_scripting_start_dialogue 0 6 0 (cinematic_scripting_get_object 0 0))
    (sleep 149)
    (cinematic_scripting_start_dialogue 0 6 1 (cinematic_scripting_get_object 0 1))
    (sleep 131)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010la_outpost_050_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (010la_outpost_050_sc_sh1)
    (010la_outpost_050_sc_sh2)
    (010la_outpost_050_sc_sh3)
    (010la_outpost_050_sc_sh4)
    (010la_outpost_050_sc_sh5)
    (010la_outpost_050_sc_sh6)
    (010la_outpost_050_sc_sh7)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 010la_outpost_055_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "010la_outpost_pt2_050")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "010la_outpost_pt2_050")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "falcon1new_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "falcon2new_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "fx_light_marker_1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "fx_light_marker_2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "falcon1new_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "falcon1new_falcon_side_gun_left2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "falcon1new_falcon_side_gun_right3_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "falcon2new_falcon_chin_gun1_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "falcon2new_falcon_side_gun_left2_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "falcon2new_falcon_side_gun_right3_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 14 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "player_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 0) "blur" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "blur" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "thrust" 0.5 0)
    (cinematic_print "custom script play")
    (begin
        (object_set_model_state_property (cinematic_object_get "falcon1new") 0 true)
        (object_set_model_state_property (cinematic_object_get "falcon2new") 0 true)
    )
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "engine_exhaust" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 0) "engine_exhaust" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "driver_seat_power" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 0) "thrust" 0.5 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 0) "engine_rpm" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 0) "driver_seat_power" 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "engine_rpm" 1 0)
    (sleep 496)
    (sleep (cinematic_tag_fade_out_from_cinematic "010la_outpost"))
    (sleep 4)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010la_outpost_055_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (010la_outpost_055_sc_sh1)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 010la_outpost_cleanup
    (cinematic_scripting_clean_up 0)
)

(script static void begin_010la_outpost_debug
    (cinematic_zone_activate_for_debugging 0)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_010la_outpost_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 0)
    (fade_in 0 0 0 0)
)

(script static void 010la_outpost_debug
    (begin_010la_outpost_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "010la_outpost"))
    (!010la_outpost_050_sc)
    (!010la_outpost_055_sc)
    (end_010la_outpost_debug)
)

(script static void begin_010la_outpost
    (cinematic_zone_activate 0)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 0))
)

(script static void end_010la_outpost
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010la_outpost
    (begin_010la_outpost)
    (sleep (cinematic_tag_fade_in_to_cinematic "010la_outpost"))
    (!010la_outpost_050_sc)
    (!010la_outpost_055_sc)
    (end_010la_outpost)
)

(script static void 010lc_bodysearch_010_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "data_module_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "jorge_gun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "marine_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 "player_fp_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "big_doors_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 "fx_dyn_light_stairs_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_dyn_light_consol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "fx_dyn_light_spot_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "fx_dyn_light_search_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "fx_dyn_light_orange_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "final_sorvad_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 17 "console_hatch_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 18 "console_screen_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 19 "blood_pool_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 20 "dummy_console_screen_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1.5 0)
    (cinematic_scripting_start_music 0 0 1)
    (object_set_permutation (cinematic_object_get "player") "head" "player_li")
    (object_set_permutation (cinematic_object_get "player") "flair_head_a" "player_will")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "console_screen") "screen" "default")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "console_screen") "default" "default")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_right_shoulder" "player_vinh")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_left_shoulder" "player_vinh")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 9) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 0 9) "primary_ammunition_ones" 0.2 0)
    (object_set_permutation (cinematic_object_get "player") "flair_chest_b" "player_will")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_chest_a" "player_will")
    (object_set_permutation (cinematic_object_get "marine") "head" "trooper_heavy")
    (cinematic_show_letterbox_immediate false)
    (object_set_permutation (cinematic_object_get "player") "flair_head_b" "player_will")
    (object_set_permutation (cinematic_object_get "player") "flair_head_c" "player_will")
    (cinematic_print "custom script play")
    (sleep 64)
    (cinematic_scripting_start_dialogue 0 0 1 (cinematic_scripting_get_object 0 0))
    (sleep 56)
    (cinematic_scripting_start_dialogue 0 0 6 (cinematic_scripting_get_object 0 7))
    (sleep 145)
    (cinematic_scripting_start_music 0 0 0)
    (sleep 15)
    (cinematic_scripting_start_dialogue 0 0 2 (cinematic_scripting_get_object 0 0))
    (sleep 123)
    (cinematic_scripting_start_dialogue 0 0 3 (cinematic_scripting_get_object 0 5))
    (sleep 121)
    (cinematic_scripting_start_dialogue 0 0 4 none)
    (sleep 38)
    (cinematic_scripting_start_dialogue 0 0 5 (cinematic_scripting_get_object 0 5))
    (sleep 86)
    (cinematic_scripting_start_dialogue 0 0 0 (cinematic_scripting_get_object 0 3))
    (sleep 40)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010lc_bodysearch_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (010lc_bodysearch_010_sc_sh1)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 010lc_bodysearch_020_sc_sh1
    (object_set_permutation (cinematic_object_get "marine") "head" "trooper_heavy")
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "data_module_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "elite01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "elite01_plasma_rifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "elite01_sword_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "elite02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "elite02_plasma_rifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "elite03_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "elite03_plasma_rifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "jorge_gun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 14 "marine_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 16 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 17 "sarah_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 18 "sorvad_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 19 "fx_console_sparks_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 20 "fx_dyn_light_consol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 21 "fx_dyn_light_stairs_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 22 "big_doors_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 23 "fx_dyn_light_player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 24 "console_hatch_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 25 "console_screen_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 26 "blood_pool_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 16) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 0) "primary_ammunition_ones" 0.2 0)
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_head_b" "default")
    (cinematic_show_letterbox_immediate true)
    (cinematic_print "custom script play")
    (object_cinematic_visibility (cinematic_object_get "elite02") false)
    (object_cinematic_visibility (cinematic_object_get "elite02") false)
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "console_screen") "screen" "default")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_head_a" "default")
    (object_set_permutation (cinematic_object_get "console_screen") "default" "default")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_right_shoulder" "default")
    (object_set_permutation (cinematic_object_get "player") "flair_left_shoulder" "default")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_chest_b" "default")
    (object_set_permutation (cinematic_object_get "player") "flair_chest_a" "default")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 16) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 1) "primary_ammunition_tens" 0.3 0)
    (object_set_permutation (cinematic_object_get "player") "head" "default")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_head_c" "default")
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (sleep 6)
    (cinematic_scripting_start_dialogue 1 0 1 (cinematic_scripting_get_object 1 17))
    (sleep 18)
    (cinematic_scripting_start_dialogue 1 0 0 (cinematic_scripting_get_object 1 10))
    (sleep 50)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010lc_bodysearch_020_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 1 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 1)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "carter_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "data_module_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "elite01_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "elite01_plasma_rifle_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "elite01_sword_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "elite02_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "elite02_plasma_rifle_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "elite03_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "elite03_plasma_rifle_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 10 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "jorge_gun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "marine_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 16 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 17 "sarah_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 18 "sorvad_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 19 "fx_console_sparks_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 20 "fx_dyn_light_consol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 21 "fx_dyn_light_stairs_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 22 "big_doors_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 23 "fx_dyn_light_player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 24 "console_hatch_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 25 "console_screen_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 26 "blood_pool_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (sleep 149)
    (cinematic_scripting_start_dialogue 1 1 1 (cinematic_scripting_get_object 1 10))
    (sleep 69)
    (cinematic_scripting_start_dialogue 1 1 0 (cinematic_scripting_get_object 1 17))
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010lc_bodysearch_020_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 2 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 2)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 1 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 2 "data_module_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 3 "elite01_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 4 "elite01_plasma_rifle_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 5 "elite01_sword_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 6 "elite02_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 7 "elite02_plasma_rifle_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 8 "elite03_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 9 "elite03_plasma_rifle_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 10 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 11 "jorge_gun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 12 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 13 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 14 "marine_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 15 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 16 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 17 "sarah_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 18 "sorvad_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 19 "fx_console_sparks_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 20 "fx_dyn_light_consol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 21 "fx_dyn_light_stairs_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 22 "big_doors_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 23 "fx_dyn_light_player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 24 "console_hatch_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 25 "console_screen_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 26 "blood_pool_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1 0)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (sleep 29)
    (cinematic_scripting_start_dialogue 1 2 0 (cinematic_scripting_get_object 1 0))
    (sleep 15)
    (cinematic_scripting_start_dialogue 1 2 1 (cinematic_scripting_get_object 1 10))
    (sleep 20)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010lc_bodysearch_020_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 3 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 3)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 1 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 2 "data_module_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 3 "elite01_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 4 "elite01_plasma_rifle_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 5 "elite01_sword_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 6 "elite02_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 7 "elite02_plasma_rifle_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 8 "elite03_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 9 "elite03_plasma_rifle_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 10 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 11 "jorge_gun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 12 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 13 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 14 "marine_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 15 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 16 "player_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 17 "sarah_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 18 "sorvad_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 19 "fx_console_sparks_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 20 "fx_dyn_light_consol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 21 "fx_dyn_light_stairs_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 22 "big_doors_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 23 "fx_dyn_light_player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 24 "console_hatch_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 25 "console_screen_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 26 "blood_pool_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 5) "blade_activate" 0 0)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (unit_set_active_camo (cinematic_unit_get "elite01") true 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (sleep 44)
    (cinematic_scripting_start_dialogue 1 3 0 (cinematic_scripting_get_object 1 17))
    (sleep 22)
    (cinematic_scripting_start_dialogue 1 3 1 (cinematic_scripting_get_object 1 10))
    (sleep 82)
    (cinematic_scripting_start_dialogue 1 3 2 (cinematic_scripting_get_object 1 17))
    (sleep 14)
    (cinematic_scripting_stop_music 1 3 0)
    (sleep 52)
    (unit_set_active_camo (cinematic_unit_get "elite01") false 1)
    (cinematic_print "custom script play")
    (sleep 23)
    (cinematic_scripting_start_music 1 3 1)
    (sleep 7)
    (cinematic_scripting_start_effect 1 3 0 (cinematic_object_get "fx_console_sparks"))
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 1 5) "blade_activate" 1 16)
    (sleep 38)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010lc_bodysearch_020_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 4 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 4)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 1 "carter_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 2 "data_module_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 3 "elite01_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 4 "elite01_plasma_rifle_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 5 "elite01_sword_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 6 "elite02_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 7 "elite02_plasma_rifle_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 8 "elite03_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 9 "elite03_plasma_rifle_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 10 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 11 "jorge_gun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 12 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 13 "kat_pistol_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 14 "marine_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 15 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 16 "player_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 17 "sarah_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 18 "sorvad_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 19 "fx_console_sparks_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 20 "fx_dyn_light_consol_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 21 "fx_dyn_light_stairs_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 22 "big_doors_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 23 "fx_dyn_light_player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 24 "console_hatch_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 25 "console_screen_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 26 "blood_pool_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1 0)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (unit_set_active_camo (cinematic_unit_get "elite02") true 1)
    (cinematic_print "custom script play")
    (unit_set_active_camo (cinematic_unit_get "elite03") true 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (cinematic_print "custom script play")
    (sleep 20)
    (cinematic_print "custom script play")
    (unit_set_active_camo (cinematic_unit_get "elite02") false 0.25)
    (sleep 9)
    (cinematic_scripting_start_dialogue 1 4 0 none)
    (sleep 5)
    (cinematic_print "custom script play")
    (unit_set_active_camo (cinematic_unit_get "elite03") false 0.25)
    (sleep 14)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010lc_bodysearch_020_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 5 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 5)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 1 "carter_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 2 "data_module_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 3 "elite01_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 4 "elite01_plasma_rifle_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 5 "elite01_sword_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 6 "elite02_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 7 "elite02_plasma_rifle_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 8 "elite03_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 9 "elite03_plasma_rifle_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 10 "jorge_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 11 "jorge_gun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 12 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 13 "kat_pistol_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 14 "marine_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 15 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 16 "player_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 17 "sarah_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 18 "sorvad_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 19 "fx_console_sparks_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 20 "fx_dyn_light_consol_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 21 "fx_dyn_light_stairs_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 22 "big_doors_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 23 "fx_dyn_light_player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 24 "console_hatch_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 25 "console_screen_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 26 "blood_pool_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 1 0)
    (object_set_permutation (cinematic_object_get "console_screen") "default" "default")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "console_screen") "screen" "default")
    (object_set_permutation (cinematic_object_get "console_screen") "screen" "destroyed")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (sleep 3)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (begin
        (object_cinematic_visibility (cinematic_object_get "elite01") false)
        (object_cannot_die (cinematic_object_get "elite01") true)
    )
    (cinematic_print "custom script play")
    (sleep 9)
    (cinematic_scripting_start_dialogue 1 5 0 (cinematic_scripting_get_object 1 0))
    (sleep 32)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") true)
    (cinematic_print "custom script play")
    (sleep 2)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") true)
    (sleep 7)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") true)
    (sleep 4)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (sleep 21)
    (cinematic_scripting_start_effect 1 5 1 (cinematic_object_get "fx_console_sparks"))
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "console_screen") "default" "destroyed")
    (cinematic_scripting_start_effect 1 5 0 (cinematic_object_get "fx_console_sparks"))
    (sleep 1)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (sleep 15)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") true)
    (sleep 7)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (cinematic_print "custom script play")
    (sleep 5)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") true)
    (sleep 17)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "player_ar_weapon") false)
    (sleep 6)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") true)
    (sleep 12)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010lc_bodysearch_020_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (010lc_bodysearch_020_sc_sh1)
    (010lc_bodysearch_020_sc_sh2)
    (010lc_bodysearch_020_sc_sh3)
    (010lc_bodysearch_020_sc_sh4)
    (010lc_bodysearch_020_sc_sh5)
    (010lc_bodysearch_020_sc_sh6)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 010lc_bodysearch_030_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 0 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 0)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 1 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 2 "elite01_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 3 "elite01_plasma_rifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 4 "elite01_sword_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 5 "elite02_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 6 "elite02_plasma_rifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 7 "elite03_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 8 "elite03_plasma_rifle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 9 "fx_console_sparks_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 10 "fx_dyn_light_consol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 11 "fx_dyn_light_stairs_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 12 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 13 "jorge_gun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 14 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 15 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 16 "marine_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 17 "player_fp_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 18 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 19 "sarah_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 20 "sorvad_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 21 "big_doors_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 22 "fx_dyn_light_door_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 23 "fx_dyn_light_spot_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 24 "fx_dyn_light_carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 25 "fx_dyn_light_tussle_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 26 "console_hatch_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 27 "console_screen_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 28 "blood_pool_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 5) "blade_right_on" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_tens" 0 0)
    (object_set_permutation (cinematic_object_get "player") "flair_head_a" "player_will")
    (object_set_permutation (cinematic_object_get "player") "flair_head_b" "player_will")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (begin
        (object_cinematic_visibility (cinematic_object_get "elite01") false)
        (object_cannot_die (cinematic_object_get "elite01") true)
    )
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "head" "player_li")
    (cinematic_print "custom script play")
    (object_cinematic_visibility (cinematic_object_get "elite02") false)
    (cinematic_print "custom script play")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 1) "primary_ammunition_tens" 0.3 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 1) "primary_ammunition_ones" 0.2 0)
    (object_set_permutation (cinematic_object_get "console_screen") "screen" "destroyed")
    (cinematic_show_letterbox_immediate false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "marine") "head" "trooper_heavy")
    (object_set_permutation (cinematic_object_get "player") "flair_right_shoulder" "player_vinh")
    (object_set_permutation (cinematic_object_get "console_screen") "default" "destroyed")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_ones" 0.7 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_ones" 0.7 0)
    (object_set_permutation (cinematic_object_get "player") "flair_left_shoulder" "player_vinh")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_chest_b" "player_will")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "player") "flair_head_c" "player_will")
    (object_set_permutation (cinematic_object_get "player") "flair_chest_a" "player_will")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (sleep 1)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_tens" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 4) "blade_activate" 1 0)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (begin
        (unit_set_active_camo (cinematic_unit_get "elite01") false 1)
        (set shadow_apply_depth_bias -1E-05)
    )
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") true)
    (cinematic_print "custom script play")
    (sleep 1)
    (cinematic_print "custom script play")
    (unit_set_active_camo (cinematic_unit_get "elite01") true 1)
    (sleep 19)
    (cinematic_print "custom script play")
    (cinematic_scripting_start_dialogue 2 0 0 (cinematic_scripting_get_object 2 0))
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (sleep 2)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 4) "blade_activate" 0 12)
    (sleep 8)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") true)
    (sleep 22)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "carter_ar_weapon") false)
    (sleep 45)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 5) "blade_right_on" 1 9)
    (sleep 141)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") true)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") false)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") true)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") false)
    (cinematic_print "custom script play")
    (sleep 13)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") true)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") false)
    (cinematic_print "custom script play")
    (sleep 7)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 5) "blade_right_on" 0 9)
    (sleep 2)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") true)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") false)
    (cinematic_print "custom script play")
    (sleep 8)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") true)
    (sleep 1)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") false)
    (sleep 13)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") true)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") false)
    (cinematic_print "custom script play")
    (sleep 9)
    (cinematic_print "custom script play")
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") true)
    (sleep 1)
    (weapon_set_primary_barrel_firing (cinematic_weapon_get "kat_pistol_weapon") false)
    (cinematic_print "custom script play")
    (sleep 266)
    (cinematic_scripting_start_dialogue 2 0 1 none)
    (sleep 73)
    (cinematic_scripting_start_dialogue 2 0 2 (cinematic_scripting_get_object 2 0))
    (sleep 244)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_ones" 0 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_tens" 0 0)
    (sleep 40)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_ones" 0.2 0)
    (object_set_cinematic_function_variable (cinematic_scripting_get_object 2 18) "primary_ammunition_tens" 0.3 0)
    (sleep 243)
    (sleep (cinematic_tag_fade_out_from_cinematic "010lc_bodysearch"))
    (sleep 14)
    (set shadow_apply_depth_bias -1E-06)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010lc_bodysearch_030_sc
    (cinematic_print "beginning scene 3")
    (cinematic_scripting_create_scene 2)
    (010lc_bodysearch_030_sc_sh1)
    (cinematic_scripting_destroy_scene 2)
)

(script static void 010lc_bodysearch_cleanup
    (cinematic_scripting_clean_up 1)
)

(script static void begin_010lc_bodysearch_debug
    (cinematic_zone_activate_for_debugging 1)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_010lc_bodysearch_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 1)
    (fade_in 0 0 0 0)
)

(script static void 010lc_bodysearch_debug
    (begin_010lc_bodysearch_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "010lc_bodysearch"))
    (begin
        (object_set_permutation (cinematic_object_get "marine") "head" "trooper_heavy")
        (object_destroy "sc_outpost_console")
        (object_destroy "sc_outpost_computer")
    )
    (!010lc_bodysearch_010_sc)
    (!010lc_bodysearch_020_sc)
    (!010lc_bodysearch_030_sc)
    (end_010lc_bodysearch_debug)
)

(script static void begin_010lc_bodysearch
    (cinematic_zone_activate 1)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 1))
)

(script static void end_010lc_bodysearch
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010lc_bodysearch
    (begin_010lc_bodysearch)
    (sleep (cinematic_tag_fade_in_to_cinematic "010lc_bodysearch"))
    (begin
        (object_set_permutation (cinematic_object_get "marine") "head" "trooper_heavy")
        (object_destroy "sc_outpost_console")
        (object_destroy "sc_outpost_computer")
    )
    (!010lc_bodysearch_010_sc)
    (!010lc_bodysearch_020_sc)
    (!010lc_bodysearch_030_sc)
    (end_010lc_bodysearch)
)

(script static void 010ld_wc_010_sc_sh1
    (set shadow_apply_depth_bias -1E-05)
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 0 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 0)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 1 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 2 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 3 "emile_shotgun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 4 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 5 "jorge_gun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 6 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 7 "kat_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 8 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 9 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 10 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 11 "snakecam_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 12 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 13 "fx_dyn_light_sara_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 14 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 15 "sara_final_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 16 "sorvad_1" true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (object_hide (cinematic_scripting_get_object 0 18) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 19 "computer_latch_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 20 "holland_console_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 21 "blood_pool_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 0 22 "dummy_holland_console_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 0.7 0)
    (cinematic_scripting_start_music 0 0 0)
    (object_set_permutation (cinematic_object_get "holland_console") "screen" "destroyed")
    (cinematic_scripting_start_music 0 0 1)
    (cinematic_scripting_start_screen_effect 0 0 0)
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "holland_console") "default" "destroyed")
    (sleep 1)
    (cinematic_print "custom script play")
    (fade_out 0 0 0 0)
    (sleep 188)
    (fade_in 0 0 0 9)
    (cinematic_print "custom script play")
    (sleep 59)
    (cinematic_scripting_start_dialogue 0 0 0 (cinematic_scripting_get_object 0 0))
    (sleep 48)
    (cinematic_scripting_start_dialogue 0 0 1 (cinematic_scripting_get_object 0 6))
    (sleep 73)
    (cinematic_scripting_stop_screen_effect 0 0 0)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_010_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 1 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 1)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 1 "carter_ar_2" true)
    (object_hide (cinematic_scripting_get_object 0 2) true)
    (object_hide (cinematic_scripting_get_object 0 3) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 4 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 5 "jorge_gun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 6 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 7 "kat_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 8 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 9 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 10 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 11 "snakecam_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 12 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 13 "fx_dyn_light_sara_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 14 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 15 "sara_final_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 16 "sorvad_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 17 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 18 "jun_sniper_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 19 "computer_latch_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 20 "holland_console_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 1 21 "blood_pool_2" true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1 0)
    (sleep 18)
    (cinematic_scripting_start_dialogue 0 1 0 (cinematic_scripting_get_object 0 6))
    (sleep 260)
    (cinematic_scripting_start_dialogue 0 1 1 (cinematic_scripting_get_object 0 0))
    (sleep 43)
    (cinematic_scripting_start_dialogue 0 1 2 (cinematic_scripting_get_object 0 6))
    (sleep 183)
    (cinematic_scripting_start_dialogue 0 1 3 (cinematic_scripting_get_object 0 6))
    (sleep 117)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_010_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 0) 2 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 0) 2)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 1 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 2 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 3 "emile_shotgun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 4 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 5 "jorge_gun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 6 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 7 "kat_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 8 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 9 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 10 "player_ar_3" true)
    (object_hide (cinematic_scripting_get_object 0 11) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 12 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 13 "fx_dyn_light_sara_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 14 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 15 "sara_final_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 16 "sorvad_3" true)
    (object_hide (cinematic_scripting_get_object 0 17) true)
    (object_hide (cinematic_scripting_get_object 0 18) true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 19 "computer_latch_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 20 "holland_console_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 0 2 21 "blood_pool_3" true)
    (object_hide (cinematic_scripting_get_object 0 22) true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1.9 0)
    (sleep 35)
    (cinematic_scripting_start_dialogue 0 2 0 (cinematic_scripting_get_object 0 0))
    (sleep 83)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010ld_wc_010_sc
    (cinematic_print "beginning scene 1")
    (cinematic_scripting_create_scene 0)
    (fade_out 0 0 0 0)
    (010ld_wc_010_sc_sh1)
    (010ld_wc_010_sc_sh2)
    (010ld_wc_010_sc_sh3)
    (set shadow_apply_depth_bias -1E-06)
    (cinematic_scripting_destroy_scene 0)
)

(script static void 010ld_wc_020_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 0 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 0)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 1 "carter_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 2 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 3 "emile_shotgun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 4 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 5 "jorge_gun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 6 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 7 "kat_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 8 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 9 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 10 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 11 "jorge_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 12 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 13 "fx_dyn_light_sara_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 14 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 15 "sara_final_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 16 "sorvad_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 17 "computer_latch_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 18 "holland_console_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 0 19 "blood_pool_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1.9 0)
    (object_set_permutation (cinematic_object_get "holland_console") "screen" "destroyed")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "holland_console") "default" "destroyed")
    (sleep 62)
    (cinematic_scripting_start_dialogue 1 0 0 none)
    (sleep 37)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 1 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 1)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 1 "carter_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 2 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 3 "emile_shotgun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 4 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 5 "jorge_gun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 6 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 7 "kat_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 8 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 9 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 10 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 11 "jorge_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 12 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 13 "fx_dyn_light_sara_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 14 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 15 "sara_final_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 16 "sorvad_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 17 "computer_latch_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 18 "holland_console_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 1 19 "blood_pool_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (sleep 24)
    (cinematic_scripting_start_dialogue 1 1 0 (cinematic_scripting_get_object 1 2))
    (sleep 34)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 2 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 2)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 1 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 2 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 3 "emile_shotgun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 4 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 5 "jorge_gun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 6 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 7 "kat_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 8 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 9 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 10 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 11 "jorge_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 12 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 13 "fx_dyn_light_sara_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 14 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 15 "sara_final_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 16 "sorvad_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 17 "computer_latch_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 18 "holland_console_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 2 19 "blood_pool_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1.9 0)
    (sleep 20)
    (cinematic_scripting_start_dialogue 1 2 0 (cinematic_scripting_get_object 1 11))
    (sleep 34)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 3 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 3)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 1 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 2 "emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 3 "emile_shotgun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 4 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 5 "jorge_gun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 6 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 7 "kat_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 8 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 9 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 10 "player_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 11 "jorge_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 12 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 13 "fx_dyn_light_sara_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 14 "fx_dyn_light_emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 15 "sara_final_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 16 "sorvad_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 17 "computer_latch_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 18 "holland_console_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 3 19 "blood_pool_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1.9 0)
    (sleep 21)
    (cinematic_scripting_start_dialogue 1 3 0 (cinematic_scripting_get_object 1 11))
    (sleep 78)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh5
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 4 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 4)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 0 "carter_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 1 "carter_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 2 "emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 3 "emile_shotgun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 4 "jorge_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 5 "jorge_gun_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 6 "kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 7 "kat_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 8 "kat_pistol_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 9 "player_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 10 "player_ar_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 11 "jorge_head_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 12 "fx_dyn_light_kat_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 13 "fx_dyn_light_sara_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 14 "fx_dyn_light_emile_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 15 "sara_final_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 16 "sorvad_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 17 "computer_latch_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 18 "holland_console_5" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 4 19 "blood_pool_5" true)
    (cinematic_lights_initialize_for_shot 4)
    (cinematic_clips_initialize_for_shot 4)
    (render_exposure 1.9 0)
    (sleep 84)
    (cinematic_scripting_start_dialogue 1 4 0 (cinematic_scripting_get_object 1 11))
    (sleep 74)
    (cinematic_scripting_start_dialogue 1 4 1 (cinematic_scripting_get_object 1 15))
    (sleep 37)
    (cinematic_scripting_start_dialogue 1 4 2 (cinematic_scripting_get_object 1 11))
    (sleep 81)
    (cinematic_scripting_start_dialogue 1 4 3 (cinematic_scripting_get_object 1 11))
    (sleep 102)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh6
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 5 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 5)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 0 "carter_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 1 "carter_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 2 "emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 3 "emile_shotgun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 4 "jorge_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 5 "jorge_gun_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 6 "kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 7 "kat_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 8 "kat_pistol_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 9 "player_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 10 "player_ar_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 11 "jorge_head_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 12 "fx_dyn_light_kat_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 13 "fx_dyn_light_sara_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 14 "fx_dyn_light_emile_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 15 "sara_final_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 16 "sorvad_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 17 "computer_latch_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 18 "holland_console_6" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 5 19 "blood_pool_6" true)
    (cinematic_lights_initialize_for_shot 5)
    (cinematic_clips_initialize_for_shot 5)
    (render_exposure 1.9 0)
    (sleep 13)
    (cinematic_scripting_start_dialogue 1 5 0 (cinematic_scripting_get_object 1 15))
    (sleep 43)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh7
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 6 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 6)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 0 "carter_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 1 "carter_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 2 "emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 3 "emile_shotgun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 4 "jorge_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 5 "jorge_gun_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 6 "kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 7 "kat_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 8 "kat_pistol_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 9 "player_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 10 "player_ar_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 11 "jorge_head_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 12 "fx_dyn_light_kat_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 13 "fx_dyn_light_sara_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 14 "fx_dyn_light_emile_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 15 "sara_final_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 16 "sorvad_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 17 "computer_latch_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 18 "holland_console_7" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 6 19 "blood_pool_7" true)
    (cinematic_lights_initialize_for_shot 6)
    (cinematic_clips_initialize_for_shot 6)
    (render_exposure 1.9 0)
    (sleep 37)
    (cinematic_scripting_start_dialogue 1 6 0 (cinematic_scripting_get_object 1 11))
    (sleep 41)
    (cinematic_scripting_start_dialogue 1 6 1 (cinematic_scripting_get_object 1 15))
    (sleep 36)
    (cinematic_scripting_start_dialogue 1 6 2 (cinematic_scripting_get_object 1 11))
    (sleep 40)
    (cinematic_scripting_start_dialogue 1 6 3 (cinematic_scripting_get_object 1 11))
    (sleep 25)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh8
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 7 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 7)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 0 "carter_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 1 "carter_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 2 "emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 3 "emile_shotgun_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 4 "jorge_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 5 "jorge_gun_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 6 "kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 7 "kat_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 8 "kat_pistol_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 9 "player_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 10 "player_ar_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 11 "jorge_head_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 12 "fx_dyn_light_kat_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 13 "fx_dyn_light_sara_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 14 "fx_dyn_light_emile_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 15 "sara_final_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 16 "sorvad_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 17 "computer_latch_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 18 "holland_console_8" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 7 19 "blood_pool_8" true)
    (cinematic_lights_initialize_for_shot 7)
    (cinematic_clips_initialize_for_shot 7)
    (render_exposure 1.9 0)
    (sleep 3)
    (cinematic_scripting_start_dialogue 1 7 0 (cinematic_scripting_get_object 1 15))
    (sleep 34)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_020_sc_sh9
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 1) 8 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 1) 8)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 0 "carter_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 1 "carter_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 2 "emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 3 "emile_shotgun_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 4 "jorge_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 5 "jorge_gun_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 6 "kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 7 "kat_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 8 "kat_pistol_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 9 "player_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 10 "player_ar_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 11 "jorge_head_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 12 "fx_dyn_light_kat_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 13 "fx_dyn_light_sara_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 14 "fx_dyn_light_emile_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 15 "sara_final_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 16 "sorvad_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 17 "computer_latch_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 18 "holland_console_9" true)
    (cinematic_scripting_create_and_animate_cinematic_object 1 8 19 "blood_pool_9" true)
    (cinematic_lights_initialize_for_shot 8)
    (cinematic_clips_initialize_for_shot 8)
    (render_exposure 1.9 0)
    (sleep 53)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010ld_wc_020_sc
    (cinematic_print "beginning scene 2")
    (cinematic_scripting_create_scene 1)
    (010ld_wc_020_sc_sh1)
    (010ld_wc_020_sc_sh2)
    (010ld_wc_020_sc_sh3)
    (010ld_wc_020_sc_sh4)
    (010ld_wc_020_sc_sh5)
    (010ld_wc_020_sc_sh6)
    (010ld_wc_020_sc_sh7)
    (010ld_wc_020_sc_sh8)
    (010ld_wc_020_sc_sh9)
    (cinematic_scripting_destroy_scene 1)
)

(script static void 010ld_wc_030_sc_sh1
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 0 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 0)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 0 "carter_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 1 "carter_ar_1" true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 3 "emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 4 "emile_shotgun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 5 "jorge_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 6 "jorge_gun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 7 "kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 8 "kat_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 9 "kat_pistol_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 10 "player_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 11 "player_ar_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 12 "jorge_head_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 13 "fx_dyn_light_kat_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 14 "fx_dyn_light_sara_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 15 "fx_dyn_light_emile_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 16 "sara_final_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 17 "sorvad_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 18 "jun_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 19 "jun_sniper_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 20 "computer_latch_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 21 "holland_console_1" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 0 22 "blood_pool_1" true)
    (cinematic_lights_initialize_for_shot 0)
    (cinematic_clips_initialize_for_shot 0)
    (render_exposure 1.9 0)
    (object_set_permutation (cinematic_object_get "holland_console") "screen" "destroyed")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "holland_console") "default" "destroyed")
    (cinematic_print "custom script play")
    (sleep 37)
    (cinematic_scripting_start_dialogue 2 0 0 (cinematic_scripting_get_object 2 3))
    (sleep 82)
    (cinematic_scripting_start_dialogue 2 0 1 (cinematic_scripting_get_object 2 12))
    (sleep 102)
    (cinematic_scripting_start_dialogue 2 0 2 (cinematic_scripting_get_object 2 12))
    (sleep 69)
    (cinematic_scripting_start_dialogue 2 0 3 (cinematic_scripting_get_object 2 3))
    (sleep 44)
    (cinematic_scripting_start_dialogue 2 0 4 (cinematic_scripting_get_object 2 0))
    (sleep 94)
    (cinematic_scripting_start_dialogue 2 0 5 (cinematic_scripting_get_object 2 0))
    (sleep 97)
    (cinematic_scripting_start_dialogue 2 0 6 (cinematic_scripting_get_object 2 12))
    (sleep 53)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_030_sc_sh2
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 1 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 1)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 0 "carter_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 1 "carter_ar_2" true)
    (object_hide (cinematic_scripting_get_object 2 2) true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 3 "emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 4 "emile_shotgun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 5 "jorge_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 6 "jorge_gun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 7 "kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 8 "kat_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 9 "kat_pistol_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 10 "player_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 11 "player_ar_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 12 "jorge_head_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 13 "fx_dyn_light_kat_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 14 "fx_dyn_light_sara_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 15 "fx_dyn_light_emile_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 16 "sara_final_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 17 "sorvad_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 18 "jun_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 19 "jun_sniper_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 20 "computer_latch_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 21 "holland_console_2" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 1 22 "blood_pool_2" true)
    (cinematic_lights_initialize_for_shot 1)
    (cinematic_clips_initialize_for_shot 1)
    (render_exposure 1.9 0)
    (sleep 170)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_030_sc_sh3
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 2 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 2)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 0 "carter_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 1 "carter_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 2 "carter_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 3 "emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 4 "emile_shotgun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 5 "jorge_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 6 "jorge_gun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 7 "kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 8 "kat_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 9 "kat_pistol_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 10 "player_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 11 "player_ar_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 12 "jorge_head_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 13 "fx_dyn_light_kat_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 14 "fx_dyn_light_sara_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 15 "fx_dyn_light_emile_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 16 "sara_final_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 17 "sorvad_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 18 "jun_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 19 "jun_sniper_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 20 "computer_latch_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 21 "holland_console_3" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 2 22 "blood_pool_3" true)
    (cinematic_lights_initialize_for_shot 2)
    (cinematic_clips_initialize_for_shot 2)
    (render_exposure 1.9 0)
    (sleep 60)
    (cinematic_scripting_start_dialogue 2 2 0 (cinematic_scripting_get_object 2 7))
    (sleep 41)
    (cinematic_scripting_start_dialogue 2 2 1 (cinematic_scripting_get_object 2 7))
    (sleep 45)
    (cinematic_scripting_start_dialogue 2 2 2 (cinematic_scripting_get_object 2 0))
    (sleep 48)
    (cinematic_scripting_start_dialogue 2 2 3 (cinematic_scripting_get_object 2 7))
    (sleep 183)
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wc_030_sc_sh4
    (camera_set_cinematic_scene (cinematic_tag_reference_get_scene 2) 3 "010lc_bodysearch_anchor")
    (cinematic_set_shot (cinematic_tag_reference_get_scene 2) 3)
    (cinematic_object_create_cinematic_anchor "010lc_bodysearch_anchor")
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 0 "carter_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 1 "carter_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 2 "carter_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 3 "emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 4 "emile_shotgun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 5 "jorge_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 6 "jorge_gun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 7 "kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 8 "kat_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 9 "kat_pistol_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 10 "player_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 11 "player_ar_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 12 "jorge_head_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 13 "fx_dyn_light_kat_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 14 "fx_dyn_light_sara_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 15 "fx_dyn_light_emile_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 16 "sara_final_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 17 "sorvad_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 18 "jun_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 19 "jun_sniper_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 20 "computer_latch_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 21 "holland_console_4" true)
    (cinematic_scripting_create_and_animate_cinematic_object 2 3 22 "blood_pool_4" true)
    (cinematic_lights_initialize_for_shot 3)
    (cinematic_clips_initialize_for_shot 3)
    (render_exposure 1 0)
    (object_set_permutation (cinematic_object_get "holland_console") "screen" "destoryed_holland")
    (cinematic_print "custom script play")
    (cinematic_print "custom script play")
    (object_set_permutation (cinematic_object_get "holland_console") "default" "destoryed_holland")
    (sleep 54)
    (cinematic_scripting_start_dialogue 2 3 1 none)
    (sleep 102)
    (cinematic_scripting_start_dialogue 2 3 2 (cinematic_scripting_get_object 2 2))
    (sleep 179)
    (cinematic_scripting_start_dialogue 2 3 3 none)
    (sleep 86)
    (cinematic_scripting_start_dialogue 2 3 4 (cinematic_scripting_get_object 2 2))
    (sleep 114)
    (cinematic_print "custom script play")
    (fade_out 0 0 0 40)
    (sleep 10)
    (cinematic_scripting_start_dialogue 2 3 0 none)
    (sleep 76)
    (sleep (cinematic_tag_fade_out_from_cinematic "010ld_wintercontingency"))
    (cinematic_lights_destroy_shot)
    (cinematic_clips_destroy)
    (render_exposure_fade_out 0)
)

(script static void !010ld_wc_030_sc
    (cinematic_print "beginning scene 3")
    (cinematic_scripting_create_scene 2)
    (010ld_wc_030_sc_sh1)
    (010ld_wc_030_sc_sh2)
    (010ld_wc_030_sc_sh3)
    (010ld_wc_030_sc_sh4)
    (cinematic_scripting_destroy_scene 2)
)

(script static void 010ld_wintercontingency_cleanup
    (cinematic_scripting_clean_up 2)
)

(script static void begin_010ld_wintercontingency_debug
    (cinematic_zone_activate_for_debugging 2)
    (sleep 2)
    (camera_control true)
    (cinematic_start)
    (set cinematic_letterbox_style 0)
    (cinematic_show_letterbox_immediate true)
    (camera_set_cinematic)
    (cinematic_set_debug_mode true)
    (cinematic_set (cinematic_tag_reference_get_cinematic 2))
)

(script static void end_010ld_wintercontingency_debug
    (cinematic_destroy)
    (cinematic_stop)
    (camera_control false)
    (render_exposure_fade_out 0)
    (cinematic_zone_deactivate 2)
    (fade_in 0 0 0 0)
)

(script static void 010ld_wintercontingency_debug
    (begin_010ld_wintercontingency_debug)
    (sleep (cinematic_tag_fade_in_to_cinematic "010ld_wintercontingency"))
    (begin
        (switch_zone_set "zoneset_end_cinematic02")
        (object_destroy "sc_outpost_console")
        (object_destroy "sc_outpost_computer")
    )
    (cinematic_outro_start)
    (!010ld_wc_010_sc)
    (!010ld_wc_020_sc)
    (!010ld_wc_030_sc)
    (end_010ld_wintercontingency_debug)
)

(script static void begin_010ld_wintercontingency
    (cinematic_zone_activate 2)
    (sleep 2)
    (camera_set_cinematic)
    (cinematic_set_debug_mode false)
    (cinematic_set (cinematic_tag_reference_get_cinematic 2))
)

(script static void end_010ld_wintercontingency
    (cinematic_destroy)
    (render_exposure_fade_out 0)
)

(script static void 010ld_wintercontingency
    (begin_010ld_wintercontingency)
    (sleep (cinematic_tag_fade_in_to_cinematic "010ld_wintercontingency"))
    (begin
        (switch_zone_set "zoneset_end_cinematic02")
        (object_destroy "sc_outpost_console")
        (object_destroy "sc_outpost_computer")
    )
    (cinematic_outro_start)
    (!010ld_wc_010_sc)
    (!010ld_wc_020_sc)
    (!010ld_wc_030_sc)
    (end_010ld_wintercontingency)
)

(script static void meadow_waypoints_to_hud_unblip_all
    (volume_test_players "tv_3kiva_start")
    (hud_unblip_all)
)

(script static void 3kiva_driver_to_branch_kill
    3kiva_done
    (branch_kill)
)

(script static void 3kiva_defend_blip_to_3kiva_unblip_defend
    3kiva_done
    (3kiva_unblip_defend)
)

(script static void 3kiva_waypoints_to_hud_unblip_all
    3kiva_done
    (hud_unblip_all)
)

(script static void outpost_hud_body_start_to_hud_unblip_all
    (volume_test_players "tv_body_search")
    (hud_unblip_all)
)

(script static void rain_3kiva_start_to_branch_kill
    3kiva_troopers_spoted
    (branch_kill)
)

(script static void rain_3kiva_defend_start_to_branch_kill
    (>= g_3kiva_obj_control 10)
    (branch_kill)
)

(script static void md_1stbowl_beacon_found_to_f_md_abort
    warthog_done
    (f_md_abort)
)

(script static void md_1stbowl_ex_residue_to_f_md_abort
    warthog_done
    (f_md_abort)
)

(script static void md_1stbowl_stand_down01_to_f_md_abort
    (= (current_zone_set) 4)
    (f_md_abort)
)

(script static void md_1stbowl_stand_down02_to_f_md_abort
    (= (current_zone_set) 4)
    (f_md_abort)
)

(script static void md_1stbowl_next_structure_to_f_md_abort
    (volume_test_players "tv_1stbowl_witnesses")
    (f_md_abort)
)

(script static void md_1stbowl_house_to_f_md_abort
    (volume_test_players "tv_1stbowl_witnesses")
    (f_md_abort)
)

(script static void md_1stbowl_tossed_to_f_md_abort_no_combat_dialog
    (volume_test_players "tv_1stbowl_witnesses")
    (f_md_abort_no_combat_dialog)
)

(script static void md_1stbowl_witnesses_to_f_md_abort
    (>= g_1stbowl_obj_control 30)
    (f_md_abort)
)

(script static void md_barn_dead_troopers_to_kill_md_barn_dead_troopers
    (volume_test_players "tv_barn01_end")
    (kill_md_barn_dead_troopers)
)

(script static void md_motion_tracker_to_f_md_abort
    (volume_test_players "tv_barn_main")
    (f_md_abort)
)

(script static void md_meadow02_to_f_md_abort
    (volume_test_players "tv_3kiva_start03")
    (f_md_abort)
)

(script static void md_3kiva_jun_evac_to_f_md_abort
    (>= g_3kiva_obj_control 10)
    (f_md_abort)
)

(script static void md_3kiva_start_prompt_to_f_md_abort
    (or (volume_test_players "tv_3kiva_start02") (>= (current_zone_set) 5))
    (f_md_abort)
)

(script static void md_3kiva_kiva01_done_to_f_md_abort
    3kiva_troopers_spoted
    (f_md_abort)
)

(script static void md_3kiva_kiva01_more_to_f_md_abort
    3kiva_troopers_spoted
    (f_md_abort)
)

(script static void md_3kiva_trooper_distress_start_to_f_md_abort
    (or (and (= 3kiva_troopers_bsp 2) (volume_test_players "vol_3kiva_2bsp")) (and (= 3kiva_troopers_bsp 3) (volume_test_players "vol_3kiva_3bsp")))
    (f_md_abort)
)

(script static void md_trooper_distress_attack_to_f_md_abort
    3kiva_troopers_spoted
    (f_md_abort)
)

(script static void md_3kiva_distress_response_to_f_md_abort
    3kiva_troopers_spoted
    (f_md_abort)
)

(script static void md_trooper_distress_attack02_to_f_md_abort
    3kiva_troopers_spoted
    (f_md_abort)
)

(script static void md_3kiva_troopers_evac_to_f_md_abort
    (<= (ai_living_count "group_3kiva_troopers") 0)
    (f_md_abort)
)

(script static void md_outpost_nightvision_to_f_md_abort
    (player_night_vision_on)
    (f_md_abort)
)

(script static void md_outpost_search_to_f_md_abort
    (volume_test_players "tv_body_search")
    (f_md_abort)
)

(script static void kat_waypoint_to_branch_kill
    (>= (current_zone_set) 5)
    (branch_kill)
)

(script static void emile_waypoint_to_branch_kill_waypoint
    (>= (current_zone_set) 5)
    (branch_kill_waypoint (object_get_ai obj_emile))
)

(script static void emile_outpost_waypoint_to_branch_kill
    (volume_test_players "vol_outpost_int_server01")
    (branch_kill)
)

(script static void ct_training_sprint_start_to_branch_kill
    (volume_test_players "vol_barn_start")
    (branch_kill)
)

(script static void ct_training_exit_start_to_f_hud_training_clear
    (not (unit_in_vehicle (unit player0)))
    (f_hud_training_clear player0)
)

(script static void ct_training_enterexit_start_to_ct_training_enterexit_done
    (or (unit_in_vehicle (unit player0)) (volume_test_players "vol_3kiva_1bsp"))
    (ct_training_enterexit_done)
)

(script static void training_health_to_f_unblip_object
    (or (>= (unit_get_health player0) 1) (volume_test_players "tv_body_search"))
    (f_unblip_object "dc_outpost_health")
)

(script static void ct_training_activate_start_to_f_unblip_object
    (>= (device_get_position "dc_outpost_end") 1)
    (f_unblip_object "dc_outpost_end")
)

(script static void ct_training_nightvision02_start_to_f_hud_training_clear
    (volume_test_players "tv_body_search")
    (f_hud_training_clear player0)
)

(script static void vig_barn_bodies_to_branch_kill_vignette
    (volume_test_players "vol_barn_courtyard")
    (branch_kill_vignette)
)

(script static void vig_1stbowl_investigate_to_branch_kill_vignette
    warthog_done
    (branch_kill_vignette)
)

(script static void vig_1stbowl_investigate02_to_branch_kill_vignette
    warthog_done
    (branch_kill_vignette)
)

; Decompilation finished in ~0.2132044s
